"use strict";this.default_r_nplltnkrh=this.default_r_nplltnkrh||{};(function(_){var window=this;
try{
_.TOh=function(g,q,l){return{__tsickle_local_0:function(m,B,k){for(var t=-1,v=B.length,w={};++t<v;){var A=B[t],n=g(m,A);k(n,A)&&q(w,l(A,m),n)}return w}}}.call(void 0,_.i7c,_.SOh,_.g7c).__tsickle_local_0;
}catch(e){_._DumpException(e)}
try{
_.BCg=(0,_.h)`<svg data-icon-name="collapseIcon" viewBox="0 0 18 18" width="18" height="18"><path fill-rule="evenodd" d="m5.115 8.5 3.443-3.442L7.5 4 3 8.5 7.5 13l1.058-1.058L5.115 8.5zm7.193 4.5V4h-1.5v9h1.5z"/></svg>`.firstElementChild;_.CCg=(0,_.h)`<svg data-icon-name="removeIcon" width="18" height="18" viewBox="0 0 48 48"><path d="M38 26H10v-4h28v4z"/></svg>`.firstElementChild;_.DCg=(0,_.h)`<svg data-icon-name="replayIcon" viewBox="0 0 18 18" width="18" height="18"><path fill-rule="evenodd" d="M9 3.75v-3L5.25 4.5 9 8.25v-3c2.482 0 4.5 2.018 4.5 4.5s-2.018 4.5-4.5 4.5a4.504 4.504 0 01-4.5-4.5H3c0 3.315 2.685 6 6 6s6-2.685 6-6-2.685-6-6-6z"/></svg>`.firstElementChild;
}catch(e){_._DumpException(e)}
try{
var Zco={$Xgafv:"$.xgafv",access_token:"access_token",aiDevToolsSettingId:"aiDevToolsSettingId",alt:"alt",behaviorSettingId:"behaviorSettingId",callback:"callback",chatHistorySettingId:"chatHistorySettingId",codeRepositoryIndexId:"codeRepositoryIndexId",codeToolsSettingId:"codeToolsSettingId",creatorFilter:"creatorFilter",dataControlSettingId:"dataControlSettingId",dataSharingWithGoogleSettingId:"dataSharingWithGoogleSettingId",extraLocationTypes:"extraLocationTypes",fields:"fields",filter:"filter",
force:"force",geminiCodeAssistSettingId:"geminiCodeAssistSettingId",geminiGcpEnablementSettingId:"geminiGcpEnablementSettingId",geminiInBigqueryO11ySettingId:"geminiInBigqueryO11ySettingId",geminiInLookerO11ySettingId:"geminiInLookerO11ySettingId",includeUnrevealedLocations:"includeUnrevealedLocations",key:"key",loggingSettingId:"loggingSettingId",oauth_token:"oauth_token",optionsRequestedPolicyVersion:"options.requestedPolicyVersion",orderBy:"orderBy",pageSize:"pageSize",pageToken:"pageToken",prettyPrint:"prettyPrint",
product:"product",quotaUser:"quotaUser",releaseChannelSettingId:"releaseChannelSettingId",repositoryGroupId:"repositoryGroupId",requestId:"requestId",returnPartialSuccess:"returnPartialSuccess",securitySettingId:"securitySettingId",settingBindingId:"settingBindingId",settingType:"settingType",topicId:"topicId",updateMask:"updateMask",uploadType:"uploadType",upload_protocol:"upload_protocol"},$co=class{constructor(a,b,c=null){this.gapiVersion=a;this.$apiClient=new _.iv(b,c)}queryEffectiveSetting(a,
b={},c={}){_.gv(a,RegExp("^projects/[^/]+$"));return _.hv(this.$apiClient,{body:null,httpMethod:"GET",methodId:"cloudaicompanion.projects.queryEffectiveSetting",path:`/${this.gapiVersion}/${a}:queryEffectiveSetting`,queryParams:_.Ej(b,Zco,c)})}queryEffectiveSettingBindings(a,b={},c={}){_.gv(a,RegExp("^projects/[^/]+$"));return _.hv(this.$apiClient,{body:null,httpMethod:"GET",methodId:"cloudaicompanion.projects.queryEffectiveSettingBindings",path:`/${this.gapiVersion}/${a}:queryEffectiveSettingBindings`,
queryParams:_.Ej(b,Zco,c)})}selfAssignLicense(a,b,c={},d={}){_.gv(a,RegExp("^projects/[^/]+$"));return _.hv(this.$apiClient,{body:b,httpMethod:"POST",methodId:"cloudaicompanion.projects.selfAssignLicense",path:`/${this.gapiVersion}/${a}:selfAssignLicense`,queryParams:_.Ej(c,Zco,d)})}};var ado=class{constructor(a){this.v1ApiClient=a.create({host:_.ji("pantheon_cloudaicompanion_api_host"),version:"v1"}).init($co)}checkEntitlementStatus(a,b){var c=this.v1ApiClient;a=`projects/${a}`;b={experienceContext:{experience:b}};_.gv(a,RegExp("^projects/[^/]+$"));return _.hv(c.$apiClient,{body:b,httpMethod:"POST",methodId:"cloudaicompanion.projects.checkStatus",path:`/${c.gapiVersion}/${a}:checkStatus`,queryParams:_.Ej({},Zco,{})})}};ado.\u0275fac=function(a){return new (a||ado)(_.Od(_.Mr))};
ado.\u0275prov=_.wd({token:ado,factory:ado.\u0275fac,providedIn:"root"});var ddo;_.bdo=["cloudaicompanion.instances.generateCode"];_.cdo=["cloudaicompanion.instances.completeTask"];ddo=[..._.bdo,..._.cdo,"serviceusage.services.enable","cloudaicompanion.entitlements.get","serviceusage.services.list","serviceusage.services.get"];var edo;edo=function(a,b){return a.serviceUsageService.isServiceEnabled(b,"cloudaicompanion.googleapis.com").pipe(_.wf(c=>{_.uH(`Error checking service enablement ${"cloudaicompanion.googleapis.com"} for projectId ${b}. Defaulting to false.`,c);return _.t(!1)}))};_.fdo=function(a,b=_.fr(a.projectParamService)){return a.serviceUsageService.isServiceEnabled(b,"geminicloudassist.googleapis.com")};
_.gdo=function(a,b,c){const d=new _.Pj(c,0);return a.permissionsService.preFetchPermissions(ddo,[d]).pipe(_.w(()=>b.every(e=>a.permissionsService.can(e,d))))};
_.q8=class{constructor(){this.serviceUsageService=_.k(_.yD);this.projectParamService=_.k(_.gr);this.duetService=_.k(_.iE);this.permissionsService=_.k(_.sv);this.duetAiAdminApiService=_.k(ado);this.stateService=_.k(_.Ao);this.gcaEnablementService=_.k(_.QX);this.entitlementCache=_.wo(this.stateService,"NON_SHAREABLE_CACHE_ID",!0);this.apiJustEnabled=new _.Rh(!1)}isDuetApiEnabled(a=_.fr(this.projectParamService)){return _.Ge([edo(this,a),this.apiJustEnabled]).pipe(_.w(([b,c])=>b||c))}userHasPermission(a=
_.fr(this.projectParamService)){return _.gdo(this,_.bdo,a)}userHasServiceUsageListPermission(a=_.fr(this.projectParamService)){return _.gdo(this,["serviceusage.services.list"],a)}userHasServiceUsageGetPermission(a=_.fr(this.projectParamService)){return _.gdo(this,["serviceusage.services.get"],a)}userHasEnableApiPermission(a=_.fr(this.projectParamService)){return _.gdo(this,["serviceusage.services.enable"],a)}shouldShowDuetChatDependentElements(){var a=_.fr(this.projectParamService);return _.Ge([this.isDuetApiEnabled(a),
this.duetService.isCurrentEnvironmentSupportedObs,_.gdo(this,_.cdo,a)]).pipe(_.w(b=>b.every(Boolean)))}};_.q8.\u0275fac=function(a){return new (a||_.q8)};_.q8.\u0275prov=_.wd({token:_.q8,factory:_.q8.\u0275fac,providedIn:"root"});
}catch(e){_._DumpException(e)}
try{
var F5o={entity:"DATABASES_GRAPHQL",entityService:"DatabasesEntityService"};var G5o={IN_cloud_databases_contextstore_api_data_plane_ContextSet:{auxiliaryParameters:"Map",modelParameters:"JsonObject"},IN_google_cloud_geminidataanalytics_v1main_ContextStoreReference:{projectNumber:"Long"},IN_google_cloud_geminidataanalytics_v1main_Credentials:{kind:"Oneof",oauth:".IN_google_cloud_geminidataanalytics_v1main_OAuthCredentials"},IN_google_cloud_geminidataanalytics_v1main_OAuthCredentials:{kind:"Oneof"},IN_google_cloud_geminidataanalytics_v1main_DatasourceReferences:{references:"Oneof",
bq:".IN_google_cloud_geminidataanalytics_v1main_BigQueryTableReferences",studio:".IN_google_cloud_geminidataanalytics_v1main_StudioDatasourceReferences",looker:".IN_google_cloud_geminidataanalytics_v1main_LookerExploreReferences",alloydbPostgresql:".IN_google_cloud_geminidataanalytics_v1main_AlloydbPostgresqlTableReferences",spanner:".IN_google_cloud_geminidataanalytics_v1main_SpannerTableReferences",cloudSql:".IN_google_cloud_geminidataanalytics_v1main_CloudSqlTableReferences",alloydb:".IN_google_cloud_geminidataanalytics_v1main_AlloyDbReference",
spannerReference:".IN_google_cloud_geminidataanalytics_v1main_SpannerReference",cloudSqlReference:".IN_google_cloud_geminidataanalytics_v1main_CloudSqlReference",lookerDashboard:".IN_google_cloud_geminidataanalytics_v1main_LookerDashboardReferences"},IN_google_cloud_geminidataanalytics_v1main_BigQueryTableReferences:{tableReferences:{__type:".IN_google_cloud_geminidataanalytics_v1main_BigQueryTableReference",__isList:!0}},IN_google_cloud_geminidataanalytics_v1main_BigQueryTableReference:{schema:".IN_google_cloud_geminidataanalytics_v1main_Schema"},
IN_google_cloud_geminidataanalytics_v1main_StudioDatasourceReferences:{studioReferences:{__type:".IN_google_cloud_geminidataanalytics_v1main_StudioDatasourceReference",__isList:!0}},IN_google_cloud_geminidataanalytics_v1main_StudioDatasourceReference:{schema:".IN_google_cloud_geminidataanalytics_v1main_Schema"},IN_google_cloud_geminidataanalytics_v1main_AlloyDbReference:{databaseReference:".IN_google_cloud_geminidataanalytics_v1main_AlloyDbDatabaseReference"},IN_google_cloud_geminidataanalytics_v1main_DatabaseTableReference:{schema:".IN_google_cloud_geminidataanalytics_v1main_Schema"},
IN_google_cloud_geminidataanalytics_v1main_AlloyDbDatabaseReference:{databaseTableReferences:{__type:".IN_google_cloud_geminidataanalytics_v1main_DatabaseTableReference",__isList:!0}},IN_google_cloud_geminidataanalytics_v1main_AlloydbPostgresqlTableReferences:{tableReferences:{__type:".IN_google_cloud_geminidataanalytics_v1main_AlloydbPostgresqlTableReference",__isList:!0},credentials:".IN_google_cloud_geminidataanalytics_v1main_Credentials",contextStoreReference:".IN_google_cloud_geminidataanalytics_v1main_ContextStoreReference"},
IN_google_cloud_geminidataanalytics_v1main_AlloydbPostgresqlTableReference:{schema:".IN_google_cloud_geminidataanalytics_v1main_Schema"},IN_google_cloud_geminidataanalytics_v1main_SpannerReference:{databaseReference:".IN_google_cloud_geminidataanalytics_v1main_SpannerDatabaseReference"},IN_google_cloud_geminidataanalytics_v1main_SpannerDatabaseReference:{databaseTableReferences:{__type:".IN_google_cloud_geminidataanalytics_v1main_DatabaseTableReference",__isList:!0}},IN_google_cloud_geminidataanalytics_v1main_SpannerTableReferences:{tableReferences:{__type:".IN_google_cloud_geminidataanalytics_v1main_SpannerTableReference",
__isList:!0},credentials:".IN_google_cloud_geminidataanalytics_v1main_Credentials",contextStoreReference:".IN_google_cloud_geminidataanalytics_v1main_ContextStoreReference"},IN_google_cloud_geminidataanalytics_v1main_SpannerTableReference:{schema:".IN_google_cloud_geminidataanalytics_v1main_Schema"},IN_google_cloud_geminidataanalytics_v1main_CloudSqlReference:{databaseReference:".IN_google_cloud_geminidataanalytics_v1main_CloudSqlDatabaseReference"},IN_google_cloud_geminidataanalytics_v1main_CloudSqlDatabaseReference:{databaseTableReferences:{__type:".IN_google_cloud_geminidataanalytics_v1main_DatabaseTableReference",
__isList:!0}},IN_google_cloud_geminidataanalytics_v1main_CloudSqlTableReferences:{tableReferences:{__type:".IN_google_cloud_geminidataanalytics_v1main_CloudSqlTableReference",__isList:!0}},IN_google_cloud_geminidataanalytics_v1main_CloudSqlTableReference:{schema:".IN_google_cloud_geminidataanalytics_v1main_Schema"},IN_google_cloud_geminidataanalytics_v1main_LookerExploreReferences:{exploreReferences:{__type:".IN_google_cloud_geminidataanalytics_v1main_LookerExploreReference",__isList:!0},credentials:".IN_google_cloud_geminidataanalytics_v1main_Credentials"},
IN_google_cloud_geminidataanalytics_v1main_LookerDashboardReferences:{instance:"Oneof",credentials:".IN_google_cloud_geminidataanalytics_v1main_Credentials"},IN_google_cloud_geminidataanalytics_v1main_LookerExploreReference:{instance:"Oneof",schema:".IN_google_cloud_geminidataanalytics_v1main_Schema"},IN_google_cloud_geminidataanalytics_v1main_Schema:{fields:{__type:".IN_google_cloud_geminidataanalytics_v1main_Field",__isList:!0}},IN_google_cloud_geminidataanalytics_v1main_Field:{subfields:{__type:".IN_google_cloud_geminidataanalytics_v1main_Field",
__isList:!0}},IN_google_cloud_cloudaicompanion_anarres_v1main_DataModel:{datasets:{__type:".IN_google_cloud_cloudaicompanion_anarres_v1main_Dataset",__isList:!0}},IN_google_cloud_cloudaicompanion_anarres_v1main_Dataset:{dataset:"Oneof",database:".IN_google_cloud_cloudaicompanion_anarres_v1main_Database"},IN_google_cloud_cloudaicompanion_anarres_v1main_Database:{tables:{__type:".IN_google_cloud_cloudaicompanion_anarres_v1main_Table",__isList:!0}},IN_google_cloud_cloudaicompanion_anarres_v1main_Table:{fieldMapping:"Map",
schema:".IN_google_cloud_cloudaicompanion_anarres_v1main_TableSchema",byteCount:"Long",lastModifiedTimeMs:"UnsignedLong"},IN_google_cloud_cloudaicompanion_anarres_v1main_TableSchema:{columns:{__type:".IN_google_cloud_cloudaicompanion_anarres_v1main_ColumnSchema",__isList:!0}},IN_google_cloud_cloudaicompanion_anarres_v1main_ColumnSchema:{samples:"Oneof",subcolumns:{__type:".IN_google_cloud_cloudaicompanion_anarres_v1main_ColumnSchema",__isList:!0},generatedColumn:".IN_google_cloud_cloudaicompanion_anarres_v1main_ColumnSchema_GeneratedColumn"},
IN_google_cloud_cloudaicompanion_anarres_v1main_ColumnSchema_GeneratedColumn:{definition:"Oneof"},IN_google_cloud_geminidataanalytics_v1main_QueryDataRequest:{context:".IN_google_cloud_geminidataanalytics_v1main_QueryDataContext",schema:".IN_google_cloud_cloudaicompanion_anarres_v1main_DataModel"},IN_google_cloud_geminidataanalytics_v1main_QueryDataContext:{datasourceReferences:".IN_google_cloud_geminidataanalytics_v1main_DatasourceReferences",parameterizedSecureViewParameters:".IN_google_cloud_geminidataanalytics_v1main_ParameterizedSecureViewParameters"},
IN_google_cloud_geminidataanalytics_v1main_ParameterizedSecureViewParameters:{parameters:"Map"},IN_cloud_console_databases_DisplayStudioQuery:{labels:"Map"},IN_cloud_console_databases_CreateContextStoreAndContextSetRequest:{projectNumber:"Long"}};var H5o={};_.I5o=class extends _.xr{constructor(a,b){super(G5o);this.DISABLE_PARTIAL_DATA=!1;this.config=a.createConfig(F5o,this.DISABLE_PARTIAL_DATA);this.operation=b.create(this.config)}queryListLocations(a){a=this.serialize(H5o,a);return this.config.request("ListLocations",'query ListLocations($projectId: String!) @NullProto @Signature(bytes: "2/1RH8x+GztlqPYNdySwESl3vC8JuakaIYHHEwapLBq98=") { ListDisplayLocations(projectId: $projectId) { data { locationId } nextPageToken } }',a,void 0).pipe(this.deserialize(H5o))}};
_.I5o.\u0275fac=function(a){return new (a||_.I5o)(_.Od(_.Ar),_.Od(_.Pr))};_.I5o.\u0275prov=_.wd({token:_.I5o,factory:_.I5o.\u0275fac,providedIn:"root"});
}catch(e){_._DumpException(e)}
try{
var y4f=class{};y4f.\u0275fac=function(a){return new (a||y4f)};y4f.\u0275mod=_.sf({type:y4f,id:"pm_section_nav_service_module"});y4f.\u0275inj=_.yd({providers:[{provide:_.Bo,useValue:{SectionNavService:_.bB}}],imports:[_.Uq]});_.fg(y4f,"pm_section_nav_service_module");
}catch(e){_._DumpException(e)}
try{
_.yBg=(0,_.h)`<svg data-icon-name="articleIcon" width="18" height="18" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>`.firstElementChild;_.zBg=(0,_.h)`<svg data-icon-name="attachMoneyIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#SIzBua)"><path fill="currentColor" d="M8.438 14.75V13.5a2.83 2.83 0 01-1.376-.719 3.025 3.025 0 01-.796-1.36l1.156-.468c.083.375.292.714.625 1.016.344.291.698.437 1.062.437.407 0 .74-.104 1-.312a.996.996 0 00.391-.813.993.993 0 00-.36-.781c-.229-.208-.64-.417-1.234-.625-.812-.292-1.406-.61-1.781-.953-.375-.354-.563-.807-.563-1.36 0-.52.167-.968.5-1.343.344-.375.803-.62 1.375-.735V4.25h1.126v1.234c.75.125 1.25.412 1.5.86.26.448.395.682.406.703l-1.094.453a1.268 1.268 0 00-.5-.672 1.4 1.4 0 00-.828-.266c-.365 0-.667.094-.906.282-.24.187-.36.416-.36.687 0 .271.13.505.39.703.261.188.746.401 1.454.641.73.24 1.26.552 1.594.938.333.385.5.874.5 1.468s-.193 1.094-.578 1.5c-.386.406-.912.662-1.579.766v1.203H8.438Z"/></g><defs><clipPath id="SIzBua"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;_.ABg=(0,_.h)`<svg data-icon-name="barcodeIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#Ntxiyba)"><path fill="currentColor" d="M2.25 14V5h1.125v9H2.25Zm1.875 0V5H5.25v9H4.125ZM6 14V5h.75v9H6Zm1.875 0V5H9v9H7.875Zm1.875 0V5h1.5v9h-1.5ZM12 14V5h.75v9H12Zm2.25 0V5h1.5v9h-1.5Z"/></g><defs><clipPath id="Ntxiyba"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;_.BBg=(0,_.h)`<svg data-icon-name="dataArrayIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#sBHf2a)"><path fill="currentColor" d="M10.5 14v-1.125h1.875v-6.75H10.5V5h3v9h-3Zm-6 0V5h3v1.125H5.625v6.75H7.5V14h-3Z"/></g><defs><clipPath id="sBHf2a"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;_.CBg=(0,_.h)`<svg data-icon-name="databaseSearchIcon" width="18" height="18" viewBox="0 -960 960 960"><path d="M480-144q-70 0-131.62-11.4-61.62-11.39-107-31Q196-206 170-232.13q-26-26.13-26-55.87 0 29.8 26.22 55.99 26.21 26.18 71.5 45.6Q287-167 348.5-155.5T480-144Zm-43-193q-33-2-64.5-6T313-354q-28-7-52.5-16.5T216-391q20 11 45 20.5t53 16.5q28 7 58.93 10.85 30.93 3.84 64.07 6.15Zm43-263q86 0 166-22t98-50q-18-28-98.5-50t-165.53-22Q394-744 313.5-722T216-672q17 29 96.5 50.5T480-600Zm-37 382q5 17 14 35.5t23 38.5q-70 0-131.62-11.4-61.62-11.39-107-31Q196-206 170-232.13q-26-26.13-26-55.87v-384q0-29.58 26.48-55.57 26.47-25.99 72-45.71Q288-793 349.27-804.5q61.28-11.5 130.5-11.5Q549-816 610-804.5q61 11.5 106.84 31.13 45.84 19.62 72.5 45.5Q816-702 816-672.19q0 29.8-26.5 56Q763-590 717-570.5q-46 19.5-107.03 31Q548.95-528 480-528q-80 0-148.5-14.5T216-583v109q42 31 106 47t144 18q-9 17-17 35t-12 37q-66-3-123-17t-98-37v102.99Q235-262 300-242q65 20 143 24ZM862-48l-99-99q-21 12-43.39 19.5-22.4 7.5-46.66 7.5-69.98 0-118.96-49.23Q505-218.45 505-288q0-70 49-119t119-49q70 0 119 48.99 49 48.98 49 118.96 0 24.26-7.5 46.66Q826-219 814-198l99 99-51 51ZM672.77-192Q713-192 741-219.77q28-27.78 28-68Q769-328 741.23-356q-27.78-28-68-28Q633-384 605-356.23q-28 27.78-28 68Q577-248 604.77-220q27.78 28 68 28Z"/></svg>`.firstElementChild;_.DBg=(0,_.h)`<svg data-icon-name="dateRangeIcon" width="18" height="18" viewBox="0 0 24 24"><path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 002 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11zM8 11c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm4 0c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm4 0c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"/></svg>`.firstElementChild;_.EBg=(0,_.h)`<svg data-icon-name="driveZipIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#QV8UGea)"><path fill="currentColor" d="M4.875 14.75a1.12 1.12 0 01-1.125-1.125v-8.25c0-.313.11-.578.328-.797a1.12 1.12 0 01.797-.328h8.25c.313 0 .578.11.797.328.219.219.328.484.328.797v8.25c0 .302-.11.568-.328.797a1.085 1.085 0 01-.797.328h-8.25Zm0-1.125h8.25v-8.25h-5.25V6.5H9V5.375H4.875v8.25ZM9 8.75v1.125h1.125V8.75H9ZM9 6.5v1.125h1.125V6.5H9ZM7.875 7.625V8.75H9V7.625H7.875Zm0 2.25V11H9V9.875H7.875ZM9 11v1.125h1.125V11H9Z"/></g><defs><clipPath id="QV8UGea"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;_.FBg=(0,_.h)`<svg data-icon-name="eventIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#yW7Rhfa)"><path fill="currentColor" d="M10.5 13.25c-.417 0-.77-.146-1.063-.438A1.447 1.447 0 019 11.75c0-.417.146-.77.438-1.063a1.446 1.446 0 011.062-.437c.417 0 .77.146 1.063.438.291.291.437.645.437 1.062 0 .417-.146.77-.438 1.063a1.446 1.446 0 01-1.062.437ZM4.875 15.5c-.313 0-.578-.11-.797-.328a1.12 1.12 0 01-.328-.797v-8.25c0-.302.11-.563.328-.781A1.06 1.06 0 014.875 5H6V3.5h1.125V5h3.75V3.5H12V5h1.125c.313 0 .578.115.797.344.219.218.328.479.328.781v8.25c0 .302-.11.568-.328.797a1.085 1.085 0 01-.797.328h-8.25Zm0-1.125h8.25V8.75h-8.25v5.625Zm0-6.75h8.25v-1.5h-8.25v1.5Zm0 0v-1.5 1.5Z"/></g><defs><clipPath id="yW7Rhfa"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;_.GBg=(0,_.h)`<svg data-icon-name="extensionIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><path fill="#041E49" d="M3.375 15.75c-.313 0-.578-.11-.797-.328a1.085 1.085 0 01-.328-.797v-3.3a2.415 2.415 0 001.416-.647 1.79 1.79 0 00.59-1.36c0-.537-.197-.99-.59-1.359a2.415 2.415 0 00-1.416-.646v-3.3c0-.313.11-.579.328-.797.219-.22.485-.329.797-.329h3.319a2.73 2.73 0 01.74-1.246 1.784 1.784 0 011.285-.516c.5 0 .928.172 1.284.516.356.343.603.759.74 1.247h3.245c.312 0 .578.109.796.328.22.218.329.484.329.796v3.244a2.44 2.44 0 011.218.778c.325.382.488.822.488 1.322 0 .475-.166.89-.497 1.247a2.48 2.48 0 01-1.21.722v3.3c0 .313-.109.578-.328.797a1.085 1.085 0 01-.796.328h-3.3a2.415 2.415 0 00-.647-1.416 1.79 1.79 0 00-1.36-.59c-.537 0-.99.197-1.36.59a2.415 2.415 0 00-.646 1.416h-3.3Zm10.613-1.125V4.012H3.375V6.45c.6.225 1.084.6 1.453 1.125s.553 1.106.553 1.744c0 .637-.184 1.218-.553 1.743-.369.526-.853.9-1.453 1.126v2.437h2.438c.224-.6.6-1.084 1.125-1.453a2.966 2.966 0 011.743-.553c.638 0 1.219.184 1.744.553.525.369.9.853 1.125 1.453h2.438Z"/></svg>`.firstElementChild;_.HBg=(0,_.h)`<svg data-icon-name="formatListNumberedIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#JfN5Zda)"><path fill="currentColor" d="M3.75 14.75V14h1.5v-.375H4.5v-.75h.75V12.5h-1.5v-.75h1.875c.104 0 .193.037.266.11.073.072.109.16.109.265v.75a.362.362 0 01-.11.266.362.362 0 01-.265.109c.104 0 .193.037.266.11.073.072.109.16.109.265v.75a.362.362 0 01-.11.266.362.362 0 01-.265.109H3.75Zm0-3.75V9.5a.36.36 0 01.11-.266.362.362 0 01.265-.109H5.25V8.75h-1.5V8h1.875a.36.36 0 01.266.11c.073.072.109.16.109.265V9.5a.362.362 0 01-.11.266.362.362 0 01-.265.109H4.5v.375H6V11H3.75Zm.75-3.75V5h-.75v-.75h1.5v3H4.5Zm2.625 6v-1.125h7.125v1.125H7.125Zm0-3.188V8.938h7.125v1.124H7.125Zm0-3.187V5.75h7.125v1.125H7.125Z"/></g><defs><clipPath id="JfN5Zda"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;_.IBg=(0,_.h)`<svg data-icon-name="functionsIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#ovVCEa)"><path fill="currentColor" d="M6 14v-1.344L9.219 9.5 6 6.344V5h6v1.5H8.125l3 3-3 3H12V14H6Z"/></g><defs><clipPath id="ovVCEa"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;_.JBg=(0,_.h)`<svg data-icon-name="keyIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#qCAZwba)"><path fill="currentColor" d="M6 11c-.417 0-.77-.146-1.063-.438A1.447 1.447 0 014.5 9.5c0-.417.146-.77.438-1.063A1.447 1.447 0 016 8c.417 0 .77.146 1.063.438.291.291.437.645.437 1.062 0 .417-.146.77-.438 1.063A1.446 1.446 0 016 11Zm0 2.25c-1.042 0-1.927-.365-2.656-1.094-.73-.729-1.094-1.614-1.094-2.656s.365-1.927 1.094-2.656C4.073 6.114 4.958 5.75 6 5.75c.677 0 1.302.172 1.875.516A3.821 3.821 0 019.25 7.625h5.375L16.5 9.5l-2.813 2.625-1.312-.938-1.125.938L9.75 11h-.313a3.101 3.101 0 01-1.343 1.656A3.882 3.882 0 016 13.25Zm0-1.125a2.63 2.63 0 001.734-.625c.5-.427.787-.969.86-1.625h1.531l1.094.813 1.11-.922 1.265.906 1.281-1.188-.719-.734h-5.64c-.198-.552-.526-1-.985-1.344A2.402 2.402 0 006 6.875a2.53 2.53 0 00-1.86.766c-.51.51-.765 1.13-.765 1.859 0 .73.255 1.349.766 1.86.51.51 1.13.765 1.859.765Z"/></g><defs><clipPath id="qCAZwba"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;_.KBg=(0,_.h)`<svg data-icon-name="lanIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#aqWeUa)"><path fill="currentColor" d="M3.75 15.5v-3.75h1.688V8.937h3V7.25H6.75V3.5h4.5v3.75H9.562v1.688h3v2.812h1.688v3.75h-4.5v-3.75h1.688v-1.688H6.561v1.688H8.25v3.75h-4.5Zm4.125-9.375h2.25v-1.5h-2.25v1.5Zm-3 8.25h2.25v-1.5h-2.25v1.5Zm6 0h2.25v-1.5h-2.25v1.5Z"/></g><defs><clipPath id="aqWeUa"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;_.LBg=(0,_.h)`<svg data-icon-name="onetwothreeIcon" width="18" height="18" viewBox="0 0 20 20"><path d="M6 12H5V9H4V8h2v4zm5-1H9v-.5h1.5c.28 0 .5-.22.5-.5V8.5c0-.28-.22-.5-.5-.5H8v1h2v.5H8.5c-.28 0-.5.22-.5.5v2h3v-1zm4.5.5v-3c0-.28-.22-.5-.5-.5h-2.5v1h2v.5h-1v1h1v.5h-2v1H15c.28 0 .5-.22.5-.5z"/></svg>`.firstElementChild;_.MBg=(0,_.h)`<svg data-icon-name="patientListIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#cbk8jca)"><path fill="currentColor" d="M11.25 11c-.52 0-.963-.182-1.328-.547a1.808 1.808 0 01-.547-1.328c0-.52.182-.964.547-1.328a1.808 1.808 0 011.328-.547c.52 0 .963.182 1.328.547.365.364.547.807.547 1.328 0 .52-.182.963-.547 1.328A1.808 1.808 0 0111.25 11ZM7.5 14.75v-.984a1.5 1.5 0 01.219-.797c.156-.24.36-.422.61-.547a6.642 6.642 0 012.921-.672 6.628 6.628 0 012.922.672c.25.125.448.307.594.547.156.24.234.505.234.797v.984H7.5Zm1.14-1.125h5.22a3.332 3.332 0 00-1.126-.547 5.016 5.016 0 00-1.484-.203c-.552 0-1.047.068-1.484.203a3.332 3.332 0 00-1.125.547Zm2.61-3.75a.724.724 0 00.531-.219.723.723 0 00.219-.531.723.723 0 00-.219-.531.724.724 0 00-.531-.219.723.723 0 00-.531.219.723.723 0 00-.219.531c0 .208.073.385.219.531a.723.723 0 00.531.219Zm-7.5.938V9.687h4.5v1.126h-4.5Zm0-4.688V5h6.75v1.125H3.75Zm4.578 2.344H3.75V7.344h5.094c-.125.166-.23.343-.313.531a3.621 3.621 0 00-.203.594Z"/></g><defs><clipPath id="cbk8jca"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;_.NBg=(0,_.h)`<svg data-icon-name="pendingOutlineIcon" width="18" height="18" viewBox="0 0 20 20"><path d="M10 3c-3.87 0-7 3.13-7 7s3.13 7 7 7 7-3.13 7-7-3.13-7-7-7zm0 13c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"/><circle cx="6.5" cy="10" r="1"/><circle cx="13.5" cy="10" r="1"/><circle cx="10" cy="10" r="1"/></svg>`.firstElementChild;_.OBg=(0,_.h)`<svg data-icon-name="pentagonIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#q4958ba)"><path fill="currentColor" d="M6.281 14.375h5.453l1.922-5.563L9 5.61 4.344 8.813l1.937 5.562ZM5.47 15.5 3 8.375 9 4.25l6 4.125-2.469 7.125H5.47Z"/></g><defs><clipPath id="q4958ba"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;_.PBg=(0,_.h)`<svg data-icon-name="photoCameraIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#ARQt3ca)"><path fill="currentColor" d="M4.125 14.75c-.313 0-.578-.11-.797-.328A1.085 1.085 0 013 13.625v-6.75c0-.313.11-.578.328-.797.219-.219.485-.328.797-.328H6l1.125-1.5h3.75L12 5.75h1.875c.313 0 .578.11.797.328.219.219.328.484.328.797v6.75c0 .313-.11.578-.328.797a1.085 1.085 0 01-.797.328h-9.75Zm0-1.125h9.75v-6.75h-9.75v6.75Zm0 0v-6.75 6.75ZM9 12.875c.719 0 1.333-.255 1.844-.766.52-.51.781-1.13.781-1.859 0-.719-.26-1.333-.781-1.844a2.506 2.506 0 00-1.86-.781c-.718 0-1.333.26-1.843.781-.51.51-.766 1.13-.766 1.86 0 .718.255 1.333.766 1.843.51.51 1.13.766 1.859.766Z"/></g><defs><clipPath id="ARQt3ca"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;_.QBg=(0,_.h)`<svg data-icon-name="pinIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#jLXOpda)"><path fill="currentColor" d="M4 14.5c-.344 0-.64-.12-.89-.36a1.24 1.24 0 01-.36-.89v-7.5c0-.344.12-.635.36-.875.25-.25.546-.375.89-.375h10c.344 0 .635.125.875.375.25.24.375.531.375.875v7.5c0 .344-.125.64-.375.89-.24.24-.531.36-.875.36H4Zm2.047-3.39h.625V7.89h-.469l-.953.673.313.484.484-.344v2.406Zm1.672 0h2.078v-.532H8.53l.375-.375c.125-.135.245-.27.36-.406.125-.146.234-.297.328-.453.104-.167.156-.35.156-.547a.836.836 0 00-.281-.656c-.188-.167-.448-.25-.781-.25a.976.976 0 00-.61.203 1.197 1.197 0 00-.39.515l.546.22a.497.497 0 01.484-.375c.115 0 .214.036.298.109a.3.3 0 01.14.265.551.551 0 01-.094.313c-.052.093-.12.182-.203.265l-.578.578c-.177.188-.364.38-.562.579v.546Zm3.953 0c.291 0 .541-.084.75-.25a.876.876 0 00.328-.72.642.642 0 00-.156-.421.729.729 0 00-.36-.281.525.525 0 00.297-.282.97.97 0 00.11-.437.674.674 0 00-.313-.578 1.078 1.078 0 00-.687-.235c-.22 0-.422.058-.61.172a.83.83 0 00-.375.485l.531.218a.474.474 0 01.454-.344c.114 0 .208.032.28.094a.297.297 0 01.126.25.34.34 0 01-.14.281.52.52 0 01-.329.11h-.25v.531h.281c.146 0 .271.037.375.11a.35.35 0 01.172.312c0 .125-.052.23-.156.313a.52.52 0 01-.328.109.468.468 0 01-.344-.14 1.162 1.162 0 01-.203-.329l-.547.219c.063.24.198.437.406.594.209.146.438.218.688.218ZM4 13.25h10v-7.5H4v7.5Zm0 0v-7.5 7.5Z"/></g><defs><clipPath id="jLXOpda"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;_.RBg=(0,_.h)`<svg data-icon-name="playlistPlayIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#Ryj7Wca)"><path fill="currentColor" d="M3.75 10.063V8.937h4.5v1.126h-4.5Zm0-2.344V6.594h6.75v1.125H3.75Zm0-2.344V4.25h6.75v1.125H3.75Zm7.5 7.875V8.375L15 10.813l-3.75 2.437Z"/></g><defs><clipPath id="Ryj7Wca"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;_.SBg=(0,_.h)`<svg data-icon-name="polylineIcon" width="18" height="18" viewBox="0 -960 960 960"><path d="M600-80v-100L320-320H120v-240h172l108-124v-196h240v240H468L360-516v126l240 120v-50h240v240H600zM480-720h80v-80h-80v80zM200-400h80v-80h-80v80zm480 240h80v-80h-80v80zM520-760zM240-440zm480 240z"/></svg>`.firstElementChild;_.TBg=(0,_.h)`<svg data-icon-name="rectangleIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#gw14Uba)"><path fill="currentColor" d="M3 14V5h12v9H3Zm1.125-1.125h9.75v-6.75h-9.75v6.75Zm0 0v-6.75 6.75Z"/></g><defs><clipPath id="gw14Uba"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;_.UBg=(0,_.h)`<svg data-icon-name="settingsSuggestionIcon" width="18" height="18" fill="currentColor" viewBox="0 -960 960 960"><path d="m318-96-7-96q-8-2-17-7.5T278-210l-86 41-96-166 78-54.25q0-7.75.5-18.75t.5-18.75L96-481l96-166 86 41q7-5 16-10.5t17-7.5l7-96h192l7 96q8 2 17 7.5t16 10.5l86-41 96 166-78 54.25q0 7.75-.5 18.75t-.5 18.75L732-335l-96 166-87-41q-7 5-15.5 10.5T517-192l-7 96H318Zm96-192q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm-29 120h58l6-75q29-6 49-18.5t40.7-33.5l68.3 32 30-50-63-43q8-21 8-51.5t-8-52.81L636-503l-29-50-68.3 32Q518-542 498-553.5 478-565 449-573l-6-75h-58l-6 76q-29 8-50 19t-40 32l-68-32-30 50 63 42.69q-8 22.31-8 52.81 0 30.5 8 51.5l-63 43 30 50 68-32q19 21 41.5 33.5T379-243l6 75Zm29-240Zm330-168q0-69.61-49.19-118.81Q645.61-744 576-744q69.61 0 118.81-49Q744-842 744-912q0 70 49 119t119 49q-70 0-119 49.19-49 49.2-49 118.81Z"/></svg>`.firstElementChild;_.VBg=(0,_.h)`<svg data-icon-name="signpostIcon" viewBox="0 0 18 18" width="18" height="18"><path d="M8.325 16.2v-3.6H4.5l-1.8-2.025L4.5 8.55h3.825V7.2H3.6V3.15h4.725V1.8h1.35v1.35H13.5l1.8 2.025L13.5 7.2H9.675v1.35H14.4v4.05H9.675v3.6h-1.35ZM4.95 5.85h7.95l.6-.675-.6-.675H4.95v1.35Zm.15 5.4h7.95V9.9H5.1l-.6.675.6.675Zm-.15-5.4V4.5v1.35Zm8.1 5.4V9.9v1.35Z"/></svg>`.firstElementChild;_.WBg=(0,_.h)`<svg data-icon-name="sourceCodeIcon" viewBox="0 0 18 18" width="18" height="18"><path fill-rule="evenodd" d="M2 4.006C2 2.898 2.897 2 4.006 2h9.988C15.102 2 16 2.897 16 4.006v9.988A2.005 2.005 0 0113.994 16H4.006A2.005 2.005 0 012 13.994V4.006zM13.992 9l.003-.003L10.997 6 9.75 7.247 11.503 9 9.75 10.753 10.997 12l2.997-2.997L13.992 9zm-9.99 0L4 9.003 6.997 12l1.248-1.247L6.492 9l1.752-1.753L6.997 6 4 8.997 4.003 9z"/></svg>`.firstElementChild;_.XBg=(0,_.h)`<svg data-icon-name="textFieldsIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#GIzdgfa)"><path fill="currentColor" d="M6 14V6.5H3V5h7.5v1.5h-3V14H6Zm5.625 0V9.5H9.75V8H15v1.5h-1.875V14h-1.5Z"/></g><defs><clipPath id="GIzdgfa"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;_.YBg=(0,_.h)`<svg data-icon-name="timerIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><path fill="currentColor" d="M6.75 2.7V1.35h4.5V2.7h-4.5Zm1.575 8.1h1.35V6.3h-1.35v4.5ZM9 16.2a6.198 6.198 0 01-2.456-.487 6.744 6.744 0 01-2.006-1.35 6.744 6.744 0 01-1.35-2.007A6.198 6.198 0 012.7 9.9c0-.875.162-1.694.487-2.456a6.501 6.501 0 011.35-1.988 6.304 6.304 0 012.007-1.35A6 6 0 019 3.6c.725 0 1.419.125 2.081.375a6.84 6.84 0 011.875 1.012l.975-.956.938.938-.957.975A6.538 6.538 0 0114.925 7.8c.25.675.375 1.375.375 2.1a6 6 0 01-.506 2.456 6.304 6.304 0 01-1.35 2.007 6.501 6.501 0 01-1.988 1.35A6.198 6.198 0 019 16.2Zm0-1.35c1.375 0 2.544-.481 3.506-1.444.963-.962 1.444-2.131 1.444-3.506s-.481-2.544-1.444-3.506C11.544 5.43 10.375 4.95 9 4.95s-2.544.481-3.506 1.444C4.53 7.356 4.05 8.525 4.05 9.9s.481 2.544 1.444 3.506C6.456 14.37 7.625 14.85 9 14.85Z"/></svg>`.firstElementChild;_.ZBg=(0,_.h)`<svg data-icon-name="timer10Icon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#vfWMka)"><path fill="currentColor" d="M9.75 11.75H12v-4.5H9.75v4.5Zm0 1.5c-.417 0-.77-.146-1.063-.438a1.447 1.447 0 01-.437-1.062v-4.5c0-.417.146-.77.438-1.063A1.447 1.447 0 019.75 5.75H12c.417 0 .77.146 1.063.438.291.291.437.645.437 1.062v4.5c0 .417-.146.77-.438 1.063A1.446 1.446 0 0112 13.25H9.75Zm-3.75 0v-6H4.5v-1.5h3v7.5H6Z"/></g><defs><clipPath id="vfWMka"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;_.$Bg=(0,_.h)`<svg data-icon-name="toggleOnIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#h2gWwba)"><path fill="currentColor" d="M6 13.25c-1.042 0-1.927-.365-2.656-1.094-.73-.729-1.094-1.614-1.094-2.656s.365-1.927 1.094-2.656C4.073 6.114 4.958 5.75 6 5.75h6c1.042 0 1.927.365 2.656 1.094.73.729 1.094 1.614 1.094 2.656s-.365 1.927-1.094 2.656c-.729.73-1.614 1.094-2.656 1.094H6Zm0-1.125h6a2.53 2.53 0 001.86-.766c.51-.51.765-1.13.765-1.859a2.53 2.53 0 00-.766-1.86A2.531 2.531 0 0012 6.876H6a2.53 2.53 0 00-1.86.766c-.51.51-.765 1.13-.765 1.859 0 .73.255 1.349.766 1.86.51.51 1.13.765 1.859.765Zm6-.75c.52 0 .963-.182 1.328-.547.365-.364.547-.807.547-1.328 0-.52-.182-.964-.547-1.328A1.808 1.808 0 0012 7.625c-.52 0-.963.182-1.328.547a1.808 1.808 0 00-.547 1.328c0 .52.182.963.547 1.328.364.365.807.547 1.328.547Z"/></g><defs><clipPath id="h2gWwba"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;_.aCg=(0,_.h)`<svg data-icon-name="viewColumnIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#oWttKda)"><path fill="currentColor" d="M3.75 13.25v-7.5h10.5v7.5H3.75Zm1.125-1.125h2v-5.25h-2v5.25Zm3.125 0h2v-5.25H8v5.25Zm3.125 0h2v-5.25h-2v5.25Z"/></g><defs><clipPath id="oWttKda"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;_.bCg=(0,_.h)`<svg data-icon-name="visibilityLockIcon" viewBox="0 0 18 18" width="18" height="18" fill="none"><g clip-path="url(#qXVkMa)"><path fill="currentColor" d="M9 11c-.417 0-.77-.146-1.063-.438A1.447 1.447 0 017.5 9.5c0-.417.146-.77.438-1.063A1.447 1.447 0 019 8c.417 0 .77.146 1.063.438.291.291.437.645.437 1.062 0 .417-.146.77-.438 1.063A1.446 1.446 0 019 11Zm0 3a7.165 7.165 0 01-4.063-1.219A7.272 7.272 0 012.25 9.5a7.178 7.178 0 012.688-3.266A7.1 7.1 0 019 5c1.406 0 2.693.37 3.86 1.11a7.282 7.282 0 012.687 2.952h-1.281a6.04 6.04 0 00-2.25-2.156A6.055 6.055 0 009 6.125a6.092 6.092 0 00-3.234.906A6.064 6.064 0 003.484 9.5a6.063 6.063 0 002.282 2.469c.99.604 2.067.906 3.234.906.26 0 .516-.016.766-.047s.494-.078.734-.14v1.156a8.26 8.26 0 01-.734.125c-.25.02-.506.031-.766.031Zm0-1.875c.281 0 .547-.042.797-.125.26-.083.495-.198.703-.344a2.6 2.6 0 01.328-1.203 2.63 2.63 0 01.797-.86V9.5a2.53 2.53 0 00-.766-1.86A2.532 2.532 0 009 6.876a2.53 2.53 0 00-1.86.766c-.51.51-.765 1.13-.765 1.859 0 .73.255 1.349.766 1.86.51.51 1.13.765 1.859.765Zm3 2.625a.362.362 0 01-.266-.11.362.362 0 01-.109-.265v-2.25c0-.104.037-.193.11-.266A.297.297 0 0112 11.75h.375V11c0-.313.11-.578.328-.797.219-.219.485-.328.797-.328.313 0 .578.11.797.328.219.219.328.485.328.797v.75H15c.104 0 .193.037.266.11a.36.36 0 01.109.265v2.25a.362.362 0 01-.11.266.362.362 0 01-.265.109h-3Zm.938-3h1.124V11a.506.506 0 00-.171-.39.506.506 0 00-.391-.172.555.555 0 00-.406.171.53.53 0 00-.156.391v.75Z"/></g><defs><clipPath id="qXVkMa"><path fill="#fff" d="M0 0h18v18H0z"/></clipPath></defs></svg>`.firstElementChild;
}catch(e){_._DumpException(e)}
try{
_.NIg=(0,_.h)`<svg data-icon-name="manageAccountsIcon" viewBox="0 0 24 24" width="24" height="24" fill="none"><path fill="currentColor" d="M10 12c-1.1 0-2.042-.392-2.825-1.175C6.392 10.042 6 9.1 6 8s.392-2.042 1.175-2.825C7.958 4.392 8.9 4 10 4s2.042.392 2.825 1.175C13.608 5.958 14 6.9 14 8s-.392 2.042-1.175 2.825C12.042 11.608 11.1 12 10 12Zm-8 8v-2.8c0-.55.142-1.067.425-1.55.283-.483.675-.85 1.175-1.1.85-.433 1.808-.8 2.875-1.1C7.542 13.15 8.717 13 10 13h.35c.1 0 .2.017.3.05-.133.3-.25.617-.35.95-.083.317-.15.65-.2 1H10c-1.183 0-2.25.15-3.2.45-.933.3-1.7.6-2.3.9-.15.083-.275.2-.375.35-.083.15-.125.317-.125.5v.8h6.3c.1.35.233.7.4 1.05.167.333.35.65.55.95H2Zm14 1-.3-1.5c-.2-.083-.392-.167-.575-.25a7.167 7.167 0 01-.525-.35l-1.45.45-1-1.7 1.15-1a4.62 4.62 0 01-.05-.65c0-.2.017-.417.05-.65l-1.15-1 1-1.7 1.45.45a3.76 3.76 0 01.525-.325c.183-.1.375-.192.575-.275L16 11h2l.3 1.5c.2.083.383.175.55.275.183.1.367.225.55.375l1.45-.5 1 1.75-1.15 1c.033.2.05.408.05.625a3.8 3.8 0 01-.05.625l1.15 1-1 1.7-1.45-.45c-.183.133-.367.25-.55.35a8.82 8.82 0 01-.55.25L18 21h-2Zm1-3c.55 0 1.017-.192 1.4-.575.4-.4.6-.875.6-1.425s-.2-1.017-.6-1.4c-.383-.4-.85-.6-1.4-.6-.55 0-1.025.2-1.425.6-.383.383-.575.85-.575 1.4 0 .55.192 1.025.575 1.425.4.383.875.575 1.425.575Zm-7-8c.55 0 1.017-.192 1.4-.575.4-.4.6-.875.6-1.425s-.2-1.017-.6-1.4c-.383-.4-.85-.6-1.4-.6-.55 0-1.025.2-1.425.6C8.192 6.983 8 7.45 8 8c0 .55.192 1.025.575 1.425.4.383.875.575 1.425.575Z"/></svg>`.firstElementChild;
}catch(e){_._DumpException(e)}
try{
_.F6g=(0,_.h)`<svg data-icon-name="homeAltIcon" viewBox="0 0 18 18" width="18" height="18"><path d="M9 1 2 6.333V17h14V6.333L9 1zm5.25 14.222h-2.625V9.89h-5.25v5.332H3.75v-8l5.25-4 5.25 4v8z"/></svg>`.firstElementChild;_.G6g=(0,_.h)`<svg data-icon-name="modelTrainingIcon" width="18" height="18" viewBox="0 0 20 20"><path d="M12.33 5.32 10.2 7.44l-.7-.71 1.58-1.58C10.73 5.06 10.38 5 10 5c-2.76 0-5 2.24-5 5 0 1.38.56 2.63 1.47 3.53l-.71.71A5.98 5.98 0 014 10c0-3.31 2.69-6 6-6 .38 0 .75.04 1.12.11L9.5 2.49l.71-.71 2.12 2.12.71.71-.71.71zM15 10c0 1.38-.56 2.63-1.47 3.53l.71.71C15.33 13.15 16 11.65 16 10s-.67-3.15-1.76-4.24l-.71.71C14.44 7.37 15 8.62 15 10zm-5.75 6h1.5v-1h-1.5v1zM10 8a2.5 2.5 0 00-2.5 2.5C7.5 12 9.25 13 9.25 14h1.5c0-1 1.75-2 1.75-3.5A2.5 2.5 0 0010 8z"/></svg>`.firstElementChild;_.H6g=(0,_.h)`<svg data-icon-name="schemaIcon" width="18" height="18" viewBox="0 0 20 20"><path d="M11.5 7.75v1.5h-2v-1.5h-2V6.5h2V2H4v4.5h2v1.25H4v4.5h2V14H4v4.5h5.5V14h-2v-1.75h2v-1.5h2v1.5H17v-4.5h-5.5zm-6-4.25H8V5H5.5V3.5zM8 17H5.5v-1.5H8V17zm0-6.25H5.5v-1.5H8v1.5zm7.5 0H13v-1.5h2.5v1.5z"/></svg>`.firstElementChild;
}catch(e){_._DumpException(e)}
try{
var pKk=function(g,q){return{__tsickle_local_0:function(l,m){return g(l,m,function(B,k){return q(l,k)})}}}.call(void 0,_.TOh,_.dtd).__tsickle_local_0;_.p3=function(g,q){let l={};q=q(function(m,B){return m==null?{}:g(m,B)});l.__tsickle_local_0=q;return l}.call(void 0,pKk,_.Ick).__tsickle_local_0;
}catch(e){_._DumpException(e)}
try{
var bMk,cMk;bMk=function(a){a&1&&_.K(0,"cai-title",1);a&2&&(a=_.Q(),_.H("text",a.titleText)("semanticLevel",a.titleSemanticLevel)("disclaimer",a.disclaimer)("badge",a.badge))};cMk=[[["cai-message-text"]],[["cai-message-actions"]]];_.r3=class{constructor(){this.titleVisible=!0;this.disclaimer=!1}};_.r3.\u0275fac=function(a){return new (a||_.r3)};
_.r3.\u0275cmp=_.z({type:_.r3,selectors:[["cai-message"]],inputs:{titleText:"titleText",titleSemanticLevel:"titleSemanticLevel",titleVisible:"titleVisible",disclaimer:"disclaimer",badge:"badge"},ngContentSelectors:["cai-message-text","cai-message-actions"],decls:6,vars:1,consts:[[1,"cai-message-title-text-section"],[3,"text","semanticLevel","disclaimer","badge"],[1,"cai-message-text-section"],[1,"cai-message-action-section"]],template:function(a,b){a&1&&(_.Kg(cMk),_.I(0,"div",0),_.D(1,bMk,1,4,"cai-title",
1),_.I(2,"div",2),_.Lg(3),_.J()(),_.I(4,"div",3),_.Lg(5,1),_.J());a&2&&(_.y(),_.E(b.titleVisible?1:-1))},dependencies:[_.Q9f],styles:['.cm-md1[_nghost-%COMP%], .cm-md1   [_nghost-%COMP%]{--cai-surface:linear-gradient(90deg,#f2f7ff,#e6efff);--cai-surface-interactive:#fff;--cai-button-outline:#337dff;--cai-neutral-container-border:1px solid #80868b}body:not([data-cm-color-scheme=dark])   .cm-gm2[_nghost-%COMP%], body:not([data-cm-color-scheme=dark])   .cm-gm2   [_nghost-%COMP%], body[data-cm-dark-launched=false]   .cm-gm2[_nghost-%COMP%], body[data-cm-dark-launched=false]   .cm-gm2   [_nghost-%COMP%]{--cai-surface:linear-gradient(90deg,#f2f7ff,#e6efff);--cai-surface-interactive:#fff;--cai-button-outline:#337dff;--cai-neutral-container-border:1px solid #80868b}body[data-cm-color-scheme=dark]:where(:not([data-cm-dark-launched=false]))   .cm-gm2[_nghost-%COMP%], body[data-cm-color-scheme=dark]:where(:not([data-cm-dark-launched=false]))   .cm-gm2   [_nghost-%COMP%]{--cai-surface:#2a3953;--cai-surface-interactive:#202124;--cai-button-outline:#669df6;--cai-neutral-container-border:1px solid var(--cm-sys-color-hairline,rgba(0,0,0,.12))}[_nghost-%COMP%]{color:var(--cm-sys-color-on-surface,#000);font:var(--cm-sys-type-body-medium,400 13px/20px "Roboto",sans-serif);background:var(--cai-surface);border-radius:8px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;gap:16px;padding:16px;margin-bottom:16px}[_nghost-%COMP%]   .cai-message-title-text-section[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:12px}[_nghost-%COMP%]   .cai-message-action-section[_ngcontent-%COMP%]{--cm-button-raised-gap:0;--cm-button-text-transform:none}[_nghost-%COMP%]   .cai-message-action-section[_ngcontent-%COMP%]:empty, [_nghost-%COMP%]   .cai-message-title-text-section[_ngcontent-%COMP%]:empty{display:none}'],
changeDetection:0});_.dMk=class{};_.dMk.\u0275fac=function(a){return new (a||_.dMk)};_.dMk.\u0275dir=_.tf({type:_.dMk,selectors:[["cai-message-text"]]});_.s3=class{};_.s3.\u0275fac=function(a){return new (a||_.s3)};_.s3.\u0275dir=_.tf({type:_.s3,selectors:[["cai-message-actions"]]});
}catch(e){_._DumpException(e)}
try{
var wco=class{constructor(){this.productToKey={[0]:"CLOUD_SQL_FRONTROW_STUDIO_DEEP_LINK_KEY",[1]:"ALLOYDB_FRONTROW_STUDIO_DEEP_LINK_KEY"};this.options={sharedAcrossTabs:!1,persistedAcrossRefreshes:!0};this.analyticsService=_.k(_.jp);this.expandedSessionCacheService=_.k(_.au)}};wco.\u0275fac=function(a){return new (a||wco)};wco.\u0275prov=_.wd({token:wco,factory:wco.\u0275fac,providedIn:"root"});_.xco=class{constructor(){this.cacheService=_.k(wco);this.router=_.k(_.to)}};_.xco.\u0275fac=function(a){return new (a||_.xco)};_.xco.\u0275prov=_.wd({token:_.xco,factory:_.xco.\u0275fac,providedIn:"root"});
}catch(e){_._DumpException(e)}
try{
var nro,oro,tro,vro,xro,yro,zro,Aro,Bro,Cro,Dro,Ero,Fro,Gro,Hro,Iro,Jro,Kro,Lro,Mro,Nro,Oro,Pro,Qro,Rro,Sro,Tro,Uro,Vro,Wro,Xro,Yro,Zro,$ro,aso,bso,cso,dso,eso,fso,gso,iso,kso,lso,mso,nso,oso,pso,qso,rso,sso,uso,vso,wso,xso,yso,zso,Aso,Bso,Cso,Dso,Eso,Fso,Gso,Hso,Iso,Jso,Kso,Lso,Mso,Nso,Pso,Qso,Rso,Sso,Tso,Uso,Vso,Wso,Xso,Yso,Zso,bto,cto,dto,eto,fto,hto,ito,rro,sro,jto,kto;nro=function(a){a&1&&(_.ee(),_.zg(0))};
oro=function(a){a&1&&(_.ee(),_.I(0,"svg",1),_.C(1,nro,1,0,"ng-container",2),_.J());a&2&&(a=_.Q(),_.ng("width",a.dims.width)("height",a.dims.height),_.y(),_.H("ngTemplateOutlet",a.contentTemplate)("ngTemplateOutletContext",_.lh(4,_.BGn,a.dims)))};
_.pro=function(){return Object.assign({},_.EIn({sourceNodeId:"",targetNodeId:""},"LINK"),{flows:[],selectedFlows:[],sourceIndex:0,targetIndex:0,path:[],sourceOrientation:"HORIZONTAL",targetOrientation:"HORIZONTAL",capDepth:0,capLocation:"target",breadth:0,depth:0,datum:void 0,labelLayout:{kind:"last-segment-with-overlap",x:0,y:0,width:0,height:0}},{path:[{x:8,y:4},{x:8,y:18}],breadth:18,depth:18,capDepth:2,capLocation:"source",sourceOrientation:"VERTICAL",targetOrientation:"VERTICAL"})};
_.qro=function(a){const b=new Set;for(const {path:c}of a)for(a=0;a<c.length-1;a++)b.add(c[a]);return b};tro=function(a){a&1&&(_.ee(),_.K(0,"rect",6));a&2&&(a=_.Q(),_.Zg("stroke",a.fullStylesheet.outlineColor),_.ng("width",rro(a)-2*a.frameMargin)("height",sro(a)-2*a.frameMargin))};_.uro=function(){return{x:0,y:0,width:0,height:0}};vro=function(a,b){const c=a.kind==="RELATIONAL";let d;a=(d=a.childLinks)==null?void 0:d.find(e=>vro(b[e.childIndex],b));return c||!!a};
_.wro=function(a){return _.rk("Est. improvement% : {IMPACT_PERCENT}%",{IMPACT_PERCENT:a})};xro=function(a){a&1&&_.K(0,"cfc-icon",11)};yro=function(a){a&1&&_.K(0,"cfc-icon",12)};zro=function(a){a&1&&_.zg(0)};Aro=function(a){a&1&&(_.I(0,"div",19)(1,"mat-chip",20),_.R(2),_.J()());a&2&&(a=_.Q(3),_.y(2),_.S(" ",a.messages.latency," "))};Bro=function(a){a&1&&(_.I(0,"div",19)(1,"mat-chip",20),_.R(2),_.J()());a&2&&(a=_.Q(3),_.y(2),_.S(" ",a.messages.cpuTime," "))};
Cro=function(a){a&1&&(_.I(0,"div",19)(1,"mat-chip",20),_.R(2),_.J()());a&2&&(a=_.Q(3),_.y(2),_.S(" ",a.messages.rowCount," "))};Dro=function(a){a&1&&(_.I(0,"div",19)(1,"mat-chip",20),_.R(2),_.J()());a&2&&(a=_.Q(3),_.y(2),_.S(" ",a.messages.cost," "))};
Ero=function(a){a&1&&(_.I(0,"div",16),_.D(1,Aro,3,1,"div",19),_.D(2,Bro,3,1,"div",19),_.D(3,Cro,3,1,"div",19),_.D(4,Dro,3,1,"div",19),_.J());a&2&&(a=_.Q(2),_.y(),_.E(a.isLongestByLatency?1:-1),_.y(),_.E(a.isLongestByCpuTime?2:-1),_.y(),_.E(a.isLargest?3:-1),_.y(),_.E(a.isCostliest?4:-1))};Fro=function(a,b){a&1&&(_.I(0,"p",17),_.N(1,2),_.U(2,"localizeNumber"),_.J());a&2&&(_.y(2),_.Eg(_.W(2,1,b)),_.Fg(1))};
Gro=function(a,b){a&1&&(_.I(0,"p",21),_.N(1,3),_.U(2,"msDuration"),_.J(),_.ee(),_.I(3,"svg",22),_.K(4,"rect",23),_.J());if(a&2){a=_.Q();const c=_.Q(3);_.y(2);_.Eg(_.W(2,4,a));_.Fg(1);_.y();_.H("cfcTooltip",b);_.y();_.ng("width",c.latencyBarWidth)("height",10)}};Hro=function(a){a&1&&(_.I(0,"div"),_.D(1,Gro,5,6),_.U(2,"percent"),_.J());if(a&2){let b;a=_.Q(3);_.y();_.E((b=_.W(2,1,a.latencyPercent))?1:-1,b)}};
Iro=function(a,b){a&1&&(_.I(0,"p",21),_.N(1,4),_.U(2,"msDuration"),_.J(),_.ee(),_.I(3,"svg",24),_.K(4,"rect",23),_.J());if(a&2){a=_.Q();const c=_.Q(3);_.y(2);_.Eg(_.W(2,4,a));_.Fg(1);_.y();_.H("cfcTooltip",b);_.y();_.ng("width",c.cpuTimeBarWidth)("height",10)}};Jro=function(a){a&1&&(_.I(0,"div"),_.D(1,Iro,5,6),_.U(2,"percent"),_.J());if(a&2){let b;a=_.Q(3);_.y();_.E((b=_.W(2,1,a.cpuTimePercent))?1:-1,b)}};
Kro=function(a,b){a&1&&(_.I(0,"p",21),_.N(1,5),_.U(2,"localizeNumber"),_.J(),_.ee(),_.I(3,"svg",24),_.K(4,"rect",23),_.J());if(a&2){a=_.Q();const c=_.Q(3);_.y(2);_.Eg(_.W(2,4,a));_.Fg(1);_.y();_.H("cfcTooltip",b);_.y();_.ng("width",c.costBarWidth)("height",10)}};Lro=function(a){a&1&&(_.I(0,"div"),_.D(1,Kro,5,6),_.U(2,"percent"),_.J());if(a&2){let b;a=_.Q(3);_.y();_.E((b=_.W(2,1,a.costPercent))?1:-1,b)}};
Mro=function(a){a&1&&(_.I(0,"div",16),_.D(1,Hro,3,3,"div"),_.D(2,Jro,3,3,"div"),_.D(3,Lro,3,3,"div"),_.J());if(a&2){let b,c,d;a=_.Q(2);_.y();_.E((b=a.node.datum==null?null:a.node.datum.stats==null?null:a.node.datum.stats.latencyMs)?1:-1,b);_.y();_.E((c=a.node.datum==null?null:a.node.datum.stats==null?null:a.node.datum.stats.cpuTimeMs)?2:-1,c);_.y();_.E((d=a.node.datum==null?null:a.node.datum.stats==null?null:a.node.datum.stats.cost)?3:-1,d)}};
Nro=function(a){a&1&&(_.K(0,"div",25),_.U(1,"machineGroupColor"));a&2&&(a=_.Q(2),_.Zg("background-color",(a.node.datum==null?0:a.node.datum.isMachineGroupColorVisible)?_.W(1,2,a.node.datum==null?null:a.node.datum.machineGroupId):"transparent"))};
Oro=function(a){a&1&&(_.I(0,"div")(1,"div",10),_.D(2,xro,1,0,"cfc-icon",11),_.D(3,yro,1,0,"cfc-icon",12),_.I(4,"div",13)(5,"p",14),_.R(6),_.U(7,"sentenceCase"),_.J(),_.C(8,zro,1,0,"ng-container",15),_.D(9,Ero,5,4,"div",16),_.D(10,Fro,3,3,"p",17),_.D(11,Mro,4,3,"div",16),_.J()()(),_.D(12,Nro,2,4,"div",18));if(a&2){let b;a=_.Q();const c=_.Yg(4);_.$g("query-plan-node-content",a.isMachineGroupColorEnabled());_.y();_.ah(_.hh("query-plan-node ",a.layout));_.$g("full-scan",a.isFullScan)("compact",a.isCompactMode)("has-chip",
a.hasChip);_.y();_.E(!a.isCompactMode&&a.isFullScan?2:-1);_.y();_.E(a.isCompactMode&&a.hasChip?3:-1);_.y(3);_.S(" ",_.W(7,19,a.header)," ");_.y(2);_.H("ngTemplateOutlet",c);_.y();_.E(a.isCompactMode?-1:9);_.y();_.E((b=a.node.datum==null?null:a.node.datum.stats==null?null:a.node.datum.stats.rows)?10:-1,b);_.y();_.E(a.isCompactMode?-1:11);_.y();_.E(a.isMachineGroupColorEnabled()?12:-1)}};
Pro=function(a,b){a&1&&(_.I(0,"div",27),_.Bg(1,6),_.K(2,"span",30),_.Cg(),_.J());a&2&&(_.y(2),_.H("cfcTooltip",_.gh(b)),_.Eg(b),_.Fg(1))};Qro=function(a,b){a&1&&(_.I(0,"div",28),_.Bg(1,7),_.K(2,"span",30),_.Cg(),_.J());a&2&&(_.y(2),_.H("cfcTooltip",_.gh(b)),_.Eg(b),_.Fg(1))};Rro=function(a){a&1&&(_.I(0,"div",29),_.N(1,8),_.J())};
Sro=function(a){a&1&&(_.I(0,"div",26),_.D(1,Pro,3,3,"div",27),_.D(2,Qro,3,3,"div",28),_.D(3,Rro,2,0,"div",29),_.J());if(a&2){let b,c;a=_.Q(2);_.y();_.E((b=a.node.datum==null?null:a.node.datum.scanTarget)?1:-1,b);_.y();_.E((c=a.node.datum==null?null:a.node.datum.indexName)?2:-1,c);_.y();_.E(a.isFullScan?3:-1)}};Tro=function(a){a&1&&_.D(0,Sro,4,3,"div",26);a&2&&(a=_.Q(),_.E((a.node.datum==null?0:a.node.datum.scanTarget)||(a.node.datum==null?0:a.node.datum.indexName)?0:-1))};
Uro=function(a,b){if(a&1){const c=_.l();_.ee();_.I(0,"g",30);_.P("nodeSelectionChanged",function(){const d=_.m(c).$implicit,e=_.Q(2);return _.p(e.selectNode(d))});_.J()}a&2&&(a=b.$implicit,b=_.Q(2),_.H("node",a)("totalLatencyMs",b.totalLatencyMs)("totalCpuTimeMs",b.totalCpuTimeMs)("totalCost",b.totalCost)("isCompactMode",b.layoutMode==="compact")("layout",b.nodeLayout)("shadowFilterId","query-plan-node-shadow")("isMachineGroupColorEnabled",b.isMachineGroupColorEnabled()))};
Vro=function(a,b){if(a&1){const c=_.l();_.ee();_.I(0,"g",24)(1,"defs")(2,"filter",25);_.K(3,"feOffset",26)(4,"feGaussianBlur",27);_.I(5,"feComponentTransfer");_.K(6,"feFuncA",28);_.J()()()();_.I(7,"g",29);_.P("onLayoutUpdated",function(d){_.m(c);const e=_.Q();return _.p(e.setLayout(d))})("onPanChange",function(d){_.m(c);const e=_.Q();return _.p(e.updatePanState(d))})("onZoomChange",function(d){_.m(c);const e=_.Q();return _.p(e.setZoom(d.scale))})("onSelectionChange",function(d){_.m(c);const e=_.Q();
return _.p(e.fireSelectionChangedEvent(d))})("onViewPortChange",function(d){_.m(c);const e=_.Q();return _.p(e.updateViewPort(d))});_.C(8,Uro,1,8,"ng-template",null,5,_.rh);_.J()}if(a&2){a=b.$implicit;b=_.Yg(9);const c=_.Q(),d=_.Yg(8),e=_.Yg(10),f=_.Yg(12);_.y(7);_.H("graph",c.graph)("nodeTemplate",b)("linkTemplate",d)("layoutController",c.layoutController())("linkHoverCardTemplate",e)("linksExpandCollapseTemplate",f)("height",a.height)("width",a.width)("focusConfig",c.focusConfig)("selectionConfig",
c.selectionConfig)("selection",c.flowDiagramSelection)("panAction",c.panAction)("zoomAction",c.zoomAction)("zoomConfig",c.zoomConfig)("ariaLabelProvider",c.ariaLabelProvider)("stylesheet",c.stylesheet)("nodeFocusOutlineTemplate",null)}};
Wro=function(a){if(a&1){const b=_.l();_.ee();_.I(0,"svg",31)(1,"g",32);_.P("onNavigate",function(c){_.m(b);const d=_.Q();return _.p(d.onPanAction(c))});_.J()()}if(a&2){a=_.Q();const b=_.Yg(6),c=_.Yg(8),d=_.Yg(12);_.$g("fr-qpv-minimap-tr",a.isMinimapInPosition(a.MinimapPosition.TOP_RIGHT))("fr-qpv-minimap-bl",a.isMinimapInPosition(a.MinimapPosition.BOTTOM_LEFT))("fr-qpv-minimap-br",a.isMinimapInPosition(a.MinimapPosition.BOTTOM_RIGHT))("fr-qpv-minimap-tr--summary-cards-toogle-button-above-minimap",
a.isSummaryCardsToggleButtonAboveMinimap()&&a.isMinimapInPosition(a.MinimapPosition.TOP_RIGHT));_.H("fxFlex",_.hh("",a.minimapWidth,"px"));_.ng("width",a.minimapWidth)("height",a.minimapHeight);_.y();_.H("nodeTemplate",b)("expandCollapseTemplate",d)("linkTemplate",c)("nodeFocusOutlineTemplate",null)("maxWidth",a.minimapWidth)("maxHeight",a.minimapHeight)("layout",a.layout)("fillColor",a.minimapFillColor)("frameColor",a.minimapFrameColor)("viewPortFrameRect",a.currentViewPortFrame)("zoomLevel",a.zoomLevel)}};
Xro=function(a,b){a&1&&(_.ee(),_.K(0,"g",33));a&2&&(a=b.$implicit,b=_.Q(),_.H("node",a)("totalLatencyMs",b.totalLatencyMs)("totalCpuTimeMs",b.totalCpuTimeMs)("totalCost",b.totalCost)("isCompactMode",b.layoutMode==="compact")("shadowFilterId","query-plan-node-shadow")("layout",b.nodeLayout)("isMinimap",!0)("isMachineGroupColorEnabled",b.isMachineGroupColorEnabled()))};
Yro=function(a,b){a&1&&(_.ee(),_.K(0,"g",34));if(a&2){b=b.$implicit;const d=_.Q();a=_.H("link",b);var c=b.flows[0].data;c=d.isMachineGroupColorEnabled()&&(c==null?0:c.isMachineGroupColorVisible)&&(c==null?0:c.targetNodeMachineGroupId)?{linkColor:{normal:d.machineGroupColorPipe.transform(c.targetNodeMachineGroupId)}}:{};a("stylesheet",c)("strokeDashArray",d.linkStrokeWidth(b.id.targetNodeId))}};
Zro=function(a){a&1&&(_.I(0,"p",38),_.R(1," Change of machine group "),_.I(2,"span",39),_.U(3,"machineGroupColor"),_.R(4),_.J(),_.R(5," -> "),_.I(6,"span",39),_.U(7,"machineGroupColor"),_.R(8),_.J()());a&2&&(_.Q(),a=_.Jg(0),_.y(2),_.Zg("background-color",_.W(3,6,a.sourceNodeMachineGroupId)),_.y(2),_.S(" ",a.sourceNodeMachineGroupId," "),_.y(2),_.Zg("background-color",_.W(7,8,a.targetNodeMachineGroupId)),_.y(2),_.S(" ",a.targetNodeMachineGroupId," "))};
$ro=function(a){a&1&&(_.Hg(0),_.D(1,Zro,9,10,"p",38));if(a&2){var b=_.Q().$implicit;a=_.Q();b=_.Ig(b.flows[0].data);_.y();_.E(a.isMachineGroupColorEnabled()&&b.sourceNodeMachineGroupId&&b.targetNodeMachineGroupId&&b.sourceNodeMachineGroupId!==b.targetNodeMachineGroupId?1:-1)}};
aso=function(a,b){a&1&&(_.I(0,"mat-card",35)(1,"div")(2,"p",36),_.R(3),_.J(),_.I(4,"p",37),_.N(5,10),_.J(),_.D(6,$ro,2,2),_.J()());a&2&&(a=b.$implicit,b=_.Q(),_.Zg("--mat-card-outlined-container-color",b.HOVER_CARD_BACKGROUND),_.y(3),_.S(" ",b.returnedRowsTextForNode(a.id.targetNodeId)," "),_.y(3),_.E(a.flows.length>0?6:-1))};
bso=function(a,b){a&1&&(_.ee(),_.K(0,"g",41));a&2&&(a=b.$implicit,_.H("width",a.width)("height",a.height)("shadowFilterUrl",a.shadowFilterUrl)("isFocused",a.isFocused)("isHovered",a.isHovered)("isCollapsed",a.isCollapsed)("isVertical",a.isVertical))};cso=function(a,b){a&1&&(_.ee(),_.I(0,"g",40),_.C(1,bso,1,7,"ng-template",null,6,_.rh),_.J());a&2&&(a=b.$implicit,b=_.Yg(2),_.H("entity",a)("iconTemplate",b))};
dso=function(a){if(a&1){const b=_.l();_.I(0,"cfc-menu-item",47);_.P("click",function(){_.m(b);const c=_.Q(2);return _.p(c.selectMinimapPosition(c.MinimapPosition.TOP_RIGHT))});_.J();_.I(1,"cfc-menu-item",48);_.P("click",function(){_.m(b);const c=_.Q(2);return _.p(c.selectMinimapPosition(c.MinimapPosition.BOTTOM_LEFT))});_.J();_.I(2,"cfc-menu-item",49);_.P("click",function(){_.m(b);const c=_.Q(2);return _.p(c.selectMinimapPosition(c.MinimapPosition.BOTTOM_RIGHT))});_.J()}a&2&&(a=_.Q(2),_.H("icon",
a.getDoneIconIfSelected(a.MinimapPosition.TOP_RIGHT)),_.y(),_.H("icon",a.getDoneIconIfSelected(a.MinimapPosition.BOTTOM_LEFT)),_.y(),_.H("icon",a.getDoneIconIfSelected(a.MinimapPosition.BOTTOM_RIGHT)))};
eso=function(a){if(a&1){const b=_.l();_.I(0,"div",23)(1,"button",42);_.P("menuOpened",function(){_.m(b);const c=_.Q();return _.p(c.onMinimapControlsMenuOpened())});_.K(2,"cm-icon",43);_.J();_.I(3,"cfc-menu",44,7)(5,"cfc-menu-section",45)(6,"cfc-menu-item",46);_.P("click",function(){_.m(b);const c=_.Q();return _.p(c.toggleMinimapVisibility())});_.J();_.D(7,dso,3,3);_.J()()()}if(a&2){a=_.Yg(4);const b=_.Q();_.y();_.H("cfcMenuTriggerFor",a);_.y();_.H("icon",b.icons.tuneIcon);_.y(4);_.H("label",b.minimapVisibilityOptionLabel());
_.ng("aria-label",b.minimapVisibilityOptionAriaLabel());_.y();_.E(b.isMinimapVisible()?7:-1)}};
fso=function(a){if(a&1){const b=_.l();_.I(0,"cfc-info-card",0)(1,"cfc-info-card-header")(2,"span",1);_.K(3,"cm-icon",2);_.R(4);_.K(5,"cfc-badge",3);_.J()();_.I(6,"cfc-info-card-body-group")(7,"cfc-info-card-item")(8,"div",4);_.R(9);_.J()()();_.I(10,"cfc-info-card-body-group",5)(11,"cfc-info-card-item",6)(12,"span");_.R(13);_.J();_.I(14,"span",7);_.R(15);_.J()()();_.I(16,"cfc-info-card-footer")(17,"button",8);_.P("click",function(){_.m(b);const c=_.Q();return _.p(c.showDetailIndexRecommendation())});
_.K(18,"cm-icon",2);_.I(19,"span");_.R(20);_.J()()()()}a&2&&(a=_.Q(),_.H("showGutter",!1),_.y(3),_.H("icon",a.recBlueBulbIcon),_.y(),_.S(" ",a.titleText," "),_.y(5),_.S(" ",a.recommendationActionText," "),_.y(4),_.S(" ",a.performanceText," "),_.y(2),_.S(" ",a.expectedImprovement," "),_.y(3),_.H("icon",a.arrowForwardIcon),_.y(2),_.S(" ",a.viewDetailsButtonText," "))};gso=function(a){a&1&&_.zg(0)};
iso=function(a,b){a&1&&(_.L(0),_.I(1,"div",5),_.K(2,"div",6),_.I(3,"div",7),_.K(4,"div",8),_.I(5,"div",9),_.C(6,gso,1,0,"ng-container",10),_.J()()(),_.M());if(a&2){a=b.$implicit;b=_.Q();_.y(2);var c=0;a===b.selectedRow&&(c=a.childRowCount*33);_.H("ngStyle",{left:`calc(${(a.startTimeUnits-b.originTimeUnits)*b.percentPerTimeUnit}% - ${30}px)`,height:c.toString()+"px"});_.y();_.$g("ac-gantt-row-selected",a===b.selectedRow);_.y();_.ah(_.hh("ac-gantt-row-bar ac-gantt-row-bar-themed ",a.errorClass,"-row-bar-themed"));
_.H("ngStyle",{left:`${(a.startTimeUnits-b.originTimeUnits||0)*b.percentPerTimeUnit}%`,width:`${(a.widthTimeUnits||0)*b.percentPerTimeUnit}%`,"min-width":a.widthTimeUnits===null?"0":"1px"});_.y();c=b.totalTimeUnits-a.startTimeUnits;let d=(a.startTimeUnits-b.originTimeUnits)*b.percentPerTimeUnit;a.startTimeUnits>(b.totalTimeUnits+b.originTimeUnits)*.9?(d=b.totalTimeUnits*.9*b.percentPerTimeUnit,a.isShifted=!0):a.startTimeUnits<0&&(d=-b.originTimeUnits/b.totalTimeUnits*100,a.isShifted=!0);_.H("ngStyle",
{left:`${d}%`,"max-width":`${(c||0)*b.percentPerTimeUnit}%`,width:`${100-d}%`});_.y();_.H("ngTemplateOutlet",b.rowTemplate)("ngTemplateOutletContext",_.lh(10,hso,a))}};kso=function(a,b){a&1&&(_.I(0,"div",11)(1,"div",12),_.R(2),_.J(),_.I(3,"div",13),_.R(4),_.J()());a&2&&(a=b.$implicit,_.H("ngStyle",_.lh(3,jso,a.styleWidth)),_.y(2),_.bh(a.rightEdgeLabel),_.y(2),_.bh(a.rightEdgeLabel))};
lso=function(a,b){if(a&1){const c=_.l();_.I(0,"div",15);_.P("click",function(){const d=_.m(c).$implicit,e=_.Q(2);return _.p(e.fireWorkstreamClickedEvent(d))});_.I(1,"div");_.R(2);_.J()()}a&2&&(a=b.$implicit,_.y(2),_.bh(a.workstream.name))};mso=function(a){a&1&&(_.I(0,"p"),_.Bg(1,3),_.K(2,"i"),_.Cg(),_.J())};nso=function(a){a&1&&(_.I(0,"p"),_.Bg(1,4),_.K(2,"i"),_.Cg(),_.J())};oso=function(a){a&1&&(_.I(0,"p"),_.Bg(1,5),_.K(2,"i"),_.Cg(),_.J())};
pso=function(a){a&1&&(_.I(0,"cfc-message",14)(1,"cfc-message-text"),_.N(2,6),_.J()())};
qso=function(a){a&1&&(_.I(0,"div",11)(1,"ac-gantt-chart",12),_.C(2,lso,3,1,"ng-template",null,0,_.rh),_.J(),_.I(4,"div",13),_.D(5,mso,3,0,"p")(6,nso,3,0,"p")(7,oso,3,0,"p"),_.J(),_.D(8,pso,3,0,"cfc-message",14),_.J());if(a&2){let b;a=_.Q();_.y();_.$g("fr-qpv-ac-gantt-chart",a.isMachineGroupColorEnabled());_.H("originTimeUnits",0)("columnTimeUnitWidths",a.columnWidths)("selectedRow",a.selectedRow)("rowModels",a.rowModels);_.y(4);_.E((b=a.unit)===a.TimeUnits.MICROSECONDS?5:b===a.TimeUnits.MILLISECONDS?
6:b===a.TimeUnits.SECONDS?7:-1);_.y(3);_.E(a.workstreams.length?-1:8)}};rso=function(a){if(a&1){const b=_.l();_.I(0,"fr-qpv-index-recommendation-card",16);_.P("indexRecommendationClicked",function(c){_.m(b);const d=_.Q();return _.p(d.indexRecommendationClicked.emit(c))});_.J()}a&2&&(a=_.Q(),_.H("queryAdvice",a.queryAdvice))};sso=function(a,b){a&1&&_.K(0,"cm-icon",18);a&2&&_.H("icon",b)};uso=function(a){a&1&&_.K(0,"cm-icon",18);a&2&&(a=_.Q().$implicit,_.Q(),_.H("icon",tso(a.footer.severity)))};
vso=function(a){a&1&&(_.I(0,"span",27),_.R(1),_.J());a&2&&(a=_.Q().$implicit,_.y(),_.S(" ",a.suffix," "))};wso=function(a,b){a&1&&(_.I(0,"div",26),_.R(1),_.D(2,vso,2,1,"span",27),_.J());a&2&&(a=b.$implicit,_.y(),_.S(" ",a.prefix," "),_.y(),_.E(a.suffix?2:-1))};xso=function(a,b){a&1&&(_.I(0,"div",19),_.rg(1,wso,3,2,"div",26,_.pg),_.J());a&2&&(_.y(),_.tg(b))};yso=function(a){a&1&&(_.I(0,"a",28),_.N(1,0),_.J());a&2&&(a=_.Q(),_.H("track-name",_.gh(a.trackingEventName))("cfcDocLink",a.internalLearnMoreLink))};
zso=function(a){a&1&&(_.I(0,"a",29),_.N(1,1),_.J());a&2&&(a=_.Q(),_.H("track-name",_.gh(a.trackingEventName))("cfc-external-link",a.externalLearnMoreLink))};Aso=function(a,b){a&1&&(_.I(0,"span",19),_.R(1),_.D(2,yso,2,3,"a",28),_.D(3,zso,2,3,"a",29),_.J());a&2&&(_.y(),_.S(" ",b.text," "),_.y(),_.E(b.internalLearnMoreLink?2:-1),_.y(),_.E(b.externalLearnMoreLink?3:-1))};Bso=function(a,b){a&1&&(_.I(0,"div",30)(1,"mat-chip",31),_.R(2),_.J()());a&2&&(a=b.$implicit,_.y(2),_.S(" ",a," "))};
Cso=function(a,b){a&1&&(_.I(0,"div",20),_.rg(1,Bso,3,1,"div",30,_.pg),_.J());a&2&&(_.y(),_.tg(b))};Dso=function(a){if(a&1){const b=_.l();_.I(0,"div",21)(1,"button",32);_.P("click",function(){_.m(b);const c=_.Q().$implicit,d=_.Q();d.analyticsService.sendEvent({type:"query-plan-visualizer",name:"queryExplanationDetailsCloseButtonClicked",metadata:{cardType:c.header.title}});d.detailsCloseButtonClicked.emit(c);return _.p()});_.K(2,"cfc-icon",33);_.J()()}};
Eso=function(a){a&1&&(_.I(0,"a",37),_.N(1,2),_.J());a&2&&(a=_.Q(),_.H("cfcDocLink",a.internalLearnMoreLink))};Fso=function(a){a&1&&(_.I(0,"a",38),_.N(1,3),_.J());a&2&&(a=_.Q(),_.H("cfc-external-link",a.externalLearnMoreLink))};Gso=function(a,b){a&1&&(_.I(0,"cfc-help-button",35),_.K(1,"span",36),_.D(2,Eso,2,1,"a",37),_.D(3,Fso,2,1,"a",38),_.J());a&2&&(_.H("ariaLabel",b.helpButtonAriaLabel),_.y(),_.H("innerText",b.text),_.y(),_.E(b.internalLearnMoreLink?2:-1),_.y(),_.E(b.externalLearnMoreLink?3:-1))};
Hso=function(a){a&1&&_.R(0);a&2&&(a=_.Q().$implicit,_.S(" ",a.unit," "))};Iso=function(a,b){a&1&&(_.I(0,"div")(1,"dt",34),_.R(2),_.D(3,Gso,4,4,"cfc-help-button",35),_.J(),_.I(4,"dd"),_.R(5),_.D(6,Hso,1,1),_.J()());if(a&2){let c;a=b.$implicit;_.y(2);_.S(" ",a.label," ");_.y();_.E((c=a.tooltip)?3:-1,c);_.y(2);_.S(" ",a.value," ");_.y();_.E(a.unit?6:-1)}};Jso=function(a){a&1&&(_.I(0,"dl",23),_.rg(1,Iso,7,4,"div",null,_.pg),_.J());a&2&&(_.Q(),a=_.Jg(13),_.H("pinlinesVisible",!1),_.y(),_.tg(a))};
Kso=function(a,b){a&1&&(_.I(0,"li",34),_.R(1),_.J());a&2&&(a=b.$implicit,_.y(),_.S(" ",a.prefix," "))};Lso=function(a){a&1&&(_.I(0,"ul",45),_.rg(1,Kso,2,1,"li",34,_.pg),_.J());a&2&&(_.Q(),a=_.Jg(2),_.y(),_.tg(a))};Mso=function(a,b){a&1&&(_.I(0,"p",26),_.R(1),_.J(),_.Hg(2),_.D(3,Lso,3,0,"ul",45));a&2&&(_.y(),_.S(" ",b.title," "),_.y(),a=_.Ig(b.subtitle),_.y(),_.E((a==null?0:a.length)?3:-1))};Nso=function(a){a&1&&_.R(0);a&2&&(a=_.Q().$implicit,_.S(" ",a.unit," "))};
Pso=function(a){if(a&1){const b=_.l();_.I(0,"button",47);_.P("click",function(){_.m(b);const c=_.Q().$implicit,d=_.Q(6);return _.p(Oso(d,c.prominentOperator))});_.K(1,"cm-icon",48);_.J()}if(a&2){a=_.Q().$implicit;const b=_.Q(6);_.H("cfcTooltip",a.prominentOperator.tooltip);_.ng("aria-label",a.prominentOperator.ariaLabel);_.y();_.H("icon",b.icons.linkIcon)}};
Qso=function(a,b){a&1&&(_.I(0,"div")(1,"dt",34),_.R(2),_.J(),_.I(3,"dd"),_.R(4),_.D(5,Nso,1,1),_.D(6,Pso,2,3,"button",46),_.J()());a&2&&(a=b.$implicit,_.y(2),_.S(" ",a.label," "),_.y(2),_.S(" ",a.value," "),_.y(),_.E(a.unit?5:-1),_.y(),_.E(a.prominentOperator?6:-1))};Rso=function(a){a&1&&(_.I(0,"dl",44),_.rg(1,Qso,7,4,"div",null,_.pg),_.J());a&2&&(_.Q(),a=_.Jg(2),_.H("pinlinesVisible",!1),_.y(),_.tg(a))};
Sso=function(a,b){a&1&&(_.I(0,"div",43),_.D(1,Mso,4,3),_.Hg(2),_.D(3,Rso,3,1,"dl",44),_.J());if(a&2){var c;a=b.$implicit;_.y();_.E((c=a.header)?1:-1,c);_.y();c=_.Ig(a.executionStats);_.y();_.E((c==null?0:c.length)?3:-1)}};Tso=function(a){a&1&&(_.I(0,"cfc-info-card-item"),_.rg(1,Sso,4,3,"div",43,_.pg),_.J());a&2&&(a=_.Q(),_.y(),_.tg(a.groups))};
Uso=function(a,b){if(a&1){const d=_.l();_.I(0,"cfc-info-card-body-group",39)(1,"cfc-info-card-header")(2,"div",40)(3,"div",41);_.R(4);_.U(5,"sentenceCase");_.J();_.I(6,"cfc-expand-button",42);_.P("toggle",function(){_.m(d);const e=_.Q().$implicit;_.Q();e.additionalInfo&&(e.additionalInfo.isCollapsed=!e.additionalInfo.isCollapsed);return _.p()});_.J()()();_.D(7,Tso,3,0,"cfc-info-card-item");_.J()}if(a&2){var c=_.Q();a=c.$implicit;c=c.$index;_.$g("cfc-space-below-minus-4",a.additionalInfo.isCollapsed);
_.y(4);_.S(" ",_.W(5,7,b.title)," ");_.y(2);_.H("iconButton",!0)("collapsed",!!a.additionalInfo.isCollapsed);_.ng("data-test-id","fr-sc-additional-info-expander-"+c);_.y();_.E(a.additionalInfo.isCollapsed?-1:7)}};Vso=function(a,b){a&1&&(_.I(0,"cfc-info-card-body-group",25)(1,"cfc-info-card-item",15)(2,"cfc-message",49)(3,"cfc-message-text"),_.R(4),_.J()()()());a&2&&(_.y(),_.H("showGutter",!1),_.y(),_.H("type",b.severity),_.y(2),_.S(" ",b.message," "))};
Wso=function(a,b){a&1&&(_.I(0,"cfc-info-card",13)(1,"cfc-info-card-header")(2,"span",17),_.D(3,sso,1,1,"cm-icon",18)(4,uso,1,1,"cm-icon",18),_.R(5),_.U(6,"sentenceCase"),_.J(),_.D(7,xso,3,0,"div",19),_.D(8,Aso,4,3,"span",19),_.D(9,Cso,3,0,"div",20),_.J(),_.D(10,Dso,3,0,"div",21),_.I(11,"cfc-info-card-body-group",22)(12,"cfc-info-card-item"),_.Hg(13),_.D(14,Jso,3,1,"dl",23),_.J()(),_.D(15,Uso,8,9,"cfc-info-card-body-group",24),_.D(16,Vso,5,3,"cfc-info-card-body-group",25),_.J());if(a&2){var c;let d,
e,f,g,n;a=b.$implicit;_.H("showGutter",!1);_.y(3);_.E((c=a.header.titleIcon)?3:a.footer?4:-1,c);_.y(2);_.S(" ",_.W(6,10,a.header.title)," ");_.y(2);_.E((d=a.header.subtitle)?7:-1,d);_.y();_.E((e=a.header.description)?8:-1,e);_.y();_.E((f=a.header.chips)?9:-1,f);_.y();_.E(a.isDismissible?10:-1);_.y(3);c=_.Ig(a.primaryBodyGroup.executionStats);_.y();_.E(c.length?14:-1);_.y();_.E((g=a.additionalInfo)?15:-1,g);_.y();_.E((n=a.footer)?16:-1,n)}};
Xso=function(a){if(a&1){const b=_.l();_.I(0,"fr-qpv-workstream-gantt-chart",50);_.P("workstreamClicked",function(c){_.m(b);const d=_.Q();return _.p(d.fireWorkstreamClickedEvent(c))});_.J()}a&2&&(a=_.Q(),_.H("workstreams",a.workstreams)("selectedWorkstream",a.selectedWorkstream)("isMachineGroupColorEnabled",a.isMachineGroupColorEnabled()))};
Yso=function(a){a&1&&(_.I(0,"cfc-info-card",15)(1,"cfc-info-card-header")(2,"span",51),_.N(3,4),_.J()(),_.I(4,"cfc-info-card-body-group",22)(5,"cfc-info-card-item")(6,"dl",52)(7,"div")(8,"dt"),_.ee(),_.I(9,"svg",53),_.K(10,"g",54),_.J()(),_.fe(),_.I(11,"dd",55),_.N(12,5),_.J()(),_.I(13,"div")(14,"dt"),_.ee(),_.I(15,"svg",56),_.K(16,"g",54),_.J()(),_.fe(),_.I(17,"dd",55),_.N(18,6),_.J()()()()(),_.I(19,"cfc-info-card-body-group",22)(20,"cfc-info-card-item")(21,"div",57),_.N(22,7),_.J(),_.I(23,"div",
57),_.N(24,8),_.J(),_.I(25,"div",57),_.N(26,9),_.J()()()());a&2&&(a=_.Q(),_.H("showGutter",!1),_.y(6),_.H("pinlinesVisible",!1),_.y(4),_.H("link",a.link)("strokeDashArray","0 0"),_.y(6),_.H("link",a.link)("strokeDashArray","3 3"))};
_.$so=function(a){const b=Zso(a,e=>{let f;return(f=e.stats)==null?void 0:f.latencyMs}),c=Zso(a,e=>{let f;return(f=e.stats)==null?void 0:f.cpuTimeMs}),d=Zso(a,e=>{let f;return(f=e.stats)==null?void 0:f.rows});a=Zso(a,e=>{let f;return(f=e.stats)==null?void 0:f.cost});return{longestByLatency:b,longestByCpuTime:c,largestByRows:d,costliest:a}};
Zso=function(a,b){return a.reduce((c,d)=>{const e=b(d);if(!e)return c;if(c){const f=c.value;if(f>e)return c;if(f===e)return{nodeIds:[...c.nodeIds,String(d.index||0)],value:f}}return{nodeIds:[String(d.index||0)],value:e}},void 0)};
_.ato=function(a,b,c=[]){return a.map(d=>{var e,f=(e=d.stats)==null?void 0:e.cpuTimeMs,g;e=(g=d.stats)==null?void 0:g.latencyMs;var n;g=(n=d.stats)==null?void 0:n.cost;var q;n=(q=d.stats)==null?void 0:q.rows;let r;q=!!e&&e===(b==null?void 0:(r=b.longestByLatency)==null?void 0:r.value);var u;f=!!f&&f===(b==null?void 0:(u=b.longestByCpuTime)==null?void 0:u.value);var v;u=!!n&&n===(b==null?void 0:(v=b.largestByRows)==null?void 0:v.value);var x;v=!!g&&g===(b==null?void 0:(x=b.costliest)==null?void 0:
x.value);x=q||f||u||v;g=-1;d.index!==void 0&&(g=c.findIndex(B=>{let F;return(F=B.nodes)==null?void 0:F.includes(d.index.toString())}));return Object.assign({},d,{machineGroupId:g===-1?void 0:g+1,isMachineGroupColorVisible:!0,isLongestByLatency:q,isLongestByCpuTime:f,isLargest:u,isCostliest:v,hasChips:x})})};bto=function(a){if(a&1){const b=_.l();_.I(0,"div",12)(1,"button",14);_.P("click",function(){_.m(b);const c=_.Q(2);return _.p(c.downloadJson())});_.N(2,3);_.J()()}};
cto=function(a){if(a&1){const b=_.l();_.I(0,"fr-qpv-summary-cards",15);_.P("detailsCloseButtonClicked",function(c){_.m(b);const d=_.Q(2);return _.p(d.closeDetails(c))})("prominentOperatorClicked",function(c){_.m(b);const d=_.Q(2);return _.p(d.selectNodes(c))})("workstreamClicked",function(c){_.m(b);const d=_.Q(2);return _.p(d.toggleSelectedWorkstream(c))})("indexRecommendationClicked",function(c){_.m(b);const d=_.Q(2);return _.p(d.indexRecommendationClicked.emit(c))});_.J()}a&2&&(a=_.Q(2),_.H("summaryCardsConfig",
a.summaryCardsConfig())("queryAdvice",a.queryAdvice)("workstreams",a.workstreams)("selectedWorkstream",a.selectedWorkstream)("showWorkstreams",a.config.showWorkstreams)("isMachineGroupColorEnabled",a.isMachineGroupColorEnabled()))};
dto=function(a){a&1&&(_.I(0,"div",11),_.D(1,bto,3,0,"div",12),_.D(2,cto,1,6,"fr-qpv-summary-cards",13),_.J());a&2&&(a=_.Q(),_.$g("cfc-space-above-plus-5",!a.queryPlanJson&&a.showCollapseSummaryCardsButton),_.y(),_.E(a.queryPlanJson?1:-1),_.y(),_.E(a.config.showCards?2:-1))};eto=function(a){if(a&1){const b=_.l();_.I(0,"fr-collapse-button",16);_.P("isExpanded",function(c){_.m(b);const d=_.Q();return _.p(d.expandButtonForSummaryCardsClicked(c))});_.J()}a&2&&(a=_.Q(),_.H("expanded",a.isExpanded))};
fto=function(a,b=_.fr(a.projectParamService)){return _.gdo(a,_.cdo,b)};_.gto=class extends _.EGn{};_.gto.\u0275fac=function(a){return new (a||_.gto)(_.mf(_.Ze))};
_.gto.\u0275cmp=_.z({type:_.gto,selectors:[["vi-size-projector-svg"]],standalone:!1,features:[_.ig],decls:1,vars:1,consts:[["style","display: block; position: absolute; top: 0; left: 0;",4,"ngIf"],[2,"display","block","position","absolute","top","0","left","0"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(a,b){a&1&&_.C(0,oro,2,6,"svg",0);a&2&&_.H("ngIf",b.dims)},dependencies:[_.Zn,_.eo],styles:["[_nghost-%COMP%] {display: block; position: relative;}"],changeDetection:0});
hto=a=>[a];ito=(a,b)=>[a,b];rro=function(a){return Math.min(a.viewPortFrameRect.width*a.frameScale,a.maxWidth)};sro=function(a){return Math.min(a.viewPortFrameRect.height*a.frameScale,a.maxHeight)};
jto=function(a){const b=d=>d.elementId?Object.assign({},d,{elementId:`${a.minimapId}-${d.elementId}`}):d,c=[...a.layout.nodeExpanders.entries()].map(d=>[`${a.minimapId}-${d[0]}`,b(d[1])]);a.layoutWithRemappedDomElementIds={width:a.layout.width,height:a.layout.height,orientation:a.layout.orientation,sections:a.layout.sections.map(b),nodes:a.layout.nodes.map(b),links:a.layout.links.map(b),expandCollapseBlocks:a.layout.expandCollapseBlocks.map(b),nodeExpanders:new Map(c)}};
kto=function(a,b){const c=rro(a),d=sro(a);a.onNavigate.emit({x:Math.max(Math.min(b.x,a.maxWidth-c/2)-c/2,0)/a.frameScale,y:Math.max(Math.min(b.y,a.maxHeight-d/2)-d/2,0)/a.frameScale})};
_.lto=class{get stylesheet(){const a={};this.fillColor&&(a.backgroundColor=this.fillColor);this.frameColor&&(a.outlineColor=this.frameColor);return a}constructor(){this.maxHeight=this.maxWidth=100;this.viewPortFrameRect=_.uro();this.zoomLevel=1;this.onNavigate=new _.Ji;this.frameScale=this.minimapScale=1;this.frameOffset={x:0,y:0};this.appliedStylesheet={};this.frameMargin=1;this.destroyRef=_.k(_.$e);this.cdr=_.k(_.Sn);this.stylesheetService=_.k(_.c7);this.minimapId=_.dEn("flow-diagram-minimap-");
let a;this.defaultStylesheet=(a=_.k(_.THn,{optional:!0}))!=null?a:{backgroundColor:_.$6.WHITE,outlineColor:_.$6.BLUE_600};this.fullStylesheet=this.getCombinedStylesheet()}ngOnInit(){this.stylesheetService&&this.stylesheetService.stylesheets$.pipe(_.w(a=>a.get("'flow-diagram-minimap-component-style")||{}),_.Ij(this.destroyRef)).subscribe(a=>{this.appliedStylesheet=a;this.fullStylesheet=this.getCombinedStylesheet();this.cdr.markForCheck()})}ngOnChanges(a){a.layout&&jto(this);if(a.fillColor||a.frameColor)this.fullStylesheet=
this.getCombinedStylesheet();this.minimapScale=this.layout.width===0||this.layout.height===0?0:Math.min(this.maxWidth/this.layout.width,this.maxHeight/this.layout.height);this.frameScale=this.minimapScale/this.zoomLevel;this.frameOffset={x:this.viewPortFrameRect.x*this.frameScale+1,y:this.viewPortFrameRect.y*this.frameScale+1}}getCombinedStylesheet(){return Object.assign({},this.defaultStylesheet,this.appliedStylesheet,this.stylesheet)}handleMouseDown(a){kto(this,{x:a.offsetX,y:a.offsetY})}handleMouseMove(a){a.buttons>
0&&kto(this,{x:a.offsetX,y:a.offsetY})}};_.lto.\u0275fac=function(a){return new (a||_.lto)};
_.lto.\u0275cmp=_.z({type:_.lto,selectors:[["","vi-flow-diagram-minimap",""]],inputs:{maxWidth:"maxWidth",maxHeight:"maxHeight",nodeTemplate:"nodeTemplate",linkTemplate:"linkTemplate",fillColor:"fillColor",frameColor:"frameColor",layout:"layout",expandCollapseTemplate:"expandCollapseTemplate",sectionTemplate:"sectionTemplate",linkLabelTemplate:"linkLabelTemplate",nodeFocusOutlineTemplate:"nodeFocusOutlineTemplate",viewPortFrameRect:"viewPortFrameRect",zoomLevel:"zoomLevel"},outputs:{onNavigate:"onNavigate"},
standalone:!1,features:[_.jh([{provide:_.NHn,useValue:new _.hQn}]),_.Ln],attrs:["vi-flow-diagram-minimap",""],decls:6,vars:19,consts:[[0,"xmlns","svg","http://www.w3.org/2000/svg"],["width","100%","height","100%",1,"minimap-background-frame"],["vi-flow-diagram-view","","viTransform","",3,"scale","layout","nodeTemplate","linkTemplate","linksExpandCollapseTemplate","sectionTemplate","linkLabelTemplate","nodeFocusOutlineTemplate","isStaticImageMode"],["viTransform","",1,"minimap-view-port-frame",3,"translate"],
["style","fill: none;",3,"stroke",4,"ngIf"],["width","100%","height","100%",1,"minimap-front-rect",3,"mousedown","mousemove"],[2,"fill","none"]],template:function(a,b){a&1&&(_.ee(),_.I(0,"g",0),_.K(1,"rect",1)(2,"g",2),_.I(3,"g",3),_.C(4,tro,1,4,"rect",4),_.J(),_.I(5,"rect",5),_.P("mousedown",function(c){return b.handleMouseDown(c)})("mousemove",function(c){return b.handleMouseMove(c)}),_.J()());a&2&&(_.y(),_.ng("fill",b.fullStylesheet.backgroundColor),_.y(),_.H("scale",_.lh(14,hto,b.minimapScale))("layout",
b.layoutWithRemappedDomElementIds)("nodeTemplate",b.nodeTemplate)("linkTemplate",b.linkTemplate)("linksExpandCollapseTemplate",b.expandCollapseTemplate)("sectionTemplate",b.sectionTemplate)("linkLabelTemplate",b.linkLabelTemplate)("nodeFocusOutlineTemplate",b.nodeFocusOutlineTemplate)("isStaticImageMode",!0),_.y(),_.H("translate",_.mh(16,ito,b.frameOffset.x,b.frameOffset.y)),_.y(),_.H("ngIf",rro(b)>2*b.frameMargin&&sro(b)>2*b.frameMargin),_.y(),_.Zg("opacity",0))},dependencies:[_.Zn,_.d7,_.sRn],encapsulation:2,
changeDetection:0});
_.mto=class{constructor(){this.analyticsService=_.k(_.jp);this.expanded=!0;this.expandsLeftToRight=_.sh(!1);this.iconSize=_.sh(0);this.ariaLabelClickToExpand=_.sh("Click to expand");this.ariaLabelClickToCollapse=_.sh("Click to hide");this.isExpanded=new _.Ji}getAriaLabel(){return this.expanded?this.ariaLabelClickToCollapse():this.ariaLabelClickToExpand()}get pointingTowardsLeft(){return this.expanded!==this.expandsLeftToRight()}get collapseIcon(){return this.iconSize()===0?_.BCg:_.mU}};
_.mto.\u0275fac=function(a){return new (a||_.mto)};
_.mto.\u0275cmp=_.z({type:_.mto,selectors:[["fr-collapse-button"]],inputs:{expanded:"expanded",expandsLeftToRight:[1,"expandsLeftToRight"],iconSize:[1,"iconSize"],ariaLabelClickToExpand:[1,"ariaLabelClickToExpand"],ariaLabelClickToCollapse:[1,"ariaLabelClickToCollapse"]},outputs:{isExpanded:"isExpanded"},decls:2,vars:5,consts:[["mat-icon-button","",1,"fr-toggle-icon","cfc-background-base",3,"click","cfcTooltip"],[3,"icon"]],template:function(a,b){a&1&&(_.I(0,"button",0),_.P("click",function(){b.expanded=
!b.expanded;b.isExpanded.emit(b.expanded);b.analyticsService.sendEvent({type:b.expanded?"expanded":"collapsed",name:"collapseButtonClicked"})}),_.K(1,"cm-icon",1),_.J());a&2&&(_.$g("fr-rotate-toggle-icon",b.pointingTowardsLeft),_.H("cfcTooltip",b.getAriaLabel()),_.ng("aria-label",b.getAriaLabel()),_.y(),_.H("icon",b.collapseIcon))},dependencies:[_.Qu,_.as,_.Jt,_.xt,_.vt,_.Ht,_.uq,_.vq,_.Ot,_.Pt],styles:[".fr-toggle-icon[_ngcontent-%COMP%]{-webkit-transition:-webkit-transform .2s ease;transition:-webkit-transform .2s ease;transition:transform .2s ease;transition:transform .2s ease,-webkit-transform .2s ease}.fr-rotate-toggle-icon[_ngcontent-%COMP%]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}"]});var nto=class{transform(a){return a===void 0?"transparent":`var(${_.eMk(`${"cm.sys.color.charts.line.category"}${a%12+1}`)})`}};nto.\u0275fac=function(a){return new (a||nto)};nto.\u0275pipe=_.uf({name:"machineGroupColor",type:nto,pure:!0});var oto=class{getFlowDiagramLabel(){return"Query plan"}getNodeFromId(a,b){return b.layout.nodes.find(c=>c.id===a)}getNodeDisplayName(a,b){let c,d;return(c=this.getNodeFromId(a,b))==null?void 0:(d=c.datum)==null?void 0:d.displayName}getLinkLabel(a,b){const c=this.getNodeDisplayName(a.id.sourceNodeId,b);a=this.getNodeDisplayName(a.id.targetNodeId,b);if(c&&a)return"Link from "+c+" to "+a}getNodeLabel(a){let b;if((b=a.datum)!=null&&b.displayName){var c;return(c=a.datum)==null?void 0:c.displayName}}getExpandCollapseLabel(a,
b){if(b=this.getNodeDisplayName(a.id,b))return a.isCollapsed?"Expand "+b:"Collapse "+b}};_.M8={latency:"Highest latency",cpuTime:"Highest CPU time",rowCount:"Highest row count",cost:"Highest cost",latencyTooltip:"Select longest operators by latency",cpuTimeTooltip:"Select longest operators by CPU time",rowCountTooltip:"Select largest operators",costTooltip:"Select costliest operators"};_.pto=class{transform(a){return a===void 0||a===null?"":a<1?"<1 ms":a<1E3?_.rk("{NUMBER} ms",{NUMBER:Math.round(a*100)/100}):_.rk("{NUMBER} s",{NUMBER:Math.round(a/1E3*100)/100})}};_.pto.\u0275fac=function(a){return new (a||_.pto)};_.pto.\u0275pipe=_.uf({name:"msDuration",type:_.pto,pure:!0});var qto=class{transform(a){return a?String(a.charAt(0)).toUpperCase()+String(a.substr(1)).toLowerCase():""}};qto.\u0275fac=function(a){return new (a||qto)};qto.\u0275pipe=_.uf({name:"sentenceCase",type:qto,pure:!0});var rto=class{constructor(){this.totalCost=this.totalCpuTimeMs=this.totalLatencyMs=0;this.isMinimap=!1;this.layout="vertical";this.isCompactMode=!1;this.isMachineGroupColorEnabled=_.sh(!1);this.nodeSelectionChanged=new _.Ji;this.header="";this.costBarWidth=this.latencyBarWidth=this.cpuTimeBarWidth=this.costPercent=this.latencyPercent=this.cpuTimePercent=0;this.hasChip=this.isCostliest=this.isLargest=this.isLongestByCpuTime=this.isLongestByLatency=this.isFullScan=!1;this.messages=_.M8;this.stylesheet=
{showBackgroundShadow:{normal:!1,selected:!0,selectedHovered:!0},borderRadius:8}}ngOnChanges(){if(this.node.datum){this.header=this.node.datum.displayName||"Unknown";var a;const c=(a=this.node.datum.stats)==null?void 0:a.cpuTimeMs;var b;a=(b=this.node.datum.stats)==null?void 0:b.latencyMs;let d;b=(d=this.node.datum.stats)==null?void 0:d.cost;this.cpuTimePercent=c&&this.totalCpuTimeMs!==0?c/this.totalCpuTimeMs:0;this.latencyPercent=a&&this.totalLatencyMs!==0?a/this.totalLatencyMs:0;this.costPercent=
b&&this.totalCost!==0?b/this.totalCost:0;this.cpuTimeBarWidth=Math.round(Math.max(this.cpuTimePercent*100,2));this.latencyBarWidth=Math.round(Math.max(this.latencyPercent*100,2));this.costBarWidth=Math.round(Math.max(this.costPercent*100,2));let e,f;this.isFullScan=((e=this.node.datum)==null?void 0:(f=e.metadata)==null?void 0:f["Full scan"])==="true";this.isLongestByLatency=this.node.datum.isLongestByLatency;this.isLongestByCpuTime=this.node.datum.isLongestByCpuTime;this.isLargest=this.node.datum.isLargest;
this.isCostliest=this.node.datum.isCostliest;this.hasChip=this.node.datum.hasChips}this.shadowFilterId&&(this.stylesheet.shadowFilterId={normal:null,selected:this.shadowFilterId||null,selectedHovered:this.shadowFilterId||null})}};rto.\u0275fac=function(a){return new (a||rto)};
rto.\u0275cmp=_.z({type:rto,selectors:[["","fr-qpv-query-plan-node",""]],inputs:{node:"node",totalLatencyMs:"totalLatencyMs",totalCpuTimeMs:"totalCpuTimeMs",totalCost:"totalCost",isMinimap:"isMinimap",shadowFilterId:"shadowFilterId",layout:"layout",isCompactMode:"isCompactMode",isMachineGroupColorEnabled:[1,"isMachineGroupColorEnabled"]},outputs:{nodeSelectionChanged:"nodeSelectionChanged"},features:[_.Ln],attrs:["fr-qpv-query-plan-node",""],decls:5,vars:4,consts:()=>[["content",""],["subheader",
""]," Rows returned: \ufffd0\ufffd "," Latency: \ufffd0\ufffd "," CPU time: \ufffd0\ufffd "," Cost: \ufffd0\ufffd "," on \ufffd#2\ufffd \ufffd0\ufffd \ufffd/#2\ufffd"," using \ufffd#2\ufffd \ufffd0\ufffd \ufffd/#2\ufffd"," Full scan ",["vi-html-node-reactive-mixin","",0,"xmlns","svg","http://www.w3.org/2000/svg",3,"node","stylesheet","isResizeOnReflowDisabled","contentTemplate"],["fxLayout","row","fxLayoutGap","12px"],["icon","status-warning","cfcTooltip","Suggestions available to improve performance",
"left-gutter","",1,"warning-tooltip-trigger"],["icon","status-inactive","left-gutter","","aria-hidden","true",1,"chip-indicator"],[1,"content-container"],[1,"cfc-text-title-4","cfc-space-first","cfc-space-below-minus-6"],[4,"ngTemplateOutlet"],[1,"flex"],[1,"cfc-space-below-minus-4","cfc-text-caption-strong"],[1,"machine-group-color-indicator",3,"background-color"],[1,"chip","cfc-space-below-minus-6"],["color","primary"],[1,"cfc-space-below-minus-6","cfc-text-caption-strong"],["width","120","height",
"10",1,"cfc-space-below-minus-4",3,"cfcTooltip"],[1,"cfc-color-charts-category4-default"],["width","120","height","10",1,"mat-chip-list",3,"cfcTooltip"],[1,"machine-group-color-indicator"],[1,"cfc-space-below-minus-6"],[1,"scan-target-name"],[1,"index-name"],[1,"cfc-space-below-minus-6","cfc-text-body","cfc-color-secondary"],[1,"cfc-text-caption-strong",3,"cfcTooltip"]],template:function(a,b){a&1&&(_.ee(),_.K(0,"g",9),_.C(1,Oro,13,21,"ng-template",null,0,_.rh)(3,Tro,1,1,"ng-template",null,1,_.rh));
a&2&&(a=_.Yg(2),_.H("node",b.node)("stylesheet",b.stylesheet)("isResizeOnReflowDisabled",b.isMinimap)("contentTemplate",a))},dependencies:[_.Qu,_.as,_.dz,_.Py,_.cz,_.Sy,_.yO,_.tO,_.xO,_.Kq,_.Hq,_.eo,_.nQn,_.mQn,_.VB,_.Ot,_.Pt,_.Nt,nto,_.pto,_.$D,_.TB,qto],styles:[".query-plan-node-content[_ngcontent-%COMP%]{padding:10px}.horizontal.query-plan-node[_ngcontent-%COMP%]:not(.compact){width:250px}.horizontal.query-plan-node[_ngcontent-%COMP%]:not(.compact).full-scan{width:280px}.vertical.query-plan-node[_ngcontent-%COMP%]:not(.compact){width:130px}.vertical.query-plan-node[_ngcontent-%COMP%]:not(.compact).full-scan{width:160px}.compact[_ngcontent-%COMP%]{width:130px}.compact.has-chip[_ngcontent-%COMP%]{width:160px}.content-container[_ngcontent-%COMP%], .index-name[_ngcontent-%COMP%], .scan-target-name[_ngcontent-%COMP%]{color:var(--cm-sys-color-on-surface,#000);width:100%;overflow:hidden;text-overflow:ellipsis}.horizontal[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{padding-right:4px}.chip-indicator[_ngcontent-%COMP%]{color:var(--cm-sys-color-primary,#3367d6)}.flex[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.machine-group-color-indicator[_ngcontent-%COMP%]{height:8px;border-radius:0 0 8px 8px}"],
changeDetection:0});var sto,tto,vto;sto={TOP_RIGHT:"Top right",BOTTOM_LEFT:"Bottom left",BOTTOM_RIGHT:"Bottom right"};tto=16/9;_.uto=function(a){a.nodeLayout=a.nodeLayoutInternal&&a.isFullScreen&&!a.isExplanationOnly?a.nodeLayoutInternal:"vertical"};
vto=class{constructor(){this.cdr=_.k(_.Sn);this.analyticsService=_.k(_.jp);this.machineGroupColorPipe=_.k(nto);this.nodesInternal=[];this.showMinimap=!0;this.flowDiagramSelection=_.nJn();this.isFullScreen=!0;this.isExplanationOnly=!1;this.layoutMode="expanded";this.isMachineGroupColorEnabled=_.sh(!1);this.isSummaryCardsToggleButtonAboveMinimap=_.sh(!1);this.showMinimapControls=_.sh(!1);this.layoutModeChange=new _.Ji;this.flowDiagramSelectionChanged=new _.Ji;this.zoomLevel=1;this.zoomLevelChange=new _.Ji;
this.totalCost=this.totalCpuTimeMs=this.totalLatencyMs=0;this.nodeLayout="vertical";this.graph={flows:[]};this.HOVER_CARD_BACKGROUND="var(--cm-sys-color-surface-modal)";this.stylesheet={backgroundColor:"var(--cm-sys-color-status-neutral-container)",panningEnabledCursor:"grab",panningEnabledClickCursor:"grabbing"};this.layoutController=_.Fh(()=>new _.TQn({topologicalAlgorithmKind:"BARYCENTER",geometricalAlgorithmKind:"TREE",orientation:"VERTICAL",link:{breadthRange:{min:12,max:30},capDepth:4,capLocation:"source"},
section:{startSpacing:_.l7(35),endSpacing:_.l7(35),lastSectionEndSpacing:_.l7(35)},node:{startSpacing:{min:100,max:100},endSpacing:{min:100,max:100},unifiedNodeDims:{padding:_.W6(this.isMachineGroupColorEnabled()?0:10)}}}));this.currentViewPortFrame=_.uro();this.minimapWidth=this.minimapHeight=0;this.minimapFillColor="var(--cm-sys-color-placeholder)";this.minimapFrameColor="var(--cm-sys-color-primary)";this.selectionConfig={selectionMode:"single",entityKinds:["NODE","LINK"]};this.focusConfig={allowFocusOnLinks:!0};
this.ariaLabelProvider=new oto;this.zoomConfig={zoomSteps:[.25,.5,.75,1,1.1,1.25,1.5,2],zoomWithMouseWheel:!0,zoomWheelSmoothFactor:1E3};this.icons={tuneIcon:_.SDg,addIcon:_.kA,removeIcon:_.CCg,replayIcon:_.DCg};this.timesAttemptedToSetInitialViewPort=0;this.isMinimapVisible=_.Ug(!0);this.minimapVisibilityOptionLabel=_.Fh(()=>this.isMinimapVisible()?"Hide":"Show");this.minimapVisibilityOptionAriaLabel=_.Fh(()=>this.isMinimapVisible()?"Hide":"Show");this.minimapPosition="Top right";this.MinimapPosition=
sto}set nodes(a){a.find(d=>{let e;return(e=d.metadata)==null?void 0:e["Full scan"]})&&this.analyticsService.sendEvent({type:"query-plan-visualizer",name:"queryExplanationFullScanShown"});const b=this.deriveFlowsFromNodes(a),c=_.qro(b);this.nodesInternal=a.map(d=>{const e=String(d.index||0);return Object.assign({},{id:e,isOutputLinksCollapsible:c.has(e)},d)});this.graph={flows:b,nodes:this.nodesInternal};this.totalLatencyMs=this.totalTimeStat(a,d=>{let e;return((e=d.stats)==null?void 0:e.latencyMs)||
0});this.totalCpuTimeMs=this.totalTimeStat(a,d=>{let e;return((e=d.stats)==null?void 0:e.cpuTimeMs)||0});this.totalCost=this.totalTimeStat(a,d=>{let e;return((e=d.stats)==null?void 0:e.cost)||0});this.nodeLayout="vertical"}get nodes(){return this.nodesInternal}ngOnChanges(a){(a.isFullScreen||a.isExplanationOnly)&&_.uto(this);a.zoomLevel&&this.resetZoom(this.zoomLevel)}deriveFlowsFromNodes(a){const b=[];if(a.length===1)return[{id:"rows.0",value:0,path:["0"]}];const c=[a[0]];for(;c.length;){const d=
c.shift();for(const e of d.childLinks||[]){const f=a[e.childIndex||0];if(e.type!=="Scalar"&&(c.push(f),vro(f,a))){let g;b.push({id:`rows.${d.index||0}.${e.childIndex}`,value:((g=f.stats)==null?void 0:g.rows)||0,path:[String(d.index||0),String(e.childIndex)],data:{isMachineGroupColorVisible:!f.isWorkstreamRoot&&d.isMachineGroupColorVisible&&f.isMachineGroupColorVisible,sourceNodeMachineGroupId:d.machineGroupId,targetNodeMachineGroupId:f.machineGroupId}})}}}return b}fireSelectionChangedEvent(a){if(a.linkIds.length===
0&&a.nodeIds.length===1){const b=this.nodes.find(d=>a.nodeIds[0]===String(d.index));let c;b&&((c=b.metadata)==null?0:c["Full scan"])&&this.analyticsService.sendEvent({type:"query-plan-visualizer",name:"queryExplanationFullScanClicked"})}JSON.stringify(a.nodeIds)===JSON.stringify(this.flowDiagramSelection.nodeIds)&&JSON.stringify(a.linkIds)===JSON.stringify(this.flowDiagramSelection.linkIds)||this.flowDiagramSelectionChanged.emit(a)}selectNode(a){this.fireSelectionChangedEvent({nodeIds:[a],linkIds:[]})}linkStrokeWidth(a){a=
Number(a);if(isNaN(a))return"0 0";let b;return((b=this.nodes[a])==null?0:b.isWorkstreamRoot)?"3 3":"0 0"}returnedRowsTextForNode(a){a=Number(a);return isNaN(a)?"":(a=this.nodes[a])&&a.stats&&a.stats.rows!==void 0?_.rk("{NUMBER, plural, =1 {1 row}other {# rows}}",{NUMBER:a.stats.rows}):"-"}updatePanState(a){this.currentViewPortFrame=Object.assign({},this.currentViewPortFrame,{x:-a.x,y:-a.y});this.cdr.detectChanges()}onPanAction(a){this.panAction={viewPortOffset:{x:-a.x,y:-a.y}};this.cdr.detectChanges()}updateViewPort(a){this.currentViewPortFrame=
Object.assign({},this.currentViewPortFrame,a)}setLayout(a){this.layout=a;this.layout.expandCollapseBlocks=this.layout.expandCollapseBlocks.map(b=>Object.assign({},b,{ariaLabel:b.ariaLabel||"Expand or collapse the query plan node"}));a.width>a.height?(this.minimapWidth=250,this.minimapHeight=Math.max(a.height/(a.width/250),10)):(this.minimapHeight=300,this.minimapWidth=Math.max(a.width/(a.height/300),10));this.nodeLayoutInternal||(this.nodeLayoutInternal=a.height*tto>=a.width?"horizontal":"vertical",
_.uto(this));this.cdr.detectChanges();this.timesAttemptedToSetInitialViewPort<2&&(this.setInitialViewPortToRootNode(),this.timesAttemptedToSetInitialViewPort++)}setLayoutMode(a){this.layoutMode!==a&&this.analyticsService.sendEvent({type:"query-plan-visualizer",name:"queryExplanationExpandedModeToggled",metadata:{mode:a}});this.layoutMode=a;this.layoutModeChange.emit(a)}setZoom(a){this.zoomLevel=a;this.zoomLevelChange.emit(this.zoomLevel)}zoomIn(){this.zoomAction={kind:"zoomIn"};this.cdr.detectChanges()}zoomOut(){this.zoomAction=
{kind:"zoomOut"};this.cdr.detectChanges()}resetZoom(a=1){this.zoomAction={kind:"zoom",value:a};this.cdr.detectChanges()}toggleMinimapVisibility(){this.isMinimapVisible.update(a=>!a);this.analyticsService.sendEvent({type:"query-plan-visualizer",name:"queryExplanationMinimapVisibilityToggled",metadata:{visibility:this.isMinimapVisible()?"show":"hide"}})}selectMinimapPosition(a){this.minimapPosition=a;this.analyticsService.sendEvent({type:"query-plan-visualizer",name:"queryExplanationMinimapPositionChanged",
metadata:{position:a}})}onMinimapControlsMenuOpened(){this.analyticsService.sendEvent({type:"query-plan-visualizer",name:"queryExplanationMinimapControlsMenuOpened"})}getDoneIconIfSelected(a){return this.minimapPosition===a?"done":void 0}isMinimapInPosition(a){return this.minimapPosition===a}setInitialViewPortToRootNode(){setTimeout(()=>{var a;if(((a=this.layout)==null?void 0:a.nodes.length)!==0){var b;a=(b=this.layout)==null?void 0:b.nodes[0];var c;b=(c=a==null?void 0:a.x)!=null?c:0;let d;c=(d=a==
null?void 0:a.width)!=null?d:0;this.onPanAction({x:b+c/2-this.currentViewPortFrame.width/2,y:0})}})}totalTimeStat(a,b){return a.reduce((c,d)=>c+b(d),0)}};vto.\u0275fac=function(a){return new (a||vto)};
vto.\u0275cmp=_.z({type:vto,selectors:[["fr-qpv-query-plan"]],inputs:{nodes:"nodes",showMinimap:"showMinimap",flowDiagramSelection:"flowDiagramSelection",isFullScreen:"isFullScreen",isExplanationOnly:"isExplanationOnly",layoutMode:"layoutMode",isMachineGroupColorEnabled:[1,"isMachineGroupColorEnabled"],isSummaryCardsToggleButtonAboveMinimap:[1,"isSummaryCardsToggleButtonAboveMinimap"],showMinimapControls:[1,"showMinimapControls"],zoomLevel:"zoomLevel"},outputs:{layoutModeChange:"layoutModeChange",
flowDiagramSelectionChanged:"flowDiagramSelectionChanged",zoomLevelChange:"zoomLevelChange"},features:[_.jh([nto]),_.Ln],decls:27,vars:9,consts:()=>[["flowDiagram",""],["nodeTemplateForMinimap",""],["linkTemplate",""],["linkHoverCardTemplate",""],["expandCollapseTemplate",""],["nodeTemplate",""],["customIcon",""],["minimapControlsMenu",""]," Expanded "," Compact "," Rows returned ",["fxLayout","row","fxFlex","1 0 auto",1,"fr-qpv-query-plan-container"],["fxFlex","1 1 auto",3,"contentTemplate"],[0,
"xmlns","svg","http://www.w3.org/2000/svg",1,"fr-qpv-minimap","cfc-cursor-move",3,"fxFlex","fr-qpv-minimap-tr","fr-qpv-minimap-bl","fr-qpv-minimap-br","fr-qpv-minimap-tr--summary-cards-toogle-button-above-minimap"],[1,"plan-controls"],["vertical","","appearance","legacy",1,"cfc-space-below-minus-4","cfc-button-small",3,"change","value"],[1,"fr-qpv-expanded-mode-button",3,"value"],[1,"fr-qpv-compact-mode-button",3,"value"],[1,"zoom-controls"],["mat-raised-button","","title","Zoom in","aria-label",
"Zoom in",1,"fr-qpv-zoom-in-button",3,"click"],["matButtonIcon","",1,"zoom-controls-icon",3,"icon"],["mat-raised-button","","title","Zoom out","aria-label","Zoom out",1,"fr-qpv-zoom-out-button",3,"click"],["mat-raised-button","","title","Reset zoom","aria-label","Reset zoom",1,"fr-qpv-zoom-reset-button",3,"click"],[1,"fr-qpv-minimap-controls"],[0,"xmlns","svg","http://www.w3.org/2000/svg"],["id","query-plan-node-shadow","height","200%"],"result offOut in SourceAlpha dx 5 dy 5".split(" "),"result blurOut in offOut stdDeviation 2".split(" "),
["type","linear","slope","0.2"],[0,"xmlns","svg","http://www.w3.org/2000/svg","vi-flow-diagram","","nodeTemplateWrapper","reactive-user-svg",3,"onLayoutUpdated","onPanChange","onZoomChange","onSelectionChange","onViewPortChange","graph","nodeTemplate","linkTemplate","layoutController","linkHoverCardTemplate","linksExpandCollapseTemplate","height","width","focusConfig","selectionConfig","selection","panAction","zoomAction","zoomConfig","ariaLabelProvider","stylesheet","nodeFocusOutlineTemplate"],["fr-qpv-query-plan-node",
"",3,"nodeSelectionChanged","node","totalLatencyMs","totalCpuTimeMs","totalCost","isCompactMode","layout","shadowFilterId","isMachineGroupColorEnabled"],[0,"xmlns","svg","http://www.w3.org/2000/svg",1,"fr-qpv-minimap","cfc-cursor-move",3,"fxFlex"],["vi-flow-diagram-minimap","",0,"xmlns","svg","http://www.w3.org/2000/svg",3,"onNavigate","nodeTemplate","expandCollapseTemplate","linkTemplate","nodeFocusOutlineTemplate","maxWidth","maxHeight","layout","fillColor","frameColor","viewPortFrameRect","zoomLevel"],
[0,"xmlns","svg","http://www.w3.org/2000/svg","fr-qpv-query-plan-node","",3,"node","totalLatencyMs","totalCpuTimeMs","totalCost","isCompactMode","shadowFilterId","layout","isMinimap","isMachineGroupColorEnabled"],[0,"xmlns","svg","http://www.w3.org/2000/svg","vi-bezier-path-link","",3,"link","stylesheet","strokeDashArray"],[1,"vi-popover"],[1,"cfc-space-below-minus-6","cfc-space-above-minus-6","cfc-text-title-5"],[1,"cfc-space-below-minus-6","cfc-text-caption"],[1,"machine-group-transition-label"],
[1,"machine-group-box"],["vi-expand-collapse","",3,"entity","iconTemplate"],["vi-plus-minus-icon","",3,"width","height","shadowFilterUrl","isFocused","isHovered","isCollapsed","isVertical"],["mat-raised-button","","title","Select options for mini map","aria-label","Select options for mini map",1,"fr-qpv-minimap-controls-button",3,"menuOpened","cfcMenuTriggerFor"],["matButtonIcon","","iconPositionEnd","",3,"icon"],["ariaLabelledBy","fr-qpv-minimap-controls-button"],["header","Select options for mini map",
"aria-label","Select options for mini map"],[3,"click","label"],["label","Top right","aria-label","Top right",3,"click","icon"],["label","Bottom left","aria-label","Bottom left",3,"click","icon"],["label","Bottom right","aria-label","Bottom right",3,"click","icon"]],template:function(a,b){a&1&&(_.I(0,"div",11)(1,"vi-size-projector-svg",12),_.C(2,Vro,10,17,"ng-template",null,0,_.rh),_.J(),_.D(4,Wro,2,23,":svg:svg",13),_.C(5,Xro,1,9,"ng-template",null,1,_.rh)(7,Yro,1,3,"ng-template",null,2,_.rh)(9,
aso,7,4,"ng-template",null,3,_.rh)(11,cso,3,2,"ng-template",null,4,_.rh),_.I(13,"div",14)(14,"mat-button-toggle-group",15),_.P("change",function(c){return b.setLayoutMode(c.value)}),_.I(15,"mat-button-toggle",16),_.N(16,8),_.J(),_.I(17,"mat-button-toggle",17),_.N(18,9),_.J()(),_.I(19,"div",18)(20,"button",19),_.P("click",function(){return b.zoomIn()}),_.K(21,"cm-icon",20),_.J(),_.I(22,"button",21),_.P("click",function(){return b.zoomOut()}),_.K(23,"cm-icon",20),_.J(),_.I(24,"button",22),_.P("click",
function(){return b.resetZoom()}),_.K(25,"cm-icon",20),_.J()(),_.D(26,eso,8,5,"div",23),_.J()());a&2&&(a=_.Yg(3),_.y(),_.H("contentTemplate",a),_.y(3),_.E(b.showMinimap&&b.layout&&b.isMinimapVisible()?4:-1),_.y(10),_.H("value",b.layoutMode),_.y(),_.H("value","expanded"),_.y(2),_.H("value","compact"),_.y(4),_.H("icon",b.icons.addIcon),_.y(2),_.H("icon",b.icons.removeIcon),_.y(2),_.H("icon",b.icons.replayIcon),_.y(),_.E(b.showMinimapControls()?26:-1))},dependencies:[_.Qu,_.as,_.e7,_.gto,_.uRn,_.dRn,
_.tRn,_.yO,_.tO,_.vO,_.v7,_.wRn,_.zRn,_.bRn,_.lto,_.uq,_.Kq,_.Jt,_.xt,_.ut,_.Ht,_.Gu,_.Eu,_.Fu,_.fA,_.sw,_.qw,_.ow,_.pw,_.rw,_.MD,_.FD,_.GD,_.ED,_.nt,rto,_.k7,nto],styles:[".fr-qpv-query-plan-container[_ngcontent-%COMP%]{position:relative}.fr-qpv-minimap[_ngcontent-%COMP%]{fill-opacity:.95;position:absolute}.fr-qpv-minimap-tr[_ngcontent-%COMP%]{right:3px;top:3px}.fr-qpv-minimap-tr--summary-cards-toogle-button-above-minimap[_ngcontent-%COMP%]{top:48px;right:20px}.fr-qpv-minimap-bl[_ngcontent-%COMP%]{left:3px;bottom:3px}.fr-qpv-minimap-br[_ngcontent-%COMP%]{right:3px;bottom:3px}.plan-controls[_ngcontent-%COMP%]{position:absolute;top:12px;left:12px}.plan-controls[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{background-color:var(--cm-sys-color-surface,#fff);border:1px solid var(--cm-sys-color-hairline,rgba(0,0,0,.12))}.zoom-controls[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.zoom-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{--cm-button-raised-color:var(--cm-sys-color-on-surface,#000);font-size:18px;width:32px;border-radius:0;padding:0 8px;color:var(--cm-sys-color-on-surface,#000)}.zoom-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{border-top-left-radius:4px;border-top-right-radius:4px}.zoom-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{border-bottom-left-radius:4px;border-bottom-right-radius:4px}.fr-qpv-minimap-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{--cm-button-raised-color:var(--cm-sys-color-on-surface,#000);width:32px;padding:0 8px;margin-top:8px}.zoom-controls-icon[_ngcontent-%COMP%]{padding-left:4px;padding-bottom:2px}.machine-group-box[_ngcontent-%COMP%]{border-radius:4px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;height:20px;width:20px}"]});var wto=class{constructor(){this.analyticsService=_.k(_.jp);this.indexRecommendationClicked=new _.Ji;this.expectedImprovement="";this.viewDetailsButtonText="View details";this.performanceText="Performance";this.titleText="Index recommendation";this.recommendationActionText="This query has a missing index and could benefit by adding an index to speed up this query by reading less data from disk.";this.recBlueBulbIcon=_.Wi;this.arrowForwardIcon=_.vIg;this.viewRecommendationsAnalyticsKey="frQpvViewRecommendationDetailsInfoCard";
this.actionClicked="clicked";this.numberFormat=new _.yq("0.00")}ngOnChanges(a){a.queryAdvice&&(this.expectedImprovement=_.wro(this.numberFormat.format(this.calculateImprovementPercentage())),this.showIndexRecommendation()&&this.analyticsService.sendEvent({type:"frQpvInsightsIndexAdvisorShown",name:"queryExplanationPage"}))}calculateImprovementPercentage(){let a,b,c;const d=(c=(a=this.queryAdvice)==null?void 0:(b=a.indexAdvice)==null?void 0:b.improvementFactor)!=null?c:0;return(d-1)/d*100}showIndexRecommendation(){let a;
return!!(((a=this.queryAdvice)==null?0:a.indexAdvice)&&this.queryAdvice.indexAdvice.ddl.length>0&&this.queryAdvice.indexAdvice.improvementFactor&&this.calculateImprovementPercentage())}showDetailIndexRecommendation(){this.analyticsService.sendEvent({type:this.viewRecommendationsAnalyticsKey,name:this.actionClicked});this.indexRecommendationClicked.emit(this.buildRecommendationSubtaskInput())}buildRecommendationSubtaskInput(){const a=[];let b,c,d,e,f;((f=(b=this.queryAdvice)==null?void 0:(c=b.indexAdvice)==
null?void 0:c.ddl.length)!=null?f:0)>0&&((d=this.queryAdvice)==null?0:(e=d.indexAdvice)==null?0:e.improvementFactor)&&a.push({ddlStatement:this.queryAdvice.indexAdvice.ddl[0],estimatedImprovementPercentage:this.calculateImprovementPercentage()});let g,n,q;return{lastUpdateTimestamp:(q=(g=this.queryAdvice)==null?void 0:(n=g.lastRefreshed)==null?void 0:n.toISOString())!=null?q:"",lastCacheUpdateTimestamp:new Date,recommendationRows:[{recommendationType:"RECOMMENDATIONTYPE_INDEX",recommendations:a}]}}};
wto.\u0275fac=function(a){return new (a||wto)};
wto.\u0275cmp=_.z({type:wto,selectors:[["fr-qpv-index-recommendation-card"]],inputs:{queryAdvice:"queryAdvice"},outputs:{indexRecommendationClicked:"indexRecommendationClicked"},features:[_.Ln],decls:1,vars:1,consts:[[3,"showGutter"],["header",""],[3,"icon"],["type","preview"],[1,"cfc-text-caption"],[1,"cfc-background-base"],[1,"cfc-flex-container","cfc-flex-justify-start"],[1,"cfc-indent","cfc-label-text"],["mat-button","",1,"cfc-text-button",3,"click"]],template:function(a,b){a&1&&_.D(0,fso,21,
8,"cfc-info-card",0);a&2&&_.E(b.showIndexRecommendation()?0:-1)},dependencies:[_.Qu,_.as,_.Zv,_.Yv,_.Jt,_.xt,_.ut,_.Ht,_.vq,_.uq,_.zT,_.tT,_.wT,_.jqf,_.xT,_.vT],encapsulation:2,changeDetection:0});var hso,jso,xto,yto;hso=a=>({$implicit:a});jso=a=>({width:a});xto=class{constructor(a,b){this.styleWidth=a;this.rightEdgeLabel=b}};yto=function(a){a.totalTimeUnits=a.columnTimeUnitWidths.reduce((c,d)=>c+d,0);a.percentPerTimeUnit=100/a.totalTimeUnits;let b=a.originTimeUnits;a.columns=a.columnTimeUnitWidths.map(c=>{b+=c;return new xto(`${(c||0)*a.percentPerTimeUnit}%`,(Math.round(b*1E3)/1E3).toString())})};
_.zto=class{constructor(){this.rowHeightPx=33;this.columns=[]}ngOnChanges(a){(a.columnTimeUnitWidths||a.originTimeUnits)&&yto(this)}};_.zto.\u0275fac=function(a){return new (a||_.zto)};
_.zto.\u0275cmp=_.z({type:_.zto,selectors:[["ac-gantt-chart"]],contentQueries:function(a,b,c){a&1&&_.Qg(c,_.Mg,5);if(a&2){let d;_.Sg(d=_.Tg())&&(b.rowTemplate=d.first)}},inputs:{columnTimeUnitWidths:"columnTimeUnitWidths",originTimeUnits:"originTimeUnits",rowHeightPx:"rowHeightPx",rowMarginPx:"rowMarginPx",rowModels:"rowModels",selectedRow:"selectedRow"},standalone:!1,features:[_.Ln],decls:5,vars:4,consts:[[1,"ac-gantt-rows-container"],[3,"update","items","childHeight"],[4,"ngFor","ngForOf"],[1,"ac-gantt-vertical-box-container"],
["class","ac-gantt-column ac-gantt-column-themed",3,"ngStyle",4,"ngFor","ngForOf"],[1,"ac-row-position"],[1,"ac-gantt-row-vertical-line",3,"ngStyle"],[1,"ac-gantt-row-container"],[3,"ngStyle"],[1,"ac-gantt-row-contents",3,"ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ac-gantt-column","ac-gantt-column-themed",3,"ngStyle"],[1,"ac-gantt-column-label-top"],[1,"ac-gantt-column-label-bottom"]],template:function(a,b){a&1&&(_.I(0,"div",0)(1,"virtual-scroll",1),_.P("update",function(c){return b.viewPortRowModels=
c}),_.C(2,iso,7,12,"ng-container",2),_.J()(),_.I(3,"div",3),_.C(4,kso,5,5,"div",4),_.J());a&2&&(_.y(),_.H("items",b.rowModels)("childHeight",b.rowHeightPx),_.y(),_.H("ngForOf",b.viewPortRowModels),_.y(2),_.H("ngForOf",b.columns))},dependencies:[_.Yn,_.eo,_.co,_.hIe],styles:["[_nghost-%COMP%]{margin:16px;margin-right:25px;margin-left:0;display:block;height:500px}.ac-gantt-vertical-box-container[_ngcontent-%COMP%]{position:relative;white-space:nowrap;width:100%;height:100%;top:-100%}.ac-gantt-column[_ngcontent-%COMP%]{border-bottom-width:1px;border-left-width:0;border-right-width:1px;border-style:solid;border-top-width:1px;box-sizing:border-box;display:inline-block;position:relative;height:100%}.ac-gantt-column-label-bottom[_ngcontent-%COMP%], .ac-gantt-column-label-top[_ngcontent-%COMP%]{font-size:12px;position:absolute;right:-16px;text-align:center;width:32px}.ac-gantt-column-label-top[_ngcontent-%COMP%]{top:-16px}.ac-gantt-column-label-bottom[_ngcontent-%COMP%]{bottom:-16px}.ac-gantt-rows-container[_ngcontent-%COMP%]{height:100%;overflow-y:auto;position:relative;display:block;z-index:1}.ac-gantt-row-container[_ngcontent-%COMP%]{cursor:pointer;height:23px;margin:10px 0 0;position:relative;white-space:nowrap}.ac-gantt-row-bar[_ngcontent-%COMP%]{height:100%;position:absolute}.ac-gantt-row-contents[_ngcontent-%COMP%]{height:100%;line-height:23px;position:absolute}.ac-gantt-row-container[_ngcontent-%COMP%]:hover   .ac-gantt-row-bar[_ngcontent-%COMP%]{background-color:#4285f4}.ac-gantt-row-selected[_ngcontent-%COMP%]   .ac-gantt-row-bar[_ngcontent-%COMP%]{background-color:#5e97f6}.ac-gantt-rows-container[_ngcontent-%COMP%]   virtual-scroll[_ngcontent-%COMP%]{display:block;height:100%;overflow-y:scroll}.ac-gantt-row-vertical-line[_ngcontent-%COMP%]{border:0;position:absolute;width:20px;z-index:1;margin-right:20%;border-left-width:2px;border-left-style:dotted;top:10px;border-color:gray;border-radius:10px;pointer-events:none}.ac-row-position[_ngcontent-%COMP%]{position:relative}/*# sourceMappingURL=gantt_chart_style.css.map */"]});_.Ato=class{};_.Ato.\u0275fac=function(a){return new (a||_.Ato)};_.Ato.\u0275mod=_.sf({type:_.Ato});_.Ato.\u0275inj=_.yd({imports:[_.ho,_.iIe]});var Bto={MICROSECONDS:1E3,MILLISECONDS:1,SECONDS:.001,1E3:"MICROSECONDS",1:"MILLISECONDS","0.001":"SECONDS"},Cto=function(a,b){a=a.workstreams.findIndex(c=>c.name===b);return a===-1?void 0:a+1},Dto=class{constructor(){this.isMachineGroupColorEnabled=_.sh(!1);this.workstreamsInternal=[];this.workstreamClicked=new _.Ji;this.rowModels=[];this.selectedRow=this.noSelectedRow={startTimeUnits:0,widthTimeUnits:null,isShifted:null,childRowCount:0};this.TimeUnits=Bto;this.unit=1;this.columnWidths=[]}set workstreams(a){this.workstreamsInternal=
a;this.processWorkstreams(a)}get workstreams(){return this.workstreamsInternal}set selectedWorkstream(a){this.selectedWorkstreamInternal=a;if(a===void 0)this.selectedRow=this.noSelectedRow;else{let b;this.selectedRow=(b=this.rowModels.find(c=>{let d;return((d=c.workstream)==null?void 0:d.name)===a.name}))!=null?b:this.noSelectedRow}}get selectedWorkstream(){return this.selectedWorkstreamInternal}processWorkstreams(a){if(a.length){var b=a.filter(f=>{let g,n;return((g=f.stats)==null?void 0:g.startTimestamp)&&
((n=f.stats)==null?void 0:n.endTimestamp)}),c=b.reduce((f,g)=>Math.min(f,g.stats.startTimestamp),a[0].stats.startTimestamp);a=b.reduce((f,g)=>Math.max(f,g.stats.endTimestamp),a[0].stats.endTimestamp);if(c&&a){var d=a-c;this.unit=d<5?1E3:d<5E3?1:.001;this.columnWidths=this.createTicks(c*this.unit,a*this.unit);var e=(a-c)/10;this.rowModels=b.map(f=>{var g=(f.stats.startTimestamp-c)*this.unit,n=Math.max(f.stats.endTimestamp-f.stats.startTimestamp,e)*this.unit;a:{if(f.name){var q=Cto(this,f.name);if(q!==
void 0){q=`machine-group-color-category-${q%12+1}`;break a}}q=void 0}return{workstream:f,startTimeUnits:g,widthTimeUnits:n,isShifted:!1,childRowCount:0,errorClass:q}})}}else this.rowModels=[],this.columnWidths=[]}createTicks(a,b){let c=1,d=5;for(;(b-a)/c>5;)c*=d,d=d===5?2:5;return Array(Math.ceil((b-a)/c)+1).fill(void 0).map((e,f)=>f===0?0:c)}fireWorkstreamClickedEvent(a){this.workstreamClicked.emit(a.workstream)}clearSelection(){this.selectedRow=this.noSelectedRow}};
Dto.\u0275fac=function(a){return new (a||Dto)};
Dto.\u0275cmp=_.z({type:Dto,selectors:[["fr-qpv-workstream-gantt-chart"]],inputs:{isMachineGroupColorEnabled:[1,"isMachineGroupColorEnabled"],workstreams:"workstreams",selectedWorkstream:"selectedWorkstream"},outputs:{workstreamClicked:"workstreamClicked"},decls:10,vars:2,consts:()=>[["rowTemplate",""]," Query execution timeline "," A machine group illustrates the execution of a portion of the query.\ufffd#6\ufffd\ufffd/#6\ufffd Operators may execute on one or more machines. ","\ufffd#2\ufffdTime (microseconds)\ufffd/#2\ufffd",
"\ufffd#2\ufffdTime (milliseconds)\ufffd/#2\ufffd","\ufffd#2\ufffdTime (seconds)\ufffd/#2\ufffd"," Not enough information to display machine group chart. ",[3,"showGutter"],["header",""],["metadata",""],[1,"cfc-gutter-none"],["fxLayout","column"],["fxFlex","0 0 150px",3,"originTimeUnits","columnTimeUnitWidths","selectedRow","rowModels"],["fxLayout","row","fxLayoutAlign","center center",1,"cfc-space-above-minus-4"],[1,"cfc-space-below-minus-6"],["tabindex","0","role","button",1,"fr-qpv-workstream-gantt-row",
3,"click"]],template:function(a,b){a&1&&(_.I(0,"cfc-info-card",7)(1,"cfc-info-card-header")(2,"div",8),_.N(3,1),_.J(),_.I(4,"span",9),_.Bg(5,2),_.K(6,"br"),_.Cg(),_.J()(),_.I(7,"cfc-info-card-body-group",10)(8,"cfc-info-card-item"),_.D(9,qso,9,8,"div",11),_.J()()());a&2&&(_.H("showGutter",!1),_.y(9),_.E(b.workstreams.length?9:-1))},dependencies:[_.yO,_.tO,_.wO,_.vO,_.Ato,_.zto,_.zT,_.tT,_.wT,_.xT,_.vT,_.Oq,_.Lq,_.Mq],styles:["[_nghost-%COMP%]  .fr-qpv-ac-gantt-chart .ac-gantt-rows-container .machine-group-color-category-1-row-bar-themed.ac-gantt-row-bar-themed.ac-gantt-row-bar{background-color:var(--cm-sys-color-charts-line-category1,var(--cm-sys-color-charts-primary-default))}[_nghost-%COMP%]  .fr-qpv-ac-gantt-chart .ac-gantt-rows-container .machine-group-color-category-2-row-bar-themed.ac-gantt-row-bar-themed.ac-gantt-row-bar{background-color:var(--cm-sys-color-charts-line-category2,#f439a0)}[_nghost-%COMP%]  .fr-qpv-ac-gantt-chart .ac-gantt-rows-container .machine-group-color-category-3-row-bar-themed.ac-gantt-row-bar-themed.ac-gantt-row-bar{background-color:var(--cm-sys-color-charts-line-category3,#12a4af)}[_nghost-%COMP%]  .fr-qpv-ac-gantt-chart .ac-gantt-rows-container .machine-group-color-category-4-row-bar-themed.ac-gantt-row-bar-themed.ac-gantt-row-bar{background-color:var(--cm-sys-color-charts-line-category4,#ff5722)}[_nghost-%COMP%]  .fr-qpv-ac-gantt-chart .ac-gantt-rows-container .machine-group-color-category-5-row-bar-themed.ac-gantt-row-bar-themed.ac-gantt-row-bar{background-color:var(--cm-sys-color-charts-line-category5,#af5cf7)}[_nghost-%COMP%]  .fr-qpv-ac-gantt-chart .ac-gantt-rows-container .machine-group-color-category-6-row-bar-themed.ac-gantt-row-bar-themed.ac-gantt-row-bar{background-color:var(--cm-sys-color-charts-line-category6,#689f38)}[_nghost-%COMP%]  .fr-qpv-ac-gantt-chart .ac-gantt-rows-container .machine-group-color-category-7-row-bar-themed.ac-gantt-row-bar-themed.ac-gantt-row-bar{background-color:var(--cm-sys-color-charts-line-category7,#3949ab)}[_nghost-%COMP%]  .fr-qpv-ac-gantt-chart .ac-gantt-rows-container .machine-group-color-category-8-row-bar-themed.ac-gantt-row-bar-themed.ac-gantt-row-bar{background-color:var(--cm-sys-color-charts-line-category8,var(--cm-sys-color-charts-neutral-default))}[_nghost-%COMP%]  .fr-qpv-ac-gantt-chart .ac-gantt-rows-container .machine-group-color-category-9-row-bar-themed.ac-gantt-row-bar-themed.ac-gantt-row-bar{background-color:var(--cm-sys-color-charts-line-category9,#188038)}[_nghost-%COMP%]  .fr-qpv-ac-gantt-chart .ac-gantt-rows-container .machine-group-color-category-10-row-bar-themed.ac-gantt-row-bar-themed.ac-gantt-row-bar{background-color:var(--cm-sys-color-charts-line-category10,#9c27b0)}[_nghost-%COMP%]  .fr-qpv-ac-gantt-chart .ac-gantt-rows-container .machine-group-color-category-11-row-bar-themed.ac-gantt-row-bar-themed.ac-gantt-row-bar{background-color:var(--cm-sys-color-charts-line-category11,#ea4335)}[_nghost-%COMP%]  .fr-qpv-ac-gantt-chart .ac-gantt-rows-container .machine-group-color-category-12-row-bar-themed.ac-gantt-row-bar-themed.ac-gantt-row-bar{background-color:var(--cm-sys-color-charts-line-category12,#039be5)}"],
changeDetection:0});var tso=function(a){switch(a){case "active-assist":return _.Wi;case "informational":return _.Xi;case "success":return _.Yi;case "warning":return _.Zi;case "error":return _.$i;case "destructive":return _.FBa;default:_.ob(a,void 0)}},Oso=function(a,{type:b,nodeIds:c}){a.analyticsService.sendEvent({type:"query-plan-visualizer",name:"queryExplanationProminentOperatorsClicked",metadata:{type:b}});a.prominentOperatorClicked.emit(c)},Eto=class{constructor(){this.analyticsService=_.k(_.jp);this.showWorkstreams=
!0;this.isMachineGroupColorEnabled=_.sh(!1);this.summaryCardsConfig=_.uh.required();this.workstreamClicked=new _.Ji;this.detailsCloseButtonClicked=_.th();this.prominentOperatorClicked=_.th();this.indexRecommendationClicked=_.th();this.messages=_.M8;this.icons={linkIcon:_.Kdd};this.link=_.pro()}fireWorkstreamClickedEvent(a){a&&this.workstreamClicked.emit(a)}showIndexRecommendation(){let a;return!!(((a=this.queryAdvice)==null?0:a.indexAdvice)&&this.queryAdvice.indexAdvice.ddl.length>0&&this.queryAdvice.indexAdvice.improvementFactor)}};
Eto.\u0275fac=function(a){return new (a||Eto)};
Eto.\u0275cmp=_.z({type:Eto,selectors:[["fr-qpv-summary-cards"]],viewQuery:function(a,b){a&1&&_.Rg(Dto,5);if(a&2){let c;_.Sg(c=_.Tg())&&(b.ganttChart=c.first)}},inputs:{workstreams:"workstreams",showWorkstreams:"showWorkstreams",selectedWorkstream:"selectedWorkstream",queryAdvice:"queryAdvice",isMachineGroupColorEnabled:[1,"isMachineGroupColorEnabled"],summaryCardsConfig:[1,"summaryCardsConfig"]},outputs:{workstreamClicked:"workstreamClicked",detailsCloseButtonClicked:"detailsCloseButtonClicked",prominentOperatorClicked:"prominentOperatorClicked",
indexRecommendationClicked:"indexRecommendationClicked"},decls:7,vars:3,consts:()=>[" Learn more "," Learn more "," Learn more "," Learn more "," Legend "," Returned rows "," Machine group change "," Order of execution reads from bottom to top. "," Time elapsed not represented to scale. "," Width of a CPU time bar displays CPU time of operator relative to overall query CPU time ",["data-test-id","summary-cards-container"],["fxFlex","300px"],[3,"queryAdvice"],["data-test-id","summary-card",3,"showGutter"],
[3,"workstreams","selectedWorkstream","isMachineGroupColorEnabled"],[3,"showGutter"],[3,"indexRecommendationClicked","queryAdvice"],["header","","data-test-id","summary-card-title"],["data-test-id","summary-card-title-icon","aria-hidden","true",3,"icon"],["metadata",""],["metadata","",1,"cfc-space-above-minus-5"],["cfc-info-card-utility",""],[1,"cfc-gutter-none"],["data-test-id","primary-body-group-kv-list","cm-kv-list","",1,"fr-qpv-summary-cards-kv-list","cfc-width-full","cfc-space-below-minus-6",
3,"pinlinesVisible"],["data-test-id","additional-info-body-group",1,"cfc-gutter-none",3,"cfc-space-below-minus-4"],["data-test-id","footer-body-group",1,"cfc-gutter-none"],[1,"cfc-space-below-minus-6"],[1,"cfc-text-caption-strong"],["data-test-id","internal-learn-more","cfcTrackedLink","","aria-label","Learn more about this query plan summary card","track-type","Leave",3,"cfcDocLink","track-name"],["data-test-id","external-learn-more","cfcTrackedLink","","aria-label","Learn more about this query plan summary card",
"track-type","Leave",3,"cfc-external-link","track-name"],[1,"chip","cfc-space-below-minus-6"],["color","primary"],["mat-icon-button","","aria-label","Close details card","cfcTooltip","Close details card",1,"details-close-button",3,"click"],["icon","close"],[1,"cfc-text-body","cfc-color-secondary"],["data-test-id","primary-body-group-stat-tooltip",3,"ariaLabel"],[3,"innerText"],["aria-label","Learn more about this query plan execution stat",3,"cfcDocLink"],["aria-label","Learn more about this query plan execution stat",
3,"cfc-external-link"],["data-test-id","additional-info-body-group",1,"cfc-gutter-none"],["header","",1,"cfc-flex-container","cfc-flex-center-aligned"],[1,"cfc-prefix"],[3,"toggle","iconButton","collapsed"],["data-test-id","additional-info-group",1,"cfc-space-below-minus-6"],["cm-kv-list","",1,"fr-qpv-summary-cards-kv-list","cfc-width-full","cfc-space-below-minus-6",3,"pinlinesVisible"],["cfc-list-unstyled",""],["data-test-id","prominent-operator-button","mat-icon-button","","size","small",3,"cfcTooltip"],
["data-test-id","prominent-operator-button","mat-icon-button","","size","small",3,"click","cfcTooltip"],[3,"icon"],[1,"cfc-space-below-minus-6",3,"type"],[3,"workstreamClicked","workstreams","selectedWorkstream","isMachineGroupColorEnabled"],["header",""],["cm-kv-list","",1,"cfc-space-below-minus-6",3,"pinlinesVisible"],["height","18","width","18","cfcTooltip","Width of returned row band indicates number of rows relative to the\n                        query",1,"returned-rows-tooltip-trigger"],["vi-bezier-path-link",
"",3,"link","strokeDashArray"],[1,"cfc-space-above-minus-6"],["height","18","width","18"],[1,"cfc-text-caption"]],template:function(a,b){a&1&&(_.I(0,"cfc-info-card-container",10)(1,"cfc-info-card-column",11),_.D(2,rso,1,1,"fr-qpv-index-recommendation-card",12),_.rg(3,Wso,17,13,"cfc-info-card",13,_.pg),_.D(5,Xso,1,3,"fr-qpv-workstream-gantt-chart",14),_.D(6,Yso,27,6,"cfc-info-card",15),_.J()());a&2&&(_.y(2),_.E(b.showIndexRecommendation()?2:-1),_.y(),_.tg(b.summaryCardsConfig()),_.y(2),_.E(b.showWorkstreams&&
b.workstreams&&b.workstreams.length?5:-1),_.y(),_.E(b.showWorkstreams?6:-1))},dependencies:[_.Qu,_.as,_.Jt,_.xt,_.vt,_.Ht,_.dz,_.Py,_.cz,_.Sy,_.hs,_.Ru,_.ns,_.ms,_.yO,_.vO,_.v7,_.wRn,_.Hw,_.Gw,_.uq,_.Kq,_.Hq,wto,_.zT,_.tT,_.wT,_.kqf,_.uT,_.xT,_.vT,_.Mu,_.Zr,_.Yr,_.Oq,_.Lq,_.Mq,_.VB,_.Ot,Dto,qto],styles:[".fr-qpv-summary-cards-kv-list[_ngcontent-%COMP%]{grid-template-columns:10fr 7fr}"],changeDetection:0});var Fto;Fto=["frQpvQueryPlan"];
_.Gto=class{constructor(){this.downloadService=_.k(_.qY);this.analyticsService=_.k(_.jp);this.workstreams=[];this.queryPlanJson="";this.config={showCards:!0,showMinimap:!0,showWorkstreams:!0};this.isFullScreen=!0;this.isExplanationOnly=!1;this.layoutMode="expanded";this.layoutModeChange=new _.Ji;this.zoomLevel=1;this.zoomLevelChange=new _.Ji;this.flowDiagramSelectionChanged=new _.Ji;this.showCollapseSummaryCardsButton=!1;this.isExpanded=!0;this.showMinimapControls=_.sh(!1);this.isMachineGroupColorEnabled=
_.sh(!1);this.summaryCardsConfig=_.uh.required();this.clearSummaryCards=_.th();this.workstreamSelected=_.th();this.nodesSelected=_.th();this.indexRecommendationClicked=_.th();this.flowDiagramSelection=_.nJn();this.extendedNodes=[]}selectNode(a){this.updateSelection({nodeIds:[a],linkIds:[]})}updateSelection(a){this.isExpanded=!0;this.flowDiagramSelectionChanged.emit(a);a.nodeIds.length&&a.linkIds.length===0&&(this.selectedWorkstream=void 0,this.flowDiagramSelection=a,this.nodesSelected.emit(a.nodeIds));
if(a.linkIds.length>0&&a.nodeIds.length===0){const b=a.linkIds[0],c=this.workstreams.find(d=>{let e;return((e=d.links)==null?void 0:e.find(f=>f.sourceNodeId===b.sourceNodeId&&f.targetNodeId===b.targetNodeId))!==void 0});c?this.toggleSelectedWorkstream(c):this.clearSelection()}a.linkIds.length===0&&a.nodeIds.length===0&&this.clearSelection()}toggleSelectedWorkstream(a){let b;a.name===((b=this.selectedWorkstream)==null?void 0:b.name)?this.clearSelection():this.selectWorkstream(a)}selectWorkstream(a){this.selectedWorkstream=
a;this.flowDiagramSelection={linkIds:a.links||[],nodeIds:a.nodes||[]};this.workstreamSelected.emit(a)}selectNodes(a){this.updateSelection({nodeIds:a,linkIds:[]})}clearSelection(){this.selectedWorkstream=void 0;this.flowDiagramSelection=_.nJn();this.clearSummaryCards.emit()}closeDetails(a){a.type==="node"?this.updateSelection({nodeIds:this.flowDiagramSelection.nodeIds.filter(b=>b!==a.index),linkIds:[]}):this.clearSelection()}ngOnChanges(a){if(a.nodes||a.workstreams){this.updateSummaryNodes();let b;
this.extendedNodes=_.ato((b=this.nodes)!=null?b:[],this.querySummaryNodes,this.workstreams)}}updateSummaryNodes(){this.querySummaryNodes=_.$so(this.nodes||[])}downloadJson(){this.analyticsService.sendEvent({type:"query-plan-visualizer",name:"queryExplanationDownloadJsonClicked"});this.downloadService.downloadText(this.queryPlanJson,!1,"query_text.json")}expandButtonForSummaryCardsClicked(a){this.isExpanded=a}get showSummarySection(){return this.isExpanded}};
_.Gto.\u0275fac=function(a){return new (a||_.Gto)};
_.Gto.\u0275cmp=_.z({type:_.Gto,selectors:[["fr-query-explanation"]],viewQuery:function(a,b){a&1&&_.Rg(Fto,5,_.je);if(a&2){let c;_.Sg(c=_.Tg())&&(b.queryPlan=c.first)}},inputs:{queryStats:"queryStats",nodes:"nodes",workstreams:"workstreams",queryPlanJson:"queryPlanJson",queryAdvice:"queryAdvice",config:"config",isFullScreen:"isFullScreen",isExplanationOnly:"isExplanationOnly",layoutMode:"layoutMode",zoomLevel:"zoomLevel",showCollapseSummaryCardsButton:"showCollapseSummaryCardsButton",isExpanded:"isExpanded",
showMinimapControls:[1,"showMinimapControls"],isMachineGroupColorEnabled:[1,"isMachineGroupColorEnabled"],summaryCardsConfig:[1,"summaryCardsConfig"]},outputs:{layoutModeChange:"layoutModeChange",zoomLevelChange:"zoomLevelChange",flowDiagramSelectionChanged:"flowDiagramSelectionChanged",clearSummaryCards:"clearSummaryCards",workstreamSelected:"workstreamSelected",nodesSelected:"nodesSelected",indexRecommendationClicked:"indexRecommendationClicked"},features:[_.Ln],decls:10,vars:12,consts:()=>[["frQpvQueryPlanColumn",
""],["frQpvQueryPlanContainer",""],["frQpvQueryPlan",""]," Download JSON ",["fxLayout","row","fxFlex","1 0 auto","fxLayoutAlign","start start",1,"fr-qpv-explanation-container","cfc-no-scroll-vertical"],["fxFlex","1 1 auto","fxLayout","row",1,"fr-qpv-query-plan-column"],[1,"fr-qpv-query-plan-container"],["fxLayout","row","fxFlex","1 0 auto",1,"fr-qpv-query-plan",3,"flowDiagramSelectionChanged","layoutModeChange","zoomLevelChange","nodes","showMinimap","isFullScreen","isExplanationOnly","showMinimapControls",
"flowDiagramSelection","isMachineGroupColorEnabled","layoutMode","zoomLevel","isSummaryCardsToggleButtonAboveMinimap"],[1,"cfc-flex-container","fr-qpv-summary-cards-column-container","cfc-height-full","cfc-scroll-vertical"],[1,"fr-qpv-summary-cards-column",3,"cfc-space-above-plus-5"],[1,"fr-qpv-summary-cards-container-collapse-button",3,"expanded"],[1,"fr-qpv-summary-cards-column"],[1,"cfc-space-below-minus-2","fr-qpv-summary-cards-column-download-button-container"],[3,"summaryCardsConfig","queryAdvice",
"workstreams","selectedWorkstream","showWorkstreams","isMachineGroupColorEnabled"],["mat-raised-button","","color","primary",1,"download-json-button",3,"click"],[3,"detailsCloseButtonClicked","prominentOperatorClicked","workstreamClicked","indexRecommendationClicked","summaryCardsConfig","queryAdvice","workstreams","selectedWorkstream","showWorkstreams","isMachineGroupColorEnabled"],[1,"fr-qpv-summary-cards-container-collapse-button",3,"isExpanded","expanded"]],template:function(a,b){a&1&&(_.I(0,
"div",4)(1,"div",5,0)(3,"div",6,1)(5,"fr-qpv-query-plan",7,2),_.P("flowDiagramSelectionChanged",function(c){return b.updateSelection(c)})("layoutModeChange",function(c){return b.layoutModeChange.emit(c)})("zoomLevelChange",function(c){return b.zoomLevelChange.emit(c)}),_.J()()(),_.I(7,"div",8),_.D(8,dto,3,4,"div",9),_.D(9,eto,1,1,"fr-collapse-button",10),_.J()());a&2&&(_.y(5),_.H("nodes",b.extendedNodes)("showMinimap",b.config.showMinimap)("isFullScreen",b.isFullScreen)("isExplanationOnly",b.isExplanationOnly)("showMinimapControls",
b.showMinimapControls())("flowDiagramSelection",b.flowDiagramSelection)("isMachineGroupColorEnabled",b.isMachineGroupColorEnabled())("layoutMode",b.layoutMode)("zoomLevel",b.zoomLevel)("isSummaryCardsToggleButtonAboveMinimap",b.showCollapseSummaryCardsButton&&!b.isExpanded),_.y(3),_.E(b.showSummarySection?8:-1),_.y(),_.E(b.showCollapseSummaryCardsButton?9:-1))},dependencies:[_.Qu,_.as,_.Jt,_.xt,_.ut,_.Ht,_.mto,_.yO,_.tO,_.wO,_.vO,vto,Eto],styles:["[_nghost-%COMP%]{position:relative;height:100%;width:100%}.fr-qpv-explanation-container[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto;position:absolute}.fr-qpv-query-plan-container[_ngcontent-%COMP%]{height:100%;width:100%}.fr-qpv-query-plan-column[_ngcontent-%COMP%]{height:100%;position:-webkit-sticky;position:sticky;top:0}.fr-qpv-summary-cards-column[_ngcontent-%COMP%]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.fr-qpv-summary-cards-container-collapse-button[_ngcontent-%COMP%]{position:absolute;z-index:100;top:0;right:20px}.fr-qpv-summary-cards-column-download-button-container[_ngcontent-%COMP%]{margin-left:16px}"],
changeDetection:0});_.Hto=class{constructor(){this.duetEnablementService=_.k(_.q8)}getMetadata(){return _.Ge({isGeminiApiEnabled:this.duetEnablementService.isDuetApiEnabled(),hasGenerateCodePermission:this.duetEnablementService.userHasPermission(),hasGenerateChatPermission:fto(this.duetEnablementService),userHasEnableApiPermission:this.duetEnablementService.userHasEnableApiPermission(),userHasServiceUsageListPermission:this.duetEnablementService.userHasServiceUsageListPermission(),userHasServiceUsageGetPermission:this.duetEnablementService.userHasServiceUsageGetPermission()}).pipe(_.Jf(),
_.w(({isGeminiApiEnabled:a,hasGenerateCodePermission:b,hasGenerateChatPermission:c,userHasEnableApiPermission:d,userHasServiceUsageListPermission:e,userHasServiceUsageGetPermission:f})=>({isGeminiApiEnabled:a,hasGenerateCodePermission:b,hasGenerateChatPermission:c,userHasEnableApiPermission:d,userHasServiceUsageListPermission:e,userHasServiceUsageGetPermission:f})),_.We({each:3E3,with:()=>_.t({partialStudioMetadata:!0})}),_.wf(()=>_.t({partialStudioMetadata:!0})))}};
_.Hto.\u0275fac=function(a){return new (a||_.Hto)};_.Hto.\u0275prov=_.wd({token:_.Hto,factory:_.Hto.\u0275fac,providedIn:"root"});
}catch(e){_._DumpException(e)}
try{
var S3o,T3o,U3o,V3o,W3o,X3o,Y3o,Z3o,$3o,b4o,c4o,d4o;S3o=function(a){a&1&&(_.I(0,"cm-error",7),_.R(1),_.J());a&2&&(a=_.Q(2),_.y(),_.S(" ",a.invalidDatabaseErrorMessage," "))};T3o=function(a,b){a&1&&(_.I(0,"mat-option",8),_.R(1),_.J());a&2&&(a=b.$implicit,_.H("value",a),_.y(),_.S(" ",a," "))};
U3o=function(a){if(a&1){const b=_.l();_.I(0,"mat-form-field")(1,"mat-label");_.R(2);_.J();_.I(3,"input",4,0);_.P("input",function(){_.m(b);const c=_.Yg(4);_.Q().debouncedOnTextInputChange.next(c.value);return _.p()});_.J();_.C(5,S3o,2,1,"cm-error",5);_.J();_.I(6,"mat-autocomplete",null,1);_.C(8,T3o,2,2,"mat-option",6);_.J()}if(a&2){a=_.Yg(7);const b=_.Q();_.y(2);_.S(" ",b.formControlLabel," ");_.y();_.H("formControlName",b.formControlName)("matAutocomplete",a)("required",!b.isOptional())("ve",b.ve.CloudSqlDatabaseSelectTextInput)("veInputText",
!0);_.y(2);_.H("cfcDebounceErrorFor","incorrectDatabase");_.y(3);_.H("ngForOf",b.filteredAutocompleteOptions)("ngForTrackBy",b.autoCompleteOptionsTrackFn)}};V3o=function(a){a&1&&(_.I(0,"mat-option",14),_.R(1),_.J());a&2&&(a=_.Q(2),_.H("ve",a.ve.CloudSqlDatabaseSelectDefaultOptionDropdownItem)("veClick",!0),_.y(),_.S(" ",a.defaultOptionLabelOverride()," "))};
W3o=function(a,b){a&1&&(_.I(0,"mat-option",15),_.R(1),_.J());a&2&&(a=b.$implicit,b=_.Q(2),_.H("value",a)("ve",b.ve.CloudSqlDatabaseSelectDropdownItem)("veClick",!0),_.y(),_.S(" ",a," "))};X3o=function(a){a&1&&(_.I(0,"cm-error",16),_.N(1,2),_.J())};Y3o=function(a){a&1&&(_.I(0,"cm-error",7),_.R(1),_.J());a&2&&(a=_.Q(2),_.y(),_.S(" ",a.invalidDatabaseErrorMessage," "))};Z3o=function(a){a&1&&(_.I(0,"cfc-message",17)(1,"cfc-message-text"),_.N(2,3),_.J()())};
$3o=function(a){a&1&&(_.I(0,"mat-form-field")(1,"mat-label"),_.R(2),_.J(),_.I(3,"cfc-select",9),_.C(4,V3o,2,3,"mat-option",10)(5,W3o,2,4,"mat-option",11),_.J(),_.C(6,X3o,2,0,"cm-error",12)(7,Y3o,2,1,"cm-error",5),_.J(),_.C(8,Z3o,3,0,"cfc-message",13));a&2&&(a=_.Q(),_.y(2),_.S(" ",a.formControlLabel," "),_.y(),_.H("multiple",a.isMultiselect)("formControlName",a.formControlName)("hasFilter",a.isMultiselect||a.shouldShowFilter)("hasOkCancelButtons",a.isMultiselect)("observable",a.isLoading$)("ve",a.ve.CloudSqlDatabaseSelectDropdown)("veClick",
!0)("isRequired",!a.isOptional()),_.y(),_.H("ngIf",a.showDefaultOption),_.y(),_.H("ngForOf",a.databases()),_.y(),_.H("cfcDebounceErrorFor","required"),_.y(),_.H("cfcDebounceErrorFor","incorrectDatabase"),_.y(),_.H("ngIf",a.hasError()))};_.a4o=function(a,{multiple:b,required:c,initialDatabase:d}){return b?{databases:a.nonNullable.control({value:[],disabled:!1},c?[_.Os]:[])}:{database:a.nonNullable.control(d!=null?d:"",c?[_.Os]:[])}};
b4o=function({multiple:a,showOptionalLabel:b}){return a?"Databases":b?"Database (optional)":"Database"};c4o=function(a,b){return b.filter(c=>c.toLowerCase().includes(a.toLowerCase().trim())).slice(0,8)};d4o=["autoCompleteInput"];
_.X8=class{constructor(){this.databases=_.uh.required();this.isOptional=_.sh(!1);this.showOptionalLabel=_.sh(!1);this.defaultOptionLabelOverride=_.sh("None specified");this.displayMode=_.sh("SINGLE_DROPDOWN");this.isLoading=_.sh(!1);this.hasError=_.sh(!1);this.databasesLoadingError=_.sh(!1);this.invalidDatabaseErrorMessage="Invalid database: the selected user may not have access to this database";this.isLoadingSubject=new _.Kf;this.destroy$=_.k(_.$e);this.debouncedOnTextInputChange=new _.Kf;this.isLoading$=
this.isLoadingSubject;this.filteredAutocompleteOptions=[];this.shouldShowFilter=!1;this.controlNames={database:"database",databases:"databases"};this.autoCompleteOptionsTrackFn=(a,b)=>b;this.ve={CloudSqlDatabaseSelectDefaultOptionDropdownItem:257704,CloudSqlDatabaseSelectDropdownItem:257697,CloudSqlDatabaseSelectTextInput:207396,CloudSqlDatabaseSelectDropdown:207395}}set incorrectDatabaseErrorMessage(a){a&&(this.invalidDatabaseErrorMessage=a)}get isMultiselect(){return this.displayMode()==="MULTISELECT_DROPDOWN"}get showTextInput(){const a=
this.displayMode();return a==="TEXT_INPUT"||a==="TEXT_INPUT_FOR_LARGE_NUMBER_OF_DATABASES"&&this.databases().length>3E3||this.databasesLoadingError()}ngOnInit(){this.isLoading()||this.isLoadingSubject.complete();this.updateFormControls();this.showDefaultOption=this.isOptional()&&!this.isMultiselect;this.debouncedOnTextInputChange.pipe(_.Bf(200),_.Ij(this.destroy$)).subscribe(a=>{this.filteredAutocompleteOptions=c4o(a,this.databases())})}ngOnChanges(a){(a.displayMode||a.showOptionalLabel)&&this.updateFormControls();
a.isLoading&&!a.isLoading.currentValue&&this.isLoadingSubject.complete();if(a.databases){a=a.databases.currentValue;if(this.inputRef){let b,c;this.filteredAutocompleteOptions=c4o((c=(b=this.inputRef)==null?void 0:b.nativeElement.value)!=null?c:"",a)}this.shouldShowFilter=a.length>8}this.showDefaultOption=this.isOptional()&&!this.isMultiselect}updateFormControls(){this.formControlName=this.isMultiselect?this.controlNames.databases:this.controlNames.database;this.formControlLabel=b4o({multiple:this.isMultiselect,
showOptionalLabel:this.showOptionalLabel()})}};_.X8.\u0275fac=function(a){return new (a||_.X8)};
_.X8.\u0275cmp=_.z({type:_.X8,selectors:[["sql-database-select"]],viewQuery:function(a,b){a&1&&_.Rg(d4o,5);if(a&2){let c;_.Sg(c=_.Tg())&&(b.inputRef=c.first)}},inputs:{databases:[1,"databases"],isOptional:[1,"isOptional"],showOptionalLabel:[1,"showOptionalLabel"],defaultOptionLabelOverride:[1,"defaultOptionLabelOverride"],displayMode:[1,"displayMode"],isLoading:[1,"isLoading"],hasError:[1,"hasError"],databasesLoadingError:[1,"databasesLoadingError"],incorrectDatabaseErrorMessage:"incorrectDatabaseErrorMessage"},
features:[_.jh([_.Zx],[_.Zx]),_.Ln],decls:2,vars:1,consts:()=>[["autoCompleteInput",""],["databaseAutocomplete","matAutocomplete"]," Required "," There was an error loading your databases. Try refreshing. ",["matInput","","aria-label","Database",3,"input","formControlName","matAutocomplete","required","ve","veInputText"],["matError","","role","alert",4,"cfcDebounceErrorFor"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["matError","","role","alert"],[3,"value"],[3,"multiple","formControlName","hasFilter",
"hasOkCancelButtons","observable","ve","veClick","isRequired"],["value","",3,"ve","veClick",4,"ngIf"],[3,"value","ve","veClick",4,"ngFor","ngForOf"],["matError","","aria-label","Database selection is required",4,"cfcDebounceErrorFor"],["type","error",4,"ngIf"],["value","",3,"ve","veClick"],[3,"value","ve","veClick"],["matError","","aria-label","Database selection is required"],["type","error"]],template:function(a,b){a&1&&_.D(0,U3o,9,9)(1,$3o,9,14);a&2&&_.E(b.showTextInput?0:1)},dependencies:[_.Qu,
_.as,_.ls,_.oJ,_.mJ,_.nJ,_.kJ,_.aq,_.lJ,_.lx,_.ix,_.gx,_.jx,_.Cu,_.Au,_.ox,_.dA,_.bA,_.cA,_.$z,_.Rx,_.qx,_.px,_.ky,_.hy,_.Oq,_.Lq,_.Mq,_.Yn,_.Zn,_.nt,_.Kk,_.Rs,_.ht,_.et,_.Yx,_.Px,_.Tx],encapsulation:2});
}catch(e){_._DumpException(e)}
try{
var M5o,N5o,O5o,P5o,Q5o,R5o,S5o,T5o;_.K5o=function({contextStoreId:a,contextSetId:b}){if(!_.J5o(a))throw Error("Gv`"+a);return a.split("/stores")[0]+"/contextSets/"+b};_.J5o=function(a){return/projects\/.*locations\/.*stores\/default/.test(a)};
_.L5o=function({segment:a,contextSetId:b,contextSetVersion:c,displayName:d,description:e,contextStoreId:f}){return{segmentPath:["","Contexts",a],nodeType:"STUDIO_CONTEXT_NODE_TYPE_CONTEXT",nextPageToken:"",totalSize:0,hasTotalSize:!1,hasChildren:!1,semanticMetadata:[{key:"contextSetId",value:b},{key:"contextSetVersion",value:c},{key:"displayName",value:d},{key:"description",value:e},{key:"contextStoreId",value:f}],children:[]}};M5o={"in":{projectNumber:"Long"}};N5o={"in":{projectNumber:"Long"}};
O5o={"in":{context:".IN_google_cloud_geminidataanalytics_v1main_QueryDataContext"}};P5o={};Q5o=function(a,b){b=a.serialize(M5o,b);return a.config.request("DeleteContextSet",'mutation DeleteContextSet($projectId: String!, $projectNumber: Long!, $storeId: String!, $contextSetId: String!) @Signature(bytes: "2/PtshAMt3ttpGl0FJ5tRM77O40YqOLkNs/XAHdeFV2rQ=") { DeleteContextSet(projectId: $projectId, projectNumber: $projectNumber, storeId: $storeId, contextSetId: $contextSetId) { _isPresent } }',b,void 0).pipe(a.deserialize(M5o))};
R5o=function(a,b){b=a.serialize(N5o,b);return a.config.request("UploadContext",'mutation UploadContext($contextSetId: String!, $contextSetVersion: String!, $contextJson: String!, $storeId: String!, $projectNumber: Long!) @Signature(bytes: "2/bDya6ePcV/Ol195q0H4BF1/1LOO26ds26Tn2ZyfclzI=") { BatchUploadContext(contextSetId: $contextSetId, contextSetVersion: $contextSetVersion, contextJson: $contextJson, storeId: $storeId, projectNumber: $projectNumber) { _isPresent } }',b,void 0).pipe(a.deserialize(N5o))};
S5o=function(a,b){b=a.serialize(O5o,b);return a.config.request("GenerateQuery",'query GenerateQuery($projectId: String!, $location: String = "global", $prompt: String!, $context: IN_google_cloud_geminidataanalytics_v1main_QueryDataContext!) @Signature(bytes: "2/bCWovo0wwxClhc3qiG3QMyfjLXx6xTacsZ9Aw0bWMFI=") { GenerateQuery(projectId: $projectId, location: $location, prompt: $prompt, context: $context) { generatedQuery } }',b,void 0).pipe(a.deserialize(O5o))};
T5o=function(a,b){b=a.serialize(P5o,b);return a.config.request("ListContextStoreLocations",'query ListContextStoreLocations($projectId: String!) @NullProto @Signature(bytes: "2/BZcuAyto+Dlgvig25H3IkiBOcsCumvICjjFmaZMJiao=") { ListContextStoreLocations(projectId: $projectId) { locationId } }',b,void 0).pipe(a.deserialize(P5o))};_.U5o={segmentPath:[],nodeType:"",nextPageToken:"",totalSize:0,hasTotalSize:!1,hasChildren:!0,semanticMetadata:[],children:[{segmentPath:["Contexts"],nodeType:"STUDIO_CONTEXT_NODE_TYPE_CONTEXT_COLLECTION",nextPageToken:"",totalSize:2,hasTotalSize:!0,hasChildren:!0,semanticMetadata:[{key:"releaseStage",value:"preview"},{key:"defaultContextStore",value:"projects/test-project/locations/us-east1/stores/default"},{key:"defaultContextStoreState",value:"ACTIVE"}],children:[_.L5o({segment:"test-agent1",contextSetId:"projects/test-project/locations/us-east1/stores/default/contextSets/test-agent1",
displayName:"My Agent 1",description:"Very useful agent",contextStoreId:"projects/test-project/locations/us-east1/stores/default",contextSetVersion:"test-version"}),_.L5o({segment:"test-agent2",contextSetId:"projects/test-project/locations/us-east1/stores/default/contextSets/test-agent2",displayName:"My Agent 2",description:"Very useful agent",contextStoreId:"projects/test-project/locations/us-east1/stores/default",contextSetVersion:"test-version"})]}]};_.V5o=class{};_.V5o.\u0275fac=function(a){return new (a||_.V5o)};_.V5o.\u0275prov=_.wd({token:_.V5o,factory:_.V5o.\u0275fac});_.W5o=function(a,{contextStoreId:b,contextSetId:c,contextSetVersion:d,contextJson:e}){return a.route.snapshot.queryParams.useFake?_.t():a.scopeProvider.getContextScope().pipe(_.A(f=>R5o(a.graphqlClient,{contextSetId:c,contextSetVersion:d,contextJson:e,storeId:b,projectNumber:f.projectNumber}).pipe(_.w(()=>{}))))};
_.X5o=function(a,{contextStoreId:b,contextSetId:c}){return a.route.snapshot.queryParams.useFake?_.t():a.scopeProvider.getContextScope().pipe(_.A(d=>Q5o(a.graphqlClient,{projectId:d.projectId,projectNumber:d.projectNumber,storeId:b,contextSetId:c}).pipe(_.w(()=>{}))))};
_.Y8=class{constructor(){this.graphqlClient=_.k(_.I5o);this.route=_.k(_.Qh);this.scopeProvider=_.k(_.V5o)}listLocations(a){return T5o(this.graphqlClient,{projectId:a}).pipe(_.w(b=>{let c;return(c=b.ListContextStoreLocations.map(d=>({name:d.locationId,type:"REGION"})))!=null?c:[]}))}generateQuery({prompt:a,datasourceReference:b}){return this.scopeProvider.getContextScope().pipe(_.A(c=>S5o(this.graphqlClient,{projectId:c.projectId,prompt:a,context:{datasourceReferences:{references:b}}}).pipe(_.w(d=>
{let e,f;return{generatedQuery:(f=(e=d.GenerateQuery)==null?void 0:e.generatedQuery)!=null?f:""}}))))}};_.Y8.\u0275fac=function(a){return new (a||_.Y8)};_.Y8.\u0275prov=_.wd({token:_.Y8,factory:_.Y8.\u0275fac});
}catch(e){_._DumpException(e)}
try{
var E6o;E6o=new Set(["us-central1","us-east4","us-east5","asia-east1","europe-west4"]);_.Z8=class{constructor(){this.graphqlClient=_.k(_.I5o)}getDefaultLocation(){return _.t("us-central1")}listLocations(a){return this.graphqlClient.queryListLocations({projectId:a}).pipe(_.w(b=>b.ListDisplayLocations.data),_.w(b=>{let c;return(c=b==null?void 0:b.filter(d=>d&&E6o.has(d.locationId)).map(d=>({name:d.locationId,type:"REGION"})))!=null?c:[]}))}};_.Z8.\u0275fac=function(a){return new (a||_.Z8)};
_.Z8.\u0275prov=_.wd({token:_.Z8,factory:_.Z8.\u0275fac});
}catch(e){_._DumpException(e)}
try{
_.pfq=class extends _.yZ{constructor(){super(_.k(_.So));_.k(_.iKd)}resolveWithPromise(){return _.hKd()}};_.pfq.\u0275fac=function(a){return new (a||_.pfq)};_.pfq.\u0275prov=_.wd({token:_.pfq,factory:_.pfq.\u0275fac,providedIn:"root"});
}catch(e){_._DumpException(e)}
try{
var O6q=function(){return{__tsickle_local_0:function(g,q,l,m){var B=g.length;for(l+=m?1:-1;m?l--:++l<B;)if(q(g[l],l,g))return l;return-1}}}.call(void 0).__tsickle_local_0;var P6q=function(){return{__tsickle_local_0:function(g){return g!==g}}}.call(void 0).__tsickle_local_0;var Q6q=function(){return{__tsickle_local_0:function(g,q,l){--l;for(var m=g.length;++l<m;)if(g[l]===q)return l;return-1}}}.call(void 0).__tsickle_local_0;var R6q=function(g,q,l){return{__tsickle_local_0:function(m,B,k){return B===B?l(m,B,k):g(m,q,k)}}}.call(void 0,O6q,P6q,Q6q).__tsickle_local_0;_.S6q=function(g){return{__tsickle_local_0:function(q,l){return!(q==null||!q.length)&&g(q,l,0)>-1}}}.call(void 0,R6q).__tsickle_local_0;_.T6q=function(){return{__tsickle_local_0:function(g,q,l){for(var m=-1,B=g==null?0:g.length;++m<B;)if(l(q,g[m]))return!0;return!1}}}.call(void 0).__tsickle_local_0;
}catch(e){_._DumpException(e)}
try{
_.bi("V681mf");
var U6q,V6q,W6q,X6q,Y6q,Z6q,$6q,b7q,a7q,c7q,e7q,f7q,g7q,h7q,X9,i7q,j7q,k7q,l7q,m7q,n7q,o7q,p7q,q7q,r7q,s7q,u7q,v7q,w7q,x7q,y7q,z7q,A7q,B7q,C7q,D7q,E7q,F7q,I7q,J7q,K7q,L7q,M7q,N7q,O7q,P7q,Q7q,R7q,S7q,V7q,W7q,X7q,Y7q,Z7q,$7q,a8q,b8q,e8q,d8q,Y9,c8q,f8q,g8q,h8q,i8q,j8q,k8q,l8q,m8q,n8q,o8q,p8q,q8q,r8q,s8q,t8q,u8q,v8q,w8q,y8q,C8q,D8q,E8q,F8q,G8q,H8q,I8q,J8q,K8q,L8q,M8q,N8q,O8q,Q8q,R8q,S8q,T8q,U8q,V8q,W8q,Y8q,Z8q,c9q,d9q,e9q,f9q,h9q,j9q,k9q,l9q,m9q,n9q,o9q,p9q,q9q,r9q,s9q,t9q,u9q,v9q,w9q,x9q,y9q,z9q,A9q,
B9q,C9q,D9q,F9q,H9q,I9q,J9q,K9q,L9q,M9q,N9q,O9q,P9q,Q9q,R9q,S9q,U9q,V9q,W9q,X9q,Y9q,Z9q,$9q,a$q,b$q,c$q,d$q,e$q,f$q,g$q,h$q,i$q,j$q,k$q,l$q,m$q,n$q,o$q,r$q,s$q,t$q,u$q,w$q,y$q,x$q,A$q,B$q,D$q,E$q,F$q,G$q,H$q,C$q,J$q,K$q,M$q,L$q,O$q,P$q,I$q,R$q,S$q,U$q,T$q,V$q,W$q,Q$q,Y$q,Z$q,X$q,$$q,aar,car,bar,dar,ear,far,gar,har,iar,jar,kar,lar,mar,nar,oar,par,qar,sar,tar,uar,war,yar,zar,Aar,xar,Car,Far,Ear,Gar,Iar,Jar,Kar,Mar,Nar,Oar,Par,Tar,Rar,Qar,Var,War,Xar,Yar,Zar,Z9,abr,bbr,cbr,dbr,ebr,fbr,gbr,hbr,ibr,jbr,
kbr,lbr,mbr,qbr,rbr,sbr,tbr,vbr,wbr,xbr,ybr,zbr,Abr,Bbr,Cbr,Gbr,Hbr,Ibr,Kbr,Mbr,Qbr,Rbr,Sbr,Wbr,Zbr,$br,acr,bcr,hcr,jcr,ncr,pcr,ocr,kcr,mcr,scr,tcr,ucr,wcr,xcr,ycr,zcr,Acr,Gcr,Hcr,Icr,Jcr,Kcr,Lcr,Mcr,Ocr,Pcr,Qcr,Rcr,Scr,Tcr,Ucr,Vcr,Wcr,Xcr,Ycr,Zcr,$cr,adr,bdr,cdr,ddr,edr,fdr,gdr,hdr,idr,jdr,kdr,ldr,mdr,fcr,ndr,odr,pdr,qdr,rdr,sdr,ecr,tdr,udr,vdr,gcr,wdr,xdr,ydr,Bdr,Cdr;U6q=function(a){return _.dH(a)};
V6q=function(a){let b;const c=((b=a==null?void 0:a.contextSets)!=null?b:[]).filter(_.zl);let d;const e=(d=a==null?void 0:a.name)!=null?d:"";return c.map(f=>{if(f){let n,q,r,u,v,x,B;var g=_.L5o({segment:(r=(n=f.contextSetId)==null?void 0:(q=n.split("/"))==null?void 0:q.pop())!=null?r:"",contextSetId:(u=f.contextSetId)!=null?u:"",displayName:(v=f.displayName)!=null?v:"",description:(x=f.description)!=null?x:"",contextStoreId:e,contextSetVersion:(B=f.version)!=null?B:""})}else g=void 0;return g}).filter(f=>
f!==void 0)};W6q=function({contextSets:a,defaultStoreName:b,defaultStoreState:c}){const d=a.length;return{segmentPath:[],nodeType:"",nextPageToken:"",totalSize:0,hasTotalSize:!1,hasChildren:!0,semanticMetadata:[],children:[{segmentPath:["Contexts"],nodeType:"STUDIO_CONTEXT_NODE_TYPE_CONTEXT_COLLECTION",nextPageToken:"",totalSize:d,hasTotalSize:!0,hasChildren:d>0,semanticMetadata:[{key:"releaseStage",value:"preview"},{key:"defaultContextStore",value:b},{key:"defaultContextStoreState",value:c}],children:a}]}};
X6q=function(a){var b,c;let d,e;a=(e=(b=a.data)==null?void 0:(c=b.stores)==null?void 0:(d=c.data)==null?void 0:d.filter(r=>{let u;return _.J5o((u=r==null?void 0:r.name)!=null?u:"")}).filter(_.zl))!=null?e:[];b=a.flatMap(V6q).filter(_.zl);c=void 0;b.length>0?c=a.find(r=>{let u;return!!(r==null?0:(u=r.contextSets)==null?0:u.length)}):a.length>0&&(c=a[0]);let f,g,n,q;return W6q({contextSets:b,defaultStoreName:(n=(f=c)==null?void 0:f.name)!=null?n:"",defaultStoreState:(q=(g=c)==null?void 0:g.state)!=
null?q:""})};
Y6q=function(a){let b,c,d,e,f,g,n,q;return{segmentPath:["","Queries",(b=a.studioQueryId)!=null?b:""],nodeType:"STUDIO_QUERY_NODE_TYPE_QUERY",nextPageToken:"",totalSize:0,hasTotalSize:!1,hasChildren:!1,semanticMetadata:[{key:"queryDisplayName",value:(c=a.displayName)!=null?c:""},{key:"project",value:(d=a.project)!=null?d:""},{key:"location",value:(e=a.location)!=null?e:""},{key:"studioQueryId",value:(f=a.studioQueryId)!=null?f:""},{key:"etag",value:(g=a.etag)!=null?g:""},{key:"queryText",value:(n=
a.queryString)!=null?n:""},{key:"queryLanguage",value:(q=a.queryLanguage)!=null?q:""}],children:[]}};
Z6q=function(a){let b;const c=(b=a.SearchDisplayStudioQueries)==null?void 0:b.totalCount;let d,e;return{segmentPath:[],nodeType:"",nextPageToken:"",totalSize:0,hasTotalSize:!1,hasChildren:!0,semanticMetadata:[],children:[{segmentPath:["Queries"],nodeType:"STUDIO_QUERY_NODE_TYPE_QUERY_COLLECTION",nextPageToken:(e=(d=a.SearchDisplayStudioQueries)==null?void 0:d.nextPageToken)!=null?e:"",totalSize:c!=null?c:0,hasTotalSize:_.zl(c),hasChildren:_.zl(c)?c>0:a.SearchDisplayStudioQueries.data.length>0,semanticMetadata:[{key:"releaseStage",
value:"preview"}],children:a.SearchDisplayStudioQueries.data.map(f=>f?Y6q(f):void 0).filter(f=>f!==void 0)}]}};
$6q=function(a,b){const c=b.SearchDisplayStudioQueries.data.length>0;let d;return{searchResultCompleteness:((d=b.SearchDisplayStudioQueries)==null?0:d.nextPageToken)?"INCOMPLETE":"COMPLETE",appliedSearchText:a,subtree:{segmentPath:[],nodeType:"",nextPageToken:"",totalSize:0,hasTotalSize:!1,hasChildren:!0,semanticMetadata:[],children:c?[{segmentPath:["Queries"],nodeType:"STUDIO_QUERY_NODE_TYPE_QUERY_COLLECTION",nextPageToken:"",totalSize:b.SearchDisplayStudioQueries.data.length,hasTotalSize:!1,hasChildren:!0,
semanticMetadata:[{key:"releaseStage",value:"preview"}],children:b.SearchDisplayStudioQueries.data.map(e=>e?Y6q(e):void 0).filter(e=>e!==void 0)}]:[]}}};
b7q=function(a,b){return{command:monaco.editor.registerCommand("fmq.autofix",(c,...d)=>{b.emit(d[0])}),codeActionProvider:monaco.languages.registerCodeActionProvider(a,{provideCodeActions:(c,d,e)=>({actions:e.markers.filter(f=>f.severity===monaco.MarkerSeverity.Error).map(f=>({title:"Fix",kind:"quickfix",diagnostics:[f],isPreferred:!0,command:{id:"fmq.autofix",title:"Fix",arguments:[f.message]}})),dispose:a7q})})}};a7q=function(){};c7q=function(a){a&1&&(_.Bg(0,0,1),_.K(1,"span"),_.Cg())};
e7q=function(a){if(a&1){const b=_.l();_.I(0,"div",1);_.Bg(1,0);_.I(2,"span",2);_.P("click",function(){_.m(b);const c=_.Q();return _.p(c.focusOnEditor())});_.I(3,"span",3);_.P("onTargetedCalloutRendered",function(){_.m(b);const c=_.Q();return _.p(d7q(c))});_.J();_.K(4,"span");_.D(5,c7q,2,0,"span");_.K(6,"span");_.I(7,"span",4);_.P("click",function(){_.m(b);_.Q().openGenSqlRequested.emit();return _.p()});_.J()();_.Cg();_.J()}a&2&&(a=_.Q(),_.y(3),_.H("hideTargetedCallout",!a.enableGeminiTransformReplace),
_.y(2),_.E(a.enableGeminiTransformReplace?5:-1),_.y(2),_.H("ve",a.ve.BqSqeDuetPlaceholderLink)("veClick",!0))};f7q=function(a){a&1&&(_.I(0,"cm-error",5),_.R(1),_.J());a&2&&(a=_.Q(),_.y(),_.S(" ",a.messages.MSG_DATABASES_PASSWORD_INCORRECT," "))};g7q=function(a,b=""){return{password:a.nonNullable.control(b,[_.Os])}};h7q=function(a){if(a===1)return 1;if(a===0)return 0};X9=function(a,b,c){c!==void 0&&a.push({key:b,value:c})};i7q=function(a){return a?"Generate SQL using agent: "+a:"Generate SQL"};
j7q=function(a){a&1&&_.K(0,"cm-icon",2);a&2&&(a=_.Q(),_.H("icon",a.iconNew))};k7q=function(a){a&1&&_.K(0,"cfc-icon",2);a&2&&(a=_.Q(),_.H("icon",a.iconOld))};
l7q=function(a){if(a&1){const b=_.l();_.I(0,"cfc-menu-section",4)(1,"cfc-menu-item")(2,"cai-message",8)(3,"cai-message-text");_.R(4);_.J();_.I(5,"cai-message-actions")(6,"button",9);_.P("apisEnablerOnEnabled",function(){_.m(b);const c=_.Q();return _.p(c.onApiEnabled())});_.R(7);_.J()()()()()}a&2&&(a=_.Q(),_.H("hasSeparator",!1),_.y(2),_.H("titleVisible",!1),_.y(2),_.S(" ",a.messages.MSG_DATABASES_ENABLE_COMPANION_API_TOOLTIP," "),_.y(2),_.H("ve",a.ve.FrPlatformDuetGeminiEnablementButton)("veClick",
!0)("apisEnablerDisabled",a.apisEnablerDisabled)("apisEnablerApisList",a.apisEnablerApisList),_.y(),_.bh(a.messages.MSG_DATABASES_GEMINI_API_ENABLEMENT_BUTTON_LABEL))};
m7q=function(a){if(a&1){const b=_.l();_.I(0,"cfc-menu-item",10);_.P("click",function(c){_.m(b);const d=_.Q();return _.p(d.toggleFixQuery(c))});_.J()}a&2&&(a=_.Q(),_.H("icon",a.isFixQueryEnabled()?"done":void 0)("label",a.messages.MSG_DATABASES_FIX_QUERY_GENERATION_MENU_ITEM)("note",a.messages.MSG_DATABASES_FIX_QUERY_GENERATION_MENU_ITEM_NOTE)("ve",a.ve.FrPlatformDuetFixQueryMenuItem)("veClick",!0)("badge",a.badgeType),_.ng("aria-checked",a.isFixQueryEnabled()))};
n7q=function(a){if(a&1){const b=_.l();_.I(0,"cfc-menu-section",4)(1,"cfc-menu-item",11);_.P("click",function(){_.m(b);const c=_.Q();return _.p(c.handleFeedbackClick())});_.J()()}a&2&&_.H("hasSeparator",!0)};
o7q=function(a){if(a&1){const b=_.l();_.I(0,"div",1)(1,"span",2);_.P("click",function(){_.m(b);const c=_.Q();c.focusOnEditor();c.openGenSqlRequested.emit();return _.p()});_.I(2,"mat-chip",3);_.K(3,"cm-icon",4);_.I(4,"span",5);_.R(5);_.J()()()()}a&2&&(a=_.Q(),_.$g("animated",a.enableAnimation),_.y(),_.H("ve",a.ve.FrDatexGenerateSqlChip)("veClick",!0)("veImpression",!0),_.y(2),_.H("icon",a.icons.sparkIcon),_.y(2),_.bh(a.chipText))};
p7q=function(a){a&1&&(_.I(0,"cfc-progress-button",5)(1,"button",6)(2,"span"),_.R(3),_.J()()());a&2&&(a=_.Q(),_.H("inProgress",a.shouldDisplayLoader)("message",a.buttonText),_.y(3),_.bh(a.buttonText))};
q7q=function(a){if(a&1){const b=_.l();_.I(0,"cfc-split-button",7)(1,"button",8);_.P("click",function(){_.m(b);const c=_.Q();c.onRun.emit();c.liveAnnouncer.announce(c.runStatementLoaderText());return _.p()});_.K(2,"cfc-icon",9);_.I(3,"span");_.R(4);_.J()()()}a&2&&(a=_.Q(),_.H("disabled",a.isDisabled())("menu",a.menu())("raised",!0)("primary",!0),_.y(),_.H("ve",a.ve.FrDatexEditorRunButton)("veClick",!0)("disabled",a.isDisabled())("disabled",a.Boolean(a.disabledTooltip())&&a.isDisabled())("disabledTooltip",
a.disabledTooltip()),_.y(3),_.S(" ",a.buttonText," "))};r7q=function(a){if(a&1){const b=_.l();_.I(0,"button",10);_.P("click",function(){_.m(b);const c=_.Q();c.onCancel.emit();c.liveAnnouncer.announce(c.cancelStatementLoaderText());return _.p()});_.K(1,"cfc-icon",11);_.I(2,"span");_.R(3);_.J()()}a&2&&(a=_.Q(),_.H("ve",a.ve.FrDatexEditorCancelButton)("veClick",!0),_.y(3),_.S(" ",a.buttonText," "))};
s7q=function(a){if(a&1){const b=_.l();_.I(0,"button",12);_.P("click",function(){_.m(b);const c=_.Q();c.onRun.emit();c.liveAnnouncer.announce(c.runStatementLoaderText());return _.p()});_.K(1,"cfc-icon",9);_.I(2,"span");_.R(3);_.J()()}a&2&&(a=_.Q(),_.H("ve",a.ve.FrDatexEditorRunButton)("veClick",!0)("disabled",a.isDisabled())("disabled",a.Boolean(a.disabledTooltip())&&a.isDisabled())("disabledTooltip",a.disabledTooltip()),_.y(3),_.S(" ",a.buttonText," "))};
u7q=function(a){if(a&1){const b=_.l();_.I(0,"cfc-menu",5)(1,"cfc-menu-item",6);_.P("click",function(){_.m(b);const c=_.Q();return _.p(t7q(c))});_.J();_.Lg(2);_.J()}a&2&&(a=_.Q(),_.y(),_.H("icon",a.databaseSearchIcon)("label",a.messages.MSG_FR_SAVE_AS)("ve",a.ve.StudioSavedQueriesSaveAsMenuItem)("veClick",!0)("note",a.messages.MSG_FR_SAVE_AS_QUERY_NOTE))};
v7q=function(a){if(a&1){const b=_.l();_.I(0,"fr-database-studio-save-button",24);_.P("onSave",function(c){_.m(b);_.Q(2).savedQuery.emit(c);return _.p()});_.L(1,25);_.Lg(2,3);_.M();_.J()}if(a&2){_.Q();a=_.Jg(5);const b=_.Q();_.H("queryText",a)("queryLanguage",b.queryLanguage())("studioQueryRef",b.studioQueryRef())("isDisabled",b.saveBtnState().isDisabled)("disabledTooltip",b.saveBtnState().disableTooltip)}};
w7q=function(a){if(a&1){const b=_.l();_.I(0,"button",26);_.P("click",function(){_.m(b);const c=_.Q(2);return _.p(c.formatQuery())});_.I(1,"span");_.N(2,7);_.J()()}a&2&&(a=_.Q(2),_.H("ve",a.ve.FrDatexEditorFormatButton)("veClick",!0)("disabled",a.runBtnState().isDisabled)("disabledTooltip",a.runBtnState().disableTooltip))};x7q=function(a){a&1&&(_.L(0),_.N(1,9),_.M())};y7q=function(a){a&1&&(_.L(0),_.N(1,10),_.M())};
z7q=function(a){if(a&1){const b=_.l();_.I(0,"button",27);_.P("click",function(){_.m(b);const c=_.Q(2);return _.p(c.openGenSql())})("apisEnablerOnEnabled",function(){_.m(b);_.Q(2).duetEnablementService.apiJustEnabled.next(!0);return _.p()});_.K(1,"cm-icon",28);_.L(2);_.N(3,8);_.M();_.J();_.Hg(4);_.I(5,"button",29);_.P("click",function(){_.m(b);const c=_.Jg(4),d=_.Q(2);if(d.apisEnablerDisabled())d.onExplainEvent(c!=null?c:d.queryText());return _.p()})("apisEnablerOnEnabled",function(){_.m(b);_.Q(2).duetEnablementService.apiJustEnabled.next(!0);
return _.p()});_.K(6,"cm-icon",28);_.D(7,x7q,2,0,"ng-container")(8,y7q,2,0,"ng-container");_.J()}if(a&2){a=_.Q(2);_.H("ve",a.ve.FrDatexEditorGenerateSqlButton)("veClick",!0)("apisEnablerDisabled",a.apisEnablerDisabled())("apisEnablerApisList",a.apisEnablerApisList)("cfcIamCheck",a.geminiGenSqlPermissions)("cfcIamOperator",a.IamCheckOperator.AND);_.y();_.H("icon",a.icons.sparkGradientIcon);_.y(3);const b=_.Ig(a.selectedQueryText()),c=a.runBtnState();_.y();_.H("disabled",c.isDisabled)("disabledTooltip",
c.disableTooltip)("ve",a.ve.FrDatexEditorExplainButton)("veClick",!0)("apisEnablerDisabled",a.apisEnablerDisabled())("apisEnablerApisList",a.apisEnablerApisList)("cfcIamCheck",a.geminiChatPermissions)("cfcIamOperator",a.IamCheckOperator.AND);_.y();_.H("icon",a.icons.chatSparkIcon);_.y();_.E(b?7:8)}};
A7q=function(a){if(a&1){const b=_.l();_.I(0,"fr-studio-duet-placeholder",32,4);_.P("openGenSqlRequested",function(){_.m(b);_.Q(3).duetPlugin().openGenSql();return _.p()});_.J()}a&2&&(a=_.Q(3),_.H("enabled",!0)("isQueryEmpty",a.isCodeEditorEmpty())("duetPluginShown",!(!a.monacoEditor||!a.dataFetcher()))("chipText",a.sqlGenChipText()))};
B7q=function(a){if(a&1){const b=_.l();_.I(0,"shared-query-editor-duet-placeholder",33,5);_.P("openGenSqlRequested",function(){_.m(b);_.Q(3).duetPlugin().openGenSql();return _.p()});_.J()}a&2&&(a=_.Q(3),_.H("enabled",!0)("isQueryEmpty",a.isCodeEditorEmptyOrWhitespace())("duetPluginShown",!(!a.monacoEditor||!a.dataFetcher())))};C7q=function(a){a&1&&_.D(0,A7q,2,4,"fr-studio-duet-placeholder",30)(1,B7q,2,3,"shared-query-editor-duet-placeholder",31);a&2&&(a=_.Q(2),_.E(a.useFrDuetPlaceholder?0:1))};
D7q=function(a){a&1&&_.K(0,"sqe-duet-plugin",34);if(a&2){a=_.Q();const b=_.Q(2);let c;_.H("editor",b.monacoEditor)("dataFetcher",a)("analyticsService",b.sqlCardAnalyticsService())("useNudgeButton",b.nl2sqlNudgesButtonBarEnabled)("useNudgeChip",b.nl2sqlNudgesChipEnabled)("commentPrefix",b.commentPrefix())("genSqlTitle",(c=b.sqlGenCardTitle())!=null?c:b.MSG_FR_GENERATE_SQL_TITLE)}};E7q=function(a){a&1&&_.D(0,D7q,1,7,"sqe-duet-plugin",34);a&2&&(a=_.Q(2),_.E(a.monacoEditor?0:-1))};
F7q=function(a){if(a&1){const b=_.l();_.I(0,"sqe-autofix-plugin",35);_.P("autofix",function(c){_.m(b);const d=_.Q(2);return _.p(d.autofix(c))});_.J()}a&2&&(a=_.Q(2),_.H("language",a.language()))};
I7q=function(a){if(a&1){const b=_.l();_.I(0,"shared-query-editor",15,2);_.U(2,"async");_.U(3,"async");_.P("queryTextChange",function(c){_.m(b);_.Q().queryTextChange.emit(c);return _.p()})("queryTextSelectionChange",function(c){_.m(b);var d=_.Q();d.enableRunSelectedQuery()&&(d.store.setSelectedQueryText({editorId:d.editorId(),selectedQueryText:c}),d.queryTextSelectionChange.emit(c));return _.p()})("monacoInitialized",function(c){_.m(b);const d=_.Q();return _.p(d.onMonacoInitialized(c))})("runQueryClicked",
function(c){_.m(b);const d=_.Q();return _.p(d.onRunQuery(c.queryText))})("autofixClicked",function(c){_.m(b);const d=_.Q();return _.p(d.autofix(c))})("onAccept",function(){_.m(b);const c=_.Q();return _.p(c.store.updateOnDiffClosed(c.editorId()))})("queryTextToApproveChange",function(c){_.m(b);const d=_.Q();return _.p(d.store.updateOnModifiedQueryTextChange({editorId:d.editorId(),text:c}))})("onAcceptAndRun",function(){_.m(b);const c=_.Q();return _.p(c.store.updateOnDiffClosed(c.editorId()))})("onDecline",
function(){_.m(b);const c=_.Q();return _.p(c.store.updateOnDiffClosed(c.editorId()))})("autofixRequiredApisEnabled",function(){_.m(b);_.Q().duetEnablementService.apiJustEnabled.next(!0);return _.p()});_.I(4,"div",16);_.Hg(5);_.I(6,"fr-database-studio-query-button",17);_.U(7,"async");_.P("onCancel",function(){_.m(b);_.Q().cancelQuery.emit();return _.p()})("onRun",function(){_.m(b);const c=_.Jg(5),d=_.Q();return _.p(d.onRunQuery(c))});_.J();_.D(8,v7q,3,5,"fr-database-studio-save-button",18);_.Lg(9);
_.D(10,w7q,3,4,"button",19);_.I(11,"button",20);_.P("click",function(){_.m(b);const c=_.Q();return _.p(c.clearQuery())});_.Bg(12,6);_.K(13,"span");_.Cg();_.J();_.D(14,z7q,9,18);_.Lg(15,1);_.J();_.I(16,"div",21);_.Lg(17,2);_.J();_.I(18,"shared-query-editor-explainability-card",22);_.P("explainQuery",function(c){_.m(b);const d=_.Q();return _.p(d.onExplainEvent(c))});_.J();_.K(19,"shared-query-editor-loading-indicator",null,3);_.D(21,C7q,2,1);_.D(22,E7q,1,1);_.D(23,F7q,1,1,"sqe-autofix-plugin",23);_.J()}if(a&
2){let b,c;a=_.Q();const d=_.Yg(2),e=_.Yg(4);let f;_.H("additionalTriggerCharacters",a.additionalTriggerCharacters())("editorName",a.editorName)("validator",a.validator)("markerData",(f=_.W(2,29,a.store.markers$))!=null?f:_.kh(36,G7q))("autocompleteFn",a.autocompleteFn)("config",a.config)("bannerMessage",_.W(3,31,a.store.showDuetPermissionWarning$)?_.mh(37,H7q,d,e):void 0)("queryText",a.queryTextInput())("queryTextToApprove",a.queryTextToApprove())("autofixExplanation",a.store.autofixExplanation())("autofixOptions",
a.autofixOptions())("editorState",a.sharedQueryEditorState);_.y(5);_.Ig(a.queryText());_.y();_.H("isRunning",a.isRunning())("isDisabled",a.runBtnState().isDisabled)("isCanceling",a.isCanceling())("disabledTooltip",a.runBtnState().disableTooltip)("isSelected",!((b=_.W(7,34,a.store.selectedQueryText$))==null||!b.trim()))("menu",a.queryButtonMenu());_.y(2);_.E(a.enableSaveQuery()&&!a.isTpc?8:-1);_.y(2);_.E(a.enableQueryFormatting()?10:-1);_.y();_.H("ve",a.ve.FrDatexEditorClearButton)("veClick",!0)("disabled",
a.runBtnState().isDisabled)("disabledTooltip",a.runBtnState().disableTooltip);_.y(3);_.E(a.showGeminiButtons()?14:-1);_.y(4);_.H("enabled",a.showDuetUiElements()&&a.userHasIamForDuet()&&a.enableDuetExplain());_.y(3);_.E((a.queryEditor==null?0:a.queryEditor.codeEditor)?21:-1);_.y();_.E((c=a.dataFetcher())?22:-1,c);_.y();_.E(a.hasAutofixPlugin()?23:-1)}};J7q=function(a){a&1&&(_.L(0),_.Bg(1,11),_.K(2,"strong"),_.Cg(),_.M());a&2&&(a=_.Q(),_.y(2),_.Eg(a.geminiPermissions),_.Fg(1))};
K7q=function(a){if(a&1){const b=_.l();_.I(0,"button",36);_.P("click",function(){_.m(b);const c=_.Q();return _.p(c.dismissDuetPermissionWarning())});_.N(1,12);_.J()}};
L7q=function(a){a&1&&(_.I(0,"cfc-callout-tour",14)(1,"cfc-callout-step",37),_.R(2),_.J(),_.I(3,"cfc-callout-step",38),_.R(4),_.J(),_.I(5,"cfc-callout-step",39),_.R(6),_.J(),_.I(7,"cfc-callout-step",40),_.R(8),_.J()());a&2&&(a=_.Q(),_.H("targetedCalloutFeatureId",a.fixMyQueryCalloutTourFeatureId())("hasTryItAsFinalStep",!0),_.y(),_.H("calloutHeader",a.calloutMessages.fix.header)("waitUntil",a.showFirstCalloutStep)("forceShowTryItButton",!0),_.y(),_.S(" ",a.calloutMessages.fix.body," "),_.y(),_.H("calloutHeader",
a.calloutMessages.review.header)("autoWaitTarget",!0)("forceHideBackButton",!0),_.y(),_.S(" ",a.calloutMessages.review.body," "),_.y(),_.H("calloutHeader",a.calloutMessages.explanation.header)("autoWaitTarget",!0),_.y(),_.S(" ",a.calloutMessages.explanation.body," "),_.y(),_.H("calloutHeader",a.calloutMessages.apply.header)("autoWaitTarget",!0),_.y(),_.S(" ",a.calloutMessages.apply.body," "))};
M7q=function(a){if(!a||a.type==="null"||a.type==="binary")return"";if(a.type==="link")return a.value.anchorText;if(a.type==="chip")return a.value.chipText;if(a.type==="date")return a.value.toISOString();if(a.type==="string")return a.charsTruncated?`${a.value} [truncated by ${a.charsTruncated} characters]`:a.value;if(a.type==="number"||a.type==="boolean")return a.value};N7q=function({rows:a,columns:b}){const c=b.map(d=>d.header);a=a.map(d=>b.map(e=>String(M7q(d.data[e.id]))));return[c,...a]};
O7q=function(a,b){a=N7q(a);const c=b==="CSV"?e=>`"${e.replace(/"/g,'""')}"`:e=>e,d=b==="CSV"?",":"\t";return a.map(e=>e.map(c).join(d)).join("\n")+"\n"};P7q=function(a,b){return Object.fromEntries(b.map(c=>[c.header,M7q(a.data[c.id])]))};Q7q=function({queryText:a,errorText:b,dialect:c}){return c?`I have the following ${c} query: ${a}
And I am getting the following error: ${b}`:`I have the following query: ${a}
And I am getting the following error: ${b}`};R7q=function(a){a&1&&_.K(0,"mat-spinner",4);a&2&&_.H("diameter",18)};S7q=function(a){a&1&&_.K(0,"cm-icon",5);a&2&&(a=_.Q(),_.H("icon",a.searchIcon))};
V7q=function(a,b){if(a&1){const c=_.l();_.I(0,"mat-chip-row",11);_.P("removed",function(){const d=_.m(c).$implicit,e=_.Q();return _.p(T7q(e,d))})("edited",function(d){const e=_.m(c).$implicit,f=_.Q();return _.p(U7q(f,e,d))});_.R(1);_.K(2,"cfc-chip-remove-icon",12);_.J()}a&2&&(a=b.$implicit,_.H("editable",!0),_.y(),_.S(" ",a," "),_.y(),_.H("chipLabel",a))};
W7q=function(a){if(a&1){const b=_.l();_.I(0,"button",13);_.P("click",function(){_.m(b);const c=_.Q();return _.p(c.handleClearSearchClick())});_.K(1,"cm-icon",14);_.J()}a&2&&(a=_.Q(),_.y(),_.H("icon",a.closeIcon))};X7q=function(a){a&1&&_.K(0,"mat-spinner",3);a&2&&_.H("diameter",18)};Y7q=function(a){a&1&&_.K(0,"cm-icon",4);a&2&&(a=_.Q(),_.H("icon",a.searchIcon))};
Z7q=function(a){if(a&1){const b=_.l();_.I(0,"button",7);_.P("click",function(){_.m(b);const c=_.Q();return _.p(c.handleClearSearchClick())});_.K(1,"cm-icon",8);_.J()}a&2&&(a=_.Q(),_.H("ve",a.ve.FrPlatformObjectExplorerSearchBarClearButton)("veClick",!0),_.y(),_.H("icon",a.closeIcon))};$7q=function(a){return a.replaceAll(/[^a-zA-Z0-9-]/g,"")};a8q=function(a,b){if(a)return(b?"#loadedChildren ":"")+a.replace(/^#loadedChildren /,"")};
b8q=function(a,b,c,d){const e=a8q(b.segmentPath.join(" "),b.children.length>0);let f,g;return{parent:a,children:new _.HA(b.children.map(n=>b8q(e,n,c,d))),kind:"node",rowID:e,segmentPath:b.segmentPath,count:b.totalSize,hasCount:b.hasTotalSize,hasMoreChildrenBefore:!1,hasMoreChildrenAfter:b.children.length===0&&b.hasChildren||b.nextPageToken!=="",nextPageToken:b.nextPageToken,icon:c.getIcon(b),menuModel:c.getMenuModel(b),menuTemplate:(f=c.getMenuTemplate(b))==null?void 0:f.template,menuTemplateContext:(g=
c.getMenuTemplate(b))==null?void 0:g.context,menuTriggerId:`fr-object-explorer-menu-trigger-${b.segmentPath.map($7q).join("-")}`,textContent:c.getDisplayText(b),textSpans:Y9("isCollection",b)==="true"?void 0:c8q(c.getDisplayText(b),d),tooltip:c.getTooltip(b),secondaryIcon:void 0,secondaryTooltip:void 0,secondaryIconClickHandler:void 0,badge:d8q(b),isBold:Y9("isCollection",b)==="true",serverModel:Object.freeze(b),cfcCalloutStepTarget:void 0,nodeCalloutMessage:void 0}};
e8q=function(a){const b=[];a.textSpans&&b.push(a.textContent);a.children.forEach(c=>{c=e8q(c);b.push(...c)});return b};d8q=function(a){a=Y9("releaseStage",a);if(a==="preview"||a==="new")return a};Y9=function(a,b){return(new Map(b.semanticMetadata.map(c=>[c.key,c.value]))).get(a)};
c8q=function(a,b){if(b&&a){var c=[...a.matchAll(new RegExp(_.XKd(b),"gi"))].filter(({index:f})=>f!==void 0).map(({index:f})=>f).sort((f,g)=>f<g?-1:1);if(c.length!==0){var d=[],e=0;b=b.length;for(const f of c)c=f+b,e=a.slice(e,f),e.length>0&&d.push({text:e,highlighted:!1}),e=a.slice(f,c),d.push({text:e,highlighted:!0}),e=c;e<a.length&&d.push({text:a.slice(e),highlighted:!1});return d}}};
f8q=function(a,b){if(a&1){const c=_.l();_.I(0,"button",6);_.P("click",function(){const d=_.m(c);return _.p(d.onClick())});_.R(1);_.J()}a&2&&(_.H("ve",b.ve)("veClick",!!b.ve)("veImpression",!!b.ve),_.y(),_.S(" ",b.label," "))};g8q=function(a){if(a&1){const b=_.l();_.I(0,"button",6);_.P("click",function(){_.m(b);const c=_.Q(2);return _.p(c.retry())});_.N(1,1);_.J()}a&2&&(a=_.Q(2),_.H("ve",a.ve.FrPlatformObjectExplorerTreeErrorRetryButton)("veClick",!0)("veImpression",!0))};
h8q=function(a,b){a&1&&(_.I(0,"cfc-message",2)(1,"cfc-message-text"),_.R(2),_.J(),_.I(3,"cfc-message-actions"),_.D(4,f8q,2,4,"button",5)(5,g8q,2,3,"button",5),_.J()());if(a&2){let c;_.y(2);_.S(" ",b.message," ");_.y(2);_.E((c=b.customAction)?4:5,c)}};
i8q=function(a){a&1&&(_.I(0,"button",11),_.K(1,"cm-icon",17),_.J());if(a&2){a=_.Q().$implicit;const b=_.Q(2);_.H("ve",b.ve.FrPlatformObjectExplorerTreePrimaryIconButton)("veClick",!0)("cfcTooltip",a.tooltip);_.ng("aria-label",a.icon.ariaLabel);_.y();_.H("icon",a.icon.svg)}};j8q=function(a){a&1&&(_.I(0,"mark",18),_.R(1),_.J());a&2&&(a=_.Q().$implicit,_.y(),_.bh(a.text))};k8q=function(a){a&1&&(_.I(0,"span"),_.R(1),_.J());a&2&&(a=_.Q().$implicit,_.y(),_.bh(a.text))};
l8q=function(a,b){a&1&&_.D(0,j8q,2,1,"mark",18)(1,k8q,2,1,"span");a&2&&_.E(b.$implicit.highlighted?0:1)};m8q=function(a){a&1&&(_.I(0,"span",19),_.R(1),_.J());a&2&&(a=_.Q().$implicit,_.$g("tree-node-bold",a.isBold),_.y(),_.bh(a.textContent))};n8q=function(a){a&1&&(_.I(0,"span",13),_.R(1),_.J());a&2&&(a=_.Q().$implicit,_.y(),_.S("\u00a0",a.count))};o8q=function(a){a&1&&_.K(0,"cfc-badge",14);a&2&&(a=_.Q().$implicit,_.H("type",a.badge))};
p8q=function(a){if(a&1){const b=_.l();_.I(0,"button",20);_.P("click",function(){_.m(b);const c=_.Q().$implicit;return _.p(c.secondaryIconClickHandler==null?null:c.secondaryIconClickHandler())});_.K(1,"cm-icon",17);_.J()}if(a&2){a=_.Q().$implicit;const b=_.Q(2);_.$g("fr-oe-secondary-icon",!a.menuModel);_.H("ve",b.ve.FrPlatformObjectExplorerTreeSecondaryIconButton)("veClick",!0)("cfcTooltip",a.secondaryTooltip);_.ng("aria-label",a.secondaryIcon.ariaLabel);_.y();_.H("icon",a.secondaryIcon.svg)}};
q8q=function(a){if(a&1){const b=_.l();_.I(0,"button",21);_.P("click",function(){_.m(b);const c=_.Q().$implicit,d=_.Q(2);return _.p(d.setSelectedNode(c))});_.K(1,"cm-icon",17);_.J()}if(a&2){a=_.Q().$implicit;const b=_.Q(2),c=_.Yg(6);let d,e;_.H("id",a.menuTriggerId)("cfcMenuTriggerData",a)("cfcMenuTriggerFor",(d=a.menuTemplate)!=null?d:c)("ve",b.ve.FrPlatformObjectExplorerTreeMenuButton)("veClick",!0)("cfcCalloutStepTarget",(e=a.cfcCalloutStepTarget)!=null?e:"")("disableTargetedCallout",!a.nodeCalloutMessage)("targetedCalloutFeatureId",
a.nodeCalloutMessage==null?null:a.nodeCalloutMessage.featureId)("calloutMessage",a.nodeCalloutMessage==null?null:a.nodeCalloutMessage.calloutContent);_.y();_.H("icon",b.moreIcon)}};
r8q=function(a,b){a&1&&(_.I(0,"div",9)(1,"span",10),_.D(2,i8q,2,5,"button",11),_.rg(3,l8q,2,1,null,null,_.pg,!1,m8q,2,3,"span",12),_.D(6,n8q,2,1,"span",13),_.D(7,o8q,1,1,"cfc-badge",14),_.J(),_.I(8,"span"),_.D(9,p8q,2,7,"button",15),_.D(10,q8q,2,10,"button",16),_.J()());a&2&&(a=b.$implicit,_.H("cfcTooltip",a.textContent),_.y(2),_.E(a.icon?2:-1),_.y(),_.tg(a.textSpans),_.y(3),_.E(a.hasCount?6:-1),_.y(),_.E(a.badge?7:-1),_.y(2),_.E(a.secondaryIcon?9:-1),_.y(),_.E(a.menuModel||a.menuTemplate?10:-1))};
s8q=function(a){if(a&1){const b=_.l();_.I(0,"cfc-tree",7);_.P("onRowSelected",function(c){_.m(b);const d=_.Q();let e;c=(e=c.serverModel)!=null?e:null;d.nodeSelected.emit(c);return _.p()});_.C(1,r8q,11,7,"ng-template",8);_.J()}a&2&&(a=_.Q(),_.H("root",a.rootNode)("dataSource",a.dataSource)("expansionSize",a.pageSize)("pinlines",!1)("initiallyExpanded",!0)("depthIndent",24))};t8q=function(a,b){a&1&&_.K(0,"cfc-menu",22);a&2&&(a=b.$implicit,_.H("menu",a.menuModel)("ariaLabelledBy",a.menuTriggerId))};
u8q=function(a){let b,c;return{defaultContextStore:(b=Y9("defaultContextStore",a))!=null?b:"",defaultContextStoreState:(c=Y9("defaultContextStoreState",a))!=null?c:""}};v8q=function(a){let b,c,d,e,f;return{contextSetId:(b=Y9("contextSetId",a))!=null?b:"",tabName:(c=Y9("displayName",a))!=null?c:"",description:(d=Y9("description",a))!=null?d:"",contextStoreId:(e=Y9("contextStoreId",a))!=null?e:"",contextSetVersion:(f=Y9("contextSetVersion",a))!=null?f:""}};
w8q=function(a){a&1&&(_.I(0,"cfc-message",3)(1,"cfc-message-text"),_.R(2),_.J()());a&2&&(a=_.Q(),_.y(2),_.S(" ",a.disabledReason()," "))};
y8q=function(a,b){if(a&1){const c=_.l();_.I(0,"cfc-menu",4)(1,"cfc-menu-section")(2,"cfc-menu-item",5);_.P("click",function(){const d=_.m(c).$implicit,e=_.Q();return _.p(x8q(e,d.serverModel))});_.J()()()}if(a&2){a=b.$implicit;b=_.Q();const c=b.getDisabledTooltip(a.serverModel);_.H("ariaLabelledBy",a.menuTriggerId);_.y(2);_.H("label",b.i18n.MSG_STUDIO_CONTEXTS_TREE_CREATE_AGENT)("cfcIamCheck",b.menuPermissionsConfig.get(b.ObjexMenuAction.CREATE_AGENT))("disabled",!!c)("disabledTooltip",c)}};
C8q=function(a,b){if(a&1){const c=_.l();_.I(0,"cfc-menu",4)(1,"cfc-menu-section")(2,"cfc-menu-item",5);_.P("click",function(){var d=_.m(c).$implicit,e=_.Q();d=d.serverModel;e.nodeSelected.emit(d);e.trackAction(d.nodeType,"Inspect agent");return _.p()});_.J();_.I(3,"cfc-menu-item",5);_.P("click",function(){const d=_.m(c).$implicit,e=_.Q();return _.p(z8q(e,d.serverModel))});_.J();_.I(4,"cfc-menu-item",5);_.P("click",function(){const d=_.m(c).$implicit,e=_.Q();return _.p(A8q(e,d.serverModel))});_.J();
_.I(5,"cfc-menu-item",5);_.P("click",function(){const d=_.m(c).$implicit,e=_.Q();return _.p(B8q(e,d.serverModel))});_.J()()()}if(a&2){a=b.$implicit;b=_.Q();const c=b.getDisabledTooltip(a.serverModel);_.H("ariaLabelledBy",a.menuTriggerId);_.y(2);_.H("label",b.i18n.MSG_STUDIO_CONTEXTS_TREE_INSPECT_AGENT)("cfcIamCheck",b.menuPermissionsConfig.get(b.ObjexMenuAction.INSPECT_AGENT))("disabled",!!c)("disabledTooltip",c);_.y();_.H("label",b.i18n.MSG_STUDIO_CONTEXTS_TREE_EDIT_AGENT)("cfcIamCheck",b.menuPermissionsConfig.get(b.ObjexMenuAction.EDIT_AGENT))("disabled",
!!c)("disabledTooltip",c);_.y();_.H("label",b.i18n.MSG_STUDIO_CONTEXTS_TREE_DELETE_AGENT)("cfcIamCheck",b.menuPermissionsConfig.get(b.ObjexMenuAction.DELETE_AGENT))("disabled",!!c)("disabledTooltip",c);_.y();_.H("label",b.i18n.MSG_STUDIO_CONTEXTS_TREE_DOWNLOAD_CONTEXT)("cfcIamCheck",b.menuPermissionsConfig.get(b.ObjexMenuAction.DOWNLOAD_CONTEXT))("disabled",!!c)("disabledTooltip",c)}};D8q=function(a,b){let c;return(c=a.semanticMetadata.find(d=>d.key===b))==null?void 0:c.value};
E8q=function(a){a&1&&(_.K(0,"cfc-empty-state",6),_.U(1,"staticContentUrl"));a&2&&_.H("minimizeImage",!0)("imageSource",_.W(1,3,"pantheon/images/databases/no_results.svg").toString())("showBackgroundCircle",!1)};F8q=function(a){if(a&1){const b=_.l();_.I(0,"fr-object-explorer-search-bar",13,0);_.P("searchTriggered",function(c){_.m(b);const d=_.Q(2);return _.p(d.search(c))});_.J()}a&2&&(a=_.Q(2),_.H("isLoading",a.isLoadingSearch()))};
G8q=function(a){if(a&1){const b=_.l();_.I(0,"fr-object-explorer-chip-search-bar",13,0);_.P("searchTriggered",function(c){_.m(b);const d=_.Q(2);return _.p(d.search(c))});_.J()}a&2&&(a=_.Q(2),_.H("isLoading",a.isLoadingSearch()))};H8q=function(a){a&1&&_.K(0,"cfc-empty-state",8);a&2&&(_.Q(),a=_.Jg(2),_.H("body",a))};I8q=function(a){a&1&&(_.I(0,"div",9),_.R(1),_.J());a&2&&(_.Q(),a=_.Jg(5),_.y(),_.S(" ",a," "))};J8q=function(a){a&1&&_.K(0,"hr",11)};
K8q=function(a){if(a&1){const b=_.l();_.I(0,"fr-studio-queries-tree",14);_.P("nodeSelected",function(c){_.m(b);const d=_.Q(2);return _.p(d.nodeSelected.emit(c))})("nodeDeleted",function(c){_.m(b);const d=_.Q(2);return _.p(d.nodeDeleted.emit(c))})("refresh",function(){_.m(b);const c=_.Q(2),d=c.searchBarEnabled()?c.searchBar.getSearchQuery():"";d?c.studioQueriesTree.tree.search(d):c.studioQueriesTree.tree.refresh(!0);return _.p()})("searchLoading",function(c){_.m(b);const d=_.Q(2);return _.p(d.isSearchingStudioQueriesTree.set(c))})("searchSummary",
function(c){_.m(b);const d=_.Q(2);return _.p(d.savedQueriesSummary.set(c))});_.J()}a&2&&(a=_.Q(2),_.H("pageSize",a.pageSize()))};
L8q=function(a){if(a&1){const b=_.l();_.K(0,"hr",11);_.I(1,"fr-studio-contexts-tree",15);_.P("nodeSelected",function(c){_.m(b);const d=_.Q(2);return _.p(d.nodeSelected.emit(c))})("nodeDeleted",function(c){_.m(b);const d=_.Q(2);return _.p(d.nodeDeleted.emit(c))})("refresh",function(){_.m(b);_.Q(2).studioContextsTree.tree.refresh(!0);return _.p()});_.J()}a&2&&(a=_.Q(2),_.y(),_.H("pageSize",a.pageSize())("disabledReason",a.contextsDisabledReason()))};
M8q=function(a){if(a&1){const c=_.l();_.D(0,F8q,2,1,"fr-object-explorer-search-bar",7)(1,G8q,2,1,"fr-object-explorer-chip-search-bar",7);_.Hg(2);_.D(3,H8q,1,1,"cfc-empty-state",8);_.I(4,"div");_.Hg(5);_.D(6,I8q,2,1,"div",9);_.I(7,"fr-object-explorer-tree",10);_.P("nodeSelected",function(d){_.m(c);const e=_.Q();return _.p(e.nodeSelected.emit(d))})("searchLoading",function(d){_.m(c);const e=_.Q();return _.p(e.isSearchingObjectExplorerTree.set(d))})("searchSummary",function(d){_.m(c);const e=_.Q();return _.p(e.objectExplorerSummary.set(d))});
_.J();_.D(8,J8q,1,0,"hr",11);_.D(9,K8q,1,1,"fr-studio-queries-tree",12);_.D(10,L8q,2,2);_.J()}if(a&2){a=_.Q();_.E(a.searchBarType()===a.SearchBarType.TEXT?0:a.searchBarType()===a.SearchBarType.CHIPS?1:-1);_.y(2);var b=_.Ig(a.emptySearchStateMessage());_.y();_.E(b?3:-1);_.y();_.ah(b?"cfc-hidden":"");_.y();b=_.Ig(a.searchSummaryMsg());_.y();_.E(b?6:-1);_.y();_.H("fetcher",a.fetcher())("renderer",a.renderer())("pageSize",a.pageSize());_.y();_.E(a.showTreeSeparator()?8:-1);_.y();_.E(a.showSavedQueries()?
9:-1);_.y();_.E(a.showContexts()?10:-1)}};N8q=function(...a){return a.includes("COMPLETENESS_UNSPECIFIED")?"COMPLETENESS_UNSPECIFIED":a.includes("INCOMPLETE")?"INCOMPLETE":"COMPLETE"};O8q=function(...a){return{originalSearchQuery:a[0].originalSearchQuery,appliedSearchQueries:a.flatMap(b=>b.appliedSearchQueries),hadError:a.some(b=>b.hadError),searchResults:a.flatMap(b=>b.searchResults),completeness:N8q(...a.map(b=>b.completeness))}};
Q8q=function(a){a&1&&(_.I(0,"mat-chip"),_.R(1),_.J());a&2&&(a=_.Q(2),_.y(),_.bh(P8q(a)))};R8q=function(a){a&1&&(_.I(0,"span",0),_.R(1),_.C(2,Q8q,2,1,"mat-chip",3),_.J());if(a&2){a=_.Q();let b;_.H("title",(b=a.cell.tooltip)!=null?b:"");_.y();_.S(" ",a.cell.value," ");_.y();_.H("ngIf",P8q(a))}};S8q=function(a){a&1&&(_.I(0,"span",0),_.R(1),_.J());if(a&2){a=_.Q();let b;_.H("title",(b=a.cell.tooltip)!=null?b:"");_.y();_.bh(a.cell.value)}};
T8q=function(a){a&1&&(_.I(0,"span",0),_.R(1),_.U(2,"date"),_.J());if(a&2){a=_.Q();let b;_.H("title",(b=a.cell.tooltip)!=null?b:"");_.y();_.bh(_.ph(2,2,a.cell.value,"MMM d, y, h:mm:ss a z"))}};U8q=function(a){a&1&&(_.I(0,"span",1),_.R(1),_.J());if(a&2){a=_.Q();let b;_.H("title",(b=a.cell.tooltip)!=null?b:"");_.y();_.bh(a.cell.value)}};V8q=function(a){a&1&&(_.I(0,"span",0),_.R(1),_.U(2,"asBytes"),_.J());if(a&2){a=_.Q();let b;_.H("title",(b=a.cell.tooltip)!=null?b:"");_.y();_.bh(_.W(2,2,a.cell.value.sizeInBytes))}};
W8q=function(a){a&1&&(_.I(0,"span",2),_.R(1,"null"),_.J());if(a&2){a=_.Q();let b;_.H("title",(b=a.cell.tooltip)!=null?b:"")}};Y8q=function(a){a&1&&(_.I(0,"span",0)(1,"a",4),_.R(2),_.J()());if(a&2){a=_.Q();let b;_.H("title",(b=a.cell.tooltip)!=null?b:"");_.y();let c;_.H("cfcRouterLink",a.cell.value.cfcRouterLink)("queryParams",(c=a.cell.value.queryParams)!=null?c:_.kh(6,X8q))("ve",a.cell.value.ve)("veClick",a.cell.value.veClick);_.y();_.S(" ",a.cell.value.anchorText," ")}};
Z8q=function(a){if(a&1){const b=_.l();_.I(0,"span",0)(1,"mat-chip",5);_.P("click",function(c){_.m(b);const d=_.Q();c.stopPropagation();return _.p(d.cell.value.onClick())});_.I(2,"span",6);_.R(3);_.J();_.K(4,"cm-icon",7);_.J()()}if(a&2){a=_.Q();let b;_.H("title",(b=a.cell.tooltip)!=null?b:"");_.y();_.H("ve",a.cell.value.ve)("veClick",a.cell.value.veClick);_.y(2);_.bh(a.cell.value.chipText);_.y();_.H("icon",a.cell.value.icon)}};
c9q=function(a){a&1&&(_.K(0,"cfc-empty-state",6),_.U(1,"staticContentUrl"),_.U(2,"staticContentUrl"));a&2&&_.H("minimizeImage",!0)("imageSource",_.mh(11,$8q,_.lh(7,a9q,_.W(1,3,"pantheon/images/databases/run_query.svg")),_.lh(9,b9q,_.W(2,5,"pantheon/images/databases/run_query.svg"))))("showBackgroundCircle",!1)};d9q=function(a){a&1&&_.zg(0)};e9q=function(a){a&1&&_.C(0,d9q,1,0,"ng-container",7);a&2&&(_.Q(),a=_.Yg(5),_.H("ngTemplateOutlet",a))};
f9q=function(a){if(a&1){const b=_.l();_.I(0,"div",11)(1,"mat-slide-toggle",14);_.P("change",function(){_.m(b);const c=_.Q(2);return _.p(c.onTimestampToggleChange.emit())});_.N(2,5);_.J()()}a&2&&(a=_.Q(2),_.y(),_.H("checked",a.showTimestamps()))};h9q=function(a,b){a&1&&_.zg(0,18);if(a&2){a=b.$implicit;b=_.Q().$implicit;_.Q(2);const c=_.Yg(7);_.H("ngTemplateOutlet",c)("ngTemplateOutletContext",_.mh(2,g9q,a,b.icon))}};
j9q=function(a){a&1&&_.zg(0,18);if(a&2){a=_.Q().rowData;const b=_.Q().$implicit,c=_.Q(2);_.H("ngTemplateOutlet",c.customCellRenderer())("ngTemplateOutletContext",_.lh(2,i9q,a.data[b.id]))}};k9q=function(a){a&1&&_.K(0,"fr-query-results-cell",20);if(a&2){a=_.Q();const b=_.Q(2).rowData,c=_.Q().$implicit;_.H("targetedCalloutFeatureId",a.targetedCalloutFeatureId)("calloutMessage",a.calloutMessage)("cell",b.data[c.id])}};
l9q=function(a){a&1&&_.K(0,"fr-query-results-cell",19);if(a&2){a=_.Q(3).rowData;const b=_.Q().$implicit;_.H("cell",a.data[b.id])}};m9q=function(a,b){a&1&&_.D(0,k9q,1,3,"fr-query-results-cell",20)(1,l9q,1,1,"fr-query-results-cell",19);a&2&&_.E(b.targetedCalloutFeatureId?0:1)};n9q=function(a){a&1&&_.K(0,"fr-query-results-cell",19);a&2&&(a=_.Q(5),_.H("cell",a.nullCell))};o9q=function(a){a&1&&_.K(0,"span")};
p9q=function(a){a&1&&_.D(0,m9q,2,1)(1,n9q,1,1,"fr-query-results-cell",19)(2,o9q,1,0,"span");if(a&2){let b;a=_.Q().rowData;const c=_.Q().$implicit,d=_.Q(2);_.E((b=a.data[c.id])?0:d.showNullWhenCellIsEmpty()?1:2,b)}};q9q=function(a,b){a&1&&_.D(0,j9q,1,4,"ng-container",18)(1,p9q,3,1);a&2&&(a=b.rowData,b=_.Q().$implicit,_.E((a.data[b.id]==null?0:a.data[b.id].isCustom)?0:1))};
r9q=function(a,b){a&1&&(_.I(0,"cfc-table-column",15),_.C(1,h9q,1,5,"ng-template",16)(2,q9q,2,1,"ng-template",17),_.J());if(a&2){a=b.$implicit;b=b.index;const c=_.Q(2);_.H("id",a.id)("header",a.header)("overflowMechanism",(a==null?null:a.overflowMechanism)||c.defaultOverflowMechanism())("sticky",a.sticky)("nonHideable",!!a.alwaysVisible)("hidden",c.numInitiallyShownColumns?b>=c.numInitiallyShownColumns:!1)("sortDisabled",a.sortable!==!0)}};
s9q=function(a,b){a&1&&(_.I(0,"button",22),_.K(1,"cm-icon",23),_.J());if(a&2){a=b.rowData;b=_.Q(3);const c=_.Yg(11);_.H("cfcMenuTriggerData",a)("cfcMenuTriggerFor",c)("ve",b.rowActionsMenuButtonVe())("veClick",!0);_.y();_.H("icon",b.icons.moreIcon)}};t9q=function(a){a&1&&(_.I(0,"cfc-table-column",13),_.C(1,s9q,2,5,"button",21),_.J());a&2&&(_.H("nonHideable",!0)("sortDisabled",!0)("cellAlignment","center"),_.y(),_.H("cfcTableTemplate","body"))};u9q=function(a){a&1&&_.zg(0)};
v9q=function(a){a&1&&_.C(0,u9q,1,0,"ng-container",7);a&2&&(_.Q(2),a=_.Yg(5),_.H("ngTemplateOutlet",a))};
w9q=function(a){if(a&1){const b=_.l();_.I(0,"cfc-table",8,4);_.P("bulkActionRowsChanged",function(c){_.m(b);const d=_.Q();return _.p(d.onBulkActionRowsChange.emit(c))})("sortKeysChange",function(c){_.m(b);var d=_.Q();d.firstPrimaryUserSetSortKey()===void 0&&c.length>0&&(typeof c[0]==="string"?d.firstPrimaryUserSetSortKey.set(c[0]):d.firstPrimaryUserSetSortKey.set(c[0].id));d.onSortKeysChange.emit(c);return _.p()})("onPaginationChange",function(c){_.m(b);const d=_.Q();return _.p(d.onPaginationChange.emit(c))})("selectedRowsChanged",
function(c){_.m(b);const d=_.Q();return _.p(d.rowSelected(c))});_.I(2,"cfc-table-action-container",9)(3,"div",10);_.Lg(4);_.J();_.D(5,f9q,3,1,"div",11);_.J();_.C(6,r9q,3,7,"cfc-table-column",12);_.D(7,t9q,2,4,"cfc-table-column",13);_.J();_.D(8,v9q,1,1,"ng-container")}if(a&2){a=_.Q();const b=_.Jg(0);_.H("scrollMode",a.scrollMode())("columnsConfig",a.columnsConfig)("hideNoRowsMsg",!0)("ariaLabel",a.tableAriaLabel())("stickyHorizontalScrollbar",!0)("showColumnsChooser",a.showColumnsChooser())("hideTitleContainer",
a.hideTitleContainer())("tableTitle",a.tableTitle())("message",a.tableMessage())("selectionMode",a.selectionMode)("showSelectionControls",a.showSelectionControls)("fullBleedConfig",a.fullBleedConfig)("fillContainerWidth",a.fillContainerWidth())("tableRendererV2",a.tableRendererV2())("disableTableManagerMessages",!0)("disableTableManagerPagination",!0)("sortKeys",a.sortKeys())("pagination",!0)("currentPageIndex",a.currentPageIndex())("pageSizeOptions",a.pageSizeOptions())("rowsPerPage",a.rowsPerPage())("showJumpToFirstAndLastPageButtons",
a.showJumpToFirstAndLastPageButtons())("isFooterSticky",!0)("stickyHeader",a.stickyHeader())("tableManager",a.tableManager)("alwaysShowFooter",!b&&a.alwaysShowFooter());_.y(2);_.ah(a.showActionContainerSeparator?"query-results-action-container-separator":"");_.y(3);_.E(a.showTimestampToggle()?5:-1);_.y();_.H("ngForOf",a.columns());_.y();_.E(a.rowActionsMap().size>0?7:-1);_.y();_.E(b?8:-1)}};
x9q=function(a){a&1&&(_.K(0,"cfc-empty-state",24),_.U(1,"staticContentUrl"),_.U(2,"staticContentUrl"));a&2&&_.H("minimizeImage",!0)("imageSource",_.mh(11,$8q,_.lh(7,a9q,_.W(1,3,"pantheon/images/databases/no_results.svg")),_.lh(9,b9q,_.W(2,5,"pantheon/images/databases/no_results.svg"))))("showBackgroundCircle",!1)};
y9q=function(a){a&1&&(_.I(0,"cfc-callout-tour",25)(1,"cfc-callout-step",26),_.R(2),_.J()(),_.I(3,"span",27),_.zg(4,18),_.J());if(a&2){var b=_.Q();a=b.$implicit;b=b.icon;const c=_.Q(),d=_.Yg(9);_.H("targetedCalloutFeatureId",c.columnSortCallout.featureId);_.y(2);_.S(" ",c.columnSortCallout.message," ");_.y();_.H("cfcCalloutStepTarget","studio-column-sort-callout-tour");_.y();_.H("ngTemplateOutlet",d)("ngTemplateOutletContext",_.mh(5,g9q,a,b))}};
z9q=function(a){a&1&&(_.I(0,"span"),_.zg(1,18),_.J());if(a&2){var b=_.Q();a=b.$implicit;b=b.icon;_.Q();const c=_.Yg(9);_.y();_.H("ngTemplateOutlet",c)("ngTemplateOutletContext",_.mh(2,g9q,a,b))}};A9q=function(a,b){a&1&&_.D(0,y9q,5,8)(1,z9q,2,5,"span");a&2&&(a=b.$implicit,b=_.Q(),_.E(b.columnSortCallout!==void 0&&b.firstPrimaryUserSetSortKey()===a.id?0:1))};B9q=function(a){a&1&&_.K(0,"cm-icon",28);a&2&&(a=_.Q().icon,_.H("icon",a))};
C9q=function(a,b){a&1&&(_.D(0,B9q,1,1,"cm-icon",28),_.R(1));a&2&&(a=b.$implicit,_.E(b.icon?0:-1),_.y(),_.S(" ",a.header,"\n"))};D9q=function(a,b){if(a&1){const c=_.l();_.I(0,"cfc-menu-item",32);_.P("click",function(){const d=_.m(c).$implicit,e=_.Q(2).$implicit;return _.p(d.onClick(e))});_.J()}a&2&&(a=b.$implicit,_.H("label",a.label)("cfcIamCheck",a.iamPermission)("icon",a.icon)("ve",a.veOnClick)("veClick",!0))};
F9q=function(a,b){a&1&&(_.I(0,"cfc-menu-section",30),_.rg(1,D9q,1,5,"cfc-menu-item",31,E9q),_.J());if(a&2){a=b.$implicit;const c=b.$index;b=b.$count;const d=_.Q(2);_.H("hasSeparator",d.showMenuSectionSeparator()&&c===b-1===!1);_.y();_.tg(a[1])}};H9q=function(a){a&1&&(_.I(0,"cfc-menu",29),_.rg(1,F9q,3,1,"cfc-menu-section",30,G9q),_.J());a&2&&(a=_.Q(),_.y(),_.tg(a.rowActionsMap().entries()))};I9q=function(a){return a==="RUNNING"||a==="RUNNING_WITH_RESULTS"};
J9q=function(a){const b=a.status,c=a.learnMore,d=a.details,e=a.message;a=a.body;return Object.assign({},{text:e?e:typeof a==="string"?a:""},_.zl(b)&&{status:b},_.zl(c)&&{learnMore:c},_.zl(d)&&{details:d})};K9q=function(a,b,c,d){if(a!==b)return a;a=c.indexOf(b);if(a===-1)throw Error("uw`"+b);return a<d.length?d[a]:d[a-1]};L9q=function(a){a&1&&(_.L(0),_.K(1,"cm-icon",23),_.M());a&2&&(a=_.Q(2),_.y(),_.H("icon",a.icons.homeAltIcon))};
M9q=function(a){a&1&&_.K(0,"cfc-badge",27);a&2&&(a=_.Q(2).$implicit,_.H("type",a.badge))};N9q=function(a){a&1&&_.K(0,"cm-icon",29);a&2&&(a=_.Q(3),_.H("icon",a.icons.unsavedIcon))};O9q=function(a){a&1&&(_.I(0,"a",32),_.R(1),_.J());a&2&&(a=_.Q(4),_.H("cfcDocLink",a.castExists(a.saveQueriesLearnMoreLink())),_.ng("aria-label",a.msg.LEARN_MORE_ARIA_LABEL),_.y(),_.S(" ",a.msg.MSG_COMMON_LEARN_MORE," "))};
P9q=function(a){a&1&&(_.I(0,"div",31),_.R(1),_.J(),_.D(2,O9q,2,3,"a",32));a&2&&(a=_.Q(3),_.y(),_.S(" ",a.msg.MSG_FR_STUDIO_SAVE_QUERY_CALLOUT_BODY," "),_.y(),_.E(a.saveQueriesLearnMoreLink()?2:-1))};
Q9q=function(a){if(a&1){const c=_.l();_.I(0,"div",24)(1,"div",25);_.K(2,"cm-icon",26);_.R(3);_.D(4,M9q,1,1,"cfc-badge",27);_.J();_.I(5,"button",28);_.P("click",function(){_.m(c);const d=_.Q().$implicit;_.Q().closeTab.emit(d.id);return _.p()});_.D(6,N9q,1,1,"cm-icon",29);_.K(7,"cm-icon",30);_.C(8,P9q,3,2,"ng-template",null,5,_.rh);_.J()()}if(a&2){a=_.Yg(9);var b=_.Q();const c=b.$implicit;b=b.index;const d=_.Q();_.y(2);_.H("icon",c.icon);_.y();_.S(" ",c.label," ");_.y();_.E(c.badge?4:-1);_.y();_.H("ve",
d.ve.FrPlatformDataExplorationTabsCloseTabButton)("veClick",!0)("targetedCalloutFeatureId",d.saveQueriesCalloutFeatureId())("disableTargetedCallout",b!==1)("calloutHeader",d.msg.MSG_FR_STUDIO_SAVE_QUERY_CALLOUT_HEADER)("calloutMessageRef",a);_.y();_.E(d.savingQueriesSupported()?6:-1);_.y();_.H("icon",d.icons.closeIcon)}};
R9q=function(a,b){if(a&1){const c=_.l();_.I(0,"button",20);_.P("click",function(){const d=_.m(c).$implicit;_.Q().selectTab.emit(d.id);return _.p()})("auxclick",function(d){const e=_.m(c).$implicit,f=_.Q();return _.p(f.onAuxClick(d,e.id))});_.I(1,"div",21);_.C(2,L9q,2,1,"ng-container",22)(3,Q9q,10,11,"ng-template",null,4,_.rh);_.J()()}if(a&2){a=b.$implicit;b=b.index;const c=_.Yg(4),d=_.Q();_.$g("should-show-unsaved-indicator",d.shouldShowUnsavedIndicator(a))("tab-compact-layout",!0);let e;_.H("cfcCalloutStepTarget",
(e=a.calloutTargetId)!=null?e:"")("ariaLabel",a.label)("active",a.id===d.selectedTabId())("ve",a.id==="tabid-home"?d.ve.FrPlatformDataExplorationTabsHomeButton:d.ve.FrPlatformDataExplorationTabsTabItem)("veClick",!0);_.ng("aria-setsize",d.tabs().length)("aria-posinset",b+1);_.y(2);_.H("ngIf",a.id===d.homeTabId)("ngIfElse",c)}};
S9q=function(a){a&1&&(_.I(0,"button",33),_.K(1,"cm-icon",34),_.J());if(a&2){a=_.Q();const b=_.Yg(24);_.H("cfcMenuTriggerFor",b);_.ng("spotlightId",a.newTabSpotlightId());_.y();_.H("icon",a.icons.createIcon)}};
U9q=function(a){if(a&1){const b=_.l();_.I(0,"button",35);_.P("click",function(){_.m(b);const c=_.Q();return _.p(T9q(c))});_.K(1,"cm-icon",34);_.J()}a&2&&(a=_.Q(),_.H("ve",a.ve.FrPlatformDataExplorationTabsCreateTabButton)("veClick",!0),_.ng("spotlightId",a.newTabSpotlightId()),_.y(),_.H("icon",a.icons.createIcon))};V9q=function(a){a&1&&_.Lg(0,3)};
W9q=function(a){a&1&&(_.I(0,"cfc-panel-container",18)(1,"cfc-panel",36)(2,"cfc-panel-body",19),_.Lg(3,4),_.J()(),_.I(4,"cfc-panel",37,6)(6,"cfc-panel-body",19),_.Lg(7,5),_.J()()());a&2&&(a=_.Q(),_.y(),_.H("config",a.topPanelConfig),_.y(),_.H("flexContent",!0)("disablePadding",!0),_.y(2),_.H("config",a.bottomPanelConfig),_.y(2),_.H("flexContent",!0)("disablePadding",!0))};
X9q=function(a,b){if(a&1){const c=_.l();_.I(0,"cfc-menu-item",40);_.P("click",function(){const d=_.m(c).$implicit,e=_.Q(2);return _.p(T9q(e,d.kind))});_.J()}if(a&2){a=b.$implicit;b=_.Q(2);let c;_.H("label",a.tabName)("icon",a.icon)("cfcIamCheck",a.iamCheck)("cfcIamOperator",(c=a.iamOperator)!=null?c:b.IamCheckOperator.OR)("cfcIamResource",a.iamResource)("ve",b.ve.FrPlatformDataExplorationTabsCreateTabButton)("veClick",!0)}};
Y9q=function(a){a&1&&(_.I(0,"cfc-menu",38),_.C(1,X9q,1,7,"cfc-menu-item",39),_.J());a&2&&(a=_.Q(),_.y(),_.H("ngForOf",a.newTabMenuItems())("ngForTrackBy",a.newTabMenuTrackBy))};Z9q=function({operation:a,diffTab:b,currTabs:c}){c=c.filter(d=>d.id!==b.id).map(({label:d})=>d);return[a===0?_.rk("Tab {NAME} added",{NAME:b.label}):_.rk("Tab {NAME} removed",{NAME:b.label}),...c]};$9q=function(a){a&1&&_.Lg(0)};
a$q=function(a,b){if(a&1){const c=_.l();_.I(0,"a",11);_.U(1,"async");_.P("click",function(){const d=_.m(c).index,e=_.Q(2);e.resultStore.setSelectedTabIndex(d);e.selectedResultTabChanged.emit(d);return _.p()});_.R(2);_.J()}if(a&2){a=b.$implicit;b=b.index;const c=_.Q(2);_.H("ve",c.ve.FrDatexResultsSelectTabButton)("veClick",!0)("active",b==_.W(1,4,c.selectedTabIndex$));_.y(2);_.S(" ",a.tabTitle()," ")}};
b$q=function(a){a&1&&(_.L(0),_.I(1,"div",9),_.C(2,a$q,3,6,"a",10),_.J(),_.M());if(a&2){a=_.Q();const b=_.Yg(12);_.y();_.H("tabPanel",b);_.y();_.H("ngForOf",a.dataExplorationTabs)}};c$q=function(a){a&1&&(_.I(0,"span",5),_.R(1),_.J());a&2&&(a=_.Q(),_.y(),_.ch("",a.MSG_FR_EXECUTION_TIME,"",a.formattedExecutionTime()))};d$q=function(a){a&1&&_.K(0,"fr-database-studio-download-menu",6);if(a&2){a=_.Q();const b=_.Jg(5);_.H("customDownloadMenu",a.customDownloadMenu())("downloadData",b)}};
e$q=function(a,b){if(a&1){const c=_.l();_.I(0,"button",12);_.P("click",function(){_.m(c);const d=_.Q();return _.p(d.toggleBottomPanelFullscreenState())});_.K(1,"cfc-icon",13);_.J()}a&2&&(a=b.ngIf,b=_.Q(),_.H("ve",b.ve.FrDatexResultsFullscreenButton)("veClick",!0)("cfcTooltip",a.tooltip),_.ng("aria-label",a.ariaLabel),_.y(),_.H("icon",a.icon))};
f$q=function(a,b){if(a&1){const c=_.l();_.I(0,"button",14);_.P("click",function(){_.m(c);const d=_.Q();return _.p(d.toggleBottomPanelExpandedState())});_.K(1,"cfc-icon",15);_.J()}a&2&&(a=b.ngIf,b=_.Q(),_.H("ve",b.ve.FrDatexResultsExpandButton)("veClick",!0)("cfcTooltip",a.tooltip),_.ng("aria-label",a.ariaLabel),_.y(),_.H("icon",a.icon))};g$q=function(a,b){a&1&&(_.I(0,"mat-option",3),_.K(1,"cfc-select-rich-option",4),_.J());a&2&&(a=b.$implicit,_.H("value",a.id),_.y(),_.H("primary",a.label))};
h$q=function(a){a&1&&(_.L(0),_.N(1,0),_.M())};i$q=function(a){a&1&&(_.L(0),_.N(1,1),_.M())};j$q=function(a){a&1&&(_.I(0,"mat-option",6),_.N(1,2),_.J())};k$q=function(a,b){a&1&&(_.I(0,"mat-option",7),_.K(1,"cfc-select-rich-option",9),_.J());a&2&&(a=b.$implicit,_.H("value",a.name)("disabled",a.disabled),_.y(),_.H("primary",a.name)("secondary",a.description))};l$q=function(a){a&1&&(_.I(0,"mat-hint"),_.N(1,3),_.J())};m$q=function(a){a&1&&(_.I(0,"cm-error",10),_.N(1,4),_.J())};
n$q=function(a,b=""){return{user:a.nonNullable.control(b,[_.Os])}};o$q=function({disabled:a},{disabled:b}){return(a?1:0)-(b?1:0)};r$q=function(a){return a?p$q.some(b=>a.includes(b))||q$q.some(b=>a.match(b)):!1};
s$q=function({iamDbFlagName:a}){return new Map([["IAM_USER_MISSING","This user has not been authorized for IAM authentication. Please add this user's email, or a group containing it, as an IAM principal."],["IAM_DB_FLAG_MISSING",_.rk("Enable IAM authentication by adding this flag to your instance: {FLAG}",{FLAG:a})]])};t$q=function(a,b){return{resourceId:a.resourceId,versionName:a.versionName,dialect:a.dialect,isEngineBackedValidation:a.isEngineBackedValidation,connectionInfo:b}};
u$q=function(a,b){return b.reduce((c,d)=>{let e;return c==null?void 0:(e=c.children)==null?void 0:e.find(f=>{let g;return(f==null?void 0:(g=f.segmentPath)==null?void 0:g.at(-1))===d})},a)};w$q=function(a,b){let c;b=(c=b==null?void 0:b.nodeType)!=null?c:"";if(!v$q.has(b))return[];let d,e;return(e=(d=a.nodes.get(b))==null?void 0:d.children)!=null?e:[]};y$q=function(a,b){return a.map(c=>x$q(c,b)).filter(_.zl)};
x$q=function(a,b){const c=a.nodeType,d=a.segmentPath;if(c&&v$q.has(c)&&(d==null?0:d.length)){var e=new Map,f;for(const {key:g,value:n}of(f=a.semanticMetadata)!=null?f:[])_.zl(g)&&_.zl(n)&&z$q.has(g)&&e.set(g,n);return{segmentPath:d,nodeType:c,parent:b,semanticMetadata:e}}};
A$q=function(a){return a.segmentPath.length>0?{name:a.segmentPath.at(-1),objectType:a.nodeType,parent:a.parent?A$q(a.parent):void 0,semanticMetadata:a.semanticMetadata}:{name:"[Root (internal)]",objectType:a.nodeType,parent:void 0,semanticMetadata:a.semanticMetadata}};
B$q=function(a,b,c){a=a.filter(({isTruncated:d})=>d).map(({sourceNode:d,parentNodeName:e})=>{let f,g;return`${(g=d==null?void 0:(f=d.segmentPath)==null?void 0:f.at(-1))!=null?g:"[Root (internal)]"}.${e}`});b.sendEvent({type:"databaseStudio",name:"databaseObjectsFetched",metadata:{isTruncatedResponse:a.length>0,dialect:c.dialect,versionName:c.versionName}})};
D$q=function(a){const b=new Map,c=new Map;for(const e of a)try{switch(e.objectType){case "TABLE":b.set(C$q(e),{name:e.name,columns:[]});break;case "VIEW":a:{switch(e.objectType){case "VIEW":var d=`${`\`${e.parent.name}\``}.${`\`${e.name}\``}`;break a}d=void 0}c.set(d,{name:e.name});break;case "COLUMN":b.get(C$q(e)).columns.push(e)}}catch(f){if(a=f,!a.message)throw a;}return{tables:b,views:c}};
E$q=function(a){var b,c=(b=a.semanticMetadata.get("FULL_DATA_TYPE"))!=null?b:a.semanticMetadata.get("DATA_TYPE");if(_.zl(c))return b=[c],a.semanticMetadata.get("IS_NULLABLE")==="NO"&&b.push("NOT NULL"),(c=a.semanticMetadata.get("COLUMN_DEFAULT"))&&b.push(`DEFAULT ${c}`),`${`\`${a.name}\``} ${b.join(" ")}`};F$q=function(a){let b;const c=(b=a.semanticMetadata.get("FULL_DATA_TYPE"))!=null?b:a.semanticMetadata.get("DATA_TYPE");return _.zl(c)?{column:a.name,dataType:c}:{column:a.name}};
G$q=function(a){const b=[];for(const [c,{columns:d}]of a)a=d.map(E$q).filter(_.zl).join(", "),a=a!=null&&a.length?`CREATE TABLE ${c} (${a});`:void 0,a&&b.push(a);return b};H$q=function(a){return a.map(b=>`CREATE DATABASE ${`\`${b.name}\``};`)};C$q=function(a){switch(a.objectType){case "TABLE":return`${`\`${a.parent.name}\``}.${`\`${a.name}\``}`;case "COLUMN":return a=a.parent,`${`\`${a.parent.name}\``}.${`\`${a.name}\``}`}};
J$q=function(a){const b=new Map;for(const c of a)try{switch(c.objectType){case "TABLE":b.set(I$q(c),{name:c.name,columns:[],columnComments:new Map});break;case "COLUMN":b.get(I$q(c)).columns.push(c);break;case "COLUMN_COMMENT":b.get(I$q(c)).columnComments.set(c.name,c.semanticMetadata.get("DESCRIPTION"))}}catch(d){if(a=d,!a.message)throw a;}return b};
K$q=function(a){var b,c=(b=a.semanticMetadata.get("FULL_DATA_TYPE"))!=null?b:a.semanticMetadata.get("DATA_TYPE");if(_.zl(c))return b=[c],a.semanticMetadata.get("IS_NULLABLE")==="NO"&&b.push("NOT NULL"),(c=a.semanticMetadata.get("COLUMN_DEFAULT"))&&b.push(`DEFAULT ${c}`),`${`"${a.name}"`} ${b.join(" ")}`};M$q=function(a){return Array.from(a.entries(),([,{name:b,columns:c,columnComments:d}])=>L$q(b,c,d))};
L$q=function(a,b,c){return{table:a,columns:b.map(d=>{var e=c.get(d.name);let f;const g=(f=d.semanticMetadata.get("FULL_DATA_TYPE"))!=null?f:d.semanticMetadata.get("DATA_TYPE");return g?_.ki(N$q)?{column:d.name,dataType:g,nullable:d.semanticMetadata.get("IS_NULLABLE")==="YES",columnDefault:d.semanticMetadata.get("COLUMN_DEFAULT"),description:e}:{column:d.name,dataType:g}:{column:d.name}})}};
O$q=function(a){const b=[];for(const [c,{columns:d}]of a)a=d.map(K$q).filter(_.zl).join(", "),a=a!=null&&a.length?`CREATE TABLE ${c} (${a});`:void 0,a&&b.push(a);return b};P$q=function(a){return a.map(b=>`CREATE SCHEMA ${`"${b.name}"`};`)};I$q=function(a){switch(a.objectType){case "TABLE":return`${`"${a.parent.name}"`}.${`"${a.name}"`}`;case "COLUMN":case "COLUMN_COMMENT":return a=a.parent,`${`"${a.parent.name}"`}.${`"${a.name}"`}`}};
R$q=function(a){const b=new Map;for(const c of a)try{switch(c.objectType){case "TABLE":b.set(Q$q(c),{name:c.name,columns:[]});break;case "COLUMN":b.get(Q$q(c)).columns.push(c)}}catch(d){if(a=d,!a.message)throw a;}return b};S$q=function(a){var b,c=(b=a.semanticMetadata.get("FULL_DATA_TYPE"))!=null?b:a.semanticMetadata.get("DATA_TYPE");if(_.zl(c))return b=[c],a.semanticMetadata.get("IS_NULLABLE")==="NO"&&b.push("NOT NULL"),(c=a.semanticMetadata.get("COLUMN_DEFAULT"))&&b.push(`DEFAULT ${c}`),`${`[${a.name}]`} ${b.join(" ")}`};
U$q=function(a){return Array.from(a.entries()).map(([,{name:b,columns:c}])=>({table:b,columns:c.map(T$q)}))};T$q=function(a){let b;const c=(b=a.semanticMetadata.get("FULL_DATA_TYPE"))!=null?b:a.semanticMetadata.get("DATA_TYPE");return c?{column:a.name,dataType:c}:{column:a.name}};V$q=function(a){const b=[];for(const [c,{columns:d}]of a)a=d.map(S$q).filter(_.zl).join(", "),a=a!=null&&a.length?`CREATE TABLE ${c} (${a});`:void 0,a&&b.push(a);return b};W$q=function(a){return a.map(b=>`CREATE SCHEMA ${`[${b.name}]`};`)};
Q$q=function(a){switch(a.objectType){case "TABLE":return`${`[${a.parent.name}]`}.${`[${a.name}]`}`;case "COLUMN":return a=a.parent,`${`[${a.parent.name}]`}.${`[${a.name}]`}`}};Y$q=function(a){let b,c;return{tableName:a.table,columns:(c=(b=a.columns)==null?void 0:b.map(X$q))!=null?c:[]}};Z$q=function(a){let b,c;return{viewName:a.view,columns:(c=(b=a.columns)==null?void 0:b.map(X$q))!=null?c:[]}};
X$q=function(a){let b,c,d,e;return{columnName:a.column,dataType:(b=a.dataType)!=null?b:"",nullable:(c=a.nullable)!=null?c:!1,columnDefault:(d=a.columnDefault)!=null?d:"",description:(e=a.description)!=null?e:""}};
$$q=function(a){const b=a.resourceId,c=a.versionName,d=a.database;var e=a.databaseDefinition;a=a.connectionInfo;let f;const g=((f=e==null?void 0:e.tables)!=null?f:[]).map(u=>({tableName:u.tableName}));let n;e=((n=e==null?void 0:e.views)!=null?n:[]).map(u=>({tableName:u.viewName}));let q,r;return{resourceId:{projectId:b.projectId,region:(q=b.region)!=null?q:"",clusterId:b.instanceId,instanceId:(r=b.luxV2InstanceId)!=null?r:"",database:d},connectionInfo:a,versionName:c,databaseDefinition:{tables:[...g,
...e]}}};
aar=function(a,b,c=0,d=0){const e=a.errorLocation,f=a.errorMessage;var g=a.errorMetadata;switch(a.status){case "VALID":return{markers:[],validationResult:{message:"Valid",status:"VALID"}};case "INVALID":if(b)a=f;else a:if(f==="Unsupported keyword")a=f;else{var n;switch(g==null?void 0:(n=g.token)==null?void 0:n.name){case "<eof>":a="Syntax error at end of input";break a;default:var q,r;a=(g==null?0:(q=g.token)==null?0:q.text)?`Syntax error at or near "${g==null?void 0:(r=g.token)==null?void 0:r.text}"`:
"Syntax error"}}g=a;q={message:g!=null?g:"",status:b?"ERROR":"INFO"};var u;r=b?0:c+((u=e.endLine)!=null?u:1);let v;u=b?0:d+((v=e.endColumn)!=null?v:1);let x,B;return{markers:[{message:g!=null?g:"",startLineNumber:c+((x=e.line)!=null?x:1),endLineNumber:r,severity:Number(b?8:2),startColumn:d+((B=e.column)!=null?B:1),endColumn:u}],validationResult:q};default:throw Error("vw");}};
car=function(a,b,c){return{suggestions:a.map((d,e)=>({label:d.label||"",insertText:`${d.text}`,kind:bar(d.kind),range:{startLineNumber:c.lineNumber+1,endLineNumber:c.lineNumber+1,startColumn:c.column-b+1||1,endColumn:c.column+1},sortText:`${e}`}))}};
bar=function(a){switch(a){case "KEYWORD":return monaco.languages.CompletionItemKind.Keyword;case "FIELD":case "COLUMN":return monaco.languages.CompletionItemKind.Field;case "STRUCT":case "TABLE":return monaco.languages.CompletionItemKind.Struct;case "FUNCTION":return monaco.languages.CompletionItemKind.Function;default:return monaco.languages.CompletionItemKind.Keyword}};
dar=function(a,b){a=a.split(/\n/g)[b.lineNumber].slice(0,b.column).split("");b=0;for(let c=a.length-1;c>=0&&a[c]!==" ";c--)b++;return b};ear=function(a,b){a&1&&(_.I(0,"cfc-message",3)(1,"cfc-message-text"),_.R(2),_.J()());a&2&&(_.y(2),_.S(" ",b," "))};
far=function(a,b){if(a&1){const c=_.l();_.I(0,"fr-query-explanation",6);_.P("nodesSelected",function(d){_.m(c);const e=_.Q();return _.p(e.onNodesSelected(d))})("clearSummaryCards",function(){_.m(c);const d=_.Q();return _.p(d.onClearSummaryCards())});_.J()}a&2&&(a=_.Q(),_.H("nodes",a.nodesWithExclusiveMetrics())("queryStats",b.queryStats)("showMinimapControls",!0)("summaryCardsConfig",a.summaryCardsConfig())("showCollapseSummaryCardsButton",!0))};
gar=function(a){a&1&&(_.I(0,"cfc-message",5)(1,"cfc-message-text"),_.N(2,0),_.J()())};har=function(a){a&1&&(_.I(0,"div",3),_.N(1,0),_.J())};iar=function(a){a&1&&(_.I(0,"a",5),_.N(1,1),_.J());a&2&&(a=_.Q(3),_.H("cfcDocLink",a.errorLearnMore()))};jar=function(a){a&1&&_.K(0,"fr-studio-explain-error-button",6);a&2&&(a=_.Q(4),_.H("errorText",a.errorText())("queryText",a.queryTextForDuet()))};
kar=function(a){if(a&1){const b=_.l();_.I(0,"bq-autofix-button",8);_.P("autofixClicked",function(){_.m(b);const c=_.Q(4);return _.p(c.autofixClicked.emit(c.errorText()))})("requiredApisEnabled",function(){_.m(b);const c=_.Q(4);return _.p(c.autofixRequiredApisEnabled.emit())});_.J()}if(a&2){_.Q(2);a=_.Jg(4);const b=_.Q(2);_.H("options",a)("buttonVe",b.ve.CloudSqlStudioResultsTableAutofixButton)("disabled",b.autofixDisabled())("disabledTooltip",b.autofixDisabledTooltip())}};
lar=function(a){a&1&&(_.I(0,"cfc-message-actions"),_.D(1,jar,1,2,"fr-studio-explain-error-button",6),_.D(2,kar,1,4,"bq-autofix-button",7),_.J());if(a&2){_.Q();a=_.Jg(4);const b=_.Q(2);_.y();_.E(b.isExplainErrorEnabled?1:-1);_.y();_.E(a?2:-1)}};
mar=function(a){a&1&&(_.I(0,"cfc-message",4)(1,"cfc-message-text"),_.R(2),_.D(3,iar,2,1,"a",5),_.J(),_.Hg(4),_.D(5,lar,3,2,"cfc-message-actions"),_.J());if(a&2){a=_.Q(2);_.H("type","error");_.y(2);_.S(" ",a.errorText()," ");_.y();_.E(a.errorLearnMore()?3:-1);_.y();const b=_.Ig(a.autofixButtonOptions());_.y();_.E(b||a.isExplainErrorEnabled?5:-1)}};nar=function(a){a&1&&_.D(0,mar,6,5,"cfc-message",4);a&2&&(a=_.Q(),_.E(a.showErrorMessage()?0:-1))};
oar=function(a){a&1&&(_.I(0,"cfc-message",9)(1,"cfc-message-text"),_.R(2),_.J()());a&2&&(a=_.Q(2),_.H("type","warning"),_.y(2),_.S(" ",a.warningText()," "))};par=function(a){a&1&&(_.I(0,"cfc-message",4)(1,"cfc-message-text"),_.N(2,2),_.J()());a&2&&_.H("type","success")};qar=function(a){a&1&&_.D(0,par,3,1,"cfc-message",4);a&2&&(a=_.Q(2),_.E(a.warningText()===void 0?0:-1))};
sar=function(a){if(a&1){const b=_.l();_.I(0,"fr-query-results-table",11);_.P("onPaginationChange",function(c){_.m(b);const d=_.Q(2);return _.p(d.onPaginationChange.emit(c))});_.J()}a&2&&(a=_.Q(2),_.H("isLoading",a.runningState()===a.RunningState.RUNNING)("showEmptyState",a.runningState()===a.RunningState.EMPTY_STATE)("columns",a.columns())("rows",a.allRows())("showColumnsChooser",!1)("hideTitleContainer",!0)("currentPageIndex",a.currentPageIndex())("pageSizeOptions",_.kh(12,rar))("rowsPerPage",a.rowsPerPage())("showJumpToFirstAndLastPageButtons",
!0)("isfullBleed",!1)("fillContainerWidth",!0))};tar=function(a){a&1&&(_.D(0,oar,3,2,"cfc-message",9),_.D(1,qar,1,1)(2,sar,1,13,"fr-query-results-table",10));a&2&&(a=_.Q(),_.E(a.warningText()!==void 0&&a.runningState()===a.RunningState.SUCCESS?0:-1),_.y(),_.E(a.columns().length===0&&a.runningState()===a.RunningState.SUCCESS?1:2))};
uar=function({resourceId:a,region:b,dialect:c,database:d,contextStoreId:e,contextSetId:f}){e={contextSetId:_.K5o({contextStoreId:e,contextSetId:f})};if(a.luxV2InstanceId===void 0){a:{switch(c){case "MYSQL":c="MYSQL";break a;case "POSTGRESQL":c="POSTGRESQL";break a;default:_.ob(c)}c=void 0}a={oneOfKind:"cloudSqlReference",cloudSqlReference:{agentContextReference:e,databaseReference:{engine:c,projectId:a.projectId,region:b,instanceId:a.instanceId,databaseId:d}}}}else a={oneOfKind:"alloydb",alloydb:{agentContextReference:e,
databaseReference:{projectId:a.projectId,region:b,clusterId:a.instanceId,instanceId:a.luxV2InstanceId,databaseId:d}}};return a};war=function(a,b,c,d){a=`${a.trim()}.${b!=null?b:""}.${c.map(_.Xk).join("")}`.trim();if(!d)return a;d=_.K5o({contextStoreId:d.contextStoreId,contextSetId:d.contextSetId});return`${a}.${d}`};yar=function(a){return xar(a,new Set(["CREATE","ALTER","GRANT","DROP","RENAME"]))};zar=function(a){return xar(a,new Set("INSTALL CREATE ALTER GRANT DROP GOOGLE_ML.CREATE_MODEL GOOGLE_ML.ALTER_MODEL GOOGLE_ML.DROP_MODEL".split(" ")))};
Aar=function(a){return xar(a,new Set(["CREATE","ALTER","GRANT","DROP","REVOKE"]))};xar=function(a,b){return a.queryState.text.toUpperCase().replaceAll(/;|\n|\(/g," ").split(" ").some(c=>b.has(c))};Car=function(a,b){return new Bar(a,b)};Far=function({editorPrefix:a,prompt:b}){return _.ki(Dar)?Ear(b.trim())+"\n":(a.length>0?a+"\n":a)+Ear(b.trim())+"\n"};Ear=function(a){return a.split(/\r?\n/).map(b=>"-- "+b).join("\n")};Gar=function(a){return!(!a||a.queryState.tabContentKind!=="ALLOYDB_GUIDED_SETUP")};
Iar=function(a){if(a&1){const b=_.l();_.I(0,"div",14);_.N(1,1);_.J();_.I(2,"p");_.Bg(3,2);_.I(4,"a",15);_.P("click",function(){_.m(b);_.Q().userPageLinkClicked.emit();return _.p()});_.J();_.Cg();_.J();_.I(5,"mat-radio-group",16)(6,"mat-radio-button",17);_.L(7);_.N(8,3);_.M();_.K(9,"cfc-targeted-new-badge",18);_.J();_.I(10,"mat-radio-button",19);_.N(11,4);_.J()()}a&2&&(a=_.Q(),_.y(4),_.H("cfcRouterLink",a.usersPageLink()),_.y(),_.H("formControlName",a.controlNames.authnType),_.y(),_.H("value",a.AuthnType.IAM)("cfcIamCheck",
a.iamAuthPermission())("cfcIamResource",a.iamResource())("cfcIamDisableDuringPermissionFetch",!0)("disabled",!a.iamAuthnEnabled())("disabledTooltip",a.iamAuthDisabledTooltip())("disabledTooltipRich",!0)("ve",a.ve.StudioIamAuthRadioToggle)("veClick",!0)("veImpression",!0)("veMetadata",Har(a)),_.y(3),_.H("targetedNewBadgeFeatureId",a.targetedNewBadgeIamFeatureId()),_.y(),_.H("value",a.AuthnType.BUILT_IN)("ve",a.ve.StudioBuiltInAuthRadioToggle)("veClick",!0)("disabled",a.builtInAuthDisabled())("disabledTooltip",
a.builtInAuthDisabledTooltip()))};Jar=function(a){if(a&1){const b=_.l();_.I(0,"cfc-message",24)(1,"cfc-message-text");_.R(2);_.J();_.I(3,"cfc-message-actions")(4,"a",25);_.P("click",function(){_.m(b);_.Q(2).userPageLinkClicked.emit();return _.p()});_.N(5,5);_.J()()()}a&2&&(a=_.Q(2),_.ah(a.showIamAuthRadio()?"cfc-indent":""),_.H("ve",a.ve.StudioManageUsersMessage)("veImpression",!0),_.y(2),_.S(" ",a.messages.MSG_SQL_STUDIO_CREATE_BUILT_IN_USER_MESSAGE," "),_.y(2),_.H("cfcRouterLink",a.usersPageLink()))};
Kar=function(a){if(a&1){const b=_.l();_.L(0,23);_.Bg(1,6);_.I(2,"a",26);_.P("click",function(){_.m(b);_.Q(2).userPageLinkClicked.emit();return _.p()});_.J();_.Cg();_.M()}a&2&&(a=_.Q(2),_.y(2),_.H("cfcRouterLink",a.usersPageLink()))};
Mar=function(a){if(a&1){const b=_.l();_.D(0,Jar,6,6,"cfc-message",20);_.I(1,"div")(2,"fr-user-selector",21);_.P("userSelectionChanged",function(){_.m(b);const c=_.Q();c.resetPasswordOnUserChange&&(c.form.controls.passwordGroup.setValue({password:""}),c.resetPasswordOnUserChange=!1);return _.p()});_.J();_.I(3,"auth-password",22);_.D(4,Kar,3,1,"ng-container",23);_.J()()}a&2&&(a=_.Q(),_.E(a.showCreateUserBanner()?0:-1),_.y(),_.ah(a.showIamAuthRadio()?"cfc-indent":""),_.y(),_.H("formGroupName",a.controlNames.userGroup)("users",
a.isInstanceRunning?a.users():_.kh(7,Lar)),_.y(),_.H("formGroupName",a.controlNames.passwordGroup),_.y(),_.E(a.showIamAuthRadio()?-1:4))};Nar=function(a){a&1&&(_.I(0,"cfc-message",10)(1,"cfc-message-text"),_.R(2),_.J()());a&2&&(a=_.Q(),_.y(2),_.S(" ",a.resetWarningMessage()," "))};
Oar=function(a){if(a&1){const b=_.l();_.I(0,"button",27);_.P("click",function(){_.m(b);const c=_.Q();return _.p(c.onCancelButtonClick())});_.R(1);_.J()}a&2&&(a=_.Q(),_.H("ve",a.ve.SqlExploreAuthFormCancelButton)("veClick",!0),_.y(),_.S(" ",a.messages.MSG_COMMON_CANCEL," "))};Par=function(a,b){a&1&&(_.I(0,"cfc-message",5)(1,"cfc-message-text"),_.R(2),_.J()());a&2&&(_.H("type","warning"),_.y(2),_.bh(b))};
Tar=function(a,b,c){return Qar(c)?(a=Rar(a,b),{nodeType:a.nodeType,segmentPath:[],hasTotalSize:!1,totalSize:0,hasChildren:!0,nextPageToken:"",semanticMetadata:[],children:[Object.assign({},a,{nodeType:"DATABASE",semanticMetadata:[...a.semanticMetadata,Sar]})]}):Rar(a)};
Rar=function(a,b){let c,d,e,f,g;return{segmentPath:b!==void 0?[b,...a.segmentPath]:a.segmentPath,nodeType:a.nodeType,nextPageToken:a.nextPageToken,totalSize:a.totalSize,hasTotalSize:a.hasTotalSize,children:(f=(c=a.children)==null?void 0:c.filter(_.zl).map(n=>Rar(n,b)))!=null?f:[],hasChildren:a.hasChildren,semanticMetadata:[...((g=(d=a.semanticMetadata)==null?void 0:d.filter(n=>n.key!=="isSearchResult").map(({key:n,value:q})=>({key:n,value:q})))!=null?g:[]),...(((e=a.semanticMetadata)==null?0:e.some(n=>
n.key==="isSearchResult"))?[Uar]:[])]}};Qar=function(a){return a==="POSTGRESQL"||a==="SQL_SERVER"};Var=function(a,b){let c;return(c=a.semanticMetadata.find(d=>d.key===b))==null?void 0:c.value};
War=function(a){if(a.endsWith("[]"))return{svg:_.BBg,ariaLabel:"A column of array type"};switch(a.startsWith("time(")&&a.startsWith("timestamp(")?a.replace(/\(\d+\) with/," with"):a.replace(/\(\d+(,[\d+])?\)/,"")){case "bigint":case "decimal":case "double precision":case "float4":case "float8":case "int":case "int2":case "int4":case "int8":case "integer":case "numeric":case "real":case "smallint":return{svg:_.pCg,ariaLabel:"A column of numeric types"};case "inet":case "cidr":case "macaddr":case "macaddr8":return{svg:_.KBg,
ariaLabel:"A column of network address types"};case "bigserial":case "serial":case "serial2":case "serial4":case "serial8":case "smallserial":return{svg:_.LBg,ariaLabel:"A column of serial types"};case "bit varying":case "bit":case "varbit":return{svg:_.ZBg,ariaLabel:"A column of bit types"};case "time":case "timetz":case "time with time zone":case "time without time zone":return{svg:_.YBg,ariaLabel:"A column of time of day types"};case "bool":case "boolean":return{svg:_.$Bg,ariaLabel:"A column of boolean type"};
case "box":return{svg:_.TBg,ariaLabel:"A column of box type"};case "bytea":return{svg:_.EBg,ariaLabel:"A column of boolean type"};case "char":case "character varying":case "character":case "text":case "varchar":return{svg:_.XBg,ariaLabel:"A column of character string types"};case "circle":return{svg:_.lCg,ariaLabel:"A column of circle type"};case "date":case "timestamp":case "timestamptz":case "timestamp with time zone":case "timestamp without time zone":return{svg:_.FBg,ariaLabel:"A column of date type"};
case "interval":return{svg:_.DBg,ariaLabel:"A column of interval type"};case "json":case "jsonb":return{svg:_.nCg,ariaLabel:"A column of JSON types"};case "line":case "lseg":case "path":case "point":return{svg:_.hCg,ariaLabel:"A column of line types"};case "money":return{svg:_.zBg,ariaLabel:"A column of monetary types"};case "pg_lsn":return{svg:_.QBg,ariaLabel:"A column of log sequence number (LSN) type"};case "pg_snapshot":case "txid_snapshot":return{svg:_.PBg,ariaLabel:"A column of snapshot types"};
case "polygon":return{svg:_.OBg,ariaLabel:"A column of polygon type"};case "tsquery":case "tsvector":return{svg:_.$ef,ariaLabel:"A column of text search types"};case "uuid":return{svg:_.ABg,ariaLabel:"A column of universally unique identifiers (UUID) type"};case "vector":return{svg:_.SBg,ariaLabel:"A column of vector type"};case "xml":return{svg:_.WBg,ariaLabel:"A column of XML type"};default:return{svg:_.NBg,ariaLabel:"A column of unrecognized data type"}}};
Xar=function(a){if(v$q.has(a.nodeType))switch(a.nodeType){case "DATABASE":if(Var(a,Sar.key)===Sar.value)return{svg:_.KCg,ariaLabel:"Icon for database level in the tree navigation"};break;case "DATABASES_COLLECTION":return{svg:_.KCg,ariaLabel:"Icon for database level in the tree navigation"};case "EVENTS_COLLECTION":return{svg:_.FBg,ariaLabel:"Icon for event level in the tree navigation"};case "SCHEMAS_COLLECTION":return{svg:_.H6g,ariaLabel:"Icon for schema level in the tree navigation"};case "TABLES_COLLECTION":return{svg:_.JCg,
ariaLabel:"Icon for table level in the tree navigation"};case "VIEWS_COLLECTION":return{svg:_.VDg,ariaLabel:"Icon for view level in the tree navigation"};case "SYS_SCHEMA_VIEWS_COLLECTION":return{svg:_.bCg,ariaLabel:"Icon for view level in the tree navigation"};case "FUNCTIONS_COLLECTION":case "SYS_SCHEMA_FUNCTIONS_COLLECTION":return{svg:_.IBg,ariaLabel:"Icon for function level in the tree navigation"};case "COLUMNS_COLLECTION":return{svg:_.aCg,ariaLabel:"Icon for column level in the tree navigation"};
case "SYS_SCHEMA_TABLES_COLLECTION":return{svg:_.JCg,ariaLabel:"Icon for table level in the tree navigation"};case "COLUMN":return(a=Var(a,"dataType"))?War(a):void 0;case "PROCEDURES_COLLECTION":case "SYS_SCHEMA_PROCEDURES_COLLECTION":return{svg:_.RBg,ariaLabel:"Icon for procedure level in the tree navigation"};case "EXTENSIONS_COLLECTION":return{svg:_.GBg,ariaLabel:"Icon for extension level in the tree navigation"};case "KEYS_COLLECTION":case "KEY":return{svg:_.JBg,ariaLabel:"Icon for key level in the tree navigation"};
case "INDEXES_COLLECTION":return{svg:_.HBg,ariaLabel:"Icon for index level in the tree navigation"};case "SEQUENCES_COLLECTION":return{svg:_.LBg,ariaLabel:"Icon for sequence level in the tree navigation"};case "TYPES_COLLECTION":return{svg:_.MBg,ariaLabel:"Icon for type level in the tree navigation"};case "CONSTRAINTS_COLLECTION":return{svg:_.JBg,ariaLabel:"Icon for constraints level in the tree navigation"};case "TRIGGERS_COLLECTION":return{svg:_.$Bg,ariaLabel:"Icon for trigger level in the tree navigation"};
case "CONFIGURATIONS_COLLECTION":return{svg:_.GDg,ariaLabel:"Icon for configuration level in the tree navigation"};case "MODELS_COLLECTION":return{svg:_.G6g,ariaLabel:"Icon for model level in the tree navigation"};case "EVENT":case "ROOT":case "SCHEMA":case "SYS_SCHEMA":case "TABLE":case "INDEX":case "VIEW":case "SYS_SCHEMA_TABLE":case "SYS_SCHEMA_VIEW":case "FUNCTION":case "TYPE":case "PROCEDURE":case "TRIGGER":case "CONSTRAINT":case "CONFIGURATION":case "SEQUENCE":case "EXTENSION":case "MYSQL_SYS_SCHEMA":case "MODEL":case "SYS_SCHEMA_FUNCTION":case "SYS_SCHEMA_PROCEDURE":case "COLUMN_COMMENT":case "COLUMN_COMMENTS_COLLECTION":break;
default:_.ob(a.nodeType,void 0)}};
Yar=function(a){if(v$q.has(a.nodeType))switch(a.nodeType){case "COLUMN":const b=Var(a,"dataType"),c=Var(a,"isNullable")!=="YES";a=Var(a,"columnDefault");if(!b)break;return c&&a?`${b} NOT NULL DEFAULT (${a})`:a?`${b} DEFAULT (${a})`:c?`${b} NOT NULL`:b;case "EXTENSIONS_COLLECTION":return"Extensions bundle SQL objects into a package and use them as a unit.";case "TRIGGERS_COLLECTION":return"A trigger is a named database object that is associated with a table, and that activates when a particular event occurs for the table.";case "FUNCTIONS_COLLECTION":return"A function is a type of stored routine. It can be called from inside a statement just like any other function (that is, by invoking the function's name), and must return a scalar value.";
case "KEYS_COLLECTION":return"A primary key uniquely identifies each row while foreign keys define relationships between tables.";case "INDEXES_COLLECTION":return"Use indexes to quickly find rows with specific column values. Without an index, the SQL Engine must scan the whole table to locate the relevant rows.";case "PROCEDURES_COLLECTION":return"A stored routine is a set of SQL statements that can be stored in the server.";case "SEQUENCES_COLLECTION":return"A sequence is an arrangement of integers generated in ascending order.";
case "CONSTRAINTS_COLLECTION":return"Constraints are used to specify rules for the data in a table. Constraints are used to limit the type of data that can go into a table.";case "CONFIGURATIONS_COLLECTION":return"Configuration settings for the database.";case "TYPES_COLLECTION":return"Types are custom composites used as the return type of functions.";case "SYS_SCHEMA_VIEWS_COLLECTION":return"These views contain information about the objects defined in the current database.";case "DATABASE":case "EVENT":case "EVENTS_COLLECTION":case "SCHEMA":case "TABLES_COLLECTION":case "SYS_SCHEMA_TABLES_COLLECTION":case "VIEWS_COLLECTION":case "TABLE":case "COLUMNS_COLLECTION":case "ROOT":case "SCHEMAS_COLLECTION":case "VIEW":case "FUNCTION":case "INDEX":case "PROCEDURE":case "TYPE":case "KEY":case "CONSTRAINT":case "CONFIGURATION":case "TRIGGER":case "SEQUENCE":case "EXTENSION":case "SYS_SCHEMA":case "SYS_SCHEMA_TABLE":case "SYS_SCHEMA_VIEW":case "DATABASES_COLLECTION":case "MYSQL_SYS_SCHEMA":case "MODELS_COLLECTION":case "MODEL":case "SYS_SCHEMA_FUNCTIONS_COLLECTION":case "SYS_SCHEMA_PROCEDURES_COLLECTION":case "SYS_SCHEMA_FUNCTION":case "SYS_SCHEMA_PROCEDURE":case "COLUMN_COMMENTS_COLLECTION":case "COLUMN_COMMENT":break;
default:_.ob(a.nodeType,void 0)}};
Zar=function(a){if(v$q.has(a.nodeType))switch(a.nodeType){case "DATABASE":case "SCHEMA":case "CONFIGURATION":case "SYS_SCHEMA":return Z9(a);case "TABLES_COLLECTION":case "VIEWS_COLLECTION":case "SYS_SCHEMA_TABLES_COLLECTION":case "SYS_SCHEMA_VIEWS_COLLECTION":case "FUNCTIONS_COLLECTION":case "PROCEDURES_COLLECTION":case "SEQUENCES_COLLECTION":case "TYPES_COLLECTION":case "EVENTS_COLLECTION":case "EXTENSIONS_COLLECTION":return a.segmentPath[a.segmentPath.length-2];case "TABLE":case "VIEW":case "SYS_SCHEMA_TABLE":case "SYS_SCHEMA_VIEW":case "FUNCTION":case "TYPE":case "PROCEDURE":case "SEQUENCE":case "EVENT":case "EXTENSION":return a.segmentPath[a.segmentPath.length-
3];case "COLUMNS_COLLECTION":case "INDEXES_COLLECTION":case "KEYS_COLLECTION":case "CONSTRAINTS_COLLECTION":case "TRIGGERS_COLLECTION":return a.segmentPath[a.segmentPath.length-4];case "COLUMN":case "INDEX":case "TRIGGER":case "CONSTRAINT":case "KEY":return a.segmentPath[a.segmentPath.length-5];case "ROOT":case "SCHEMAS_COLLECTION":case "CONFIGURATIONS_COLLECTION":case "DATABASES_COLLECTION":case "MYSQL_SYS_SCHEMA":case "MODELS_COLLECTION":case "MODEL":case "SYS_SCHEMA_FUNCTIONS_COLLECTION":case "SYS_SCHEMA_PROCEDURES_COLLECTION":case "SYS_SCHEMA_FUNCTION":case "SYS_SCHEMA_PROCEDURE":case "COLUMN_COMMENT":case "COLUMN_COMMENTS_COLLECTION":break;
default:_.ob(a.nodeType,void 0)}};Z9=function(a){let b;return(b=a.segmentPath.at(-1))!=null?b:""};abr=function(a,b){if(a&1){const c=_.l();_.I(0,"sql-user-menu",16);_.P("switchUserOrDatabaseClicked",function(){_.m(c);const d=_.Q(4);return _.p($ar(d))});_.J()}if(a&2){a=_.Q();const c=_.Q(3);_.H("builtInUser",a==null?null:a.user)("usingIamAuthn",!(a==null||!a.autoIamAuthn))("database",b)("ve",c.ve.CloudSqlStudioUserMenuButton)("veClick",!0)}};
bbr=function(a){a&1&&_.D(0,abr,1,5,"sql-user-menu",15);if(a&2){let b;a=_.Q(3);_.E((b=a.currentDatabase())?0:-1,b)}};
cbr=function(a,b){if(a&1){const c=_.l();_.I(0,"fr-object-explorer",13);_.P("onRefreshTrigger",function(){_.m(c);const d=_.Q(2);return _.p(d.fetchDatabaseObjects())})("nodeSelected",function(d){_.m(c);const e=_.Q(2);return _.p(e.onNodeSelected(d))})("nodeDeleted",function(d){_.m(c);var e=_.Q(2);(d==null?void 0:d.nodeType)==="STUDIO_QUERY_NODE_TYPE_QUERY"&&e.pageStore.closeSavedQuery(d);(d==null?void 0:d.nodeType)==="STUDIO_CONTEXT_NODE_TYPE_CONTEXT"&&e.pageStore.closeEditorTabWithNlaContext(d);return _.p()});
_.L(1,14);_.D(2,bbr,1,1);_.M();_.J()}if(a&2){let c;a=b.ngIf;b=_.Q(2);_.H("showEmptyState",b.showEmptyState())("enableSavedQueries",b.enableSaveQuery())("enableContexts",b.enableContexts())("contextsDisabledReason",b.nlaContextSetsDisabledReason())("fetcher",a.fetcher)("renderer",a.renderer)("searchBarType",b.searchBarType());_.y(2);_.E((c=b.credentials())?2:-1,c)}};dbr=function(a){a&1&&_.Lg(0,3)};ebr=function(a){a&1&&_.zg(0)};fbr=function(a){a&1&&_.zg(0)};
gbr=function(a){a&1&&_.C(0,fbr,1,0,"ng-container",24);a&2&&(_.Q(5),a=_.Yg(7),_.H("ngTemplateOutlet",a))};hbr=function(a){a&1&&(_.C(0,ebr,1,0,"ng-container",24),_.Lg(1,4,null,gbr,1,1));a&2&&(_.Q(4),a=_.Yg(5),_.H("ngTemplateOutlet",a))};ibr=function(a,b){a&1&&_.D(0,dbr,1,0)(1,hbr,3,1);a&2&&(a=b.queryState().tabContentKind,_.E(a==="ALLOYDB_GUIDED_SETUP"?0:a==="EDITOR"?1:-1))};
jbr=function(a){if(a&1){const b=_.l();_.I(0,"div",27)(1,"p",28);_.N(2,2);_.J();_.K(3,"cfc-icon",29);_.I(4,"fr-result-selector",30);_.P("selectedResultChanged",function(c){_.m(b);_.Q(5).currentTabStore().selectedResultIndexChanged(c);return _.p()});_.J()()}a&2&&(a=_.Q(),_.y(4),_.H("options",a))};kbr=function(a){a&1&&_.D(0,jbr,5,1,"div",27);a&2&&(a=_.Q(4),_.E(a.showResultSelection()?0:-1))};
lbr=function(a,b){if(a&1){const c=_.l();_.I(0,"sql-query-results-table",32);_.P("autofixClicked",function(d){_.m(c);const e=_.Q(5);return _.p(e.autofixClicked(d))})("autofixRequiredApisEnabled",function(){_.m(c);_.Q(5).duetEnablementService.apiJustEnabled.next(!0);return _.p()})("onPaginationChange",function(d){_.m(c);const e=_.Q(5);return _.p(e.updatePagination(d))});_.J()}if(a&2){a=_.Q();const c=_.Q(4);let d;_.H("columns",b.selectedResultColumns())("allRows",b.selectedResultRows())("currentPageIndex",
a.pageIndex)("rowsPerPage",a.pageSize)("runningState",b.runningState())("errorText",b.error().text)("errorLearnMore",b.error().learnMore)("warningText",b.warningText())("queryTextForDuet",(d=c.queryText())!=null?d:"")("autofixOptions",c.autofixOptions())}};mbr=function(a){a&1&&_.D(0,lbr,1,10,"sql-query-results-table",31);if(a&2){let b;a=_.Q(4);_.E((b=a.currentTabStore())?0:-1,b)}};
qbr=function(a){a&1&&(_.K(0,"cfc-empty-state",33),_.U(1,"staticContentUrl"),_.U(2,"staticContentUrl"));a&2&&_.H("minimizeImage",!0)("imageSource",_.mh(11,nbr,_.lh(7,obr,_.W(1,3,"pantheon/images/databases/run_query.svg")),_.lh(9,pbr,_.W(2,5,"pantheon/images/databases/run_query.svg"))))("showBackgroundCircle",!1)};rbr=function(a){a&1&&_.K(0,"sql-query-explanation",34);a&2&&(a=_.Q(),_.H("errorText",a.error==null?null:a.error.text)("queryExplanation",a.queryExplanation)("isQueryExplanationRunning",a.isExplainQueryRunning))};
sbr=function(a){a&1&&_.D(0,qbr,3,14,"cfc-empty-state",33)(1,rbr,1,3,"sql-query-explanation",34);a&2&&(a=_.Q(5),_.E(a.isExplanationEmpty()?0:1))};tbr=function(a){a&1&&(_.I(0,"fr-studio-result-tab",26),_.D(1,sbr,2,1),_.J());if(a&2){let b;a=_.Q(4);_.H("tabTitle",a.MSG_SQL_EXPLORE_EXPLANATION);_.y();_.E((b=a.explanationResultConfig())?1:-1,b)}};
vbr=function(a){if(a&1){const b=_.l();_.L(0,23);_.I(1,"fr-studio-result-section",25);_.P("selectedResultTabChanged",function(c){_.m(b);const d=_.Q(3);return _.p(ubr(d,c))});_.I(2,"fr-studio-result-tab",26);_.D(3,kbr,1,1);_.I(4,"div");_.D(5,mbr,1,1);_.J()();_.D(6,tbr,2,2,"fr-studio-result-tab",26);_.J();_.M()}if(a&2){let b,c;a=_.Q();const d=_.Q(2);_.y();_.H("downloadData",d.resultSectionDownloadData())("currentSectionId",a)("formattedExecutionTime",d.resultSectionFormattedExecutionTime());_.y();_.H("tabTitle",
d.MSG_SQL_EXPLORE_RESULTS);_.y();_.E((b=d.resultSelectorOptions())?3:-1,b);_.y();_.$g("cfc-border-top-primary",d.showResultSelection());_.y();_.E((c=d.resultsConfig())?5:-1,c);_.y();_.E(d.isQueryExplanationSupported()?6:-1)}};
wbr=function(a,b){if(a&1){const c=_.l();_.I(0,"fr-studio-tabs-bar",17);_.U(1,"async");_.P("selectTab",function(d){_.m(c);_.Q(2).pageStore.currentTabIdChanged(d);return _.p()})("newTab",function(d){_.m(c);const e=_.Q(2);return _.p(e.onNewTab(d))})("closeTab",function(d){_.m(c);var e=_.Q(2);e.pageStore.closeTab(d);e.resultStore.closeSection(d);e.lastQueryModeByTabId.delete(d);return _.p()});_.L(2,18);_.I(3,"fr-duet-menu",19);_.P("onGenerationSettingUpdated",function(d){_.m(c);const e=_.Q(2);return _.p(e.toggleCodeGeneration(d))})("onFixQuerySettingUpdated",
function(d){_.m(c);const e=_.Q(2);return _.p(e.toggleFixQuery(d))});_.J();_.M();_.L(4,20);_.Lg(5,1);_.M();_.L(6,21);_.Lg(7,2);_.M();_.L(8,22);_.D(9,ibr,2,1);_.M();_.D(10,vbr,7,9,"ng-container",23);_.J()}if(a&2){let c,d;a=_.Q().ngIf;const e=_.Q();_.H("selectedTabId",b)("tabs",a.tabsButtonsStates)("newTabMenuItems",e.newTabMenuItems())("calloutStepTargetId",e.editorTabCalloutStepTargetId())("bottomPanelSize",_.W(1,11,e.bottomPanelSize$))("savedQueriesEnabled",e.enableSaveQuery());_.y(3);_.H("isCodeGenerationEnabled",
e.duetSettings().isCodeGenerationEnabled)("isFixQueryEnabled",e.duetSettings().isFixQueryEnabled)("showFixQueryItem",e.showFixMyQuerySettingMenuItem());_.y(6);_.E((c=e.currentTabStore())?9:-1,c);b=(d=e.currentTabStore())==null?null:(d=d.queryState())==null?null:d.tabContentKind;_.y();_.E(b==="EDITOR"||b==="ALLOYDB_GUIDED_SETUP"?10:-1)}};
xbr=function(a){a&1&&(_.I(0,"fr-studio-layout"),_.L(1,9),_.Lg(2),_.M(),_.C(3,cbr,3,8,"fr-object-explorer",10),_.U(4,"async"),_.L(5,11),_.D(6,wbr,11,13,"fr-studio-tabs-bar",12),_.M(),_.J());if(a&2){let b;a=_.Q();_.y(3);_.H("ngIf",_.W(4,2,a.objectExplorerConfig$));_.y(3);_.E((b=a.currentTabId())?6:-1,b)}};
ybr=function(a){a&1&&(_.I(0,"cfc-callout-tour",35)(1,"cfc-callout-step",36),_.N(2,3),_.J(),_.I(3,"cfc-callout-step",37),_.N(4,4),_.J(),_.I(5,"cfc-callout-step",38),_.N(6,5),_.J()());a&2&&(a=_.Q(),_.H("showSteps",!0)("hasTryItAsFinalStep",!0),_.y(3),_.H("targetId",a.editorTabCalloutStepTargetId()))};zbr=function(a){a&1&&(_.I(0,"a",41),_.R(1),_.J());if(a&2){_.Q();a=_.Jg(0);const b=_.Q(2);_.H("cfcDocLink",a.learnMoreLink);_.y();_.S(" ",b.MSG_COMMON_LEARN_MORE," ")}};
Abr=function(a){if(a&1){const b=_.l();_.I(0,"cfc-message-actions")(1,"button",42);_.P("click",function(){_.m(b);const c=_.Q(3);return _.p(c.dismissDisclaimer())});_.N(2,6);_.J()()}};
Bbr=function(a){a&1&&(_.Hg(0),_.I(1,"cfc-message",39)(2,"cfc-message-text",40),_.R(3),_.D(4,zbr,2,2,"a",41),_.J(),_.D(5,Abr,3,0,"cfc-message-actions"),_.J());a&2&&(a=_.Ig(_.Q(2).disclaimerMessageContext()),_.y(),_.H("type",a.messageType),_.y(2),_.S(" ",a.message," "),_.y(),_.E(a.learnMoreLink?4:-1),_.y(),_.E(a.isDismissible?5:-1))};Cbr=function(a){a&1&&_.D(0,Bbr,6,5,"cfc-message",39);a&2&&(a=_.Q(),_.E(a.showDisclaimer()?0:-1))};
Gbr=function(a,b){if(a&1){const c=_.l();_.I(0,"fr-studio-code-editor",45);_.U(1,"async");_.U(2,"async");_.U(3,"async");_.P("duetExplain",function(d){_.m(c);const e=_.Q(3);return _.p(Dbr(e,d))})("queryTextChange",function(d){_.m(c);const e=_.Q(3);return _.p(Ebr(e,{text:d}))})("runQuery",function(){_.m(c);const d=_.Q(3);return _.p(d.onRunQuery(d.QueryMode.ALL))})("savedQuery",function(d){_.m(c);const e=_.Q(3);return _.p(Fbr(e,{savedQuery:d}))})("queryTextSelectionChange",function(d){_.m(c);_.Q(3).selectedQueryText.set(d);
return _.p()})("autofixOptionsChange",function(d){_.m(c);_.Q(3).autofixOptions.set(d);return _.p()});_.J()}if(a&2){let c;a=b.ngIf;b=_.Q();const d=_.Q(2);let e,f,g,n;_.H("queryText",(e=d.queryText())!=null?e:"")("showDuetUiElements",!0)("userHasIamForDuet",(f=_.W(1,19,d.userHasGeminiGenerateCodePermissions$))!=null?f:!1)("manager",d.codeEditorManager)("editorId",b)("language",a)("isRunning",!((c=d.currentTabStore())==null||!c.isRunning()))("enableQueryFormatting",!0)("enableRunSelectedQuery",!0)("enableSaveQuery",
d.enableSaveQuery())("analyticsMetadata",d.analyticsMetadata())("dataFetcher",(g=_.W(2,21,d.dataFetcher$))!=null?g:void 0)("enableDuetExplain",(n=_.W(3,23,d.shouldShowExplainQuery$))!=null?n:!1)("studioQueryRef",d.currentStudioQueryRef())("isQueryUnsaved",d.currentTabIsUnsaved())("queryButtonMenu",d.queryButtonMenuIfSupported())("fixMyQueryParams",d.fixMyQueryParams())("sqlGenChipText",d.sqlGenChipText())("sqlGenCardTitle",d.sqlGenCardTitleOverride())}};
Hbr=function(a){a&1&&(_.C(0,Gbr,4,25,"fr-studio-code-editor",44),_.U(1,"async"));a&2&&(a=_.Q(2),_.H("ngIf",_.W(1,1,a.monacoLanguage$)))};Ibr=function(a){a&1&&_.D(0,Hbr,2,3,"fr-studio-code-editor",43);if(a&2){let b;a=_.Q();_.E((b=a.currentTabId())?0:-1,b)}};Kbr=function(a,b,c,d,e,f){return new Jbr(a,b,c,d,e,f)};Mbr=function(a,b,c,d){return new Lbr(a,b,c,d)};
Qbr=function(a,b,c){switch(a){case "POSTGRESQL":return new Nbr(b,c);case "MYSQL":return new Obr(b,c);case "SQL_SERVER":return new Pbr(b,c);default:_.ob(a,void 0)}};Rbr=function(a){if(a&1){const b=_.l();_.I(0,"button",24);_.P("click",function(){_.m(b);_.Q().startQuickTour.emit();return _.p()});_.K(1,"cm-icon",16);_.I(2,"span");_.N(3,5);_.J()()}a&2&&(a=_.Q(),_.H("ve",a.ve.SqlExploreQuickTourButton)("veClick",!0),_.y(),_.H("icon",a.icons.signpostIcon))};
Sbr=function(a){a&1&&(_.Bg(0,7,1),_.K(1,"a",28),_.Cg());a&2&&(a=_.Q(2),_.y(),_.H("cfcDocLink",a.sqlCompletionLearnMoreLink))};Wbr=function(a){a&1&&(_.I(0,"div",17),_.K(1,"img",25),_.I(2,"div",19)(3,"div",20),_.N(4,6),_.J(),_.I(5,"p",26),_.L(6),_.Bg(7,7),_.C(8,Sbr,2,1,"a",27),_.Cg(),_.M(),_.J()()());a&2&&(a=_.Q(),_.y(),_.H("cmImgSrc",_.mh(5,Tbr,_.kh(3,Ubr),_.kh(4,Vbr))),_.y(3),_.Eg(a.geminiProductName),_.Fg(4),_.y(4),_.H("ngIf",a.sqlCompletionLearnMoreLink))};
Zbr=function(a){a&1&&(_.I(0,"div",17),_.K(1,"img",29),_.U(2,"staticContentUrl"),_.U(3,"staticContentUrl"),_.I(4,"div",19)(5,"div",20),_.N(6,8),_.J(),_.I(7,"p"),_.N(8,9),_.J()()());a&2&&(_.y(),_.H("cmImgSrc",_.mh(9,Tbr,_.lh(5,Xbr,_.W(2,1,"pantheon/images/cloudsql/sql_data_explorer/lego_connect_v2.svg")),_.lh(7,Ybr,_.W(3,3,"pantheon/images/cloudsql/sql_data_explorer/lego_connect_v2.svg")))))};$br=function(a){a&1&&(_.Bg(0,4,1),_.K(1,"a",30),_.Cg());a&2&&(a=_.Q(),_.y(),_.H("cfcDocLink",a.iterateQuicklyLearnMoreLink))};
acr=function(a){a&1&&(_.Bg(0,11,1),_.K(1,"a",33),_.Cg());a&2&&(a=_.Q(2),_.y(),_.H("cfcDocLink",a.pgVectorLearnMoreLink))};
bcr=function(a){a&1&&(_.I(0,"div",17),_.K(1,"img",31),_.U(2,"staticContentUrl"),_.U(3,"staticContentUrl"),_.I(4,"div",19)(5,"div",20),_.N(6,10),_.J(),_.I(7,"p"),_.Bg(8,11),_.C(9,acr,2,1,"a",32),_.Cg(),_.J()()());a&2&&(a=_.Q(),_.y(),_.H("cmImgSrc",_.mh(10,Tbr,_.lh(6,Xbr,_.W(2,2,"pantheon/images/cloudsql/sql_data_explorer/lego_vector_v2.svg")),_.lh(8,Ybr,_.W(3,4,"pantheon/images/cloudsql/sql_data_explorer/lego_vector_v2.svg")))),_.y(8),_.H("ngIf",a.pgVectorLearnMoreLink))};
hcr=function(a,b){var c,d;a=(c=a.executeSql.status)==null?void 0:(d=c.details)==null?void 0:d.filter(({rawMessage:f,error:g})=>f==="error"&&!!g).map(({error:f})=>f);if(a==null?0:a.length){var e=a.join("\n");const f=ccr.test(e);c=Object;d=c.assign;a={text:f?e.replace(/ \(Learn more at .*\/manage-data-using-studio\)/g,""):e};if(e=e==="Query has timed out."||dcr.test(e)||f){a:{switch(b){case "POSTGRESQL":b=ecr;break a;case "MYSQL":b=fcr;break a;case "SQL_SERVER":b=gcr;break a;default:_.ob(b)}b=void 0}e=
{learnMore:b}}return d.call(c,{},a,e)}};jcr=function(a){return a.map(b=>{b=JSON.parse(b);_.Ya(!_.Fba);_.Fba=new _.Gba("Unable to parse JSON to a QueryResults object.");return _.Xa(b,icr)})};ncr=function(a,b){const c=(0,_.p3)(a,["isMySql","isSqlServer"]);a=b.filter(e=>kcr(e,c));const d=lcr(a,({name:e})=>e);return a.map(e=>mcr(e,c,d))};pcr=function(a,b){const c=(0,_.p3)(a,["isSqlServer"]);return b.filter(d=>ocr(d,c)).map(({name:d})=>d).sort((d,e)=>d.localeCompare(e,void 0,{numeric:!0}))};
ocr=function({name:a},{isSqlServer:b}){return!_.zl(a)||b&&qcr.includes(a)?!1:!0};kcr=function({name:a,type:b},{isSqlServer:c}){return!_.zl(a)||b!=="BUILT_IN"||c&&rcr.includes(a)?!1:!0};
mcr=function(a,{isMySql:b},c){const d=a.name;if(b){let e,f;a=(f=(e=a.mysql)==null?void 0:e.host)!=null?f:"";if(d.toLowerCase()==="root")return{name:d,disabled:!0,description:_.rk("{FORMATTED_USER_HOSTNAME} is not supported",{FORMATTED_USER_HOSTNAME:`'${d}'@'${a}'`})};if(a!=="%"&&a!=="localhost")return{name:d,disabled:!0,description:_.rk("Hostname {FORMATTED_HOSTNAME} is not supported",{FORMATTED_HOSTNAME:`@'${a}'`})};if(c[d]>1)return{name:d,description:a}}return{name:d}};scr=function(a){a&1&&_.zg(0)};
tcr=function(a){a&1&&_.C(0,scr,1,0,"ng-container",11);a&2&&(_.Q(2),a=_.Yg(5),_.H("ngTemplateOutlet",a))};ucr=function(a){a&1&&_.zg(0,15)};
wcr=function(a){if(a&1){const b=_.l();_.I(0,"sql-explore",12);_.P("authenticationCancelled",function(){_.m(b);const c=_.Q(2);var d=c.instance();d=_.IG(d.id).build();c.router.navigate(d);return _.p()})("userOrDatabaseSwitched",function(){_.m(b);const c=_.Q(2);return _.p(vcr(c))});_.C(1,ucr,1,0,"ng-container",13);_.I(2,"sql-studio-home-tab",14);_.U(3,"async");_.U(4,"async");_.P("newEditorTab",function(){_.m(b);const c=_.Q(2);return _.p(c.onNewTab())})("startQuickTour",function(){_.m(b);const c=_.Q(2);
c.pageStore.startQuickTour({tabContentKind:"EDITOR",text:"-- Help me write a query to"});c.showQuickTour=!1;return _.p()})("skipHomeTabPreferenceChanged",function(c){_.m(b);_.Q(2).pageStore.setSkipHomeTabSetting(c);return _.p()});_.J()()}if(a&2){a=_.Q().ngVar;const b=_.Q(),c=_.Yg(3);_.H("useModalForInitialAuthentication",b.studioModalInitialAuthEnabled)("editorTabCalloutStepTargetId",b.editorTabCalloutStepTargetId)("hasDdlStatementFn",a)("disclaimerMessageContext",b.disclaimerMessageContext())("authDialogOptions",
b.authDialogOptions)("enableSaveQuery",b.isStudioSavedQueriesEnabled)("enableContexts",b.isNlaContextsEnabled())("searchBarType",b.searchBarType())("fixMyQueryProduct",b.fixMyQueryProduct());_.y();_.H("ngTemplateOutlet",c);_.y();let d,e;_.H("engine",(d=_.W(3,13,b.engine$))!=null?d:"")("showQuickTour",b.showQuickTour)("isSkipHomeTabPreferenceChecked",(e=_.W(4,15,b.skipHomeTab$))!=null?e:!1)}};
xcr=function(a){a&1&&(_.L(0),_.Hg(1),_.U(2,"async"),_.D(3,tcr,1,1,"ng-container")(4,wcr,5,17,"sql-explore",10),_.M());if(a&2){a=_.Q();const b=_.W(2,1,a.isUserAuthenticated$);_.y(3);_.E(a.studioModalInitialAuthEnabled||b?4:3)}};ycr=function(a){a&1&&(_.I(0,"cfc-action-bar",16)(1,"div",17),_.K(2,"sql-instance-breadcrumbs"),_.J()());a&2&&_.H("disableTitleRegion",!0)};zcr=function(a){a&1&&_.zg(0)};
Acr=function(a){a&1&&(_.I(0,"cfc-message",20)(1,"cfc-message-text"),_.R(2),_.J()());a&2&&(a=_.Q(4),_.H("type","warning"),_.y(2),_.bh(a.MSG_SQL_STUDIO_AUTH_FAILED_INSTANCE_NOT_RUNNING))};
Gcr=function(a){if(a&1){const b=_.l();_.I(0,"sql-query-auth",19);_.U(1,"async");_.U(2,"async");_.U(3,"async");_.U(4,"async");_.U(5,"async");_.U(6,"async");_.U(7,"async");_.U(8,"async");_.U(9,"async");_.P("userAuthenticated",function(c){_.m(b);const d=_.Q(3);return _.p(d.onUserAuthenticated(c))});_.D(10,Acr,3,2,"cfc-message",20);_.L(11,21);_.I(12,"h2");_.N(13,4);_.J();_.I(14,"p");_.Bg(15,5);_.K(16,"a",22);_.Cg();_.J();_.M();_.K(17,"img",23);_.U(18,"staticContentUrl");_.U(19,"staticContentUrl");_.J()}if(a&
2){a=_.Q().ngVar;const b=_.Q(2);let c,d,e,f,g,n,q,r,u;_.H("pageName",b.pageName)("iamResource",b.authDialogOptions.iamResource)("iamAuthPermission",b.iamAuthPermission)("authButtonPermission",b.authButtonPermission)("pagePermissions",b.pagePermissions)("users",b.userOptions())("projectId",(c=_.W(1,24,b.projectId$))!=null?c:"")("usersPageLink",(d=_.W(2,26,b.usersPageLink$))!=null?d:_.kh(46,Bcr))("isInstanceRunning",a)("databases",(e=_.W(3,28,b.databases$))!=null?e:_.kh(47,Bcr))("isDatabasesLoading",
(f=_.W(4,30,b.isDatabasesLoading$))!=null?f:!0)("databaseSelectDisplayMode",(g=_.W(5,32,b.databaseSelectDisplayMode$))!=null?g:"SINGLE_DROPDOWN")("isDatabaseOptional",!1)("selectedDatabase",b.deepLinkTargetDatabase())("authenticateInProgress",(n=_.W(6,34,b.authenticateInProgress$))!=null?n:!1)("isIncorrectPassword",(q=_.W(7,36,b.isIncorrectPassword$))!=null?q:!1)("isIncorrectDatabase",(r=_.W(8,38,b.incorrectDatabase$))!=null?r:!1)("hasDatabasesLoadingError",(u=_.W(9,40,b.databasesLoadingError$))!=
null?u:!1)("showIamAuthRadio",b.isIamAuthSupported())("iamAuthDisabledTooltip",b.iamAuthDisabledTooltip())("authDisabledTooltip",b.MSG_SQL_STUDIO_AUTH_FAILED_INSTANCE_NOT_RUNNING);_.y(10);_.E(a?-1:10);_.y(6);_.H("cfcDocLink",Ccr(b));_.y();_.H("cmImgSrc",_.mh(52,Dcr,_.lh(48,Ecr,_.W(18,42,"pantheon/images/empty_states/cloud_sql_1.svg")),_.lh(50,Fcr,_.W(19,44,"pantheon/images/empty_states/cloud_sql_1.svg"))))}};
Hcr=function(a,b){a&1&&(_.I(0,"cfc-panel-body"),_.C(1,Gcr,20,55,"sql-query-auth",18),_.J());a&2&&(a=b.ngVar,_.y(),_.H("ngIf",a!==null))};Icr=function(a){a&1&&(_.I(0,"cfc-single-panel-layout"),_.C(1,zcr,1,0,"ng-container",11)(2,Hcr,2,1,"cfc-panel-body",9),_.U(3,"async"),_.J());if(a&2){a=_.Q();const b=_.Yg(3);_.y();_.H("ngTemplateOutlet",b);_.y();_.H("ngVar",_.W(3,2,a.isInstanceRunning$))}};Jcr=function(a,b){a&1&&(_.Bg(0,6,1),_.K(1,"a",24),_.Cg());a&2&&(_.y(),_.H("cfcDocLink",b))};
Kcr=function(a){a&1&&(_.I(0,"div"),_.Bg(1,6),_.K(2,"i"),_.D(3,Jcr,2,1,"a",24),_.Cg(),_.J(),_.I(4,"div",25)(5,"button",26),_.U(6,"async"),_.N(7,7),_.J()());if(a&2){let b;a=_.Q();_.y(3);_.E((b=a.iamUserMissingLearnMoreDocHref())?3:-1,b);_.y(2);let c;_.H("cfcRouterLink",(c=_.W(6,5,a.usersPageLink$))!=null?c:_.kh(7,Bcr))("ve",a.ve.StudioIamAuthTooltipManageUsersButton)("veClick",!0)("veImpression",!0)}};Lcr=function(a,b){a&1&&(_.Bg(0,8,1),_.K(1,"a",27),_.Cg());a&2&&(_.y(),_.H("cfcDocLink",b))};
Mcr=function(a){a&1&&(_.Bg(0,8),_.D(1,Lcr,2,1,"a",27),_.Cg());if(a&2){let b;a=_.Q();_.y();_.E((b=a.iamDbFlagMissingLearnMoreDocHref())?1:-1,b);_.Eg(a.iamDbFlagName());_.Fg(0)}};Ocr=function(a,b,c){return new Ncr(a,b.queryContext$,c)};Pcr=function(a){switch(a){case "PostgreSQL":return"POSTGRESQL";case "MySQL":return"MYSQL";case "SQL Server":return"SQL_SERVER";default:_.ob(a)}};
Qcr=function(a,{projectId:b,instanceId:c,connectionInfo:d,searchQuery:e,engine:f}){b={request:{connectionInfo:d,base:{name:`projects/${b}/instances/${c}`,searchQuery:{queryText:e}},engine:f}};switch(f){case "MYSQL":return a.sqlGraphqlClient.config.request("GetObjectExplorerNodesBySearchMysql",'query GetObjectExplorerNodesBySearchMysql($request: IN_google_internal_cloud_console_clientapi_sql_GetSqlObjectExplorerNodesRequest!) @Signature(bytes: "2//OZ1zGH38BwJ9D7IMJU/2scEnQxZduKThzvMkSd2aWI=") { getSqlObjectExplorerNodes(request: $request) { base { appliedSearchText searchResultCompleteness subtree { ...objectExplorerNode children { ...objectExplorerNode children { ...objectExplorerNode children { ...objectExplorerNode children { ...objectExplorerNode children { ...objectExplorerNode children { ...objectExplorerNode } } } } } } } } } } fragment objectExplorerNode on google_cloud_console_databases_objectexplorer_api_ObjectExplorerNode { segmentPath nodeType nextPageToken totalSize hasTotalSize hasChildren semanticMetadata { key value } }',
b,void 0);case "SQL_SERVER":return a.sqlGraphqlClient.config.request("GetObjectExplorerNodesBySearchSqlServer",'query GetObjectExplorerNodesBySearchSqlServer($request: IN_google_internal_cloud_console_clientapi_sql_GetSqlObjectExplorerNodesRequest!) @Signature(bytes: "2/W2Vm1ENVHrCxzKxDkiEEVQYpRadnaebxB0Vl3/ZeL5M=") { getSqlObjectExplorerNodes(request: $request) { base { appliedSearchText searchResultCompleteness subtree { ...objectExplorerNode children { ...objectExplorerNode children { ...objectExplorerNode children { ...objectExplorerNode children { ...objectExplorerNode children { ...objectExplorerNode children { ...objectExplorerNode } } } } } } } } } } fragment objectExplorerNode on google_cloud_console_databases_objectexplorer_api_ObjectExplorerNode { segmentPath nodeType nextPageToken totalSize hasTotalSize hasChildren semanticMetadata { key value } }',
b,void 0);case "POSTGRESQL":return a.sqlGraphqlClient.config.request("GetObjectExplorerNodesBySearchPostgres",'query GetObjectExplorerNodesBySearchPostgres($request: IN_google_internal_cloud_console_clientapi_sql_GetSqlObjectExplorerNodesRequest!) @Signature(bytes: "2/XqsQjnycg4QWwjpxdCUK55HWB15M6MyVIAzIVoqCG4M=") { getSqlObjectExplorerNodes(request: $request) { base { appliedSearchText searchResultCompleteness subtree { ...objectExplorerNode children { ...objectExplorerNode children { ...objectExplorerNode children { ...objectExplorerNode children { ...objectExplorerNode children { ...objectExplorerNode children { ...objectExplorerNode } } } } } } } } } } fragment objectExplorerNode on google_cloud_console_databases_objectexplorer_api_ObjectExplorerNode { segmentPath nodeType nextPageToken totalSize hasTotalSize hasChildren semanticMetadata { key value } }',
b,void 0);default:_.ob(f)}};Rcr=function(a){a.inlineCompletionAccepted$=new _.Kf;monaco.editor.registerCommand("inlineCompletion.onAccepted",(b,c)=>{let d;(d=a.inlineCompletionAccepted$)==null||d.next(c)})};
Scr=function(a){const b=a.productToKey[0],c=_.Ke(()=>a.expandedSessionCacheService.get(b));return _.Ke(()=>a.expandedSessionCacheService.expandedSessionCache.refreshPersistenceInitPromise).pipe(_.A(()=>c),_.w(d=>{if(d=d==null?void 0:d.value)return a.analyticsService.sendEvent({type:"databaseStudio",name:"deepLinkCacheHit"}),a.expandedSessionCacheService.invalidate(b),JSON.parse(d)}))};Tcr={};Ucr={"in":{studioQuery:".IN_cloud_console_databases_DisplayStudioQuery"}};Vcr={"in":{projectNumber:"Long"}};
Wcr={"in":{request:".IN_cloud_console_databases_FixMyQueryRequest"}};Xcr={"in":{projectNumber:"Long"},out:{stores:{data:{__isList:!0,contextSets:{__isList:!0,modelParameters:"JsonObject"}}}}};Ycr={};
Zcr=function(a,b){b=a.serialize(Ucr,b);return a.config.request("UpdateStudioQuery",'mutation UpdateStudioQuery($studioQuery: IN_cloud_console_databases_DisplayStudioQuery, $updateMask: [String!]) @Signature(bytes: "2/BzTgpuQuVjm5UdfpjNsqN7QJmL9N7bQ0EomJpaESKTQ=") { UpdateDisplayStudioQuery(studioQuery: $studioQuery, updateMask: $updateMask) { displayName project location studioQueryId etag queryString queryLanguage } }',b,void 0).pipe(a.deserialize(Ucr))};
$cr=function(a,b){b=a.serialize(Vcr,b);return a.config.request("DownloadContext",'query DownloadContext($contextSetId: String!, $contextSetVersion: String!, $storeId: String!, $projectNumber: Long!) @Signature(bytes: "2/MblBqk6wABbAw3nvleDX3a2j4EF/uUgWLwhS7rdaunc=") { BatchDownloadContext(contextSetId: $contextSetId, contextSetVersion: $contextSetVersion, storeId: $storeId, projectNumber: $projectNumber) { contextJson contextSetJson } }',b,void 0).pipe(a.deserialize(Vcr))};
adr=function(a,b){b=a.serialize(Wcr,b);return a.config.request("FixMyQuery",'query FixMyQuery($request: IN_cloud_console_databases_FixMyQueryRequest!) @NullProto @Signature(bytes: "2/QHGaxtuoAAW32Ug8vZgcUHuMvAL50gKJHB5fuE+ce4I=") { FixMyQuery(request: $request) { suggestions { content explanation } } }',b,void 0).pipe(a.deserialize(Wcr))};
bdr=function(a,b){b=a.serialize(Ycr,b);return a.config.request("SearchStudioQueries",'query SearchStudioQueries($project: String!, $location: String!, $filter: String!, $pageSize: Int!, $pageToken: String!) @Signature(bytes: "2/Uu6obxe58bxGI9ecmFPeVtQm1c/oxdPwCFPnIfPEsx4=") { SearchDisplayStudioQueries(project: $project, location: $location, filter: $filter, pageSize: $pageSize, pageToken: $pageToken, orderBy: {field: "displayName", order: ASCENDING}) { data { project location studioQueryId displayName queryString scopes { resource resourceId } etag queryLanguage } nextPageToken totalCount } }',b,
void 0).pipe(a.deserialize(Ycr))};
cdr=function(a){return a.route.snapshot.queryParams.useFake?_.t(_.U5o):a.scopeProvider.getContextScope().pipe(_.A(b=>{var c=a.graphqlClient;b={databaseId:b.databaseId,projectNumber:b.projectNumber,projectId:b.projectId};b=c.serialize(Xcr,b);return c.config.request("LoadContextSets",'query LoadContextSets($databaseId: String!, $projectId: String!, $projectNumber: Long!) @Signature(bytes: "2/Bq43GnYxMnMWsNlsuM13FMQmUW/AkCdoWjzCfz8ARrA=") { stores: ListContextStores(projectId: $projectId) { data { name state contextSets: FindContextSets(projectNumber: $projectNumber, databaseId: $databaseId) { contextSetId version modelId schemaNames tableViews columns generalContext modelParameters additionalInfo databaseIds displayName description } } } }',b,
void 0).pipe(c.deserialize(Xcr)).pipe(_.t_(),_.w(X6q))}))};ddr=function(a,{contextStoreId:b,contextSetId:c,contextSetVersion:d}){return a.route.snapshot.queryParams.useFake?_.t('{"test": true}'):a.scopeProvider.getContextScope().pipe(_.A(e=>$cr(a.graphqlClient,{contextSetId:c,contextSetVersion:d,storeId:b,projectNumber:e.projectNumber}).pipe(_.w(f=>{let g,n;return(n=(g=f.BatchDownloadContext)==null?void 0:g.contextJson)!=null?n:""}))))};
edr=function(a,b){const c=[];a.length>0&&(a=a.map(d=>`scopes.resourceId:"${d.resourceId}"`).join(" OR "),c.push(`(${a})`));b&&c.push(`(displayName:"${b}*")`);return c.join(" AND ")};fdr=function(a,b,c,d){return a.getQueryScopes().pipe(_.A(e=>bdr(a.graphqlClient,{project:b,location:"-",filter:edr(e),pageSize:c,pageToken:d})),_.w(Z6q))};gdr=function(a,b,c){return a.getQueryScopes().pipe(_.A(d=>bdr(a.graphqlClient,{project:b,location:"-",filter:edr(d,c),pageSize:1E3,pageToken:""})),_.w(d=>$6q(c,d)))};
hdr=function(a,b,c,d){return Zcr(a.graphqlClient,{studioQuery:Object.assign({},b,{queryString:c,queryLanguage:d}),updateMask:d?["query_string","query_language"]:["query_string"]}).pipe(_.w(e=>({studioQueryRef:{project:e.UpdateDisplayStudioQuery.project,location:e.UpdateDisplayStudioQuery.location,studioQueryId:e.UpdateDisplayStudioQuery.studioQueryId,etag:e.UpdateDisplayStudioQuery.etag},displayName:e.UpdateDisplayStudioQuery.displayName,queryString:e.UpdateDisplayStudioQuery.queryString,queryLanguage:e.UpdateDisplayStudioQuery.queryLanguage})))};
idr=function(a,b){a=a.graphqlClient;b=a.serialize(Tcr,b);return a.config.request("DeleteStudioQuery",'mutation DeleteStudioQuery($project: String!, $location: String!, $studioQueryId: String!, $etag: String!) @Signature(bytes: "2/w3PyK/paepToREJv7+51Aq96Nl8eAvEVJIQ5rwAYZ+E=") { DeleteDisplayStudioQuery(project: $project, location: $location, studioQueryId: $studioQueryId, etag: $etag) { _isPresent } }',b,void 0).pipe(a.deserialize(Tcr))};_.Gba=class{constructor(a){this.msg=a}};jdr={type:1,path:"/spanner/docs/create-manage-saved-queries#required-roles"};
kdr={type:1,path:"/sql/docs/mysql/add-manage-iam-users"};ldr={type:1,path:"/sql/docs/mysql/create-edit-iam-instances"};mdr={type:1,path:"/sql/docs/mysql/manage-data-using-studio#authentication"};fcr={type:1,path:"/sql/docs/mysql/manage-data-using-studio#limitations"};ndr={type:1,path:"/sql/docs/mysql/manage-data-using-studio#query-data"};odr={type:1,path:"/sql/docs/mysql/write-sql-gemini"};pdr={type:1,path:"/sql/docs/postgres/add-manage-iam-users"};qdr={type:1,path:"/sql/docs/postgres/create-edit-iam-instances"};
rdr={type:1,path:"/sql/docs/postgres/manage-data-using-studio"};sdr={type:1,path:"/sql/docs/postgres/manage-data-using-studio#authentication"};ecr={type:1,path:"/sql/docs/postgres/manage-data-using-studio#limitations"};tdr={type:1,path:"/sql/docs/postgres/manage-data-using-studio#query-data"};udr={type:1,path:"/sql/docs/postgres/write-sql-gemini"};vdr={type:1,path:"/sql/docs/sqlserver/manage-data-using-studio#authentication"};gcr={type:1,path:"/sql/docs/sqlserver/manage-data-using-studio#limitations"};
wdr={type:1,path:"/sql/docs/sqlserver/manage-data-using-studio#query-data"};xdr={type:1,path:"/sql/docs/sqlserver/write-sql-gemini"};ydr={DISABLED:"DISABLED",TEXT:"TEXT",CHIPS:"CHIPS"};
Bdr=function(a,b,c){const d=new zdr(c);a.snackBarService.open(d.start.message);return(new Adr(a.requestService,b,c,a.driveBaseUrl)).run().pipe(_.cg(e=>{const f=d.success.actionGenerator(e);a.snackBarService.openWithMultipleActions(d.success.messageGenerator(),{actions:[{label:f.label,action:()=>void f.fire()}]})}),_.wf(e=>{typeof(e==null?void 0:e.message)==="string"?a.snackBarService.open(d.failure.messageGenerator(e==null?void 0:e.message)):a.errorService.handleError(e,"Unexpected error",_.iLj({error:e,
configuration:{presentationFormat:2}}));return _.t(void 0)}))};Cdr=class{constructor(){this.errorService=_.k(_.Xu);this.snackBarService=_.k(_.NA);const a=_.k(_.Mr);this.driveBaseUrl=_.ji("pantheon_gapiRoot1pUrl")==="https://content-googleapis-staging.sandbox.google.com"?"https://drive.sandbox.google.com/open?id=":"https://drive.google.com/open?id=";this.requestService=a.create({host:"https://clients6.google.com"})}};Cdr.\u0275fac=function(a){return new (a||Cdr)};
Cdr.\u0275prov=_.wd({token:Cdr,factory:Cdr.\u0275fac,providedIn:"root"});
var Ddr=_.pnd(),Adr=class{constructor(a,b,c,d){this.requestService=a;this.csvContent=b;this.filename=c;this.driveBaseUrl=d}run(){const a=`--${Ddr}\n`+"Content-Type: application/json; charset=utf-8\n\n"+`${JSON.stringify({name:this.filename,mimeType:"application/vnd.google-apps.spreadsheet"})}\n`+"\n"+`--${Ddr}\n`+"Content-Type: text/csv; charset=utf-8\n\n"+`${this.csvContent}\n`+`--${Ddr}--`;return this.requestService.makeRequest({path:"/upload/drive/v3/files",httpMethod:"POST",queryParams:{uploadType:"multipart"},
headers:{"Content-Type":`multipart/related; boundary=${Ddr}`},body:a}).pipe(_.A(b=>{const c=b.id;return c?_.t(`${this.driveBaseUrl}${c}`):_.ye(b)}))}},zdr=class{constructor(a){this.filename=a;this.success={messageGenerator:()=>_.rk('Saved to Sheets as "{NAME}".',{NAME:this.filename}),actionGenerator:b=>({label:"Open",fire:()=>{(0,_.xi.windowOpen)(window,_.Fc(b),"_blank")}}),manuallyDismissOnly:!0};this.failure={messageGenerator:b=>`${"Could not save to Sheets"}: ${b}`,manuallyDismissOnly:!0};this.start=
{message:_.rk('Saving to Sheets as "{NAME}"...',{NAME:a}),manuallyDismissOnly:!0}}};var Edr=class{constructor(){this.language=_.uh.required();this.autofix=_.th();this.registrations=void 0;_.vf(a=>{this.registrations=b7q(this.language(),this.autofix);a(()=>{this.dispose()})})}dispose(){this.registrations&&(this.registrations.command.dispose(),this.registrations.codeActionProvider.dispose(),this.registrations=void 0)}};Edr.\u0275fac=function(a){return new (a||Edr)};
Edr.\u0275cmp=_.z({type:Edr,selectors:[["sqe-autofix-plugin"]],inputs:{language:[1,"language"]},outputs:{autofix:"autofix"},decls:0,vars:0,template:function(){},encapsulation:2,changeDetection:0});var d7q=function(a){const b=a.elementRef.nativeElement;a.intersectionObserver=new IntersectionObserver(([c])=>{a.forceHidePlaceholderElement=!c.isIntersecting;a.changeDetector.detectChanges()},{root:null,threshold:0});a.intersectionObserver.observe(b)},Fdr=class extends _.Ktm{constructor(){super(...arguments);this.enableGeminiTransformReplace=this.isQueryEmpty=this.duetPluginShown=this.enabled=!1;this.openGenSqlRequested=new _.Ji;this.ve={BqSqeDuetPlaceholderLink:221052};this.forceHidePlaceholderElement=
!1}ngOnDestroy(){if(this.host.codeEditor){let b;(b=this.host.codeEditor.editor)==null||b.removeContentWidget(this)}let a;(a=this.intersectionObserver)==null||a.disconnect();super.ngOnDestroy()}focusOnEditor(){if(this.host.codeEditor){let a;(a=this.host.codeEditor.editor)==null||a.focus()}}applyChanges(a){if(a&&(a=this.host.codeEditor,this.enabled)){let b;(b=a.editor)==null||b.addContentWidget(this)}}getDomNode(){return this.elementRef.nativeElement}getId(){return"shared-query-editor-duet-placeholder"}getPosition(){return{position:{lineNumber:1,
column:1},preference:[monaco.editor.ContentWidgetPositionPreference.EXACT]}}};Fdr.\u0275fac=(()=>{let a;return function(b){return(a||(a=_.ie(Fdr)))(b||Fdr)}})();
Fdr.\u0275cmp=_.z({type:Fdr,selectors:[["shared-query-editor-duet-placeholder"]],inputs:{enabled:"enabled",duetPluginShown:"duetPluginShown",isQueryEmpty:"isQueryEmpty",enableGeminiTransformReplace:"enableGeminiTransformReplace"},outputs:{openGenSqlRequested:"openGenSqlRequested"},standalone:!1,features:[_.ig],decls:1,vars:1,consts:()=>[_.Gg("\ufffd#2\ufffd\ufffd#3\ufffd Start [\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#1:1\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#2\ufffd][\ufffd#4\ufffd|\ufffd#1:1\ufffd|\ufffd#6\ufffd]writing SQL[\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#1:1\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#2\ufffd]\ufffd*5:1\ufffd[\ufffd#4\ufffd|\ufffd#1:1\ufffd|\ufffd#6\ufffd], convert natural language in '/* */'[\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#1:1\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#2\ufffd]\ufffd/*5:1\ufffd[\ufffd#4\ufffd|\ufffd#1:1\ufffd|\ufffd#6\ufffd] or [\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#1:1\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#2\ufffd]\ufffd#7\ufffd generate SQL with Gemini[\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#1:1\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#2\ufffd]. [\ufffd/#3\ufffd|\ufffd/#4\ufffd|\ufffd/#1:1\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#2\ufffd]"),[1,
"shared-query-editor-duet-placeholder","cfc-fixed-font"],[3,"click"],["cfcTargetedCallout","","targetedCalloutFeatureId","bigquery_query_editor_nl2sql_callout","calloutHeader","Auto SQL conversion with natural language prompt","calloutMessage","You may enclose natural language text in '/* */' for automatically\n        converted into SQL statement.",3,"onTargetedCalloutRendered","hideTargetedCallout"],[1,"shared-query-editor-duet-placeholder-link",3,"click","ve","veClick"]],template:function(a,b){a&
1&&_.D(0,e7q,8,4,"div",1);a&2&&_.E(b.isQueryEmpty&&b.duetPluginShown&&!b.forceHidePlaceholderElement?0:-1)},dependencies:[_.ls,_.Mv],styles:["[_nghost-%COMP%]{padding-top:1px;width:-webkit-max-content;width:-moz-max-content;width:max-content}.shared-query-editor-duet-placeholder[_ngcontent-%COMP%]{color:var(--cm-sys-color-on-surface,#000)}.shared-query-editor-duet-placeholder-link[_ngcontent-%COMP%]{cursor:pointer;text-decoration:underline;color:var(--cm-sys-color-on-surface,#000)}"],changeDetection:0});
var Gdr=[_.Qu,_.Nv],Hdr=class{};Hdr.\u0275fac=function(a){return new (a||Hdr)};Hdr.\u0275mod=_.sf({type:Hdr});Hdr.\u0275inj=_.yd({imports:[Gdr]});var Idr=class extends _.Ktm{constructor(){super(...arguments);this.currentScrollHeight=new _.Rh(0);this.topOffset=0;this.shown=!1;this.spinnerDiameter=16;this.spinnerStrokeWidth=2;this.lastShownLineNumber=0}ngOnDestroy(){if(this.host.codeEditor){let a;(a=this.host.codeEditor.editor)==null||a.removeOverlayWidget(this)}super.ngOnDestroy()}showAtLineNumber(a){const b=this.host.codeEditor;this.spinnerDiameter=_.csm(b.editor)+2;let c,d;this.topOffset=((d=(c=b.editor)==null?void 0:c.getTopForLineNumber(a))!=
null?d:0)-this.currentScrollHeight.getValue();this.host.showMarkerData=!1;this.lastShownLineNumber=a;this.shown=!0;this.changeDetector.markForCheck()}hide(){this.shown=!1;this.host.showMarkerData=!0;this.changeDetector.markForCheck()}applyChanges(a){if(a){a=this.host.codeEditor;let b;(b=a.editor)==null||b.addOverlayWidget(this);let c;(c=a.editor)==null||c.onDidScrollChange(d=>{d.scrollTop!==this.currentScrollHeight.getValue()&&(this.currentScrollHeight.next(d.scrollTop),this.shown&&this.showAtLineNumber(this.lastShownLineNumber))})}}getDomNode(){return this.elementRef.nativeElement}getId(){return"shared-query-editor-loading-indicator"}getPosition(){return null}};
Idr.\u0275fac=(()=>{let a;return function(b){return(a||(a=_.ie(Idr)))(b||Idr)}})();
Idr.\u0275cmp=_.z({type:Idr,selectors:[["shared-query-editor-loading-indicator"]],standalone:!1,features:[_.ig],decls:2,vars:6,consts:[[1,"shared-query-editor-loading-indicator-container"],[1,"shared-query-editor-loading-indicator",3,"diameter","strokeWidth"]],template:function(a,b){a&1&&(_.I(0,"div",0),_.K(1,"mat-spinner",1),_.J());a&2&&(_.Zg("display",b.shown?"block":"none")("top",b.topOffset,"px"),_.y(),_.H("diameter",b.spinnerDiameter)("strokeWidth",b.spinnerStrokeWidth))},dependencies:[_.Cq,
_.Aq,_.wq],styles:[".shared-query-editor-loading-indicator-container[_ngcontent-%COMP%]{position:relative;left:3px;z-index:101}.shared-query-editor-loading-indicator[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0});var Jdr=[_.Dq],Kdr=class{};Kdr.\u0275fac=function(a){return new (a||Kdr)};Kdr.\u0275mod=_.sf({type:Kdr});Kdr.\u0275inj=_.yd({imports:[_.ho,Jdr]});var Ldr=function(a){return _.hd(function*(){if(a.apisEnablerDisabled)return!0;let b;return(yield _.ze(_.Hdq(a.apisEnablerDialogService,a.apisEnablerApisList,(b=a.apisEnablerTitle)!=null?b:"",a.apisEnablerProjectIdOverride)))===5})},Mdr=class{constructor(){this.apisEnablerDialogService=_.k(_.Idq);this.apisEnablerDisabled=!1;this.apisEnablerApisList=[];this.apisEnablerOnEnabled=new _.Ji}onClick(){const a=this;return _.hd(function*(){(yield Ldr(a))&&a.apisEnablerOnEnabled.emit()})}};
Mdr.\u0275fac=function(a){return new (a||Mdr)};Mdr.\u0275dir=_.tf({type:Mdr,selectors:[["","apisEnabler",""]],hostBindings:function(a,b){a&1&&_.P("click",function(){return b.onClick()})},inputs:{apisEnablerDisabled:"apisEnablerDisabled",apisEnablerApisList:"apisEnablerApisList",apisEnablerTitle:"apisEnablerTitle",apisEnablerProjectIdOverride:"apisEnablerProjectIdOverride"},outputs:{apisEnablerOnEnabled:"apisEnablerOnEnabled"}});var Ndr=class{};Ndr.\u0275fac=function(a){return new (a||Ndr)};Ndr.\u0275mod=_.sf({type:Ndr});Ndr.\u0275inj=_.yd({});var Odr=[[["","passwordHint",""]]],Pdr=new Map([[!1,"visibility-off"],[!0,"inspect"]]),Qdr=new Map([[!1,"password"],[!0,"text"]]),Rdr=class{constructor(){this.controlNames={password:"password"};this.messages={MSG_DATABASES_PASSWORD:"Password",MSG_DATABASES_PASSWORD_VISIBILITY_TOGGLE:"Toggle password visibility",MSG_DATABASES_PASSWORD_INCORRECT:"Incorrect password"};this.showPassword=!1;this.togglePasswordIcon=Pdr.get(this.showPassword);this.passwordInputType=Qdr.get(this.showPassword)}};
Rdr.\u0275fac=function(a){return new (a||Rdr)};
Rdr.\u0275cmp=_.z({type:Rdr,selectors:[["auth-password"]],features:[_.jh([_.Zx],[_.Zx])],ngContentSelectors:["[passwordHint]"],decls:9,vars:8,consts:[[1,"cfc-space-below-minus-4"],["matInput","","autocomplete","off",3,"formControlName","type","required"],["mat-icon-button","","matSuffix","","type","button",3,"click","cfcTooltip"],[3,"icon"],["matError","","role","alert",4,"cfcDebounceErrorFor"],["matError","","role","alert"]],template:function(a,b){a&1&&(_.Kg(Odr),_.I(0,"mat-form-field",0)(1,"mat-label"),
_.R(2),_.J(),_.K(3,"input",1),_.I(4,"button",2),_.P("click",function(c){b.showPassword=!b.showPassword;b.togglePasswordIcon=Pdr.get(b.showPassword);b.passwordInputType=Qdr.get(b.showPassword);c.stopPropagation()}),_.K(5,"cfc-icon",3),_.J(),_.C(6,f7q,2,1,"cm-error",4),_.I(7,"mat-hint"),_.Lg(8),_.J()());a&2&&(_.y(2),_.bh(b.messages.MSG_DATABASES_PASSWORD),_.y(),_.H("formControlName",b.controlNames.password)("type",b.passwordInputType)("required",!0),_.y(),_.H("cfcTooltip",b.messages.MSG_DATABASES_PASSWORD_VISIBILITY_TOGGLE),
_.ng("aria-label",b.messages.MSG_DATABASES_PASSWORD_VISIBILITY_TOGGLE),_.y(),_.H("icon",b.togglePasswordIcon),_.y(),_.H("cfcDebounceErrorFor","incorrectPassword"))},dependencies:[_.Jt,_.xt,_.vt,_.Ht,_.lx,_.ix,_.gx,_.jx,_.Cu,_.Au,_.zu,_.ox,_.ex,_.dA,_.bA,_.cA,_.$z,_.qx,_.px,_.Kq,_.Hq,_.nt,_.Kk,_.Rs,_.ht,_.et,_.Ot],encapsulation:2,changeDetection:0});var Sdr=class extends _.zU{constructor(){super({editorStates:{},currentEditorId:"",duet:{showUiElements:!1,userHasPermission:!0,permissionWarningDismissed:!1},areSuggestionsLoading:!1});this.currentEditorState$=this.select(a=>{let b;return(b=a.editorStates[a.currentEditorId])!=null?b:void 0});this.showDuetPermissionWarning$=this.select(({duet:{showUiElements:a,userHasPermission:b,permissionWarningDismissed:c}})=>a&&!c&&!b);this.areSuggestionsLoading=this.selectSignal(a=>{let b,c;return(c=(b=a.editorStates[a.currentEditorId])==
null?void 0:b.areSuggestionsLoading)!=null?c:!1});this.currentEditorState=this.selectSignal(a=>a.editorStates[a.currentEditorId]);this.markers$=this.select(this.currentEditorState$,a=>{let b;return(b=a==null?void 0:a.markers)!=null?b:[]});this.selectedQueryText$=this.select(this.currentEditorState$,a=>{let b;return(b=a==null?void 0:a.selectedQueryText)!=null?b:""});this.setCurrentEditor=this.updater((a,b)=>a.editorStates[b]?Object.assign({},a,{editorStates:Object.assign({},a.editorStates,{[b]:Object.assign({},
a.editorStates[b],{selectedQueryText:""})}),currentEditorId:b}):Object.assign({},a,{currentEditorId:b,editorStates:Object.assign({},a.editorStates,{[b]:{markers:[],selectedQueryText:"",areSuggestionsLoading:!1}})}));this.dismissDuetPermissionWarning=this.updater(a=>Object.assign({},a,{duet:Object.assign({},a.duet,{permissionWarningDismissed:!0})}));this.setShowDuetUiElements=this.updater((a,b)=>Object.assign({},a,{duet:Object.assign({},a.duet,{showUiElements:b})}));this.updateOnAutofixReady=this.updater((a,
{originalText:b,suggestion:c})=>{const d=c.editorId,e=a.editorStates[d];return e?Object.assign({},a,{editorStates:Object.assign({},a.editorStates,{[d]:Object.assign({},e,{diffState:{originalText:b,modifiedText:c.content,explanation:c.explanation}})})}):a});this.updateOnModifiedQueryTextChange=this.updater((a,{editorId:b,text:c})=>{const d=a.editorStates[b];return d&&d.diffState?Object.assign({},a,{editorStates:Object.assign({},a.editorStates,{[b]:Object.assign({},d,{diffState:Object.assign({},d.diffState,
{modifiedText:c})})})}):a});this.updateOnDiffClosed=this.updater((a,b)=>{const c=a.editorStates[b];return c&&c.diffState?Object.assign({},a,{editorStates:Object.assign({},a.editorStates,{[b]:Object.assign({},c,{diffState:void 0})})}):a});this.setShowUserHasDuetPermission=this.updater((a,b)=>Object.assign({},a,{duet:Object.assign({},a.duet,{userHasPermission:b})}));this.setMarkers=this.updater((a,{editorId:b,markers:c})=>a.editorStates[b]?Object.assign({},a,{editorStates:Object.assign({},a.editorStates,
{[b]:Object.assign({},a.editorStates[b],{markers:c})})}):a);this.setSelectedQueryText=this.updater((a,{editorId:b,selectedQueryText:c})=>a.editorStates[b]?Object.assign({},a,{editorStates:Object.assign({},a.editorStates,{[b]:Object.assign({},a.editorStates[b],{selectedQueryText:c})})}):a);this.updateAreSuggestionsLoading=this.updater((a,{editorId:b,areSuggestionsLoading:c})=>a.editorStates[b]?Object.assign({},a,{editorStates:Object.assign({},a.editorStates,{[b]:Object.assign({},a.editorStates[b],
{areSuggestionsLoading:c})})}):a)}diffState(){let a;return(a=this.currentEditorState())==null?void 0:a.diffState}autofixExplanation(){let a;return(a=this.diffState())==null?void 0:a.explanation}};Sdr.\u0275fac=function(a){return new (a||Sdr)};Sdr.\u0275prov=_.wd({token:Sdr,factory:Sdr.\u0275fac});var Tdr=class{constructor(a,b){this.analyticsService=a;this.metadata=b}trackRecitation(a){const b=a.traceId,c=a.parentSessionId,d=[{key:459,value:a.uuid},{key:446,value:"gen-sql-card"},{key:456,value:a.sessionId},{key:450,value:a.isTransform}];X9(d,441,a.anarresId);X9(d,451,c);let e;this.analyticsService.sendEvent({type:"bqAtlasCodeAssist",name:"atlasRecitation",traceId:b,metadataArray:[...d,...((e=this.metadata)!=null?e:[])]})}trackGenerationFailed(a){const b=a.parentSessionId,c=[{key:459,value:a.uuid},
{key:446,value:"gen-sql-card"},{key:456,value:a.sessionId},{key:450,value:a.isTransform},{key:449,value:!0}];X9(c,445,a.error);X9(c,451,b);let d;this.analyticsService.sendEvent({type:"bqAtlasCodeAssist",name:"atlasCompletionFailed",metadataArray:[...c,...((d=this.metadata)!=null?d:[])]})}trackSuggestionShown(a){const b=a.sessionId,c=a.isTransform,d=a.promptLength,e=a.anarresId,f=a.traceId,g=a.turn,n=a.parentSessionId;let q;a=[{key:459,value:a.uuid},{key:442,value:a.completionLength},{key:449,value:!0},
{key:455,value:(q=a.score)!=null?q:0},{key:446,value:"gen-sql-card"},{key:456,value:b},{key:450,value:c},{key:453,value:d}];X9(a,441,e);X9(a,458,g);X9(a,451,n);let r;this.analyticsService.sendEvent({type:"bqAtlasCodeAssist",name:"atlasCompletionShown",traceId:f,metadataArray:[...a,...((r=this.metadata)!=null?r:[])]})}trackSuggestionAccepted(a){const b=a.sessionId,c=a.isTransform,d=a.promptLength,e=a.rating,f=a.anarresId,g=a.traceId,n=a.turn,q=a.parentSessionId,r=a.isFromPromptTemplate;let u;a=[{key:459,
value:a.uuid},{key:442,value:a.completionLength},{key:449,value:!0},{key:447,value:!1},{key:455,value:(u=a.score)!=null?u:0},{key:446,value:"gen-sql-card"},{key:456,value:b},{key:450,value:c},{key:453,value:d}];X9(a,441,f);X9(a,458,n);X9(a,451,q);X9(a,448,r);X9(a,454,h7q(e));let v;this.analyticsService.sendEvent({type:"bqAtlasCodeAssist",name:"atlasCompletionAccepted",traceId:g,metadataArray:[...a,...((v=this.metadata)!=null?v:[])]})}trackSuggestionRated(a){const b=a.sessionId,c=a.isTransform,d=a.rating,
e=a.anarresId,f=a.traceId,g=a.turn,n=a.parentSessionId,q=a.isFromPromptTemplate;let r;a=[{key:459,value:a.uuid},{key:442,value:a.completionLength},{key:449,value:!0},{key:447,value:!1},{key:455,value:(r=a.score)!=null?r:0},{key:446,value:"gen-sql-card"},{key:456,value:b},{key:450,value:c}];X9(a,441,e);X9(a,458,g);X9(a,451,n);X9(a,448,q);X9(a,454,h7q(d));let u;this.analyticsService.sendEvent({type:"bqAtlasCodeAssist",name:"atlasCompletionRated",traceId:f,metadataArray:[...a,...((u=this.metadata)!=
null?u:[])]})}trackSuggestionFeedbackSubmitted(a){const b=a.sessionId,c=a.isTransform,d=a.rating,e=a.anarresId,f=a.traceId,g=a.turn,n=a.parentSessionId,q=a.isFromPromptTemplate;let r;a=[{key:459,value:a.uuid},{key:442,value:a.completionLength},{key:449,value:!0},{key:447,value:!1},{key:455,value:(r=a.score)!=null?r:0},{key:446,value:"gen-sql-card"},{key:456,value:b},{key:450,value:c}];X9(a,441,e);X9(a,458,g);X9(a,451,n);X9(a,448,q);X9(a,454,h7q(d));let u;this.analyticsService.sendEvent({type:"bqAtlasCodeAssist",
name:"atlasCompletionFeedbackSubmitted",traceId:f,metadataArray:[...a,...((u=this.metadata)!=null?u:[])]})}trackDryRunValidation(a){const b=a.traceId,c=a.turn,d=a.parentSessionId,e=[{key:446,value:"gen-sql-card"},{key:459,value:a.uuid},{key:457,value:a.success},{key:456,value:a.sessionId},{key:450,value:a.isTransform}];X9(e,441,a.anarresId);X9(e,458,c);X9(e,451,d);let f;this.analyticsService.sendEvent({type:"bqAtlasCodeAssist",name:"atlasSqlGenerationDryRun",traceId:b,metadataArray:[...e,...((f=this.metadata)!=
null?f:[])]})}trackInsightQuerySelected(){this.analyticsService.sendEvent({type:"bqAtlasCodeAssist",name:"atlasInsightQuerySelected",metadataArray:this.metadata})}trackPromptTemplateEdits(a){let b;this.analyticsService.sendEvent({type:"bqAtlasCodeAssist",name:"atlasPromptTemplateEdits",metadataArray:[{key:452,value:a.previousSelectedPromptLength},{key:443,value:a.currentPromptLength},{key:444,value:a.editDistance},...((b=this.metadata)!=null?b:[])]})}};var Udr=function(a){return _.ze(a.codeGenerationResponseStream$.pipe(_.Ef(1),_.w(b=>{if(b)return{items:b.map(c=>({insertText:c.insertText,command:{id:"inlineCompletion.onAccepted",arguments:[c],title:""},details:c}))}}),_.wf(()=>_.t(void 0))))},Vdr=function(a,{cacheKey:b,position:c,experience:d,prefix:e,suffix:f,analyticsMetadata:g}){return n=>{const q=d==="GENERATE";return n.pipe(_.w(r=>r.filter(({citations:u})=>u&&u.length>0?q:!0).map(u=>q?_.Brm({sql:u.content,citations:u.citations}):u.content)),
_.cg(r=>{_.zl(b)&&a.completionCache.set(b,r)}),_.w(r=>(r||[]).map(u=>({insertText:u,fromCache:!1,position:c,experience:d,prefix:e,suffix:f,analyticsMetadata:g}))),_.wf(()=>_.t(void 0)))}},Xdr=class{constructor(){this.codeGenerationRequestStream$=new _.Kf;this.codeGenerationResponseStream$=new _.Kf;this.destroy$=new _.Kf;this.analyticsService=_.k(_.jp);this.feedbackHelper=_.k(_.ltm);this.fetchingSuggestions$=new _.Rh({fetching:!1});this.completionCache=new _.kHi(100);this.codeGenerationRequestStream$.pipe(_.ag(this.destroy$),
_.Bf(1E3),_.cg(a=>{this.fetchingSuggestions$.next({fetching:!0,position:a.position})}),_.A(a=>this.generateCode(a)),_.wf(()=>_.t(void 0)),_.cg(()=>{this.fetchingSuggestions$.next({fetching:!1})})).subscribe(a=>{this.codeGenerationResponseStream$.next(a)})}onMonacoInitialized(a){this.editor=a;this.onAcceptedRegistration=monaco.editor.registerCommand("inlineCompletion.onAccepted",(b,c)=>{this.recordAnalyticsEvent("duetSuggestionAccepted",Object.assign({},c.analyticsMetadata,{fromCache:c.fromCache,experience:c.experience}))})}register(a){this.inlineCompletionsRegistration=
monaco.languages.registerInlineCompletionsProvider(a,this)}provideInlineCompletions(a,b){const c=this;return _.hd(function*(){if(c.editor&&(c.isCodeGenerationEnabled||c.isCodeCompletionEnabled)&&c.editor.getModel()===a&&a.getValue().trim()&&!(yield Wdr(c,a.getLineContent(b.lineNumber)))){var {prefix:d,suffix:e}=_.Arm(a,b),f=yield c.getExperience(d);if(f!=="COMPLETE"||c.isCodeCompletionEnabled)if(f!=="GENERATE"||c.isCodeGenerationEnabled)return c.codeGenerationRequestStream$.next({prefix:d,suffix:f===
"COMPLETE"?e:void 0,model:a,position:b,experience:f}),Udr(c)}})}getCachedResponse(a,b,c,d,e,f){if(a=this.completionCache.get(a))return a.map(g=>({insertText:g,fromCache:!0,position:b,experience:c,prefix:d,suffix:e,analyticsMetadata:f}))}getExperience(a){const b=this;return _.hd(function*(){const c=a.trim().split(/\r?\n/);for(;c.length>0;){let d;const e=(d=c.pop())==null?void 0:d.trim();if(e)return(yield Wdr(b,e))?"GENERATE":"COMPLETE"}return"COMPLETE"})}freeInlineCompletions(){}dispose(){let a;(a=
this.inlineCompletionsRegistration)==null||a.dispose();let b;(b=this.onAcceptedRegistration)==null||b.dispose();this.destroy$.next();this.destroy$.complete()}handleItemDidShow(a,b){a=b.details;this.recordAnalyticsEvent("duetSuggestionShown",Object.assign({},a.analyticsMetadata,{fromCache:a.fromCache,experience:a.experience}));let c;b=this.feedbackHelper;var d={prefix:a.prefix,suffix:(c=a.suffix)!=null?c:"",isGeneration:a.experience==="GENERATE",suggestion:a.insertText};b.history.push(d);b.history.length>
5&&b.history.shift()}handlePartialAccept(a,b){this.recordAnalyticsEvent("duetSuggestionPartiallyAccepted",Object.assign({},b.details.analyticsMetadata,{fromCache:b.details.fromCache,experience:b.details.experience}))}get isCodeGenerationEnabled(){let a;return(a=this.studioGeminiSettings)==null?void 0:a.call(this).isCodeGenerationEnabled}get isCodeCompletionEnabled(){let a;return(a=this.studioGeminiSettings)==null?void 0:a.call(this).isCodeCompletionEnabled}recordAnalyticsEvent(a,b){this.analyticsService.sendEvent({type:"databaseStudio",
name:a,metadata:b})}};var Ydr=new _.Iq("45711134"),Zdr=new _.Iq("45711135"),$dr=new _.Iq("45711133");var aer=[..._.bdo],ber=class{constructor(){this.analyticsService=_.k(_.jp);this.feedbackHelper=_.k(_.ltm);this.databasesDuetEnablementService=_.k(_.q8);this.studioAnalyticsService=_.k(_.Hto);this.isCodeGenerationEnabled=_.uh.required();this.isFixQueryEnabled=_.uh.required();this.showFixQueryItem=_.uh.required();this.feedbackBucketId=_.uh.required();this.onGenerationSettingUpdated=_.th();this.onFixQuerySettingUpdated=_.th();this.requiredPermissions=aer;this.apisEnablerApisList=["cloudaicompanion.googleapis.com"];
this.apisEnablerDisabled=!1;this.messages={MSG_DATABASES_ENABLE_COMPANION_API_TOOLTIP:"To use Gemini features, an administrator needs to enable the Cloud AI Companion API",MSG_DATABASES_GEMINI_API_ENABLEMENT_BUTTON_LABEL:"Enable",MSG_DATABASES_GEMINI_ARIA_LABEL:"Gemini menu",MSG_DATABASES_GEMINI_IAM_NO_PERMISSION_TOOLTIP:"To use Gemini features, you need an IAM role that contains the necessary permissions.",MSG_DATABASES_COMMENT_TO_QUERY_GENERATION_MENU_ITEM_NOTE:"Generates SQL from comment: type a comment then press Enter.",
MSG_DATABASES_FIX_QUERY_GENERATION_MENU_ITEM:"Fix suggestions",MSG_DATABASES_FIX_QUERY_GENERATION_MENU_ITEM_NOTE:"Suggests fix next to errors.",menuHeader:"Gemini Code Assist"};this.ve={FrPlatformDuetGeminiEnablementButton:268132,FrPlatformDuetCompletionMenuItem:191380,FrPlatformDuetGenerationMenuItem:191381,FrPlatformDuetFixQueryMenuItem:274591,FrPlatformDuetMenuButton:191382};this.IamCheckOperator=_.EA;this.isDuetApiEnabled=_.Kj(this.databasesDuetEnablementService.isDuetApiEnabled());this.nl2sqlNudgesControlEnabled=
_.ki($dr);this.nl2sqlNudgesButtonBarEnabled=_.ki(Ydr);this.nl2sqlNudgesChipEnabled=_.ki(Zdr);this.nl2sqlNudgesAnyTreatmentArmEnabled=this.nl2sqlNudgesButtonBarEnabled||this.nl2sqlNudgesChipEnabled;this.nl2sqlNudgesAnyArmEnabled=this.nl2sqlNudgesControlEnabled||this.nl2sqlNudgesAnyTreatmentArmEnabled;this.badgeType="preview";this.buttonLabel=this.nl2sqlNudgesAnyTreatmentArmEnabled?this.databasesDuetEnablementService.isDuetApiEnabled().pipe(_.w(a=>a?"":"Gemini settings")):_.t("Gemini");this.iconNew=
_.UBg;this.iconOld="pen-spark"}ngOnInit(){this.studioAnalyticsService.getMetadata().pipe(_.Ef(1)).subscribe(a=>{this.analyticsService.sendEvent({type:"databaseStudio",name:"geminiMenuImpression",metadata:a})})}ngOnChanges(){this.databasesDuetEnablementService.isDuetApiEnabled().subscribe(a=>{this.apisEnablerDisabled=a})}onApiEnabled(){this.databasesDuetEnablementService.apiJustEnabled.next(!0)}get linkToApiPage(){return{label:this.messages.MSG_DATABASES_GEMINI_API_ENABLEMENT_BUTTON_LABEL,kind:"link",
href:"/apis/library/cloudaicompanion.googleapis.com",target:"_blank"}}toggleCodeGeneration(a){const b=!this.isCodeGenerationEnabled();this.onGenerationSettingUpdated.emit(b);this.analyticsService.sendEvent({type:"databaseStudio",name:"duetPreferenceChanged",metadata:{enabled:b,experience:"GENERATE"}});a.stopPropagation()}toggleFixQuery(a){const b=!this.isFixQueryEnabled();this.onFixQuerySettingUpdated.emit(b);this.analyticsService.sendEvent({type:"databaseStudio",name:"duetPreferenceChanged",metadata:{enabled:b,
experience:"FIX_QUERY"}});a.stopPropagation()}handleFeedbackClick(){this.feedbackHelper.startFeedbackFlow({bucketId:this.feedbackBucketId()})}};ber.\u0275fac=function(a){return new (a||ber)};
ber.\u0275cmp=_.z({type:ber,selectors:[["fr-duet-menu"]],inputs:{isCodeGenerationEnabled:[1,"isCodeGenerationEnabled"],isFixQueryEnabled:[1,"isFixQueryEnabled"],showFixQueryItem:[1,"showFixQueryItem"],feedbackBucketId:[1,"feedbackBucketId"]},outputs:{onGenerationSettingUpdated:"onGenerationSettingUpdated",onFixQuerySettingUpdated:"onFixQuerySettingUpdated"},features:[_.Ln],decls:12,vars:28,consts:()=>[["duetMenu",""],["mat-button","","cfcMenuButton","","type","button","cfcCalloutStepTarget","duetMenu",
"id","duet-menu-trigger",3,"ariaLabel","cfcMenuTriggerFor","disabled","disabledTooltip","disabledTooltipAction","disabledTooltipRich","ve","veClick","cfcTooltip","cfcIamOperator","cfcIamCheck","cfcIamNoPermissionTooltip"],["matButtonIcon","","size","small",3,"icon"],["ariaLabelledBy","duet-menu-trigger"],[3,"hasSeparator"],[3,"header","hasSeparator"],["label","Comment-to-query generation",3,"click","icon","note","ve","veClick","badge"],[3,"icon","label","note","ve","veClick","badge"],[1,"cfc-space-below-minus-6",
3,"titleVisible"],["id","enable-duet-api-button","mat-raised-button","","type","button","color","primary","apisEnabler","","apisEnablerTitle","Enable Gemini API to use GeminiCode Assist features such as SQL code\n                  generation and explanation",3,"apisEnablerOnEnabled","ve","veClick","apisEnablerDisabled","apisEnablerApisList"],[3,"click","icon","label","note","ve","veClick","badge"],["label","Send feedback",3,"click"]],template:function(a,b){a&1&&(_.I(0,"button",1),_.D(1,j7q,1,1,"cm-icon",
2)(2,k7q,1,1,"cfc-icon",2),_.R(3),_.U(4,"async"),_.J(),_.I(5,"cfc-menu",3,0),_.D(7,l7q,8,8,"cfc-menu-section",4),_.I(8,"cfc-menu-section",5)(9,"cfc-menu-item",6),_.P("click",function(c){return b.toggleCodeGeneration(c)}),_.J(),_.D(10,m7q,1,7,"cfc-menu-item",7),_.J(),_.D(11,n7q,2,1,"cfc-menu-section",4),_.J());a&2&&(a=_.Yg(6),_.H("ariaLabel",b.messages.MSG_DATABASES_GEMINI_ARIA_LABEL)("cfcMenuTriggerFor",a)("disabled",!b.nl2sqlNudgesAnyTreatmentArmEnabled&&!b.isDuetApiEnabled())("disabledTooltip",
b.messages.MSG_DATABASES_ENABLE_COMPANION_API_TOOLTIP)("disabledTooltipAction",b.linkToApiPage)("disabledTooltipRich",!0)("ve",b.ve.FrPlatformDuetMenuButton)("veClick",!0)("cfcTooltip",b.messages.menuHeader)("cfcIamOperator",b.IamCheckOperator.AND)("cfcIamCheck",b.requiredPermissions)("cfcIamNoPermissionTooltip",b.messages.MSG_DATABASES_GEMINI_IAM_NO_PERMISSION_TOOLTIP),_.y(),_.E(b.nl2sqlNudgesAnyTreatmentArmEnabled?1:2),_.y(2),_.S(" ",_.W(4,26,b.buttonLabel),"\n"),_.y(4),_.E(b.nl2sqlNudgesAnyTreatmentArmEnabled&&
!b.isDuetApiEnabled()?7:-1),_.y(),_.H("header",b.messages.menuHeader)("hasSeparator",!0),_.y(),_.H("note",_.gh(b.nl2sqlNudgesAnyArmEnabled?b.messages.MSG_DATABASES_COMMENT_TO_QUERY_GENERATION_MENU_ITEM_NOTE:""))("icon",b.isCodeGenerationEnabled()?"done":void 0)("ve",b.ve.FrPlatformDuetGenerationMenuItem)("veClick",!0)("badge",b.badgeType),_.ng("aria-checked",b.isCodeGenerationEnabled()),_.y(),_.E(b.showFixQueryItem()?10:-1),_.y(),_.E(b.feedbackBucketId()?11:-1))},dependencies:[Mdr,_.Qu,_.as,_.ls,
_.r3,_.s3,_.dMk,_.Nv,_.Lv,_.Jt,_.xt,_.ut,_.Ht,_.GA,_.FA,_.uq,_.Kq,_.Hq,_.fA,_.eA,_.sw,_.qw,_.ow,_.pw,_.rw,_.Ot,_.fo],encapsulation:2,changeDetection:0});var cer=class extends _.Ktm{constructor(){super(...arguments);this.isQueryEmpty=this.duetPluginShown=this.enabled=!1;this.enableAnimation=!0;this.chipText="Generate SQL";this.openGenSqlRequested=new _.Ji;this.icons={sparkIcon:_.qCg};this.ve={FrDatexGenerateSqlChip:270161}}get shown(){return this.isQueryEmpty&&this.duetPluginShown}ngOnDestroy(){if(this.host.codeEditor){let a;(a=this.host.codeEditor.editor)==null||a.removeContentWidget(this)}super.ngOnDestroy()}focusOnEditor(){if(this.host.codeEditor){let a;
(a=this.host.codeEditor.editor)==null||a.focus()}}applyChanges(a){if(a&&(a=this.host.codeEditor,this.enabled)){let b;(b=a.editor)==null||b.addContentWidget(this)}}getDomNode(){return this.elementRef.nativeElement}getId(){return"fr-studio-duet-placeholder"}getPosition(){return{position:{lineNumber:1,column:1},preference:[monaco.editor.ContentWidgetPositionPreference.EXACT]}}};cer.\u0275fac=(()=>{let a;return function(b){return(a||(a=_.ie(cer)))(b||cer)}})();
cer.\u0275cmp=_.z({type:cer,selectors:[["fr-studio-duet-placeholder"]],inputs:{enabled:"enabled",duetPluginShown:"duetPluginShown",isQueryEmpty:"isQueryEmpty",enableAnimation:"enableAnimation",chipText:"chipText"},outputs:{openGenSqlRequested:"openGenSqlRequested"},standalone:!1,features:[_.ig],decls:1,vars:1,consts:[[1,"fr-studio-duet-placeholder",3,"animated"],[1,"fr-studio-duet-placeholder"],["role","button",1,"fr-studio-duet-placeholder-link",3,"click","ve","veClick","veImpression"],[1,"fr-data-exploration-placeholder-chip"],
[1,"spark-icon",3,"icon"],[1,"fr-data-exploration-placeholder-chip-text"]],template:function(a,b){a&1&&_.D(0,o7q,6,7,"div",0);a&2&&_.E(b.shown?0:-1)},dependencies:()=>[_.as,_.ls,_.Py,_.cz,_.Sy,_.uq],styles:["[_nghost-%COMP%]{padding-top:1px;width:-webkit-max-content;width:-moz-max-content;width:max-content}.fr-studio-duet-placeholder[_ngcontent-%COMP%]{padding:5px}.fr-data-exploration-placeholder-chip[_ngcontent-%COMP%]{background:var(--cm-sys-color-ai-surface,linear-gradient(90deg,#f2f7ff,#e6efff))}.animated[_ngcontent-%COMP%]   .fr-data-exploration-placeholder-chip[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out;animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}.fr-data-exploration-placeholder-chip-text[_ngcontent-%COMP%]{background-image:-webkit-gradient(linear,left top,right top,from(#3186ff),color-stop(#364bf1),to(#4fa0ff));background-image:-webkit-linear-gradient(left,#3186ff,#364bf1,#4fa0ff);background-image:linear-gradient(90deg,#3186ff,#364bf1,#4fa0ff);background-size:300% 300%;background-position:50%;-webkit-background-clip:text;background-clip:text}.animated[_ngcontent-%COMP%]   .fr-data-exploration-placeholder-chip-text[_ngcontent-%COMP%]{color:transparent;opacity:0;-webkit-animation:_ngcontent-%COMP%_fadeIn .25s ease-in .25s forwards,_ngcontent-%COMP%_slideBackground 1s ease-in-out .5s forwards,_ngcontent-%COMP%_revertColor .5s ease-out 1.5s forwards;animation:_ngcontent-%COMP%_fadeIn .25s ease-in .25s forwards,_ngcontent-%COMP%_slideBackground 1s ease-in-out .5s forwards,_ngcontent-%COMP%_revertColor .5s ease-out 1.5s forwards}.animated[_ngcontent-%COMP%]   .spark-icon[_ngcontent-%COMP%]{color:#3186ff;opacity:0;-webkit-animation:_ngcontent-%COMP%_fadeIn .25s ease-in .25s forwards,_ngcontent-%COMP%_revertIconColor .5s ease-out 1.5s forwards;animation:_ngcontent-%COMP%_fadeIn .25s ease-in .25s forwards,_ngcontent-%COMP%_revertIconColor .5s ease-out 1.5s forwards}.fr-studio-duet-placeholder-link[_ngcontent-%COMP%]{cursor:pointer}@-webkit-keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@-webkit-keyframes _ngcontent-%COMP%_slideBackground{0%{background-position:50%}to{background-position:100% 0}}@keyframes _ngcontent-%COMP%_slideBackground{0%{background-position:50%}to{background-position:100% 0}}@-webkit-keyframes _ngcontent-%COMP%_appearClippedText{0%{background-image:none}to{background-image:-webkit-gradient(linear,left top,right top,from(#3186ff),color-stop(#364bf1),to(#4fa0ff));background-image:-webkit-linear-gradient(left,#3186ff,#364bf1,#4fa0ff);background-image:linear-gradient(90deg,#3186ff,#364bf1,#4fa0ff)}}@keyframes _ngcontent-%COMP%_appearClippedText{0%{background-image:none}to{background-image:-webkit-gradient(linear,left top,right top,from(#3186ff),color-stop(#364bf1),to(#4fa0ff));background-image:-webkit-linear-gradient(left,#3186ff,#364bf1,#4fa0ff);background-image:linear-gradient(90deg,#3186ff,#364bf1,#4fa0ff)}}@-webkit-keyframes _ngcontent-%COMP%_appearIcon{0%{color:transparent}to{color:#3186ff}}@keyframes _ngcontent-%COMP%_appearIcon{0%{color:transparent}to{color:#3186ff}}@-webkit-keyframes _ngcontent-%COMP%_revertColor{0%{color:transparent}to{color:var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66))}}@keyframes _ngcontent-%COMP%_revertColor{0%{color:transparent}to{color:var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66))}}@-webkit-keyframes _ngcontent-%COMP%_revertIconColor{0%{color:#3186ff}to{color:var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66))}}@keyframes _ngcontent-%COMP%_revertIconColor{0%{color:#3186ff}to{color:var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66))}}"],
changeDetection:0});var der=[_.Qu,_.dz,_.uq],eer=class{};eer.\u0275fac=function(a){return new (a||eer)};eer.\u0275mod=_.sf({type:eer});eer.\u0275inj=_.yd({imports:[der]});var fer=class{constructor(){this.liveAnnouncer=_.k(_.qp);this.isDisabled=_.sh(!1);this.disabledTooltip=_.sh();this.isRunning=_.sh(!1);this.isSelected=_.sh(!1);this.isCanceling=_.sh();this.menu=_.sh();this.cancelStatementButtonText=_.sh("Cancel statement");this.cancelStatementLoaderText=_.sh("Canceling...");this.runStatementButtonText=_.sh("Run");this.runSelectedStatementButtonText=_.sh("Run selected");this.runStatementLoaderText=_.sh("Running...");this.Boolean=Boolean;this.onCancel=new _.Ji;this.onRun=
new _.Ji;this.ve={FrDatexEditorCancelButton:205354,FrDatexEditorRunButton:191515}}get isCancelEnabled(){return this.isCanceling()!==void 0}get shouldDisplaySplitButton(){return!!this.menu()&&!this.isRunning()&&!this.isCanceling()}get shouldDisplayCancelButton(){return this.isRunning()&&this.isCancelEnabled&&!this.isCanceling()}get shouldDisplayCancelLoader(){return this.isCanceling()}get shouldDisplayRunLoader(){return this.isRunning()&&!this.isCancelEnabled}get shouldDisplayLoader(){return this.shouldDisplayRunLoader||
this.shouldDisplayCancelLoader}get buttonText(){return this.shouldDisplayCancelLoader?this.cancelStatementLoaderText():this.shouldDisplayRunLoader?this.runStatementLoaderText():this.shouldDisplayCancelButton?this.cancelStatementButtonText():this.isSelected()?this.runSelectedStatementButtonText():this.runStatementButtonText()}};fer.\u0275fac=function(a){return new (a||fer)};
fer.\u0275cmp=_.z({type:fer,selectors:[["fr-database-studio-query-button"]],inputs:{isDisabled:[1,"isDisabled"],disabledTooltip:[1,"disabledTooltip"],isRunning:[1,"isRunning"],isSelected:[1,"isSelected"],isCanceling:[1,"isCanceling"],menu:[1,"menu"],cancelStatementButtonText:[1,"cancelStatementButtonText"],cancelStatementLoaderText:[1,"cancelStatementLoaderText"],runStatementButtonText:[1,"runStatementButtonText"],runSelectedStatementButtonText:[1,"runSelectedStatementButtonText"],runStatementLoaderText:[1,
"runStatementLoaderText"]},outputs:{onCancel:"onCancel",onRun:"onRun"},decls:5,vars:4,consts:[[1,"fr-data-exploration-query-button",3,"ngSwitch"],[3,"inProgress","message",4,"ngSwitchCase"],["color","primary","class","cfc-prefix","alignmentSide","bottom","alignmentPosition","start",3,"disabled","menu","raised","primary",4,"ngSwitchCase"],["mat-raised-button","",3,"ve","veClick","click",4,"ngSwitchCase"],["mat-raised-button","","color","primary","spotlightId","fr-query-run-button",3,"ve","veClick",
"disabled","disabledTooltip","click",4,"ngSwitchDefault"],[3,"inProgress","message"],["mat-raised-button",""],["color","primary","alignmentSide","bottom","alignmentPosition","start",1,"cfc-prefix",3,"disabled","menu","raised","primary"],["mat-button","","color","primary","spotlightId","fr-query-run-button",3,"click","ve","veClick","disabled","disabledTooltip"],"matButtonIcon  icon play size small".split(" "),["mat-raised-button","",3,"click","ve","veClick"],"matButtonIcon  icon cancel size small".split(" "),
["mat-raised-button","","color","primary","spotlightId","fr-query-run-button",3,"click","ve","veClick","disabled","disabledTooltip"]],template:function(a,b){a&1&&(_.I(0,"div",0),_.C(1,p7q,4,3,"cfc-progress-button",1)(2,q7q,5,10,"cfc-split-button",2)(3,r7q,4,3,"button",3)(4,s7q,4,6,"button",4),_.J());a&2&&(_.H("ngSwitch",!0),_.y(),_.H("ngSwitchCase",b.shouldDisplayLoader),_.y(),_.H("ngSwitchCase",b.shouldDisplaySplitButton),_.y(),_.H("ngSwitchCase",b.shouldDisplayCancelButton))},dependencies:[_.Qu,
_.as,_.ls,_.Jt,_.xt,_.ut,_.Ht,_.Kq,_.Hq,_.$n,_.ao,_.bo,_.Lt,_.IB,_.vJ,_.uJ],encapsulation:2,changeDetection:0});var ger=[[["","studioSaveAsMenu",""]]],t7q=function(a){her(a);a.onSaveAs.emit();a.analyticsService.sendEvent({type:"studio",name:"studioQueriesExistingQuerySavedAsNewQuery"})},her=function(a){a.subtaskService.openDynamic((0,_.wl)("xRt28e").then(()=>_.ORd),{viewContainerRef:a.viewContainerRef,data:{queryText:a.queryText(),queryLanguage:a.queryLanguage()}}).onAccept.pipe(_.Ef(1)).subscribe(b=>{a.onSave.emit(b.studioQuery);a.showSuccessSnackbar(b.studioQuery.displayName)})},ier=function(a){a.studioQueryRef()&&
(a.isSaving=!0,hdr(a.studioQueriesService,a.studioQueryRef(),a.queryText(),a.queryLanguage()).pipe(_.Ef(1),_.wf(()=>{a.snackBarService.open("There was an error updating the query.");return _.t(void 0)}),_.If(()=>{a.isSaving=!1})).subscribe(b=>{b&&(a.onSave.emit(b),a.showSuccessSnackbar(b.displayName))}))},jer=class{constructor(){this.queryText=_.uh.required();this.queryLanguage=_.sh();this.studioQueryRef=_.sh();this.isDisabled=_.sh(!1);this.disabledTooltip=_.sh();this.databaseSearchIcon=_.CBg;this.onSave=
new _.Ji;this.onSaveAs=new _.Ji;this.subtaskService=_.k(_.Hz);this.viewContainerRef=_.k(_.Og);this.studioQueriesService=_.k(_.Z8);this.analyticsService=_.k(_.jp);this.createInstancePermissions=["databasesconsole.studioQueries.create","databasesconsole.studioQueries.search"];this.iamCheckOperatorAND=1;this.saveLabel="Save";this.snackBarService=_.k(_.NA);this.messages={MSG_FR_SAVE_AS:"Save as query",MSG_STUDIO_SAVE_DISABLED_TOOLTIP:"You do not have permission to save a query.",MSG_FR_SAVE_AS_QUERY_NOTE:"Store the query definition"};
this.permissionsLearnMoreLink=_.hk(jdr);this.ve={StudioSavedQueriesSaveButton:252480,StudioSavedQueriesSaveAsMenuItem:252481};this.menuModel=new _.lw({sections:[new _.mw({items:[new _.nw({label:"Save as query",action:()=>{t7q(this)},ve:this.ve.StudioSavedQueriesSaveAsMenuItem})]})]});this.isSaving=!1}showSuccessSnackbar(a){this.snackBarService.open(_.rk('Query "{queryName}" saved',{queryName:a}))}};jer.\u0275fac=function(a){return new (a||jer)};
jer.\u0275cmp=_.z({type:jer,selectors:[["fr-database-studio-save-button"]],inputs:{queryText:[1,"queryText"],queryLanguage:[1,"queryLanguage"],studioQueryRef:[1,"studioQueryRef"],isDisabled:[1,"isDisabled"],disabledTooltip:[1,"disabledTooltip"]},outputs:{onSave:"onSave",onSaveAs:"onSaveAs"},ngContentSelectors:["[studioSaveAsMenu]"],decls:6,vars:15,consts:()=>[["saveAsMenu",""],"\ufffd0\ufffd",[3,"menuTemplate","disabled","cfcIamCheck","cfcIamOperator","cfcIamNoPermissionTooltip"],[3,"inProgress"],
["mat-button","",3,"click","disabled","disabledTooltip","cfcIamCheck","cfcIamOperator","cfcIamNoPermissionTooltip","cfcIamLearnMoreLink","ve","veClick"],["ariaLabelledBy","fr-studio-save-as-menu"],[3,"click","icon","label","ve","veClick","note"]],template:function(a,b){a&1&&(_.Kg(ger),_.I(0,"cfc-split-button",2)(1,"cfc-progress-button",3)(2,"button",4),_.P("click",function(){b.studioQueryRef()?(b.analyticsService.sendEvent({type:"studio",name:"studioQueriesExistingQueryUpdated"}),ier(b)):(b.analyticsService.sendEvent({type:"studio",
name:"studioQueriesNewQueryCreated"}),her(b))}),_.N(3,1),_.J()()(),_.C(4,u7q,3,5,"ng-template",null,0,_.rh));if(a&2){a=_.Yg(5);const c=b.isDisabled();_.H("menuTemplate",a)("disabled",c)("cfcIamCheck",b.createInstancePermissions)("cfcIamOperator",b.iamCheckOperatorAND)("cfcIamNoPermissionTooltip",b.messages.MSG_STUDIO_SAVE_DISABLED_TOOLTIP);_.y();_.H("inProgress",b.isSaving);_.y();_.H("disabled",c)("disabledTooltip",b.disabledTooltip())("cfcIamCheck",b.createInstancePermissions)("cfcIamOperator",b.iamCheckOperatorAND)("cfcIamNoPermissionTooltip",
b.messages.MSG_STUDIO_SAVE_DISABLED_TOOLTIP)("cfcIamLearnMoreLink",b.permissionsLearnMoreLink)("ve",b.ve.StudioSavedQueriesSaveButton)("veClick",!0);_.y();_.Eg(b.saveLabel);_.Fg(3)}},dependencies:[_.sD,_.Qu,_.as,_.ls,_.Jt,_.xt,_.ut,_.Ht,_.GA,_.FA,_.Lt,_.IB,_.sw,_.qw,_.ow],encapsulation:2,changeDetection:0});var ker=["loadingIndicator"],ler=[[["","nextToRunButtonContent",""]],[["","actionBarAdditionalLeftContent",""]],[["","actionBarRightContent",""]],[["","studioSaveAsMenu",""]]],G7q=()=>[],H7q=(a,b)=>({text:a,actions:b}),mer={message:"",status:"NONE"},ner=1,oer=function(a,{content:b}){return b!==""&&b.trim()!==a.queryText().trim()},rer=class{constructor(){this.IamCheckOperator=_.EA;this.apisEnablerApisList=["cloudaicompanion.googleapis.com"];this.geminiGenSqlPermissions=aer;this.geminiChatPermissions=
_.cdo;this.icons={sparkGradientIcon:_.LDg,chatSparkIcon:_.nR};this.store=_.k(Sdr);this.duetEnablementService=_.k(_.q8);this.cdr=_.k(_.Sn);this.graphqlClient=_.k(_.I5o);this.snackBarService=_.k(_.NA);this.calloutStepTargetService=_.k(_.Kv);this.errorService=_.k(_.Xu);this.calloutMessages={fix:{header:"Fix query errors",body:'Click "Fix" to let Gemini propose a solution for the query error in your query.'},review:{header:"Review and edit",body:"Review the proposed fix. You can also make final edits in the right side of the diff editor."},
explanation:{header:"Understand the change",body:"Read the Gemini explanation to learn the reasoning behind the proposed correction."},apply:{header:"Apply the fix",body:'When ready, click "Accept" to replace your original query and dismiss the diff view.'}};this.showFirstCalloutStep=this.calloutStepTargetService.waitUntil("autofix-validation-error-button-target").pipe(_.Ff(500));this.ve={FrDatexEditorClearButton:193392,FrDatexEditorRunButton:191515,FrDatexEditorFormatButton:199751,FrDatexEditorGenerateSqlButton:270809,
FrDatexEditorExplainButton:270810};this.isTpc=_.Si();this.duetPlugin=_.wh(_.Htm);this.queryText=_.sh("");this.queryButtonMenu=_.sh();this.isRunning=_.sh(!1);this.disableRunButtonTooltip=_.sh();this.isCanceling=_.sh();this.fixMyQueryCalloutTourFeatureId=_.sh("");this.editorId=_.uh.required();this.language=_.uh.required();this.showWords=_.sh(!0);this.manager=_.uh.required();this.showDuetUiElements=_.uh.required();this.userHasIamForDuet=_.uh.required();this.enableQueryFormatting=_.sh(!1);this.enableDuetExplain=
_.sh(!1);this.enableRunSelectedQuery=_.sh(!1);this.enableSaveQuery=_.sh(!1);this.dataFetcher=_.sh();this.formatter=_.uh(new _.bYi);this.additionalTriggerCharacters=_.uh([]);this.additionalKeywords=_.uh([]);this.studioQueryRef=_.sh();this.fixMyQueryParams=_.sh();this.isQueryUnsaved=_.sh();this.analyticsMetadata=_.sh();this.queryLanguage=_.sh();this.sqlGenChipText=_.sh("Generate SQL");this.sqlGenCardTitle=_.sh();this.commentPrefix=_.sh();this.queryTextChange=new _.Ji;this.runQuery=new _.Ji;this.cancelQuery=
new _.Ji;this.monacoInitialized=new _.Ji;this.queryTextSelectionChange=new _.Ji;this.clearQueryClicked=new _.Ji;this.duetExplain=new _.Ji;this.savedQuery=new _.Ji;this.autofixOptionsChange=_.th();this.MSG_FR_GENERATE_SQL_TITLE="Help me code";this.nl2sqlNudgesButtonBarEnabled=_.ki(Ydr);this.useFrDuetPlaceholder=this.nl2sqlNudgesChipEnabled=_.ki(Zdr);this.isDuetApiEnabled=_.Kj(this.duetEnablementService.isDuetApiEnabled());this.apisEnablerDisabled=_.Fh(()=>!!this.isDuetApiEnabled());this.isCodeEditorEmpty=
_.Fh(()=>!this.queryText());this.isCodeEditorEmptyOrWhitespace=_.Fh(()=>!this.queryText().trim());this.selectedQueryText=_.Kj(this.store.selectedQueryText$);this.showGeminiButtons=_.Fh(()=>this.showDuetUiElements()&&this.nl2sqlNudgesButtonBarEnabled);this.hasAutofixPlugin=_.Fh(()=>!!this.autofixOptions()&&this.isMonacoInitialized());this.autofixOptions=_.Fh(()=>{if(this.fixMyQueryParams())return this.store.areSuggestionsLoading()?{state:"LOADING_SUGGESTIONS",message:"Fixing error"}:this.store.diffState()?
{state:"WAITING_FOR_APPROVAL",message:"Suggesting fixes"}:{state:"SHOW_FIX_BUTTON",fixButtonOptions:{cfcIamCheck:aer,cfcIamNoPermissionTooltip:"To use Gemini features, you need an IAM role that contains the necessary permissions.",apiEnabled:!!this.isDuetApiEnabled()}}});this.queryTextToApprove=_.Fh(()=>{const a=this.store.diffState();if(a)return a.modifiedText});this.queryTextInput=_.Fh(()=>{const a=this.store.diffState();return a?a.originalText:this.queryText()});this.saveBtnState=_.Fh(()=>this.store.diffState()?
{isDisabled:!0,disableTooltip:"The code editor is in diff mode."}:this.isCodeEditorEmptyOrWhitespace()?{isDisabled:!0,disableTooltip:"The code editor is empty."}:this.isQueryUnsaved()===!1?{isDisabled:!0,disableTooltip:"No changes to save."}:{isDisabled:!1,disableTooltip:void 0});this.runBtnState=_.Fh(()=>({isDisabled:this.isCodeEditorEmptyOrWhitespace()||this.isRunning()||!!this.disableRunButtonTooltip()||!!this.store.diffState(),disableTooltip:this.runBtnTooltip()}));this.runBtnTooltip=_.Fh(()=>
{if(this.disableRunButtonTooltip())return this.disableRunButtonTooltip();if(this.isRunning())return"The code editor is running.";if(this.isCodeEditorEmptyOrWhitespace())return"The code editor is empty.";if(this.store.diffState())return"The code editor is in diff mode."});this.editorName=`data-exploration-editor-${ner++}`;this.inlineCompletionsProvider=_.k(Xdr,{optional:!0});this.geminiPermissions=aer.join(", ");this.analyticsService=_.k(_.jp);this.sqlCardAnalyticsService=_.Fh(()=>new Tdr(this.analyticsService,
this.analyticsMetadata()));this.isMonacoInitialized=_.Ug(!1);this.destroy$=new _.Kf;this.autocompleteFn=this.autosuggest.bind(this);this.validator={validate:a=>this.validateQuery$(a),debounceTime:1E3,zeroState:mer,pendingState:{message:"",status:"PENDING"}};_.vf(()=>{this.isMonacoInitialized()&&this.registerInlineCompletionsProvider()});this.useFrDuetPlaceholder&&_.vf(()=>{const a=this.duetPlugin();a&&(this.isCodeEditorEmpty()?a.isTriggerEnabled.set(!1):a.isTriggerEnabled.set(!0))});_.vf(()=>{this.autofixOptionsChange.emit(this.autofixOptions())})}ngAfterViewInit(){this.cdr.detectChanges()}ngOnChanges(a){if(a.language){const d=
_.hYi();var b;const e=(b=this.language())!=null?b:d.language;b=d.languageProvider;var c;const f=[...((c=b.languageDefinition.keywords)!=null?c:[]),...this.additionalKeywords()];a:switch(e){case "pgsql":c=per;break a;case "sql":case "mysql":c=per;break a;default:c=_.mYi}this.config=Object.assign({},d,{showRunQueryButton:!1,language:e,customTheme:c,monacoOptions:Object.assign({},d.monacoOptions,{inlineSuggest:{enabled:!0},suggest:{showWords:this.showWords()}}),languageProvider:Object.assign({},b,{languageDefinition:Object.assign({},
b.languageDefinition,{keywords:f})})});this.registerInlineCompletionsProvider()}a.editorId&&this.store.setCurrentEditor(this.editorId());a.userHasIamForDuet&&this.store.setShowUserHasDuetPermission(this.userHasIamForDuet());a.showDuetUiElements&&this.store.setShowDuetUiElements(this.showDuetUiElements())}ngOnDestroy(){this.destroy$.next();this.destroy$.complete();let a;(a=this.inlineCompletionsProvider)==null||a.dispose()}openGenSql(){this.apisEnablerDisabled()&&this.duetPlugin().openGenSql()}onMonacoInitialized(a){this.monacoInitialized.emit(a);
this.isMonacoInitialized.set(!0);this.queryEditor&&this.inlineCompletionsProvider&&(Rcr(this.queryEditor),this.inlineCompletionsProvider.onMonacoInitialized(a),this.inlineCompletionsProvider.fetchingSuggestions$.pipe(_.ag(this.destroy$)).subscribe(b=>{if(b.fetching){let c,d;this.loadingIndicator.showAtLineNumber((d=(c=b.position)==null?void 0:c.lineNumber)!=null?d:1)}else this.loadingIndicator.hide()}))}onExplainEvent(a){this.duetExplain.emit(a)}get sharedQueryEditorState(){return this.isRunning()?
"RUNNING":"IDLE"}get monacoEditor(){let a,b;return(a=this.queryEditor)==null?void 0:(b=a.codeEditor)==null?void 0:b.editor}onRunQuery(a){this.store.selectedQueryText$.pipe(_.Ef(1)).subscribe(b=>{this.runQuery.emit(this.enableRunSelectedQuery()&&b.trim()?b:a)})}clearQuery(){this.queryTextChange.emit("");this.clearQueryClicked.emit()}dismissDuetPermissionWarning(){this.store.dismissDuetPermissionWarning()}validateQuery$(a){this.store.setMarkers({editorId:this.editorId(),markers:[]});if(!a.trim())return _.t(mer);
var b;const c=(b=this.monacoEditor)==null?void 0:b.getSelection();b=(c==null?void 0:c.startLineNumber)!==(c==null?void 0:c.endLineNumber)||(c==null?void 0:c.startColumn)!==(c==null?void 0:c.endColumn);return qer(this.manager(),{queryText:a,selectionStartPosition:b?c==null?void 0:c.getStartPosition():void 0}).pipe(_.w(({markers:d,validationResult:e})=>{this.store.setMarkers({editorId:this.editorId(),markers:d});return e}))}autofix(a){var b=this.fixMyQueryParams();const c=this.editorId(),d=this.queryText();
a=adr(this.graphqlClient,{request:Object.assign({},b,{errorMessage:a,query:d})});this.store.updateAreSuggestionsLoading({editorId:c,areSuggestionsLoading:!0});b=()=>{this.store.updateAreSuggestionsLoading({editorId:c,areSuggestionsLoading:!1})};a.pipe(_.cg({error:b,next:b}),_.ag(this.destroy$)).subscribe({next:e=>{e=e.FixMyQuery;var f;if(e==null?0:(f=e.suggestions)==null?0:f.length)f=e.suggestions[0],oer(this,f)?this.store.updateOnAutofixReady({originalText:d,suggestion:{editorId:c,content:f.content,
explanation:f.explanation}}):this.snackBarService.open("No fixes are available for this error")},error:e=>{let f;this.errorService.handleError(e,{errorMessage:{subject:"Failed to fix query. Please try again.",body:(f=e.userMessage)!=null?f:e.message},errorExperience:4,presentationFormat:2})}})}formatQuery(){const a=this.formatter().formatQuery(this.queryText().trim()).trim();this.queryTextChange.emit(a)}autosuggest(a,b){a=a.getValue(monaco.editor.EndOfLinePreference.LF);b={lineNumber:b.lineNumber-
1,column:b.column-1};return _.ze(this.manager().autocompleteFn({text:a,position:b,language:this.language()}))}registerInlineCompletionsProvider(){if(this.isMonacoInitialized()){let a;(a=this.inlineCompletionsProvider)==null||a.register(this.language())}}};rer.\u0275fac=function(a){return new (a||rer)};
rer.\u0275cmp=_.z({type:rer,selectors:[["fr-studio-code-editor"]],viewQuery:function(a,b){a&1&&(_.Wg(b.duetPlugin,_.Htm,5),_.Rg(_.r_,5)(ker,5));if(a&2){_.Xg();let c;_.Sg(c=_.Tg())&&(b.queryEditor=c.first);_.Sg(c=_.Tg())&&(b.loadingIndicator=c.first)}},hostAttrs:[1,"cfc-height-full","cfc-flex-container"],inputs:{queryText:[1,"queryText"],queryButtonMenu:[1,"queryButtonMenu"],isRunning:[1,"isRunning"],disableRunButtonTooltip:[1,"disableRunButtonTooltip"],isCanceling:[1,"isCanceling"],fixMyQueryCalloutTourFeatureId:[1,
"fixMyQueryCalloutTourFeatureId"],editorId:[1,"editorId"],language:[1,"language"],showWords:[1,"showWords"],manager:[1,"manager"],showDuetUiElements:[1,"showDuetUiElements"],userHasIamForDuet:[1,"userHasIamForDuet"],enableQueryFormatting:[1,"enableQueryFormatting"],enableDuetExplain:[1,"enableDuetExplain"],enableRunSelectedQuery:[1,"enableRunSelectedQuery"],enableSaveQuery:[1,"enableSaveQuery"],dataFetcher:[1,"dataFetcher"],formatter:[1,"formatter"],additionalTriggerCharacters:[1,"additionalTriggerCharacters"],
additionalKeywords:[1,"additionalKeywords"],studioQueryRef:[1,"studioQueryRef"],fixMyQueryParams:[1,"fixMyQueryParams"],isQueryUnsaved:[1,"isQueryUnsaved"],analyticsMetadata:[1,"analyticsMetadata"],queryLanguage:[1,"queryLanguage"],sqlGenChipText:[1,"sqlGenChipText"],sqlGenCardTitle:[1,"sqlGenCardTitle"],commentPrefix:[1,"commentPrefix"]},outputs:{queryTextChange:"queryTextChange",runQuery:"runQuery",cancelQuery:"cancelQuery",monacoInitialized:"monacoInitialized",queryTextSelectionChange:"queryTextSelectionChange",
clearQueryClicked:"clearQueryClicked",duetExplain:"duetExplain",savedQuery:"savedQuery",autofixOptionsChange:"autofixOptionsChange"},features:[_.jh([Sdr]),_.Ln],ngContentSelectors:["[nextToRunButtonContent]","[actionBarAdditionalLeftContent]","[actionBarRightContent]","[studioSaveAsMenu]"],decls:6,vars:2,consts:()=>[["duetMissingPermissionText",""],["duetMissingPermissionActions",""],["sharedQueryEditor",""],["loadingIndicator",""],["frDuetPlaceholder",""],["duetPlaceholder",""],"\ufffd#13\ufffdClear\ufffd/#13\ufffd",
" Format "," Generate SQL "," Explain selected "," Explain "," Gemini code generation requires an IAM role with permissions for \ufffd#2\ufffd\ufffd0\ufffd\ufffd/#2\ufffd","Dismiss",[1,"cfc-flex-container","cfc-flex-layout-column","cfc-flex-grow-content",3,"additionalTriggerCharacters","editorName","validator","markerData","autocompleteFn","config","bannerMessage","queryText","queryTextToApprove","autofixExplanation","autofixOptions","editorState"],[3,"targetedCalloutFeatureId","hasTryItAsFinalStep"],
[1,"cfc-flex-container","cfc-flex-layout-column","cfc-flex-grow-content",3,"queryTextChange","queryTextSelectionChange","monacoInitialized","runQueryClicked","autofixClicked","onAccept","queryTextToApproveChange","onAcceptAndRun","onDecline","autofixRequiredApisEnabled","additionalTriggerCharacters","editorName","validator","markerData","autocompleteFn","config","bannerMessage","queryText","queryTextToApprove","autofixExplanation","autofixOptions","editorState"],["cfcCalloutStepTarget","data-exploration-editor-action-bar-content-main",
1,"cfc-action-bar-content-main","fr-query-action-bar"],[1,"cfc-shared-query-run-button","fr-query-run-button",3,"onCancel","onRun","isRunning","isDisabled","isCanceling","disabledTooltip","isSelected","menu"],[3,"queryText","queryLanguage","studioQueryRef","isDisabled","disabledTooltip"],["mat-button","","aria-label","Format query",3,"ve","veClick","disabled","disabledTooltip"],["mat-button","","aria-label","clear query",3,"click","ve","veClick","disabled","disabledTooltip"],[1,"cfc-action-bar-content-right"],
[3,"explainQuery","enabled"],[3,"language"],[3,"onSave","queryText","queryLanguage","studioQueryRef","isDisabled","disabledTooltip"],["ngProjectAs","[studioSaveAsMenu]",5,["","studioSaveAsMenu",""]],["mat-button","","aria-label","Format query",3,"click","ve","veClick","disabled","disabledTooltip"],["mat-button","","aria-label","Generate SQL","apisEnabler","","apisEnablerTitle","Enable Gemini API to use Gemini Code Assist features such as SQL code\n              generation and explanation",3,"click",
"apisEnablerOnEnabled","ve","veClick","apisEnablerDisabled","apisEnablerApisList","cfcIamCheck","cfcIamOperator"],["matButtonIcon","",1,"my-icon",3,"icon"],["mat-button","","aria-label","Explain","apisEnabler","","apisEnablerTitle","Enable Gemini API to use Gemini Code Assist features such as SQL code\n              generation and explanation",3,"click","apisEnablerOnEnabled","disabled","disabledTooltip","ve","veClick","apisEnablerDisabled","apisEnablerApisList","cfcIamCheck","cfcIamOperator"],[3,
"enabled","isQueryEmpty","duetPluginShown","chipText"],[3,"enabled","isQueryEmpty","duetPluginShown"],[3,"openGenSqlRequested","enabled","isQueryEmpty","duetPluginShown","chipText"],[3,"openGenSqlRequested","enabled","isQueryEmpty","duetPluginShown"],[3,"editor","dataFetcher","analyticsService","useNudgeButton","useNudgeChip","commentPrefix","genSqlTitle"],[3,"autofix","language"],["mat-button","","color","primary",3,"click"],["calloutPosition","top","targetId","autofix-validation-error-button-target",
3,"calloutHeader","waitUntil","forceShowTryItButton"],["calloutPosition","top","targetId","diff-editor-target",3,"calloutHeader","autoWaitTarget","forceHideBackButton"],["calloutPosition","right","targetId","inline-diff-banner-target",3,"calloutHeader","autoWaitTarget"],["calloutPosition","right","targetId","autofix-accept-button-target",3,"calloutHeader","autoWaitTarget"]],template:function(a,b){a&1&&(_.Kg(ler),_.D(0,I7q,24,40,"shared-query-editor",13),_.C(1,J7q,3,1,"ng-template",null,0,_.rh)(3,
K7q,2,0,"ng-template",null,1,_.rh),_.D(5,L7q,9,16,"cfc-callout-tour",14));a&2&&(_.E(b.config?0:-1),_.y(5),_.E(b.fixMyQueryCalloutTourFeatureId()?5:-1))},dependencies:[Mdr,Edr,_.Qu,_.as,_.ls,_.Nv,_.XA,_.Lv,_.YA,_.Jt,_.xt,_.ut,_.Ht,fer,jer,Hdr,Fdr,_.Htm,_.Ntm,_.Mtm,_.GA,_.FA,_.uq,Kdr,Idr,_.s_,_.r_,eer,cer,_.fo],styles:[".fr-query-run-button[_ngcontent-%COMP%]{--cm-md1-button-line-height:36px}"]});
var per={name:"gcpPGSQLEditor",theme:Object.assign({},_.mYi.theme,{rules:[{token:"identifier.sql",foreground:"#000000",fontStyle:""},{token:"keyword.sql",foreground:"#3367D6",fontStyle:""},{token:"operator.sql",foreground:"#3367D6",fontStyle:""},{token:"delimiter.sql",foreground:"#37474F",fontStyle:""},{token:"predefined.sql",foreground:"#9C27B0",fontStyle:""},{token:"string.sql",foreground:"#188038",fontStyle:""},{token:"number.sql",foreground:"#B06000",fontStyle:""},{token:"comment.sql",foreground:"#D81B60",
fontStyle:""}]})};var ser={TSV:"TSV",CSV:"CSV",JSON:"JSON"};var uer=function(a){return new _.nw({label:"Download CSV",ve:252500,action:()=>{ter(a.studioDownloadService,a.savedData,"CSV")}})},ver=function(a){return new _.nw({label:"Download JSON",ve:252499,action:()=>{ter(a.studioDownloadService,a.savedData,"JSON",void 0)}})},xer=function(a){return new _.nw({label:"Export to Google Sheets",ve:252501,action:()=>{wer(a.studioDownloadService,a.savedData)}})},yer=function(a){return new _.nw({label:"Copy to clipboard (CSV)",ve:252503,action:()=>{a.studioDownloadService.copyToClipboard(a.savedData,
"CSV")}})},zer=function(a){return new _.nw({label:"Copy to clipboard (TSV)",ve:252502,action:()=>{a.studioDownloadService.copyToClipboard(a.savedData,"TSV")}})},Aer=function(a){return new _.nw({label:"Copy to clipboard (JSON)",ve:252504,action:()=>{a.studioDownloadService.copyToClipboard(a.savedData,"JSON",void 0)}})},Ber=class{constructor(a,b){this.studioDownloadService=a;this.savedData=b}};var Cer=function(a){const b=a.rows.map(c=>P7q(c,a.columns));try{return JSON.stringify(b,null,2)}catch(c){return"Unable to convert rows to JSON."}},Der=class{};Der.\u0275fac=function(a){return new (a||Der)};Der.\u0275prov=_.wd({token:Der,factory:Der.\u0275fac,providedIn:"root"});var ter=function(a,b,c,d=a.defaultResultFormatter){b&&(b=a.getContent(b,c,d),c=a.getFileName(c,!0),a.downloadService.downloadText(b,!1,c,!0).then(()=>{}))},wer=function(a,b){const c=a.getFileName("CSV",!1);Bdr(a.driveService,a.getContent(b,"CSV"),c).pipe(_.Ef(1),_.wf(d=>{a.snackBarService.open("Upload failed");return _.ye(()=>d)}),_.cg(d=>{d&&a.showSuccessSnackbar(c,d)})).subscribe()},Eer=class{constructor(){this.snackBarService=_.k(_.NA);this.downloadService=_.k(_.qY);this.driveService=_.k(Cdr);
this.easyCopyService=_.k(_.pE);this.defaultResultFormatter=_.k(Der)}copyToClipboard(a,b,c=this.defaultResultFormatter){const d=this.getContent(a,b,c);d.length>=2097152&&this.snackBarService.open("Processing copy... (this may take a while for large payloads)");setTimeout(()=>{const e=this.easyCopyService.copy(d);this.snackBarService.open(e?"Copied to clipboard":"Could not copy to clipboard")},0)}getContent(a,b){switch(b){case "CSV":return O7q(a,"CSV");case "TSV":return O7q(a,"TSV");case "JSON":return Cer(a);
default:_.ob(b,`unknown format: ${b}`)}}getFileName(a,b){var c=new Date;var d=c.getFullYear();const e=(c.getMonth()+1).toString().padStart(2,"0"),f=c.getDate().toString().padStart(2,"0"),g=c.getHours().toString().padStart(2,"0");c=c.getMinutes().toString().padStart(2,"0");d=b?`${d}${e}${f}_${g}${c}`:`${d}-${e}-${f} ${g}:${c}`;return b?`${"studio_results_"}${d}.${`${a.toLowerCase()}`}`:`Studio Results ${d}`}showSuccessSnackbar(a,b){b=b.replace("drive.sandbox.google.com","drive.google.com");this.snackBarService.openWithMultipleActions(_.rk('Saved to Sheets as "{sheetName}"',
{sheetName:a.replace(/\.csv$/,"")}),{veId:253130,actions:[{label:"Open",action:()=>{var c=_.xi.windowOpen,d=window;var e=_.Fc(b);c(d,e,"_blank")}}]})}};Eer.\u0275fac=function(a){return new (a||Eer)};Eer.\u0275prov=_.wd({token:Eer,factory:Eer.\u0275fac,providedIn:"root"});var Fer=class{};Fer.\u0275fac=function(a){return new (a||Fer)};Fer.\u0275mod=_.sf({type:Fer});Fer.\u0275inj=_.yd({providers:[Eer],imports:[_.KB]});var Ger=class{constructor(){this.studioDownloadService=_.k(Eer);this.filenamePrefix=_.sh("studio_results");this.eliminateRightMargin=_.sh(!0);this.customDownloadMenu=_.sh();this.downloadData=_.uh.required();this.downloadMenu=_.Fh(()=>{var a=this.downloadData();const b=this.customDownloadMenu();b?a=b:(a=new Ber(this.studioDownloadService,a),a=new _.lw({sections:[new _.mw({hasSeparator:!0,items:[uer(a),ver(a)]}),new _.mw({hasSeparator:!0,items:[xer(a)]}),new _.mw({hasSeparator:!0,items:[yer(a),zer(a),
Aer(a)]})]}));return a});this.DownloadFormat=ser;this.ve={FrStudioDownloadResultsButton:252498};this.messages={MSG_FR_STUDIO_DOWNLOAD_CALLOUT_DISMISS_BUTTON:"Got it",MSG_FR_STUDIO_DOWNLOAD_CALLOUT_MESSAGE:"Thanks to your feedback, you can now export results to Google Sheets, local files, or copy them to your clipboard.",MSG_FR_STUDIO_DOWNLOAD_CALLOUT_HEADER:"Clip and go"};this.icons={downloadIcon:_.oCg};this.downloadCompleted=new _.Ji}};Ger.\u0275fac=function(a){return new (a||Ger)};
Ger.\u0275cmp=_.z({type:Ger,selectors:[["fr-database-studio-download-menu"]],inputs:{filenamePrefix:[1,"filenamePrefix"],eliminateRightMargin:[1,"eliminateRightMargin"],customDownloadMenu:[1,"customDownloadMenu"],downloadData:[1,"downloadData"]},outputs:{downloadCompleted:"downloadCompleted"},decls:6,vars:6,consts:()=>[["richMenu",""]," Export ",["mat-button","","cfcMenuButton","","color","primary","id","fr-studio-download-menu-button",1,"cfc-button-small","download-menu-button",3,"cfcMenuTriggerFor",
"ve"],["matButtonIcon","","size","small",3,"icon"],["ariaLabelledBy","fr-studio-download-menu-button",3,"menu"]],template:function(a,b){a&1&&(_.I(0,"button",2),_.K(1,"cm-icon",3),_.L(2),_.N(3,1),_.M(),_.J(),_.K(4,"cfc-menu",4,0));a&2&&(a=_.Yg(5),_.$g("eliminate-right-margin",b.eliminateRightMargin()),_.H("cfcMenuTriggerFor",a)("ve",b.ve.FrStudioDownloadResultsButton),_.y(),_.H("icon",b.icons.downloadIcon),_.y(3),_.H("menu",b.downloadMenu()))},dependencies:[Fer,_.Qu,_.as,_.ls,_.Nv,_.Jt,_.xt,_.ut,_.Ht,
_.uq,_.fA,_.eA,_.sw,_.qw,_.rw],styles:["button.download-menu-button.eliminate-right-margin[_ngcontent-%COMP%]{margin-right:0}"],changeDetection:0});var Her=class{constructor(){this.duetService=_.k(_.iE);this.icons={chatSparkIcon:_.nR};this.ve={FrPlatformExplainErrorButton:199558}}};Her.\u0275fac=function(a){return new (a||Her)};
Her.\u0275cmp=_.z({type:Her,selectors:[["fr-studio-explain-error-button"]],inputs:{errorText:"errorText",queryText:"queryText",dialect:"dialect"},decls:4,vars:3,consts:()=>[" Explain with Gemini ",["mat-raised-button","",3,"click","ve","veClick"],["matButtonIcon","",3,"icon"]],template:function(a,b){a&1&&(_.I(0,"button",1),_.P("click",function(){_.hE(b.duetService,{userMessage:Q7q({queryText:b.queryText,errorText:b.errorText,dialect:b.dialect}),metadata:{promptId:"DATABASES_STUDIO_EXPLAIN_ERROR"}},
{disableEntitlementCheck:!0})}),_.K(1,"cm-icon",2),_.L(2),_.N(3,0),_.M(),_.J());a&2&&(_.H("ve",b.ve.FrPlatformExplainErrorButton)("veClick",!0),_.y(),_.H("icon",b.icons.chatSparkIcon))},dependencies:[_.Qu,_.as,_.ls,_.Jt,_.xt,_.ut,_.Ht,_.uq,_.vq],encapsulation:2,changeDetection:0});var Ier=[[["","headerOutlet",""]],[["fr-object-explorer"]],[["","workAreaOutlet",""]]],Jer=class{constructor(){this.panelProxyFactory=_.k(_.rs);this.leftPanelAriaLabel="Explorer";this.leftPanelConfig={isResizable:!0,isAnimatable:!1,isMinimizable:!0,minSize:"192px",minimizedSize:"49px",size:"320px"};this.panelProxyFactory.create({minSize:"100px",minimizedSize:"100px"})}ngAfterViewInit(){}};Jer.\u0275fac=function(a){return new (a||Jer)};
Jer.\u0275cmp=_.z({type:Jer,selectors:[["fr-studio-layout"]],viewQuery:function(a,b){a&1&&_.Rg(_.e6,5);if(a&2){let c;_.Sg(c=_.Tg())&&(b.leftPanelLayout=c.first)}},ngContentSelectors:["[headerOutlet]","fr-object-explorer","[workAreaOutlet]"],decls:7,vars:5,consts:[[3,"sidePanelConfig"],["actionBarId","fr-object-explorer-action-bar",3,"disableAnimation","ariaLabel"],[3,"flexContent","disablePadding"]],template:function(a,b){a&1&&(_.Kg(Ier),_.Lg(0),_.I(1,"cfc-left-panel-layout",0)(2,"cfc-left-panel-content",
1),_.Lg(3,1),_.J(),_.I(4,"cfc-main-panel-content")(5,"cfc-panel-body",2),_.Lg(6,2),_.J()()());a&2&&(_.y(),_.H("sidePanelConfig",b.leftPanelConfig),_.y(),_.H("disableAnimation",!1)("ariaLabel",b.leftPanelAriaLabel),_.y(3),_.H("flexContent",!0)("disablePadding",!0))},dependencies:[_.pU,_.lU,_.Otm,_.Tqm,_.e6,_.Pq,_.Rt],styles:["[_nghost-%COMP%]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-flow:column nowrap;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-flow:column nowrap;flex-flow:column nowrap;height:100%}"]});var Ker=[13,188],T7q=function(a,b){const c=a.searchForm.controls.queryChips.value.filter(d=>d!==b);Ler(a,c);a.onSubmit()},U7q=function(a,b,c){c.value.trim()?(Ler(a,a.searchForm.controls.queryChips.value.map(d=>d===b?c.value:d)),a.onSubmit()):T7q(a,b)},Ler=function(a,b){a.searchForm.controls.queryChips.setValue(b)},Mer=class{constructor(){this.fb=_.k(_.kt);this.isLoading=_.sh(!1);this.maxQueryChips=_.sh(1);this.searchTriggered=new _.Ji;this.closeIcon=_.xx;this.searchIcon=_.vB;this.searchForm=this.fb.nonNullable.group({pendingQuery:this.fb.nonNullable.control(""),
queryChips:this.fb.nonNullable.control([])});this.controlNames={pendingQuery:"pendingQuery",queryChips:"queryChips"};this.SEPARATOR_KEY_CODES=Ker}getSearchQuery(){return this.searchForm.controls.queryChips.value.join(",")}search(a){Ler(this,a.split(","));this.onSubmit()}handleClearSearchClick(){this.searchForm.reset();this.onSubmit()}onSubmit(){const a=this.getSearchQuery();this.searchTriggered.emit(a)}};Mer.\u0275fac=function(a){return new (a||Mer)};
Mer.\u0275cmp=_.z({type:Mer,selectors:[["fr-object-explorer-chip-search-bar"]],inputs:{isLoading:[1,"isLoading"],maxQueryChips:[1,"maxQueryChips"]},outputs:{searchTriggered:"searchTriggered"},decls:14,vars:7,consts:()=>[["chipGrid",""]," Search ",[1,"fr-object-explorer-search-bar-container"],[3,"ngSubmit","formGroup"],["matIconPrefix","",3,"diameter"],["matIconPrefix","",3,"icon"],[1,"cm-chip-grid-edit-area"],["cfcMarkInvalidChips","",3,"formControlName"],["appearance","input",3,"editable"],["matInput",
"","type","search","autocomplete","off",3,"matChipInputTokenEnd","matChipInputSeparatorKeyCodes","matChipInputFor","formControlName"],"cfcTooltip;Clear search;matIconSuffix;;mat-icon-button;;type;button".split(";"),["appearance","input",3,"removed","edited","editable"],["matChipRemove","",3,"chipLabel"],["cfcTooltip","Clear search","matIconSuffix","","mat-icon-button","","type","button",3,"click"],[3,"icon"]],template:function(a,b){a&1&&(_.I(0,"div",2)(1,"form",3),_.P("ngSubmit",function(){return b.onSubmit()}),
_.I(2,"mat-form-field")(3,"mat-label"),_.N(4,1),_.J(),_.D(5,R7q,1,1,"mat-spinner",4)(6,S7q,1,1,"cm-icon",5),_.I(7,"div",6)(8,"mat-chip-grid",7,0),_.rg(10,V7q,3,3,"mat-chip-row",8,_.qg),_.J(),_.I(12,"input",9),_.P("matChipInputTokenEnd",function(c){var d;const e=((d=c.value)!=null?d:"").trim();e&&(d=[...(new Set([...b.searchForm.controls.queryChips.value,e]))].slice(-b.maxQueryChips()),Ler(b,d),c.chipInput.clear(),b.onSubmit())}),_.J()(),_.D(13,W7q,2,1,"button",10),_.J()()());a&2&&(a=_.Yg(9),_.y(),
_.H("formGroup",b.searchForm),_.y(4),_.E(b.isLoading()?5:6),_.y(3),_.H("formControlName",b.controlNames.queryChips),_.y(2),_.tg(b.searchForm.controls.queryChips.value),_.y(2),_.H("matChipInputSeparatorKeyCodes",b.SEPARATOR_KEY_CODES)("matChipInputFor",a)("formControlName",b.controlNames.pendingQuery),_.y(),_.E(b.getSearchQuery()||b.searchForm.controls.pendingQuery.value?13:-1))},dependencies:[_.mT,_.lT,_.Jt,_.xt,_.vt,_.Ht,_.dz,_.Py,_.jT,_.Qy,_.cz,_.Vy,_.iT,_.Yy,_.Ty,_.lx,_.ix,_.jx,_.Cu,_.Au,_.Yz,
_.ex,_.dA,_.bA,_.cA,_.$z,_.Dq,_.Cq,_.Aq,_.wq,_.uq,_.vq,_.nt,_.Zs,_.Kk,_.Rs,_.Ss,_.ft,_.et,_.Ot,_.Pt],styles:[".fr-object-explorer-search-bar-container[_ngcontent-%COMP%]{margin-left:16px;margin-right:16px;margin-top:12px}"],changeDetection:0});var Ner=class{constructor(){this.fb=_.k(_.kt);this.isLoading=_.sh(!1);this.searchTriggered=new _.Ji;this.closeIcon=_.xx;this.searchIcon=_.vB;this.searchForm=this.fb.nonNullable.group({searchQuery:this.fb.nonNullable.control("")});this.controlNames={searchQuery:"searchQuery"};this.ve={FrPlatformObjectExplorerSearchBarTextInput:210763,FrPlatformObjectExplorerSearchBarClearButton:210762}}getSearchQuery(){return this.searchForm.controls.searchQuery.value}search(a){this.searchForm.controls.searchQuery.setValue(a);
this.onSubmit()}handleClearSearchClick(){this.searchForm.controls.searchQuery.setValue("");this.onSubmit()}onSubmit(){const a=this.getSearchQuery();this.searchTriggered.emit(a)}};Ner.\u0275fac=function(a){return new (a||Ner)};
Ner.\u0275cmp=_.z({type:Ner,selectors:[["fr-object-explorer-search-bar"]],inputs:{isLoading:[1,"isLoading"]},outputs:{searchTriggered:"searchTriggered"},decls:9,vars:7,consts:()=>[" Search ",[1,"fr-object-explorer-search-bar-container"],[3,"ngSubmit","formGroup"],["matIconPrefix","",3,"diameter"],["matIconPrefix","",3,"icon"],["matInput","",3,"formControlName","ve","veClick","veInputText"],["cfcTooltip","Clear search","matIconSuffix","","mat-icon-button","","type","button",3,"ve","veClick"],["cfcTooltip",
"Clear search","matIconSuffix","","mat-icon-button","","type","button",3,"click","ve","veClick"],[3,"icon"]],template:function(a,b){a&1&&(_.I(0,"div",1)(1,"form",2),_.P("ngSubmit",function(){return b.onSubmit()}),_.I(2,"mat-form-field")(3,"mat-label"),_.N(4,0),_.J(),_.D(5,X7q,1,1,"mat-spinner",3)(6,Y7q,1,1,"cm-icon",4),_.K(7,"input",5),_.D(8,Z7q,2,3,"button",6),_.J()()());a&2&&(_.y(),_.H("formGroup",b.searchForm),_.y(4),_.E(b.isLoading()?5:6),_.y(2),_.H("formControlName",b.controlNames.searchQuery)("ve",
b.ve.FrPlatformObjectExplorerSearchBarTextInput)("veClick",!0)("veInputText",!0),_.y(),_.E(b.searchForm.controls.searchQuery.value?8:-1))},dependencies:[_.Qu,_.as,_.ls,_.Jt,_.xt,_.vt,_.Ht,_.lx,_.ix,_.jx,_.Cu,_.Au,_.Yz,_.ex,_.dA,_.bA,_.cA,_.$z,_.Dq,_.Cq,_.Aq,_.wq,_.uq,_.vq,_.nt,_.Zs,_.Kk,_.Rs,_.Ss,_.ft,_.et,_.Ot,_.Pt],styles:[".fr-object-explorer-search-bar-container[_ngcontent-%COMP%]{margin-left:16px;margin-right:16px;margin-top:12px}"],changeDetection:0});var Oer=function(a,b){const c=a.queriesToRefresh.findIndex(f=>(0,_.$B)(b.segmentPath,f.segmentPath)),d=a.queriesToRefresh[c],e=d.pageSize;a.queriesToRefresh[c]=Object.assign({},d,{pageSize:d.pageSize+e});return e},Per=function(a,b,c){a.queriesToRefresh.push({segmentPath:b,pageSize:c,pageToken:""})},Qer=function(a,b,c){if(b.hasChildren&&b.children.length!==0){b.segmentPath.length>0&&Per(a,b.segmentPath,c);for(const d of b.children)Qer(a,d,c)}},Rer=function(a,b){const c={segmentPath:[],pageSize:b,pageToken:""};
Per(a,c.segmentPath,c.pageSize);return a.fetcher.fetchNodes([c]).pipe(_.cg(d=>{Qer(a,d,b)}))},Ser=class{constructor(a,b,c){this.fetcher=a;this.renderer=b;this.analyticsService=c;this.queriesToRefresh=[]}loadMore(a,b,c){b=Oer(this,a);let d;this.analyticsService.sendEvent({type:"objectExplorer",name:"loadMoreClicked",metadata:{nodeType:(d=a.serverModel)==null?void 0:d.nodeType.toString()}});return this.loadChildNodes(a,a.segmentPath,Object.assign({},c,{expansionSize:b}))}expandNode(a,b){Per(this,a.segmentPath,
b.expansionSize);let c;this.analyticsService.sendEvent({type:"objectExplorer",name:"expandNodeAsyncClicked",metadata:{nodeType:(c=a.serverModel)==null?void 0:c.nodeType.toString()}});return this.loadChildNodes(a,a.segmentPath,b)}search(a){return this.fetcher.search(a)}refresh(){return this.fetcher.fetchNodes(this.queriesToRefresh)}loadChildNodes(a,b,c){return this.fetcher.fetchNodes([{segmentPath:b,pageSize:c.expansionSize,pageToken:a.nextPageToken}]).pipe(_.w(d=>{let e=d;for(;!_.Ea(e.segmentPath,
a.segmentPath);){if(!e.children[0])return{children:[],hasMore:!1};e=e.children[0]}a.nextPageToken=e.nextPageToken;return{children:e.children.map(f=>b8q(a8q(a.rowID,e.children.length>0),f,this.renderer)),hasMore:e.nextPageToken!==""}}))}};var Uer=function(a){a.isLoading$.next(!0);Rer(a.dataSource,a.pageSize).pipe(_.Ef(1)).subscribe({next:b=>{Ter(a,b);a.isLoading$.next(!1)},error:b=>{a.showError(b,{type:"loadInitialNodes"})}})},Ter=function(a,b,c){b=b8q(a8q(a.rootNode.rowID,a.rootNode.children.length>0),b,a.renderer,c);a.rootNode.children.replace(b.children.slice());return b},Ver=function(a,b,c,d){var e=Ter(a,c.subtree,c.appliedSearchText);e=e8q(e);a:switch(c.searchResultCompleteness){case "COMPLETE":var f="COMPLETE";break a;case "INCOMPLETE":f=
"INCOMPLETE";break a;default:f="COMPLETENESS_UNSPECIFIED"}a.searchSummary.emit({searchResults:e,hadError:d,originalSearchQuery:b,appliedSearchQueries:[c.appliedSearchText],completeness:f});a.searchLoading.emit(!1);a.isLoading$.next(!1)},Wer=function(a,b,c){if(c(b))return b;let d,e;for(const f of(e=(d=b)==null?void 0:d.children)!=null?e:[])if(b=Wer(a,f,c))return b},$9=class{constructor(){this.analyticsService=_.k(_.jp);this.pageSize=10;this.nodeSelected=new _.Ji;this.searchLoading=new _.Ji;this.searchSummary=
_.th();this.moreIcon=_.vA;this.isLoading$=new _.Rh(!1);this.error$=new _.Rh;this.ve={FrPlatformObjectExplorerTreeErrorRetryButton:243212,FrPlatformObjectExplorerTreeSecondaryIconButton:190378,FrPlatformObjectExplorerTreeMenuButton:190376,FrPlatformObjectExplorerTreePrimaryIconButton:190377};this.dataSource=null;this.rootNode={kind:"node",textContent:"",segmentPath:[],nextPageToken:"",children:new _.HA([]),hasMoreChildrenAfter:!1,hasMoreChildrenBefore:!1};this.retryAction=null}ngOnInit(){this.dataSource=
new Ser(this.fetcher,this.renderer,this.analyticsService);Uer(this)}retry(){this.error$.next(void 0);switch(this.retryAction.type){case "refresh":this.refresh(!0);break;case "search":this.search(this.retryAction.searchQuery);break;case "loadInitialNodes":Uer(this);break;default:_.ob(this.retryAction,void 0)}}refresh(a=!1){a&&this.isLoading$.next(!0);this.searchSummary.emit(null);const b=new _.Kf;this.dataSource.refresh().pipe(_.Ef(1)).subscribe({next:c=>{Ter(this,c);this.error$.next(void 0);this.isLoading$.next(!1);
b.complete()},error:c=>{this.showError(c,{type:"refresh"});b.complete()}});return b}executeSearch(a){this.searchLoading.emit(!0);this.searchSummary.emit(null);const b=this.dataSource.search(a).pipe(_.Ef(1));b.subscribe({next:c=>{this.error$.next(void 0);Ver(this,a,c,!1)},error:c=>{this.showError(c,{type:"search",searchQuery:a});Ver(this,a,Object.assign({},Xer,{appliedSearchText:a}),!0)}});return b}search(a){return this.executeSearch(a)}selectNode(a){(a=Wer(this,this.rootNode,a))?this.tree.selectNode(a,
void 0,!1):this.tree.clearSelection()}setSelectedNode(a){this.tree.selectedTreeNode=a}showError(a,b){a=Object.assign({},a,{message:(a==null?void 0:a.message)||"There was an error while loading database objects."});this.error$.next(a);this.isLoading$.next(!1);this.retryAction=b}};$9.\u0275fac=function(a){return new (a||$9)};
$9.\u0275cmp=_.z({type:$9,selectors:[["fr-object-explorer-tree"]],viewQuery:function(a,b){a&1&&_.Rg(_.dum,5);if(a&2){let c;_.Sg(c=_.Tg())&&(b.tree=c.first)}},inputs:{fetcher:"fetcher",renderer:"renderer",pageSize:"pageSize"},outputs:{nodeSelected:"nodeSelected",searchLoading:"searchLoading",searchSummary:"searchSummary"},decls:7,vars:7,consts:()=>[["nodeMenu",""]," Retry ",["type","error"],[3,"isLoading"],["moreResultsMsg","Show more",1,"fr-object-explorer-tree",3,"root","dataSource","expansionSize",
"pinlines","initiallyExpanded","depthIndent"],["mat-button","",3,"ve","veClick","veImpression"],["mat-button","",3,"click","ve","veClick","veImpression"],["moreResultsMsg","Show more",1,"fr-object-explorer-tree",3,"onRowSelected","root","dataSource","expansionSize","pinlines","initiallyExpanded","depthIndent"],["cfcTreeTemplate",""],[1,"cfc-flex-container","cfc-flex-space-between-content",3,"cfcTooltip"],[1,"cfc-truncated-text-flex"],["mat-icon-button","",3,"ve","veClick","cfcTooltip"],[1,"tree-node",
3,"tree-node-bold"],[1,"cfc-color-secondary"],[3,"type"],["mat-icon-button","",3,"ve","veClick","fr-oe-secondary-icon","cfcTooltip"],["mat-icon-button","","cfcTooltip","View actions","aria-label","View actions","cfcTargetedCallout","","calloutPosition","right",1,"cfc-prefix",3,"id","cfcMenuTriggerData","cfcMenuTriggerFor","ve","veClick","cfcCalloutStepTarget","disableTargetedCallout","targetedCalloutFeatureId","calloutMessage"],[1,"fr-oe-button-icon",3,"icon"],[1,"fr-oe-highlight"],[1,"tree-node"],
["mat-icon-button","",3,"click","ve","veClick","cfcTooltip"],["mat-icon-button","","cfcTooltip","View actions","aria-label","View actions","cfcTargetedCallout","","calloutPosition","right",1,"cfc-prefix",3,"click","id","cfcMenuTriggerData","cfcMenuTriggerFor","ve","veClick","cfcCalloutStepTarget","disableTargetedCallout","targetedCalloutFeatureId","calloutMessage"],[3,"menu","ariaLabelledBy"]],template:function(a,b){a&1&&(_.D(0,h8q,6,2,"cfc-message",2),_.U(1,"async"),_.I(2,"cfc-loader",3),_.U(3,"async"),
_.D(4,s8q,2,6,"cfc-tree",4),_.J(),_.C(5,t8q,1,2,"ng-template",null,0,_.rh));if(a&2){let c;_.E((c=_.W(1,3,b.error$))?0:-1,c);_.y(2);_.H("isLoading",_.W(3,5,b.isLoading$));_.y(2);_.E(b.dataSource?4:-1)}},dependencies:[_.Qu,_.as,_.ls,_.Yv,_.Nv,_.Lv,_.Mv,_.Jt,_.xt,_.ut,_.vt,_.Ht,_.uq,_.Cw,_.sw,_.qw,_.rw,_.Lq,_.Nq,_.Mq,_.Ot,_.dum,_.Rtm,_.fo],styles:['.fr-oe-button-icon[_ngcontent-%COMP%]{margin-bottom:3px}.fr-oe-secondary-icon[_ngcontent-%COMP%]{margin-right:36px}.fr-object-explorer-tree[_ngcontent-%COMP%]     span.cfc-tree-template-entry.cfc-tree-template-entry.cfc-tree-template-entry.cfc-tree-template-entry{margin-left:0}.fr-object-explorer-tree[_ngcontent-%COMP%]   .tree-node-bold[_ngcontent-%COMP%]{font-weight:500}.fr-object-explorer-tree[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]{white-space:pre}.fr-oe-highlight[_ngcontent-%COMP%]{background-color:var(--cm-sys-color-status-warning-container,#fef6e0);display:inline-block}mark[_ngcontent-%COMP%]:after, mark[_ngcontent-%COMP%]:before{-webkit-clip-path:inset(100%);clip-path:inset(100%);clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}mark[_ngcontent-%COMP%]:before{content:" [highlight start] "}mark[_ngcontent-%COMP%]:after{content:" [highlight end] "}'],
changeDetection:0});var Xer={subtree:{segmentPath:[],nodeType:"",nextPageToken:"",totalSize:0,hasTotalSize:!1,children:[],hasChildren:!1,semanticMetadata:[]},searchResultCompleteness:"INCOMPLETE",appliedSearchText:""};var Yer=class{constructor(){this.studioContextsService=_.k(_.Y8);this.isDisabled=!1}setDisabled(a){this.isDisabled=a}fetchNodes(){return this.isDisabled?_.t(W6q({contextSets:[],defaultStoreName:"",defaultStoreState:""})):cdr(this.studioContextsService)}search(){throw Error("rw");}};Yer.\u0275fac=function(a){return new (a||Yer)};Yer.\u0275prov=_.wd({token:Yer,factory:Yer.\u0275fac});var Zer={CREATE_AGENT:"create-agent",INSPECT_AGENT:"inspect-agent",EDIT_AGENT:"edit-agent",DELETE_AGENT:"delete-agent",DOWNLOAD_CONTEXT:"download-context"},$er=new Map([["create-agent",["contextstoreadmin.googleapis.com/stores.create"]],["inspect-agent",["contextstoreadmin.googleapis.com/stores.readContext"]],["edit-agent",["contextstoreadmin.googleapis.com/stores.writeContext"]],["delete-agent",["contextstoreadmin.googleapis.com/stores.writeContext"]],["download-context",["contextstoreadmin.googleapis.com/stores.readContext"]]]),
afr=new Map([["STUDIO_CONTEXT_NODE_TYPE_CONTEXT_COLLECTION","Data Agents"]]),bfr=new Map([["STUDIO_CONTEXT_NODE_TYPE_CONTEXT_COLLECTION",{svg:_.CBg,ariaLabel:"Icon for agents in the tree navigation"}]]);var cfr=class{getIcon(a){a:{switch(a.nodeType){case "STUDIO_CONTEXT_NODE_TYPE_CONTEXT_COLLECTION":a=bfr.get(a.nodeType);break a}a=void 0}return a}getDisplayText(a){if(a.nodeType==="STUDIO_CONTEXT_NODE_TYPE_CONTEXT"){let b;return(b=Y9("displayName",a))!=null?b:""}return"Data Agents"}getTooltip(a){a=(a=afr.get(a.nodeType))?{cfcTooltip:a,cfcTooltipRich:!0,cfcTooltipInteractive:!0}:void 0;return a}getMenuModel(){}getMenuTemplate(a){if(this.actions)switch(a.nodeType){case "STUDIO_CONTEXT_NODE_TYPE_CONTEXT_COLLECTION":return{template:this.actions.contextCollectionMenu,
context:{}};case "STUDIO_CONTEXT_NODE_TYPE_CONTEXT":return{template:this.actions.contextMenu,context:{}}}}};cfr.\u0275fac=function(a){return new (a||cfr)};cfr.\u0275prov=_.wd({token:cfr,factory:cfr.\u0275fac});var dfr=["contextCollectionMenu"],efr=["contextMenu"],x8q=function(a,b){a.trackAction(b.nodeType,"Create agent");a.subtaskService.openDynamic((0,_.wl)("Npcqe").then(()=>_.QRd),{viewContainerRef:a.viewContainerRef,data:{storeId:u8q(b).defaultContextStore,projectId:_.fr(a.projectParamService)}}).onAccept.pipe(_.cg(()=>{a.refresh.emit()}),_.Te(c=>!!c.operation),_.A(c=>a.operationsService.get(c.operation.name,1)),_.Ij(a.destroyRef)).subscribe(()=>{a.refresh.emit()})},z8q=function(a,b){a.trackAction(b.nodeType,
"Edit agent");b=v8q(b);a.subtaskService.openDynamic((0,_.wl)("FaW5E").then(()=>_.PRd),{viewContainerRef:a.viewContainerRef,data:{storeId:b.contextStoreId,contextSetId:b.contextSetId,contextSetVersion:b.contextSetVersion}}).onAccept.subscribe(()=>{a.refresh.emit()})},A8q=function(a,b){a.trackAction(b.nodeType,"Delete agent");const c=v8q(b),d={header:"Delete agent?",confirmInstruction:_.rk("Confirm deletion by typing the following below: <strong>{contextSetId}</strong>",{contextSetId:c.contextSetId}),
phrase:c.contextSetId,operation:()=>_.X5o(a.studioContextsService,{contextStoreId:c.contextStoreId,contextSetId:c.contextSetId})};a.typeToConfirmDialogService.confirmation(d).subscribe(e=>{e.confirmed&&(a.refresh.emit(),a.nodeDeleted.emit(b))})},B8q=function(a,b){const c=v8q(b);c.contextSetId&&c.contextSetVersion&&(a.trackAction(b.nodeType,"Download agent context file"),ddr(a.studioContextsService,{contextSetId:c.contextSetId,contextSetVersion:c.contextSetVersion,contextStoreId:c.contextStoreId}).pipe(_.Jf(),
_.wf(()=>{a.snackBarService.open("Failed to download context.");return _.t("")})).subscribe(d=>_.hd(function*(){try{const e=`${c.contextSetId}_context.json`;yield a.downloadService.downloadText(d,!1,e,!0);a.snackBarService.open(_.rk("Downloaded context to {fileName}",{fileName:e}))}catch(e){a.snackBarService.open("Failed to download context.")}})))},ffr=function(a){let b;return!!a.disabledReason()||!((b=$er.get("inspect-agent"))==null||!b.some(c=>!a.iamPermissionsService.can(c)))},gfr=class{constructor(){this.pageSize=
_.sh(10);this.scopes=_.uh([]);this.disabledReason=_.sh();this.nodeSelected=new _.Ji;this.nodeDeleted=new _.Ji;this.searchLoading=new _.Ji;this.refresh=_.th();this.searchSummary=_.th();this.contextCollectionMenu=_.wh.required("contextCollectionMenu");this.contextMenu=_.wh.required("contextMenu");this.viewContainerRef=_.k(_.Og);this.analyticsService=_.k(_.jp);this.subtaskService=_.k(_.Hz);this.studioContextsService=_.k(_.Y8);this.typeToConfirmDialogService=_.k(_.TH);this.downloadService=_.k(_.qY);this.snackBarService=
_.k(_.NA);this.iamPermissionsService=_.k(_.sv);this.projectParamService=_.k(_.gr);this.operationsService=_.k(_.zr);this.destroyRef=_.k(_.$e);this.fetcher=_.k(Yer);this.renderer=_.k(cfr);this.i18n={MSG_STUDIO_CONTEXTS_TREE_CREATE_AGENT:"Create agent",MSG_STUDIO_CONTEXTS_TREE_DELETE_AGENT:"Delete agent",MSG_STUDIO_CONTEXTS_TREE_DOWNLOAD_CONTEXT:"Download agent context file",MSG_STUDIO_CONTEXTS_TREE_EDIT_AGENT:"Edit agent",MSG_STUDIO_CONTEXTS_TREE_INSPECT_AGENT:"Inspect agent"};this.ObjexMenuAction=
Zer;this.menuPermissionsConfig=$er;_.vf(()=>{this.fetcher.setDisabled(!!this.disabledReason())})}onNodeSelected(a){ffr(this)||(this.nodeSelected.emit(a),a&&this.analyticsService.sendEvent({type:"studio",name:"studioContextsTreeNodeSelected",metadata:{nodeType:a.nodeType}}))}ngOnInit(){var a=this.renderer,b={contextCollectionMenu:this.contextCollectionMenu(),contextMenu:this.contextMenu()};a.actions=b}getDisabledTooltip(a){if(this.disabledReason())return this.disabledReason();if(a.nodeType==="STUDIO_CONTEXT_NODE_TYPE_CONTEXT_COLLECTION"&&
u8q(a).defaultContextStoreState==="CREATING")return"Data Agents store is being created"}trackAction(a,b){this.analyticsService.sendEvent({type:"studio",name:"studioContextsTreeContextMenuActionClicked",metadata:{nodeType:a,menuOption:b}})}};gfr.\u0275fac=function(a){return new (a||gfr)};
gfr.\u0275cmp=_.z({type:gfr,selectors:[["fr-studio-contexts-tree"]],viewQuery:function(a,b){a&1&&(_.Wg(b.contextCollectionMenu,dfr,5)(b.contextMenu,efr,5),_.Rg($9,7));if(a&2){_.Xg(2);let c;_.Sg(c=_.Tg())&&(b.tree=c.first)}},inputs:{pageSize:[1,"pageSize"],scopes:[1,"scopes"],disabledReason:[1,"disabledReason"]},outputs:{nodeSelected:"nodeSelected",nodeDeleted:"nodeDeleted",searchLoading:"searchLoading",refresh:"refresh",searchSummary:"searchSummary"},decls:6,vars:4,consts:[["contextCollectionMenu",
""],["contextMenu",""],[3,"nodeSelected","searchLoading","searchSummary","fetcher","renderer","pageSize"],["type","warning"],[3,"ariaLabelledBy"],[3,"click","label","cfcIamCheck","disabled","disabledTooltip"]],template:function(a,b){a&1&&(_.I(0,"fr-object-explorer-tree",2),_.P("nodeSelected",function(c){return b.onNodeSelected(c)})("searchLoading",function(c){return b.searchLoading.emit(c)})("searchSummary",function(c){return b.searchSummary.emit(c)}),_.J(),_.D(1,w8q,3,1,"cfc-message",3),_.C(2,y8q,
3,5,"ng-template",null,0,_.rh)(4,C8q,6,17,"ng-template",null,1,_.rh));a&2&&(_.H("fetcher",b.fetcher)("renderer",b.renderer)("pageSize",b.pageSize()),_.y(),_.E(b.disabledReason()?1:-1))},dependencies:[_.Qu,_.GA,_.FA,_.sw,_.qw,_.ow,_.pw,_.Lq,_.Mq,$9],encapsulation:2,changeDetection:0});var hfr=class{constructor(){this.studioQueriesService=_.k(_.Z8);this.projectId=_.qI()}fetchNodes(a){const b=a.find(({segmentPath:e})=>e.length===1&&e[0]==="Queries"),{pageSize:c,pageToken:d}=b!=null?b:a[0];return fdr(this.studioQueriesService,this.projectId,c,d)}search(a){return gdr(this.studioQueriesService,this.projectId,a)}};hfr.\u0275fac=function(a){return new (a||hfr)};hfr.\u0275prov=_.wd({token:hfr,factory:hfr.\u0275fac});var ifr=new Map([["STUDIO_QUERY_NODE_TYPE_QUERY",[{label:"Open query",action:"open-query",ve:252482},{label:"Delete query",action:"delete-query",ve:252484,iamPermission:"databasesconsole.studioQueries.delete"}]],["STUDIO_QUERY_NODE_TYPE_QUERY_COLLECTION",[{label:"Manage queries",internalLink:"/databases/queries",iamPermission:"databasesconsole.studioQueries.list",icon:"settings",ve:252483,openLinkInNewTab:!0}]]]),jfr=new Map([["STUDIO_QUERY_NODE_TYPE_QUERY_COLLECTION","Query Collection"],["STUDIO_QUERY_NODE_TYPE_QUERY",
"Saved Query"]]),kfr=new Map([["STUDIO_QUERY_NODE_TYPE_QUERY_COLLECTION",{svg:_.CBg,ariaLabel:"Icon for query level in the tree navigation"}]]);var lfr=class{constructor(){this.menuConfig=ifr;this.analyticsService=_.k(_.jp);this.confirmDialogService=_.k(_.Ez);this.studioQueriesService=_.k(_.Z8);this.iamPermissionsService=_.k(_.sv);this.nodeSelected=new _.Rh(null);this.nodeDeleted=new _.Rh(null)}getIcon(a){a:{switch(a.nodeType){case "STUDIO_QUERY_NODE_TYPE_QUERY_COLLECTION":a=kfr.get(a.nodeType);break a}a=void 0}return a}getDisplayText(a){if(a.nodeType==="STUDIO_QUERY_NODE_TYPE_QUERY"){let b;return(b=D8q(a,"queryDisplayName"))!=null?b:""}return a.nodeType===
"STUDIO_QUERY_NODE_TYPE_QUERY_COLLECTION"?"Queries":a.segmentPath[a.segmentPath.length-1]}getTooltip(a){a=(a=jfr.get(a.nodeType))?{cfcTooltip:a,cfcTooltipRich:!0,cfcTooltipInteractive:!0}:void 0;return a}getMenuModel(a){return this.getMenu(this.menuConfig.get(a.nodeType),a)}getMenuTemplate(){}getMenu(a,b){return a?new _.lw({sections:[new _.mw({items:this.getItems(a,b)})]}):void 0}getItems(a,b){return a.map(c=>{let d;return new _.nw({label:c.label,action:this.getAction(c,b),subMenu:this.getMenu(c.children,
b),internalLink:c.internalLink,isDisabled:c.iamPermission?!this.iamPermissionsService.can((d=c.iamPermission)!=null?d:""):!1,icon:c.icon,ve:c.ve,openLinkInNewTab:c.openLinkInNewTab})})}trackAction(a,b){this.analyticsService.sendEvent({type:"studio",name:"studioQueriesTreeContextMenuActionClicked",metadata:{nodeType:a,menuOption:b.label}})}getAction(a,b){switch(a.action){case "open-query":return()=>{this.nodeSelected.next(b);this.trackAction(b.nodeType,a)};case "delete-query":return()=>{this.trackAction(b.nodeType,
a);this.confirmDialogService.confirmation({header:"Delete query",body:"Are you sure you want to delete this query?",confirmButtonText:"Delete"}).subscribe(c=>{if(c.confirmed){c=D8q(b,"project");const d=D8q(b,"location"),e=D8q(b,"studioQueryId"),f=D8q(b,"etag");c&&d&&e&&f&&idr(this.studioQueriesService,{project:c,location:d,studioQueryId:e,etag:f}).subscribe(()=>{this.nodeDeleted.next(b)})}})}}}};lfr.\u0275fac=function(a){return new (a||lfr)};lfr.\u0275prov=_.wd({token:lfr,factory:lfr.\u0275fac});var mfr=class{constructor(){this.pageSize=_.sh(10);this.scopes=_.uh([]);this.nodeSelected=new _.Ji;this.nodeDeleted=new _.Ji;this.searchLoading=new _.Ji;this.refresh=_.th();this.searchSummary=_.th();this.fetcher=_.k(hfr);this.renderer=_.k(lfr);this.analyticsService=_.k(_.jp);this.nodeDeletedSubscription$=this.nodeSelectedSubscription$=null}onNodeSelected(a){this.nodeSelected.emit(a);a&&this.analyticsService.sendEvent({type:"studio",name:"studioQueriesTreeNodeSelected",metadata:{nodeType:a.nodeType}})}ngOnInit(){this.nodeSelectedSubscription$=
this.renderer.nodeSelected.subscribe(a=>{this.nodeSelected.emit(a)});this.nodeDeletedSubscription$=this.renderer.nodeDeleted.subscribe(a=>{a&&(this.refresh.emit(),this.nodeDeleted.emit(a))})}ngOnDestroy(){let a;(a=this.nodeSelectedSubscription$)==null||a.unsubscribe();let b;(b=this.nodeDeletedSubscription$)==null||b.unsubscribe()}selectNode(a){this.tree.selectNode(function(b){return b.serverModel&&a?Y9("studioQueryId",b.serverModel)===a:!1})}};mfr.\u0275fac=function(a){return new (a||mfr)};
mfr.\u0275cmp=_.z({type:mfr,selectors:[["fr-studio-queries-tree"]],viewQuery:function(a,b){a&1&&_.Rg($9,7);if(a&2){let c;_.Sg(c=_.Tg())&&(b.tree=c.first)}},inputs:{pageSize:[1,"pageSize"],scopes:[1,"scopes"]},outputs:{nodeSelected:"nodeSelected",nodeDeleted:"nodeDeleted",searchLoading:"searchLoading",refresh:"refresh",searchSummary:"searchSummary"},decls:1,vars:3,consts:[[3,"nodeSelected","searchLoading","searchSummary","fetcher","renderer","pageSize"]],template:function(a,b){a&1&&(_.I(0,"fr-object-explorer-tree",
0),_.P("nodeSelected",function(c){return b.onNodeSelected(c)})("searchLoading",function(c){return b.searchLoading.emit(c)})("searchSummary",function(c){return b.searchSummary.emit(c)}),_.J());a&2&&_.H("fetcher",b.fetcher)("renderer",b.renderer)("pageSize",b.pageSize())},dependencies:[$9],encapsulation:2,changeDetection:0});var nfr=["searchBar"],ofr=[[["","customAction",""]]],pfr=function(a,b){const c=b.length;let d=c===1?"Found 1 result. ":`Found ${c} results. `;d+=b.map((e,f)=>`Result ${f+1}: ${e}`).join(", ");setTimeout(()=>{a.liveAnnouncer.announce(d)})},qfr=function(a,b){a.analyticsService.sendEvent({type:"objectExplorer",name:"searchIssued"});return _.Ge({objectExplorer:a.tree.search(b),queries:a.studioQueriesTree.tree.search(b)})},rfr=function(a,b){a.analyticsService.sendEvent({type:"objectExplorer",name:"searchIssued"});
return a.tree.search(b)},sfr=class{constructor(){this.analyticsService=_.k(_.jp);this.liveAnnouncer=_.k(_.qp);this.iamPermissionsService=_.k(_.sv);this.fetcher=_.uh.required();this.renderer=_.uh.required();this.pageSize=_.sh(10);this.searchBarType=_.sh("DISABLED");this.enableSavedQueries=_.sh(!1);this.enableContexts=_.sh(!1);this.contextsDisabledReason=_.sh();this.showEmptyState=_.sh(!1);this.searchBarEnabled=_.Fh(()=>this.searchBarType()!=="DISABLED");this.nodeSelected=new _.Ji;this.nodeDeleted=
new _.Ji;this.onRefreshTrigger=new _.Ji;this.onSearch=new _.Ji;this.SearchBarType=ydr;this.refreshIcon=_.hW;this.refreshFn=this.refresh.bind(this);this.ve={FrPlatformObjectExplorerRefreshButton:190375};this.isTpc=_.Si();this.isSearchingStudioQueriesTree=_.Ug(!1);this.isSearchingObjectExplorerTree=_.Ug(!1);this.isLoadingSearch=_.Fh(()=>this.isSearchingStudioQueriesTree()||this.isSearchingObjectExplorerTree());this.emptySearchStateMessage=_.Fh(()=>{const a=this.searchSummary();if(!a)return"";const b=
a.appliedSearchQueries,c=a.originalSearchQuery,d=a.completeness;return a.searchResults.length!==0||d!=="COMPLETE"?"":_.rk('Your search for "{SEARCH_QUERY}" did not match anything.',{SEARCH_QUERY:this.showSavedQueries()?c:b[0]})});this.savedQueriesSummary=_.Ug(null);this.objectExplorerSummary=_.Ug(null);this.searchSummaryMsg=_.Fh(()=>{const a=this.searchSummary();if(!a)return this.isLoadingSearch()?"Loading...":"";const b=a.searchResults.length;return a.completeness==="COMPLETE"?_.rk("{NUM_RESULTS, plural, =1 {Found 1 result}other {Found {NUM_RESULTS} results}}",
{NUM_RESULTS:b}):_.rk("Found {NUM_RESULTS}+ results",{NUM_RESULTS:b})});this.showSavedQueries=_.Fh(()=>this.enableSavedQueries()&&this.iamPermissionsService.can("databasesconsole.studioQueries.search")&&!this.isTpc);this.showTreeSeparator=_.Fh(()=>this.showSavedQueries()&&!this.searchSummaryMsg());this.showContexts=_.Fh(()=>this.enableContexts());this.searchSummary=_.Fh(()=>{const a=this.objectExplorerSummary();if(!a)return null;if(!this.showSavedQueries())return a;const b=this.savedQueriesSummary();
return b?O8q(a,b):null});_.vf(()=>{const a=this.searchSummary();a&&(pfr(this,a.searchResults),this.analyticsService.sendEvent({type:"objectExplorer",name:a.hadError?"searchError":"searchSuccess",metadata:{numResults:a.searchResults.length,searchResultCompleteness:a.completeness}}))})}refresh(){this.onRefreshTrigger.emit();var a=this.searchBarEnabled()?this.searchBar.getSearchQuery():"";if(a)return this.showSavedQueries()?qfr(this,a):rfr(this,a);a=[this.tree.refresh()];this.showSavedQueries()&&a.push(this.studioQueriesTree.tree.refresh());
this.showContexts()&&a.push(this.studioContextsTree.tree.refresh());return _.Ge(a)}search(a){a?this.showSavedQueries()?qfr(this,a):rfr(this,a):(this.tree.refresh(!0),this.showSavedQueries()&&this.studioQueriesTree.tree.refresh(!0));this.onSearch.emit(a)}};sfr.\u0275fac=function(a){return new (a||sfr)};
sfr.\u0275cmp=_.z({type:sfr,selectors:[["fr-object-explorer"]],viewQuery:function(a,b){a&1&&_.Rg(nfr,5)($9,5)(mfr,5)(gfr,5);if(a&2){let c;_.Sg(c=_.Tg())&&(b.searchBar=c.first);_.Sg(c=_.Tg())&&(b.tree=c.first);_.Sg(c=_.Tg())&&(b.studioQueriesTree=c.first);_.Sg(c=_.Tg())&&(b.studioContextsTree=c.first)}},hostAttrs:[1,"cfc-flex-layout-column"],inputs:{fetcher:[1,"fetcher"],renderer:[1,"renderer"],pageSize:[1,"pageSize"],searchBarType:[1,"searchBarType"],enableSavedQueries:[1,"enableSavedQueries"],enableContexts:[1,
"enableContexts"],contextsDisabledReason:[1,"contextsDisabledReason"],showEmptyState:[1,"showEmptyState"]},outputs:{nodeSelected:"nodeSelected",nodeDeleted:"nodeDeleted",onRefreshTrigger:"onRefreshTrigger",onSearch:"onSearch"},ngContentSelectors:["[customAction]"],decls:9,vars:6,consts:()=>[["searchBar",""],["cfcTitle","Explorer","id","fr-object-explorer-action-bar"],[1,"cfc-action-bar-content-right"],["mat-icon-button","","color","primary","aria-label","Refresh database objects","cfcTooltip","Refresh",
3,"cfcProgressButtonClick","ve","veClick"],[3,"icon"],[3,"disablePadding"],["cfcTitle","No objects to display",3,"minimizeImage","imageSource","showBackgroundCircle"],[3,"isLoading"],[3,"body"],[1,"cfc-text-caption","cfc-indent","cfc-space-below-minus-4","fr-oe-search-summary"],["data-test-id","object-tree",3,"nodeSelected","searchLoading","searchSummary","fetcher","renderer","pageSize"],[1,"cfc-indent","fr-object-explorer-divider-margin-right"],[3,"pageSize"],[3,"searchTriggered","isLoading"],[3,
"nodeSelected","nodeDeleted","refresh","searchLoading","searchSummary","pageSize"],[3,"nodeSelected","nodeDeleted","refresh","pageSize","disabledReason"]],template:function(a,b){a&1&&(_.Kg(ofr),_.I(0,"cfc-action-bar",1)(1,"div",2),_.Lg(2),_.I(3,"cfc-progress-button")(4,"button",3),_.K(5,"cm-icon",4),_.J()()()(),_.I(6,"cfc-panel-body",5),_.D(7,E8q,2,5,"cfc-empty-state",6)(8,M8q,11,13),_.J());a&2&&(_.y(4),_.H("cfcProgressButtonClick",b.refreshFn)("ve",b.ve.FrPlatformObjectExplorerRefreshButton)("veClick",
!0),_.y(),_.H("icon",b.refreshIcon),_.y(),_.H("disablePadding",!0),_.y(),_.E(b.showEmptyState()?7:8))},dependencies:[_.qB,_.Qu,_.as,_.ls,_.Jt,_.xt,_.vt,_.Ht,_.BV,_.uq,Mer,Ner,$9,_.Pq,_.Lt,_.Kt,gfr,mfr,_.Ot,_.FF],styles:[".fr-object-explorer-divider-margin-right[_ngcontent-%COMP%]{margin-right:24px}.fr-oe-search-summary[_ngcontent-%COMP%]{margin-top:-8px}"],changeDetection:0});var tfr=_.cb({value:_.db(_.eb)}),ufr=_.cb({stringValue:_.db(_.cb({value:_.db(_.eb),charsTruncated:_.db(_.fb),subtype:_.db(_.Hba("SUBTYPE_UNSPECIFIED","JSON","TEXT","XML"))})),floatValue:_.db(_.cb({value:_.db(_.fb)})),integerValue:_.db(_.cb({value:_.db(_.eb)})),booleanValue:_.db(_.cb({value:_.db(_.Nba)})),binaryValue:_.db(_.cb({sizeBytes:_.db(_.eb)})),timestampValue:_.db(tfr)}),vfr=U6q(_.cb({columnId:_.db(_.eb),commonValue:_.db(ufr),customValue:_.db(_.cb({bigtableValue:_.db(_.cb({versions:_.db(U6q(_.cb({value:_.db(ufr),
valueMetadata:_.db(_.cb({timestamp:_.db(tfr),version:_.db(_.eb)}))})))}))}))})),wfr=U6q(_.cb({data:_.db(vfr),id:_.db(_.eb)})),xfr=U6q(_.cb({id:_.db(_.eb),header:_.db(_.eb)})),icr=_.cb({rows:_.db(wfr),columns:_.db(xfr)});var X8q=()=>({}),P8q=function(a){a=a.cell;a=a.type==="string"&&a.charsTruncated?a.charsTruncated:0;if(a!==0)return _.rk("{CHARS_TRUNCATED, plural, =1 {1 character not returned}other {{CHARS_TRUNCATED} characters not returned}}",{CHARS_TRUNCATED:a})},yfr=class{ngOnInit(){}};yfr.\u0275fac=function(a){return new (a||yfr)};
yfr.\u0275cmp=_.z({type:yfr,selectors:[["fr-query-results-cell"]],inputs:{cell:"cell"},standalone:!1,decls:9,vars:1,consts:[[3,"title"],[1,"cfc-italic-font",3,"title"],[1,"cfc-color-secondary","cfc-italic-font",3,"title"],[4,"ngIf"],[3,"cfcRouterLink","queryParams","ve","veClick"],[3,"click","ve","veClick"],[1,"cfc-cursor-pointer"],["matChipTrailingIcon","",1,"cfc-cursor-pointer",3,"icon"]],template:function(a,b){a&1&&(_.L(0),_.D(1,R8q,3,3,"span",0)(2,S8q,2,2,"span",0)(3,T8q,3,5,"span",0)(4,U8q,2,
2,"span",1)(5,V8q,3,4,"span",0)(6,W8q,2,1,"span",2)(7,Y8q,3,7,"span",0)(8,Z8q,5,5,"span",0),_.M());a&2&&(_.y(),_.E(b.cell.type==="string"?1:b.cell.type==="number"?2:b.cell.type==="date"?3:b.cell.type==="boolean"?4:b.cell.type==="binary"?5:b.cell.type==="null"?6:b.cell.type==="link"?7:b.cell.type==="chip"?8:-1))},dependencies:()=>[_.as,_.ls,_.Py,_.cz,_.Sy,_.Xy,_.uq,_.Zn,_.eu,_.dx,_.RB],encapsulation:2,changeDetection:0});var zfr=class{};zfr.\u0275fac=function(a){return new (a||zfr)};
zfr.\u0275mod=_.sf({type:zfr});zfr.\u0275inj=_.yd({imports:[_.Qu,_.dz,_.uq,_.VB,_.gu]});var Afr=[[["","queryResultsTableActionContent",""]]],a9q=a=>({src:a,colorScheme:"light"}),b9q=a=>({src:a,colorScheme:"dark",filterPreset:"invert"}),$8q=(a,b)=>[a,b],g9q=(a,b)=>({$implicit:a,icon:b}),i9q=a=>({cell:a}),G9q=(a,b)=>b[0],E9q=(a,b)=>b.label,Bfr=function(a,b){b=b.map(({id:c})=>({id:c,accessor:d=>{if((d=c in d.data?d.data[c]:void 0)&&d.type!=="null")return d.type==="link"?d.value.anchorText:d.type==="binary"?d.value.sizeInBytes:d.value}}));a.rowActionsMap().size>0&&b.push({id:"rowActionsId",
accessor:()=>{}});return b},Cfr=class{set table(a){this.internalTable=a;this.updateLoadingState()}constructor(){this.cfcTable=_.wh(_.Bz);this.selectedRow=_.sh();this.showEmptyState=_.sh(!1);this.hideTitleContainer=_.sh(!1);this.columns=_.uh([]);this.rows=_.uh([]);this.isLoading=_.sh(!1);this.showColumnsChooser=_.sh(!0);this.tableAriaLabel=_.sh("Query results table");this.customCellRenderer=_.sh();this.tableTitle=_.sh("");this.isfullBleed=_.sh(!1);this.fillContainerWidth=_.sh(!1);this.showTimestampToggle=
_.sh(!1);this.showTimestamps=_.sh(!1);this.tableMessage=_.sh();this.selectionMode="none";this.showNullWhenCellIsEmpty=_.sh(!1);this.sortKeys=_.uh([]);this.currentPageIndex=_.sh(0);this.pageSizeOptions=_.uh([10,30,50,100,200]);this.rowsPerPage=_.sh(50);this.showJumpToFirstAndLastPageButtons=_.sh(!1);this.enableRowDataPanel=_.sh(!1);this.rowActionsMap=_.uh(new Map);this.showMenuSectionSeparator=_.sh(!0);this.rowActionsMenuButtonVe=_.sh();this.tableRendererV2=_.sh(!1);this.defaultOverflowMechanism=_.sh("extend");
this.alwaysShowFooter=_.sh(!0);this.stickyHeader=_.sh(!1);this.scrollMode=_.Fh(()=>this.stickyHeader()?"both":"horizontal");this.onTimestampToggleChange=new _.Ji;this.onBulkActionRowsChange=new _.Ji;this.onSortKeysChange=new _.Ji;this.onPaginationChange=new _.Ji;this.onRowSelection=new _.Ji;this.showActionContainerSeparator=!1;this.clientTableFactory=_.k(_.Dy);this.analyticsService=_.k(_.jp);this.tableManager=this.clientTableFactory.createTableManager([]);this.FullBleedMode=_.Npc;this.icons={moreIcon:_.vA};
this.nullCell={type:"null",isCustom:!1};this.fullBleedConfig={mode:this.isfullBleed()?"always":"never",keepBottomPadding:!0};this.columnsConfig=[];this.firstPrimaryUserSetSortKey=_.Ug();this.showSelectionControls=!1;_.vf(()=>{if(this.enableRowDataPanel()&&this.cfcTable()&&this.selectedRow()){var a=this.cfcTable();var b=a.setSelectedFor;var c=this.selectedRow();b.call(a,[c],!0,!1)}})}ngOnInit(){const a=this.enableRowDataPanel();var b=!(a&&this.selectionMode==="multiple");_.Ya(!_.Fba);_.Fba=new _.Gba("@Input selectionMode must be set to 'single', 'none' or undefined when row data panel is enabled, as the row data panel does not support multiple selection.");
_.Ya(b);this.showActionContainerSeparator=this.showColumnsChooser()&&this.showTimestampToggle();a?this.selectionMode="single":this.selectionMode!=="none"&&(this.showSelectionControls=!0)}ngOnChanges(a){"columns"in a&&(this.columnsConfig=Bfr(this,this.columns()));if("showColumnsChooser"in a||"showTimestampToggle"in a)this.showActionContainerSeparator=this.showColumnsChooser()&&this.showTimestampToggle();var b;const c="currentPageIndex"in a&&((b=this.internalTable)==null?void 0:b.currentPageIndex)!==
this.currentPageIndex();var d;b="rowsPerPage"in a&&((d=this.internalTable)==null?void 0:d.rowsPerPage)!==this.rowsPerPage();var e;d="sortKeys"in a&&((e=this.internalTable)==null?void 0:e.sortKeys)!==this.sortKeys();e="rows"in a;const f=c||b||d||e;this.internalTable&&(c||b||d)&&(this.internalTable.currentPageIndex=this.currentPageIndex(),this.internalTable.rowsPerPage=this.rowsPerPage(),this.internalTable.sortKeys=this.sortKeys());if(e)this.tableManager.rows=this.rows();else if(f){let g;(g=this.tableStateManager)==
null||g.reloadData()}"isLoading"in a&&this.updateLoadingState();this.fullBleedConfig={mode:this.isfullBleed()?"always":"never",keepBottomPadding:!0}}updateLoadingState(){this.internalTable&&(this.internalTable.loading=this.isLoading())}rowSelected(a){this.enableRowDataPanel()&&a.length===1&&(this.analyticsService.sendEvent({type:"databaseStudio",name:"rowSelected"}),this.onRowSelection.emit(a[0].id))}};Cfr.\u0275fac=function(a){return new (a||Cfr)};
Cfr.\u0275cmp=_.z({type:Cfr,selectors:[["fr-query-results-table"]],viewQuery:function(a,b){a&1&&(_.Wg(b.cfcTable,_.Bz,5),_.Rg(_.Bz,5)(_.Cz,5));if(a&2){_.Xg();let c;_.Sg(c=_.Tg())&&(b.table=c.first);_.Sg(c=_.Tg())&&(b.tableStateManager=c.first)}},inputs:{selectedRow:[1,"selectedRow"],showEmptyState:[1,"showEmptyState"],hideTitleContainer:[1,"hideTitleContainer"],columns:[1,"columns"],numInitiallyShownColumns:"numInitiallyShownColumns",rows:[1,"rows"],isLoading:[1,"isLoading"],showColumnsChooser:[1,
"showColumnsChooser"],tableAriaLabel:[1,"tableAriaLabel"],customCellRenderer:[1,"customCellRenderer"],tableTitle:[1,"tableTitle"],isfullBleed:[1,"isfullBleed"],fillContainerWidth:[1,"fillContainerWidth"],showTimestampToggle:[1,"showTimestampToggle"],showTimestamps:[1,"showTimestamps"],tableMessage:[1,"tableMessage"],selectionMode:"selectionMode",showNullWhenCellIsEmpty:[1,"showNullWhenCellIsEmpty"],sortKeys:[1,"sortKeys"],columnSortCallout:"columnSortCallout",currentPageIndex:[1,"currentPageIndex"],
pageSizeOptions:[1,"pageSizeOptions"],rowsPerPage:[1,"rowsPerPage"],showJumpToFirstAndLastPageButtons:[1,"showJumpToFirstAndLastPageButtons"],enableRowDataPanel:[1,"enableRowDataPanel"],rowActionsMap:[1,"rowActionsMap"],showMenuSectionSeparator:[1,"showMenuSectionSeparator"],rowActionsMenuButtonVe:[1,"rowActionsMenuButtonVe"],tableRendererV2:[1,"tableRendererV2"],defaultOverflowMechanism:[1,"defaultOverflowMechanism"],alwaysShowFooter:[1,"alwaysShowFooter"],stickyHeader:[1,"stickyHeader"]},outputs:{onTimestampToggleChange:"onTimestampToggleChange",
onBulkActionRowsChange:"onBulkActionRowsChange",onSortKeysChange:"onSortKeysChange",onPaginationChange:"onPaginationChange",onRowSelection:"onRowSelection"},standalone:!1,features:[_.Ln],ngContentSelectors:["[queryResultsTableActionContent]"],decls:12,vars:2,consts:()=>[["noRowsEmptyState",""],["columnHeader",""],["columnHeaderContent",""],["rowActionMenu",""],["cfcTable",""]," Show timestamps ",["cfcTitle","Run a query to see its results here",3,"minimizeImage","imageSource","showBackgroundCircle"],
[4,"ngTemplateOutlet"],[1,"cfc-height-full",3,"bulkActionRowsChanged","sortKeysChange","onPaginationChange","selectedRowsChanged","scrollMode","columnsConfig","hideNoRowsMsg","ariaLabel","stickyHorizontalScrollbar","showColumnsChooser","hideTitleContainer","tableTitle","message","selectionMode","showSelectionControls","fullBleedConfig","fillContainerWidth","tableRendererV2","disableTableManagerMessages","disableTableManagerPagination","sortKeys","pagination","currentPageIndex","pageSizeOptions","rowsPerPage",
"showJumpToFirstAndLastPageButtons","isFooterSticky","stickyHeader","tableManager","alwaysShowFooter"],[1,"query-results-action-container"],[1,"query-results-primary-action-container"],[1,"timestamp-toggle-container"],["maxWidth","444px",3,"id","header","overflowMechanism","sticky","nonHideable","hidden","sortDisabled",4,"ngFor","ngForOf"],["id","rowActionsId","header","Actions","type","non_filterable","sticky","right",3,"nonHideable","sortDisabled","cellAlignment"],["data-test-id","bt-toggle-timestamps",
3,"change","checked"],["maxWidth","444px",3,"id","header","overflowMechanism","sticky","nonHideable","hidden","sortDisabled"],["cfcTableTemplate","header"],["cfcTableTemplate","body"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"cell"],["cfcTargetedCallout","",3,"targetedCalloutFeatureId","calloutMessage","cell"],["mat-icon-button","","id","rowActionsButton","cfcTooltip","Actions",3,"cfcMenuTriggerData","cfcMenuTriggerFor","ve","veClick",4,"cfcTableTemplate"],["mat-icon-button","","id","rowActionsButton",
"cfcTooltip","Actions",3,"cfcMenuTriggerData","cfcMenuTriggerFor","ve","veClick"],["matButtonIcon","","iconPositionEnd","",3,"icon"],["cfcTitle","No rows to display",3,"minimizeImage","imageSource","showBackgroundCircle"],["analyticsTourName","Databases studio sort column",3,"targetedCalloutFeatureId"],["calloutHeader","Column Sort","targetId","studio-column-sort-callout-tour"],[3,"cfcCalloutStepTarget"],[3,"icon"],["ariaLabelledBy","rowActionsButton"],[3,"hasSeparator"],[3,"label","cfcIamCheck",
"icon","ve","veClick"],[3,"click","label","cfcIamCheck","icon","ve","veClick"]],template:function(a,b){a&1&&(_.Kg(Afr),_.Hg(0),_.D(1,c9q,3,14,"cfc-empty-state",6)(2,e9q,1,1,"ng-container")(3,w9q,9,32),_.C(4,x9q,3,14,"ng-template",null,0,_.rh)(6,A9q,2,1,"ng-template",null,1,_.rh)(8,C9q,2,2,"ng-template",null,2,_.rh)(10,H9q,3,0,"ng-template",null,3,_.rh));a&2&&(a=_.Ig(b.rows().length===0&&!b.isLoading()),_.y(),_.E(b.showEmptyState()?1:a&&b.columns().length===0&&!b.tableMessage()?2:3))},dependencies:()=>
[_.as,_.ls,_.XA,_.Lv,_.YA,_.Mv,_.xt,_.vt,_.Ht,_.hK,_.iK,_.gK,_.BV,_.FA,_.uq,_.qw,_.ow,_.pw,_.rw,_.Yn,_.eo,yfr,_.Bz,_.OA,_.rz,_.wA,_.Cz,_.Ot,_.FF],styles:[".query-results-action-container[_ngcontent-%COMP%]{height:24px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.query-results-primary-action-container[_ngcontent-%COMP%]{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center}.query-results-action-container-separator[_ngcontent-%COMP%]{border-right:1px solid var(--cm-sys-color-hairline,rgba(0,0,0,.12));padding-right:23px}"],
changeDetection:0});var Dfr=class{};Dfr.\u0275fac=function(a){return new (a||Dfr)};Dfr.\u0275mod=_.sf({type:Dfr});Dfr.\u0275inj=_.yd({imports:[_.Qu,_.Nv,_.Jt,_.jK,_.BV,_.GA,_.uq,_.sw,zfr,_.Bz]});var Efr=new _.Qd("QueryExecutorToken"),Ffr=new _.Qd("TabsComponentStoreConfigToken"),Gfr={EMPTY_STATE:"EMPTY STATE",SUCCESS:"SUCCESS",ERROR:"ERROR",RUNNING:"RUNNING",RUNNING_WITH_RESULTS:"RUNNING_WITH_RESULTS"};var Hfr={text:""},Ifr=function(a,b,c){return a.config.isQueryStateModified!==void 0?a.config.isQueryStateModified(b):!(0,_.$B)(b,c)},Jfr=function(a){const b=new _.Rh({cancel:!1,request:{analyticsMetadata:{reason:"UNSPECIFIED"}}});return a.cancelSubject$=b},Lfr=function(a,b){Kfr(a);a.updateOnQueryCanceled(b);a.trackQuery({metadata:b.analyticsMetadata,name:"executeQueryCancel",type:"databaseStudio"});return _.t()},Mfr=function(a,b,c,d){const e=b.onError;Kfr(a);a.updateOnQueryFailed(c);a.queryExecutionsSubject.next({queryState:b.queryState,
analyticsMetadata:d,isSuccessful:!1,error:c});a.trackQuery({name:a.config.analytics.errorEventName,metadata:d,type:"databaseStudio"});e==null||e(c)},Nfr=function(a,b){Kfr(a);a.updateOnQueryExplainCancel(b);a.trackQuery({metadata:b.analyticsMetadata,name:"explainQueryCancel",type:"databaseStudio"});return _.Re},Ofr=function(a,b,c,d){const e=b.onError;Kfr(a);a.updateOnQueryExplainError(c);a.queryExecutionsSubject.next({queryState:b.queryState,analyticsMetadata:d,isSuccessful:!1,error:c});a.trackQuery({name:"explainQueryError",
type:"databaseStudio",metadata:d});e==null||e(c);return _.Re},Kfr=function(a){let b;(b=a.cancelSubject$)==null||b.complete();a.cancelSubject$=void 0},Pfr=class extends _.zU{getTabState(){return this.get()}isModified(){return Ifr(this,this.get().queryState,this.emptyTabConfig.queryState)}shouldShowUnsavedIndicator(a){return a.unsavedIndicator!=="NEVER_SHOW"&&this.config.savedQueryFlagDefinition&&_.ki(this.config.savedQueryFlagDefinition)?(a=this.get().savedQueryState)?Ifr(this,a.initialTabContent,
this.get().queryState):this.isModified():!1}constructor(a,b){super(a);this.latestExecutionResult$=this.queryExecutionsSubject=new _.Kf;this.sqlExecutor=_.k(Efr);this.config=_.k(Ffr);this.analyticsService=_.k(_.jp);this.studioAnalyticsService=_.k(_.Hto);this.cancelSubject$=void 0;this.clearResultsState=this.updater(c=>Object.assign({},c,{state:"EMPTY STATE",error:void 0,warningText:void 0,queryResults:[],formattedExecutionTime:void 0,selectedResultIndex:-1}));this.clearExplanationState=this.updater(c=>
Object.assign({},c,{queryExplanationState:{result:void 0,error:void 0,state:"EMPTY STATE"}}));this.studioQueryRef=this.selectSignal(c=>{let d;return(d=c.savedQueryState)==null?void 0:d.savedQuery.studioQueryRef});this.studioQueryRef$=this.select(c=>{let d;return(d=c.savedQueryState)==null?void 0:d.savedQuery.studioQueryRef});this.queryResults=this.selectSignal(c=>{let d;return(d=c.queryResults)!=null?d:[]});this.queryResults$=this.select(c=>{let d;return(d=c.queryResults)!=null?d:[]});this.selectedResultIndex=
this.selectSignal(c=>{let d;return(d=c.selectedResultIndex)!=null?d:-1});this.selectedResultIndex$=this.select(c=>{let d;return(d=c.selectedResultIndex)!=null?d:-1});this.selectedResult=this.selectSignal(this.selectedResultIndex,this.queryResults,(c,d)=>{let e;return(e=d[c])!=null?e:void 0});this.selectedResult$=this.select(this.selectedResultIndex$,this.queryResults$,(c,d)=>{let e;return(e=d[c])!=null?e:void 0});this.selectedResultRows=this.selectSignal(this.selectedResultIndex,this.queryResults,
(c,d)=>{let e,f;return(f=(e=d[c])==null?void 0:e.rows)!=null?f:[]});this.selectedResultRows$=this.select(this.selectedResultIndex$,this.queryResults$,(c,d)=>{let e,f;return(f=(e=d[c])==null?void 0:e.rows)!=null?f:[]});this.selectedResultColumns=this.selectSignal(this.selectedResultIndex,this.queryResults,(c,d)=>{let e,f;return(f=(e=d[c])==null?void 0:e.columns)!=null?f:[]});this.selectedResultColumns$=this.select(this.selectedResultIndex$,this.queryResults$,(c,d)=>{let e,f;return(f=(e=d[c])==null?
void 0:e.columns)!=null?f:[]});this.selectedRowIndex=this.selectSignal(c=>{let d;return(d=c.selectedRowIndex)!=null?d:-1});this.selectedRowIndex$=this.select(c=>{let d;return(d=c.selectedRowIndex)!=null?d:-1});this.selectSignal(this.selectedRowIndex,this.selectedResultRows,(c,d)=>d[c]);this.selectedRowData$=this.select(this.selectedRowIndex$,this.selectedResultRows$,(c,d)=>d[c]);this.isRunning=this.selectSignal(c=>I9q(c.state));this.isRunning$=this.select(c=>I9q(c.state));this.error=this.selectSignal(c=>
{let d;return(d=c.error)!=null?d:Hfr});this.error$=this.select(c=>{let d;return(d=c.error)!=null?d:Hfr});this.warningText=this.selectSignal(c=>c.warningText);this.warningText$=this.select(c=>c.warningText);this.queryState=this.selectSignal(c=>c.queryState);this.queryState$=this.select(c=>c.queryState);this.runningState=this.selectSignal(c=>{let d;return(d=c.state)!=null?d:"EMPTY STATE"});this.runningState$=this.select(c=>{let d;return(d=c.state)!=null?d:"EMPTY STATE"});this.isModified$=this.select(this.queryState$,
c=>Ifr(this,c,this.emptyTabConfig.queryState));this.tabKind$=this.select(c=>c.kind);this.tabKind=this.selectSignal(c=>c.kind);this.explainQueryState$=this.select(c=>{let d;return(d=c.queryExplanationState.state)!=null?d:"EMPTY STATE"});this.explainQueryError$=this.select(c=>c.queryExplanationState.error);this.explainQueryResult$=this.select(c=>c.queryExplanationState.result);this.isExplainQueryRunning$=this.select(this.explainQueryState$,c=>I9q(c));this.isQueryUnsaved=this.selectSignal(c=>this.shouldShowUnsavedIndicator(c));
this.isQueryUnsaved$=this.select(c=>this.shouldShowUnsavedIndicator(c));this.executeQuery=this.effect(c=>c.pipe(_.He(d=>{const e=d.queryState,f=d.tabKind;return Jfr(this).pipe(_.A(({cancel:g,request:n})=>{if(g)return Lfr(this,n);this.updateOnQueryStarted();var q=!1,r=void 0;return this.sqlExecutor.execute({query:e,tabKind:f}).pipe(_.BU(u=>{const v=u.error,x=u.analyticsMetadata,B=u.warningText,F=u.queryResults,G=u.formattedExecutionTime;if(v!==void 0)Mfr(this,d,v,x),q=!0;else{var O;(O=d.onResults)==
null||O.call(d);r=u;this.updateOnQueryResults({warningText:B,queryResults:F,formattedExecutionTime:G})}},u=>{Mfr(this,d,J9q(u),u.analyticsMetadata)},()=>{if(!q){var u=r;const v=d.onSuccess;Kfr(this);this.updateOnQuerySucceeded();this.queryExecutionsSubject.next({queryState:d.queryState,analyticsMetadata:u.analyticsMetadata,isSuccessful:!0});this.trackQuery({name:this.config.analytics.successEventName,type:"databaseStudio",metadata:u.analyticsMetadata});v==null||v(u)}}))}))})));this.explainQuery=this.effect(c=>
c.pipe(_.He(d=>{if(this.sqlExecutor.explainQuery===void 0)return _.Re;const e=d.queryState,f=d.tabKind;return Jfr(this).pipe(_.A(({cancel:g,request:n})=>{if(g)return Nfr(this,n);this.updateOnQueryExplainStart();return this.sqlExecutor.explainQuery({query:e,tabKind:f}).pipe(_.cg(q=>{var r=q.error;const u=q.analyticsMetadata;if(r!==void 0)Ofr(this,d,r,u);else{r=d.onSuccess;let v;(v=d.onResults)==null||v();Kfr(this);this.updateOnQueryExplainSuccess({queryExplanationResponse:q.queryExplanation});this.queryExecutionsSubject.next({queryState:d.queryState,
analyticsMetadata:q.analyticsMetadata,isSuccessful:!0});this.trackQuery({name:"explainQuerySuccess",type:"databaseStudio",metadata:q.analyticsMetadata});r==null||r({})}}),_.wf(q=>Ofr(this,d,J9q(q),q.analyticsMetadata)))}))})));this.deleteRows=this.updater((c,d)=>Object.assign({},c,{queryResults:c.queryResults.map(e=>{const f=e.rows.filter(g=>!d.has(g.id));return Object.assign({},e,{rows:f,indexByRowId:this.getIndexByRowId(f)})})}));this.partialQueryStateChanged=this.updater((c,d)=>Object.assign({},
c,{queryState:Object.assign({},c.queryState,d)}));this.partialTabStateChanged=this.updater((c,d)=>Object.assign({},c,d));this.selectedResultIndexChanged=this.updater((c,d)=>Object.assign({},c,{selectedResultIndex:d}));this.updater((c,d)=>{const e=c.queryResults[c.selectedResultIndex].indexByRowId;let f;return Object.assign({},c,{selectedRowIndex:d!==void 0?(f=e==null?void 0:e.get(d))!=null?f:-1:-1})});this.updateOnQueryExplainStart=this.updater(c=>Object.assign({},c,{queryExplanationState:Object.assign({},
c.queryExplanationState,{error:void 0,state:"RUNNING"})}));this.updateOnQueryExplainCancel=this.updater((c,d)=>{let e,f;var g=Object,n=g.assign,q=Object,r=q.assign,u=c.queryExplanationState;var v=((e=d.error)==null?void 0:e.text)!==void 0?"ERROR":c.queryExplanationState.result===void 0?"EMPTY STATE":"SUCCESS";return n.call(g,{},c,{queryExplanationState:r.call(q,{},u,{state:v,error:(f=d.error)!=null?f:c.queryExplanationState.error})})});this.updateOnQueryExplainSuccess=this.updater((c,{queryExplanationResponse:d})=>
Object.assign({},c,{queryExplanationState:Object.assign({},c.queryExplanationState,{error:void 0,result:d,state:"SUCCESS"})}));this.updateOnQueryExplainError=this.updater((c,d)=>Object.assign({},c,{queryExplanationState:Object.assign({},c.queryExplanationState,{error:d,result:void 0,state:"ERROR"})}));this.updateOnQueryStarted=this.updater(c=>Object.assign({},c,{selectedRowIndex:-1,state:"RUNNING",error:void 0,formattedExecutionTime:void 0}));this.updateOnQueryCanceled=this.updater((c,{error:d})=>
Object.assign({},c,{state:(d==null?void 0:d.text)!==void 0?"ERROR":c.queryResults.length===0?"EMPTY STATE":"SUCCESS",error:d!=null?d:c.error}));this.getIndexByRowId=c=>c.reduce((d,e,f)=>{d.set(e.id,f);return d},new Map);this.updateOnQueryResults=this.updater((c,{warningText:d,queryResults:e,formattedExecutionTime:f})=>Object.assign({},c,{state:"RUNNING_WITH_RESULTS",error:void 0,warningText:d,queryResults:e.map(g=>{let n;return Object.assign({},g,{indexByRowId:this.getIndexByRowId((n=g.rows)!=null?
n:[])})}),formattedExecutionTime:f,selectedResultIndex:0}));this.updateOnQuerySucceeded=this.updater(c=>Object.assign({},c,{state:"SUCCESS"}));this.updateOnQueryFailed=this.updater((c,d)=>Object.assign({},c,{queryResults:[],state:"ERROR",error:d}));this.trackQuery=this.effect(c=>c.pipe(_.He(d=>this.studioAnalyticsService.getMetadata().pipe(_.Ef(1),_.w(e=>({type:d.type,name:d.name,metadata:Object.assign({},d.metadata,e)})))),_.cg(d=>{this.analyticsService.sendEvent(d)})));this.emptyTabConfig=b}getTabTitle(){const {tabName:a,
savedQueryState:b}=this.get();if(this.config.savedQueryFlagDefinition&&_.ki(this.config.savedQueryFlagDefinition)){let c;return(c=b==null?void 0:b.savedQuery.displayName)!=null?c:a}return a}cancelQuery(a){let b;(b=this.cancelSubject$)==null||b.next({cancel:!0,request:a})}};var Qfr=function(a,b,c){let d;return(d=Array.from(a.tabStoresById.values()).map(e=>e.getTabState()).find(e=>{let f,g;return((f=e.nlaContext)==null?void 0:f.contextSetId)===c&&((g=e.nlaContext)==null?void 0:g.contextStoreId)===b}))==null?void 0:d.id},Rfr=function(a,b){return b==="HOME"?a.homeEmptyState:a.config.emptyStates.perTabKind[b]},Sfr=function(a,b){let c;return a.config.useInterstitialDialogWhenClosingTab&&((c=a.tabStoresById.get(b.id))==null?void 0:c.isModified())},Tfr=function(a,b){a.cancelQuery({tabId:b,
analyticsMetadata:{reason:"CLOSE_TAB"}});a.updateOnCloseTab(b)},Ufr=function(a){return a.config.hasHomeTab&&a.skipHomeTabTabernaKey.subkey?a.basicTypesService.get({key:a.skipHomeTabTabernaKey}).pipe(_.Ef(1),_.w(b=>{let c,d,e,f;return(f=(c=b.value)==null?void 0:(d=c.protoVal)==null?void 0:(e=d.value)==null?void 0:e.skipHomeTab)!=null?f:!1}),_.wf(()=>_.t(!1))):_.t(!1)},Xfr=function(a,b){if(b||!a.initializedTabs){b=a.config.hasHomeTab;var c=a.config.initialTabStates;a.setState({orderedTabIds:[],currentTabId:"",
skipHomeTab:void 0,quickTourStarted:!1,shouldConfirmBeforeNavigation:a.config.useInterstitialDialogWhenClosingTab});a.initializedTabs=!0;a.tabStoresById.clear();b&&a.initNewTab(Vfr(a,"tabid-home",a.homeEmptyState));b=c!=null?c:[];for(c=0;c<b.length;c++){const d=`tabid-${Wfr++}`;a.initNewTab(Vfr(a,d,b[c]))}a.currentTabIdChanged(a.get().orderedTabIds[0]);a.fetchSkipHomeTab()}},Yfr=function(a,b){if(b.length!==0){var c=a.get().orderedTabIds.length;for(const d of b)b=`tabid-${Wfr++}`,a.initNewTab(Vfr(a,
b,d));a.setState(d=>Object.assign({},d,{quickTourStarted:!0,currentTabId:d.orderedTabIds[c]}))}},Zfr=function(a,b){a.initNewTab(Vfr(a,`tabid-${Wfr++}`,b))},$fr=function(a){a.cancelOngoingQueries();Xfr(a,!0)},bgr=class extends _.zU{closeSavedQuery(a){(a=Y9("studioQueryId",a))&&(a=this.findTabIdForSavedQuery(a))&&this.closeTab(a)}closeEditorTabWithNlaContext(a){const {contextSetId:b,contextStoreId:c}=v8q(a);b&&c&&(a=Qfr(this,c,b))&&this.closeTab(a)}openTabFromQueryNode(a,b){const c=Y9("studioQueryId",
a);if(c){var d=this.findTabIdForSavedQuery(c);if(d)this.currentTabIdChanged(d);else{d=Y9("queryText",a);var e=Y9("queryDisplayName",a),f=Y9("project",a),g=Y9("location",a),n=Y9("etag",a);a=Y9("queryLanguage",a);d!==void 0&&e&&f&&g&&n&&(b=b({studioQueryRef:{project:f,location:g,studioQueryId:c,etag:n},displayName:e,queryString:d,queryLanguage:a}),Zfr(this,b))}}}openTabFromContextNode(a,b){const {contextSetId:c,tabName:d,contextStoreId:e}=v8q(a);(a=Qfr(this,e,c))?this.currentTabIdChanged(a):(b=b({contextSetDisplayName:d,
contextSetId:c,contextStoreId:e}),Zfr(this,b))}getTabState(){let a;return(a=this.tabStoresById.get(void 0))==null?void 0:a.getTabState()}isModified(a,b){return this.config.isQueryStateModified!==void 0?this.config.isQueryStateModified(a):!(0,_.$B)(a,b)}shouldShowUnsavedIndicator(a){return a.unsavedIndicator!=="NEVER_SHOW"&&this.config.savedQueryFlagDefinition&&_.ki(this.config.savedQueryFlagDefinition)?a.savedQueryState?!(0,_.$B)(a.savedQueryState.initialTabContent,a.queryState):this.isModified(a.queryState,
Rfr(this,a.kind).queryState):!1}constructor(){super();this.skipHomeTab$=this.select(a=>a.skipHomeTab).pipe(_.Te(_.zl));this.currentTabId$=this.select(a=>a.currentTabId);this.currentTabStore$=this.currentTabId$.pipe(_.w(a=>a?this.tabStoresById.get(a):void 0));this.currentTabStore=_.Kj(this.currentTabStore$,{manualCleanup:!0});this.latestExecutionResult$=this.queryExecutionsSubject=new _.Kf;this.quickTourStarted$=this.select(a=>a.quickTourStarted);this.currentTabState$=this.currentTabStore$.pipe(_.A(a=>
{let b;return(b=a==null?void 0:a.state$)!=null?b:_.t(void 0)}));this.select(this.currentTabState$,a=>a==null?void 0:a.nlaContext);this.discardChanges$=new _.Kf;this.config=_.k(Ffr);this.errorHandler=_.k(_.Rn);this.basicTypesService=_.k(_.Hv);this.confirmDialogService=_.k(_.Ez);this.injector=_.k(_.Ze);this.tabStoresById=new Map;this.initializedTabs=!1;this.skipHomeTabTabernaKey={setting:"PAGE_STATE",subkey:this.config.skipHomeTabTabernaKey};this.currentTabStore$.pipe(_.A(a=>{let b;return(b=a==null?
void 0:a.studioQueryRef$)!=null?b:_.t(void 0)}));this.tabsCount=this.selectSignal(a=>a.orderedTabIds.length);this.orderedTabIds$=this.select(a=>a.orderedTabIds);this.queryResults$=this.currentTabStore$.pipe(_.A(a=>{let b;return(b=a==null?void 0:a.queryResults$)!=null?b:_.t([])}));this.selectedResultIndex$=this.currentTabStore$.pipe(_.A(a=>{let b;return(b=a==null?void 0:a.selectedResultIndex$)!=null?b:_.t(-1)}));this.selectedResult$=this.currentTabStore$.pipe(_.A(a=>{let b;return(b=a==null?void 0:
a.selectedResult$)!=null?b:_.t(void 0)}));this.selectedResultRows$=this.currentTabStore$.pipe(_.A(a=>{let b;return(b=a==null?void 0:a.selectedResultRows$)!=null?b:_.t([])}));this.selectedResultColumns$=this.currentTabStore$.pipe(_.A(a=>{let b;return(b=a==null?void 0:a.selectedResultColumns$)!=null?b:_.t([])}));this.selectedRowIndex$=this.currentTabStore$.pipe(_.A(a=>{let b;return(b=a==null?void 0:a.selectedRowIndex$)!=null?b:_.t(-1)}));this.selectedRowData$=this.currentTabStore$.pipe(_.A(a=>{let b;
return(b=a==null?void 0:a.selectedRowData$)!=null?b:_.t(void 0)}));this.isRunning$=this.currentTabStore$.pipe(_.A(a=>{let b;return(b=a==null?void 0:a.isRunning$)!=null?b:_.t(!1)}));this.error$=this.currentTabStore$.pipe(_.A(a=>{let b;return(b=a==null?void 0:a.error$)!=null?b:_.t(Hfr)}));this.warningText$=this.currentTabStore$.pipe(_.A(a=>{let b;return(b=a==null?void 0:a.warningText$)!=null?b:_.t(void 0)}));this.queryState$=this.currentTabStore$.pipe(_.A(a=>{let b;return(b=a==null?void 0:a.queryState$)!=
null?b:_.t(this.config.emptyStates.forHomeTab)}));this.hasAnyModifiedTab$=this.orderedTabIds$.pipe(_.A(()=>{const a=Array.from(this.tabStoresById.values());return _.Ge(a.map(b=>b.isModified$)).pipe(_.w(b=>b.some(Boolean)))}),_.Gf());this.runningState$=this.currentTabStore$.pipe(_.A(a=>{let b;return(b=a==null?void 0:a.runningState$)!=null?b:_.t("EMPTY STATE")}));this.tabKind$=this.currentTabStore$.pipe(_.A(a=>{let b;return(b=a==null?void 0:a.tabKind$)!=null?b:_.t("")}));this.explainQueryState$=this.currentTabStore$.pipe(_.A(a=>
{let b;return(b=a==null?void 0:a.explainQueryState$)!=null?b:_.t("EMPTY STATE")}));this.explainQueryError$=this.currentTabStore$.pipe(_.A(a=>{let b;return(b=a==null?void 0:a.explainQueryError$)!=null?b:_.t(void 0)}));this.explainQueryResult$=this.currentTabStore$.pipe(_.A(a=>{let b;return(b=a==null?void 0:a.explainQueryResult$)!=null?b:_.t(void 0)}));this.isExplainQueryRunning$=this.currentTabStore$.pipe(_.A(a=>{let b;return(b=a==null?void 0:a.isExplainQueryRunning$)!=null?b:_.t(!1)}));this.tabsButtonsStates$=
this.orderedTabIds$.pipe(_.A(a=>_.Ge(a.map(b=>{let c;return(c=this.tabStoresById.get(b))==null?void 0:c.state$}))),_.w(a=>a.map(b=>{let c,d;return{id:b.id,isDynamic:(d=(c=this.config.dynamicTabKinds)==null?void 0:c.includes(b.kind))!=null?d:!1,label:this.getTabTitle(b),icon:b.icon,calloutTargetId:b.calloutTargetId,showUnsavedIndicator:this.shouldShowUnsavedIndicator(b),badge:b.badge}})));this.select(a=>a.orderedTabIds.filter(b=>{let c,d;b=(c=this.tabStoresById.get(b))==null?void 0:(d=c.getTabState())==
null?void 0:d.kind;let e;return b&&((e=this.config.dynamicTabKinds)==null?void 0:e.includes(b))}));this.isQueryUnsaved$=this.currentTabStore$.pipe(_.A(a=>{let b;return(b=a==null?void 0:a.isQueryUnsaved$)!=null?b:_.t(!1)}));this.isQueryRunning$=this.orderedTabIds$.pipe(_.A(()=>_.Ge(Array.from(this.tabStoresById.values()).map(a=>a.isRunning$)).pipe(_.w(a=>a.some(Boolean)))),_.Gf());this.executeQuery=this.effect(a=>a.pipe(_.cg(b=>{let c;(c=this.tabStoresById.get(b.tabId))==null||c.executeQuery(b)})));
this.explainQuery=this.effect(a=>a.pipe(_.cg(b=>{let c;(c=this.tabStoresById.get(b.tabId))==null||c.explainQuery(b)})));this.cancelOngoingQueries=this.effect(a=>a.pipe(_.cg(()=>{for(const b of this.get().orderedTabIds)this.cancelQuery({tabId:b,analyticsMetadata:{reason:"CANCEL_ONGOING_QUERIES"}})})));this.currentTabIdChanged=this.updater((a,b)=>Object.assign({},a,{currentTabId:b}));this.skipHomeTabSettingLoaded=this.updater((a,b)=>{const c=a.currentTabId==="tabid-home",d=a.orderedTabIds.length>=2;
return b&&c&&d?Object.assign({},a,{currentTabId:a.orderedTabIds[1],skipHomeTab:b}):Object.assign({},a,{skipHomeTab:b})});this.closeTab=this.effect(a=>a.pipe(_.cg(b=>{let c;const d=(c=this.tabStoresById.get(b))==null?void 0:c.getTabState();d&&Sfr(this,d)?this.confirmDialogService.confirmation(agr).subscribe(e=>{(e==null?0:e.confirmed)&&Tfr(this,b)}):Tfr(this,b)})));this.setSkipHomeTabSetting=this.effect(a=>a.pipe(_.cg(b=>{this.skipHomeTabTabernaKey.subkey?this.basicTypesService.update({key:this.skipHomeTabTabernaKey,
value:{protoVal:{"@type":"type.googleapis.com/google.protobuf.Struct",value:{skipHomeTab:b}}}}):_.uH("Unsupported operation: TabsComponentStore.setSkipHomeTabSetting called with no subkey.")})));this.homeEmptyState={kind:"HOME",icon:_.F6g,tabName:"",queryState:this.config.emptyStates.forHomeTab};this.fetchSkipHomeTab=this.effect(a=>a.pipe(_.cg(()=>{_.cPf(this,{skipHomeTab:void 0})}),_.A(()=>Ufr(this).pipe(_.cg(b=>{this.skipHomeTabSettingLoaded(b)})))));this.updateOnCloseTab=this.updater((a,b)=>{try{if(b===
"tabid-home")throw Error("sw");if(a.orderedTabIds.length===1)throw Error("tw");const c=a.orderedTabIds.filter(e=>e!==b),d=K9q(a.currentTabId,b,a.orderedTabIds,c);if(c.length!==a.orderedTabIds.length-1)throw Error("uw`"+b);this.tabStoresById.delete(b);return Object.assign({},a,{orderedTabIds:c,currentTabId:d})}catch(c){return this.errorHandler.handleError(c),a}});this.initNewTab=this.effect(a=>a.pipe(_.cg(b=>{const c=b.getTabState();this.tabStoresById.set(c.id,b);b.latestExecutionResult$.subscribe(d=>
{this.queryExecutionsSubject.next(d)});this.setState(d=>Object.assign({},d,{orderedTabIds:[...d.orderedTabIds,c.id],currentTabId:c.id}))})));this.TEST_ONLY={findTabIdForSavedQuery:this.findTabIdForSavedQuery.bind(this),openTabFromQueryNode:this.openTabFromQueryNode.bind(this),closeSavedQuery:this.closeSavedQuery.bind(this),currentTabState$:this.currentTabState$,openTabFromContextNode:this.openTabFromContextNode.bind(this),closeEditorTabWithNlaContext:this.closeEditorTabWithNlaContext.bind(this)};
this.config.initialTabStates&&Xfr(this,!1);this.hasAnyModifiedTab$.subscribe(a=>{_.cPf(this,{shouldConfirmBeforeNavigation:a})});this.discardChanges$.subscribe(()=>{_.cPf(this,{shouldConfirmBeforeNavigation:!1})})}clearResultsState(a){let b;(b=this.tabStoresById.get(a))==null||b.clearResultsState()}clearExplanationState(a){let b;(b=this.tabStoresById.get(a))==null||b.clearExplanationState()}getTabTitle({id:a,tabName:b,savedQueryState:c}){if(a==="tabid-home")return"Home";if(this.config.savedQueryFlagDefinition&&
_.ki(this.config.savedQueryFlagDefinition)){let d;return(d=c==null?void 0:c.savedQuery.displayName)!=null?d:b}return b}cancelQuery(a){let b;(b=this.tabStoresById.get(a.tabId))==null||b.cancelQuery(a)}deleteRows(a){const b=this.get().currentTabId;let c;(c=this.tabStoresById.get(b))==null||c.deleteRows(a)}partialQueryStateChanged({tabId:a,queryState:b}){let c;(c=this.tabStoresById.get(a))==null||c.partialQueryStateChanged(b)}partialTabStateChanged({tabId:a,tabState:b}){let c;(c=this.tabStoresById.get(a))==
null||c.partialTabStateChanged(b)}selectedResultIndexChanged({tabId:a,selectedResultIndex:b}){let c;(c=this.tabStoresById.get(a))==null||c.selectedResultIndexChanged(b)}newTab(a){Zfr(this,Rfr(this,a))}hasUnsavedChanges(){return this.config.useInterstitialDialogWhenClosingTab&&this.get().shouldConfirmBeforeNavigation}findTabIdForSavedQuery(a){let b;return(b=Array.from(this.tabStoresById.values()).map(c=>c.getTabState()).find(c=>{let d;return((d=c.savedQueryState)==null?void 0:d.savedQuery.studioQueryRef.studioQueryId)===
a}))==null?void 0:b.id}};bgr.\u0275fac=function(a){return new (a||bgr)};bgr.\u0275prov=_.wd({token:bgr,factory:bgr.\u0275fac});var Wfr=1,agr={header:"Are you sure you want to close this tab?",disableCancelDuringConfirmation:!0,body:"Changes in this tab will not be saved.",confirmButtonText:"Close",cancelButtonText:"Cancel"};var cgr=function(g,q,l,m,B,k){return{__tsickle_local_0:function(t,v,w,A){var n=-1,y=q,G=!0,J=t.length,L=[],V=v.length;if(!J)return L;w&&(v=m(v,B(w)));A?(y=l,G=!1):v.length>=200&&(y=k,G=!1,v=new g(v));a:for(;++n<J;){var da=t[n],ba=w==null?da:w(da);da=A||da!==0?da:0;if(G&&ba===ba){for(var Y=V;Y--;)if(v[Y]===ba)continue a;L.push(da)}else y(v,ba,A)||L.push(da)}return L}}}.call(void 0,_.nEc,_.S6q,_.T6q,_.Byb,_.JCc,_.pEc).__tsickle_local_0;var dgr=function(g,q,l,m){let B={};l=l(function(k,t){return m(k)?g(k,q(t,1,m,!0)):[]});B.__tsickle_local_0=l;return B}.call(void 0,cgr,_.Gck,_.yPf,_.xPf).__tsickle_local_0;var egr=[[["","actionsOutlet",""]],[["","dynamicTabsOutlet",""]],[["","rowDataPanelOutlet",""]],[["","homeTabOutlet",""]],[["","topPanelOutlet",""]],[["","bottomPanelOutlet",""]]],T9q=function(a,b){a.newTab.emit(b);b!==void 0&&a.analyticsService.sendEvent({type:"databaseStudio",name:"newTabMenuClicked",metadata:{tabKind:b}})},fgr=function(a,b,c,d){b=Z9q({operation:b,diffTab:c,currTabs:d});a.announcements$.next(b)},ggr=class{constructor(){this.panelProxyFactory=_.k(_.rs);this.liveAnnouncer=_.k(_.qp);
this.analyticsService=_.k(_.jp);this.iamPermissionsService=_.k(_.sv);this.selectedTabId=_.uh.required();this.tabs=_.uh.required();this.savedQueriesEnabled=_.sh(!1);this.saveQueriesCalloutFeatureId=_.sh("");this.saveQueriesLearnMoreLink=_.sh();this.newTabMenuItems=_.uh([]);this.calloutStepTargetId=_.sh("fr-datex-tabs");this.newTabSpotlightId=_.sh();this.bottomPanelSize=_.sh("expanded");this.newTab=new _.Ji;this.closeTab=new _.Ji;this.selectTab=new _.Ji;this.canSaveQuery=this.iamPermissionsService.can("databasesconsole.studioQueries.create")!==
!1;this.homeTabId="tabid-home";this.rowDataPanelConfig={isResizable:!0,expandedSize:"400px"};this.selectedTabIsDynamic=_.Fh(()=>{const a=this.selectedTabId();let b;return!((b=this.tabs().find(c=>c.id===a))==null||!b.isDynamic)});this.savingQueriesSupported=_.Fh(()=>this.savedQueriesEnabled()&&this.canSaveQuery);this.icons={homeAltIcon:_.F6g,closeIcon:_.xx,createIcon:_.ICg,unsavedIcon:_.UH};this.msg={MSG_FR_STUDIO_SAVE_QUERY_CALLOUT_HEADER:"Introducing saved queries",MSG_FR_STUDIO_SAVE_QUERY_CALLOUT_BODY:"You can create, save, and manage SQL scripts in Studio. You can use the Explorer pane to view, search, and interact with your saved queries.",
MSG_COMMON_LEARN_MORE:"Learn more",LEARN_MORE_ARIA_LABEL:"Learn more about saved queries"};this.castExists=_.Qz;this.IamCheckOperator=_.EA;this.announcements$=new _.Rh([]);this.announcementChanges$=this.announcements$.pipe(_.Ij(),_.Te(a=>a.length>0),_.Bf(2E3),_.A(a=>_.t(...a).pipe(_.Af(b=>_.t(b).pipe(_.Ff(300))))),_.A(a=>_.Ke(()=>this.liveAnnouncer.announce(a))));this.ve={FrPlatformDataExplorationTabsCloseTabButton:191398,FrPlatformDataExplorationTabsCreateTabButton:191399,FrPlatformDataExplorationTabsHomeButton:191401,
FrPlatformDataExplorationTabsTabItem:191400};this.topPanelConfig=this.panelProxyFactory.create({skipDeregistrationOnPanelDestroy:!0});this.bottomPanelConfig=this.panelProxyFactory.create({isOpen:!0,isResizable:!0,isAnimatable:!0,isMinimizable:!0,isExpanded:!0,minSize:"49px",minimizedSize:"49px",size:"50%",skipDeregistrationOnPanelDestroy:!0});_.Jj(this.tabs).pipe(_.Of(),_.Ij()).subscribe(([a,b])=>{const c=dgr(b,a);a=dgr(a,b);c.length>0&&c[0].id==="tabid-home"||(c.length>0?fgr(this,0,c[0],b):a.length>
0&&fgr(this,1,a[0],b))});_.vf(()=>{var a=this.bottomPanelSize();switch(a){case "fullscreen":this.bottomPanelConfig.isExpanded=!0;this.bottomPanelConfig.size="100%";break;case "collapsed":this.bottomPanelConfig.isExpanded=!1;break;case "expanded":this.bottomPanelConfig.isExpanded=!0;this.bottomPanelConfig.size="50%";break;default:_.ob(a,void 0)}})}ngAfterViewInit(){this.announcementChanges$.subscribe()}trackTab(a,b){return b.id}newTabMenuTrackBy(a,b){return b.kind}onAuxClick(a,b){a.button===1&&this.closeTab.emit(b)}shouldShowUnsavedIndicator(a){return!(!this.savingQueriesSupported()||
!a.showUnsavedIndicator)}};ggr.\u0275fac=function(a){return new (a||ggr)};
ggr.\u0275cmp=_.z({type:ggr,selectors:[["fr-studio-tabs-bar"]],viewQuery:function(a,b){a&1&&_.Rg(_.oU,7);if(a&2){let c;_.Sg(c=_.Tg())&&(b.layout=c.first)}},inputs:{selectedTabId:[1,"selectedTabId"],tabs:[1,"tabs"],savedQueriesEnabled:[1,"savedQueriesEnabled"],saveQueriesCalloutFeatureId:[1,"saveQueriesCalloutFeatureId"],saveQueriesLearnMoreLink:[1,"saveQueriesLearnMoreLink"],newTabMenuItems:[1,"newTabMenuItems"],calloutStepTargetId:[1,"calloutStepTargetId"],newTabSpotlightId:[1,"newTabSpotlightId"],
bottomPanelSize:[1,"bottomPanelSize"]},outputs:{newTab:"newTab",closeTab:"closeTab",selectTab:"selectTab"},ngContentSelectors:"[actionsOutlet] [dynamicTabsOutlet] [rowDataPanelOutlet] [homeTabOutlet] [topPanelOutlet] [bottomPanelOutlet]".split(" "),decls:25,vars:10,consts:()=>[["layout",""],["newTabButton",""],["tabPanel",""],["newTabsMenu",""],["editorButtonTabTemplate",""],["savedQueriesCallout",""],["bottomPanel",""],[3,"sidePanelConfig"],[1,"fr-tab-bar","cfc-flex-container","cfc-background-base",
"editor-tab-panel",3,"cfcCalloutStepTarget"],[1,"cfc-width-full","cfc-flex-container","cfc-flex-end-aligned","space-before-minus-5"],[1,"cfc-no-scroll-horizontal"],["mat-tab-nav-bar","",1,"cfc-border-none",3,"tabPanel"],["mat-tab-link","","role","tab","type","button","class","cfc-button-small tab-button",3,"should-show-unsaved-indicator","cfcCalloutStepTarget","tab-compact-layout","ariaLabel","active","ve","veClick","click","auxclick",4,"ngFor","ngForOf","ngForTrackBy"],["mat-icon-button","","color",
"primary","type","button","class","new-tab-button","cfcTooltip","New tab menu","aria-label","New tab menu",3,"cfcMenuTriggerFor",4,"ngIf","ngIfElse"],[1,"cfc-flex-grow-content"],[1,"cfc-flex-container","cfc-flex-center-aligned","actions-slot"],[1,"bottom-border"],[1,"cfc-flex-layout-column"],["split","horizontal"],[3,"flexContent","disablePadding"],["mat-tab-link","","role","tab","type","button",1,"cfc-button-small","tab-button",3,"click","auxclick","cfcCalloutStepTarget","ariaLabel","active","ve",
"veClick"],[1,"tab-button-content"],[4,"ngIf","ngIfElse"],[1,"home-tab-icon",3,"icon"],[1,"cfc-flex-container","cfc-flex-center-aligned","tab-inner-content"],["name","title",1,"cfc-flex-container","cfc-flex-center-aligned"],[1,"icon-18px-workaround","space-after-minus-5",3,"icon"],[3,"type"],["mat-icon-button","","tabIndex","0","cfcTooltip","Close tab","aria-label","Close tab","cfcTargetedCallout","",1,"cfc-button-small","tab-close-button",3,"click","ve","veClick","targetedCalloutFeatureId","disableTargetedCallout",
"calloutHeader","calloutMessageRef"],[1,"modified-tab-icon",3,"icon"],[1,"close-tab-icon",3,"icon"],[1,"cfc-callout-text"],[3,"cfcDocLink"],["mat-icon-button","","color","primary","type","button","cfcTooltip","New tab menu","aria-label","New tab menu",1,"new-tab-button",3,"cfcMenuTriggerFor"],[3,"icon"],["mat-icon-button","","color","primary","type","button","cfcTooltip","New tab","aria-label","New tab",1,"new-tab-button",3,"click","ve","veClick"],["side","center",3,"config"],["side","bottom",3,"config"],
["ariaLabelledBy","tabs-menu-trigger"],[3,"label","icon","cfcIamCheck","cfcIamOperator","cfcIamResource","ve","veClick","click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"click","label","icon","cfcIamCheck","cfcIamOperator","cfcIamResource","ve","veClick"]],template:function(a,b){a&1&&(_.Kg(egr),_.I(0,"cfc-right-panel-layout",7,0)(2,"cfc-main-panel-content")(3,"div",8)(4,"div",9)(5,"div",10)(6,"div",11),_.C(7,R9q,5,13,"button",12),_.J()(),_.C(8,S9q,2,3,"button",13)(9,U9q,2,4,"ng-template",null,1,_.rh),
_.K(11,"div",14),_.I(12,"div",15),_.Lg(13),_.J()()(),_.K(14,"div",16),_.I(15,"mat-tab-nav-panel",17,2),_.Lg(17,1),_.D(18,V9q,1,0)(19,W9q,8,6,"cfc-panel-container",18),_.J()(),_.I(20,"cfc-right-panel-content")(21,"cfc-panel-body",19),_.Lg(22,2),_.J()()(),_.C(23,Y9q,2,2,"ng-template",null,3,_.rh));if(a&2){a=_.Yg(10);const c=_.Yg(16);_.H("sidePanelConfig",b.rowDataPanelConfig);_.y(3);_.H("cfcCalloutStepTarget",b.calloutStepTargetId());_.y(3);_.H("tabPanel",c);_.y();_.H("ngForOf",b.tabs())("ngForTrackBy",
b.trackTab);_.y();_.H("ngIf",b.newTabMenuItems().length>0)("ngIfElse",a);_.y(10);_.E(b.homeTabId===b.selectedTabId()?18:b.selectedTabIsDynamic()?-1:19);_.y(3);_.H("flexContent",!0)("disablePadding",!0)}},dependencies:[_.Kq,_.Qu,_.as,_.ls,_.Zv,_.Yv,_.Nv,_.Lv,_.Mv,_.Jt,_.xt,_.vt,_.Ht,_.Lx,_.eDg,_.dW,_.cDg,_.eW,_.dDg,_.fW,_.hs,_.Dv,_.GA,_.FA,_.uq,_.vq,_.lU,_.sw,_.qw,_.ow,_.rw,_.Yn,_.Zn,_.Rt,_.Pq,_.St,_.Es,_.Is,_.nU,_.oU,_.Pt,_.Ot],styles:['[_nghost-%COMP%]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-flow:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-flow:column;flex-flow:column;-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%}[_nghost-%COMP%]   .editor-tab-panel[_ngcontent-%COMP%]     .mdc-tab-indicator__content--underline{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start}[_nghost-%COMP%]   .editor-tab-panel[_ngcontent-%COMP%]     .mdc-tab-indicator{top:-1px;left:-1px;width:calc(100% + 2px)}[_nghost-%COMP%]   .editor-tab-panel[_ngcontent-%COMP%]     .mdc-tab-indicator .mdc-tab-indicator__content{-webkit-transition:none;transition:none}[_nghost-%COMP%]   .editor-tab-panel[_ngcontent-%COMP%]     .cm-tab-nav-bar.cm-tab-nav-bar .mat-mdc-tab-link-container{border-bottom-style:none}[_nghost-%COMP%]   .cm-tab-nav-bar.cm-tab-nav-bar.cm-tab-nav-bar.cm-tab-nav-bar[_ngcontent-%COMP%]{--mat-tab-container-height:41px}[_nghost-%COMP%]   .cm-tab-nav-bar.cm-tab-nav-bar.cm-tab-nav-bar.cm-tab-nav-bar[_ngcontent-%COMP%]   .mat-mdc-tab-link[_ngcontent-%COMP%]{margin:8px 0 0;padding-left:0;padding-right:0}[_nghost-%COMP%]   .cm-tab-nav-bar.cm-tab-nav-bar.cm-tab-nav-bar.cm-tab-nav-bar[_ngcontent-%COMP%]   .mat-mdc-tab-link.mdc-tab--active[_ngcontent-%COMP%]{background:var(--cm-sys-color-surface,#fff);border:1px solid var(--cm-sys-color-hairline,rgba(0,0,0,.12));border-radius:4px 4px 0 0;border-bottom-color:var(--cm-sys-color-surface,#fff);z-index:2}[_nghost-%COMP%]   .cm-tab-nav-bar.cm-tab-nav-bar.cm-tab-nav-bar.cm-tab-nav-bar[_ngcontent-%COMP%]   .mat-mdc-tab-link[_ngcontent-%COMP%]:not(.mdc-tab--active)     .mat-mdc-tab-ripple{display:none}[_nghost-%COMP%]   .cm-tab-nav-bar.cm-tab-nav-bar.cm-tab-nav-bar.cm-tab-nav-bar[_ngcontent-%COMP%]   .mat-mdc-tab-link[_ngcontent-%COMP%]     .mdc-tab__content{padding:0;height:inherit}[_nghost-%COMP%]   .new-tab-button[_ngcontent-%COMP%]{--cm-button-height:40px;--mat-button-text-container-shape:0;margin-bottom:2px}[_nghost-%COMP%]   .icon-18px-workaround[_ngcontent-%COMP%]{--cm-comp-icon-size:18px}[_nghost-%COMP%]   .space-before-minus-5[_ngcontent-%COMP%]{padding-left:4px}[_nghost-%COMP%]   .space-after-minus-5[_ngcontent-%COMP%]{margin-right:4px}[_nghost-%COMP%]   .tab-close-button[_ngcontent-%COMP%]{--cm-icon-button-color:var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66));--cm-icon-button-line-height:18px;--cm-focus-indicator-offset:0;margin-left:2px}[_nghost-%COMP%]   .modified-tab-icon[_ngcontent-%COMP%]{scale:.6;display:none;color:var(--cm-sys-color-outline,#80868b)}[_nghost-%COMP%]   .close-tab-icon[_ngcontent-%COMP%]{scale:.8;display:none}[_nghost-%COMP%]   .should-show-unsaved-indicator[_ngcontent-%COMP%]   .modified-tab-icon[_ngcontent-%COMP%]{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex}[_nghost-%COMP%]   .tab-button.mdc-tab--active[_ngcontent-%COMP%]:not(.should-show-unsaved-indicator)   .close-tab-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .tab-button[_ngcontent-%COMP%]:hover   .close-tab-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .tab-close-button[_ngcontent-%COMP%]:focus   .close-tab-icon[_ngcontent-%COMP%]{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex}[_nghost-%COMP%]   .tab-button.mdc-tab--active[_ngcontent-%COMP%]:not(.should-show-unsaved-indicator)   .modified-tab-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .tab-button[_ngcontent-%COMP%]:hover   .modified-tab-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .tab-close-button[_ngcontent-%COMP%]:focus   .modified-tab-icon[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .home-tab-icon[_ngcontent-%COMP%]{padding-right:8px}.tab-button-content[_ngcontent-%COMP%]{padding:0 8px 0 16px;text-transform:none;color:var(--cm-sys-color-on-surface,#000)}.bottom-border[_ngcontent-%COMP%]{position:relative;z-index:0}.bottom-border[_ngcontent-%COMP%]:after{position:absolute;content:"";width:100%;bottom:0;left:0;border-bottom:1px solid var(--cm-sys-color-hairline,rgba(0,0,0,.12));z-index:1}.actions-slot[_ngcontent-%COMP%]{min-height:49px}']});var hgr=[],a$=class extends _.zU{constructor(){super({sectionStates:{},currentSectionId:"",bottomPanelSize:"collapsed",defaultRowsPerPage:20,defaultSortKeys:hgr});this.currentSectionState$=this.select(a=>{let b;return(b=a.sectionStates[a.currentSectionId])!=null?b:void 0});this.currentPageIndex$=this.select(this.currentSectionState$,a=>{let b;return(b=a==null?void 0:a.currPageIndex)!=null?b:0});this.select(this.currentSectionState$,a=>{let b;return(b=a==null?void 0:a.sortKeys)!=null?b:hgr});this.defaultRowsPerPage$=
this.select(a=>a.defaultRowsPerPage);this.currentRowsPerPage$=this.select(this.currentSectionState$,this.defaultRowsPerPage$,(a,b)=>{let c;return(c=a==null?void 0:a.rowsPerPage)!=null?c:b});this.currentSelectedTabIndex$=this.select(this.currentSectionState$,a=>{let b;return(b=a==null?void 0:a.selectedTabIndex)!=null?b:0});this.bottomPanelSize$=this.select(a=>a.bottomPanelSize);this.select(this.currentSectionState$,a=>{let b;return(b=a==null?void 0:a.bulkActionRows)!=null?b:[]});this.select(this.currentSectionState$,
a=>{let b;return(b=a==null?void 0:a.staleResults)!=null?b:!1});this.setDefaultRowsPerPage=this.updater((a,b)=>Object.assign({},a,{defaultRowsPerPage:b}));this.setDefaults=this.updater((a,b)=>{var c;({defaultRowsPerPage:b,defaultSortKeys:c}=b);return Object.assign({},a,{defaultRowsPerPage:b,defaultSortKeys:c})});this.setCurrentSection=this.updater((a,b)=>a.sectionStates[b]?Object.assign({},a,{currentSectionId:b}):Object.assign({},a,{currentSectionId:b,sectionStates:Object.assign({},a.sectionStates,
{[b]:Object.assign({},a.sectionStates[b],{currPageIndex:0,rowsPerPage:a.defaultRowsPerPage,selectedTabIndex:0,sortKeys:a.defaultSortKeys})})}));this.closeSection=this.updater((a,b)=>{var c=Object.assign({},a.sectionStates);b=(delete c[b],c);return Object.assign({},a,{sectionStates:b})});this.updatePagination=this.updater((a,b)=>{if(!a.currentSectionId)return a;const c=b.rowsPerPage;b=b.page;this.setDefaultRowsPerPage(c);return Object.assign({},a,{sectionStates:Object.assign({},a.sectionStates,{[a.currentSectionId]:Object.assign({},
a.sectionStates[a.currentSectionId],{rowsPerPage:c,currPageIndex:b})})})});this.updater((a,b)=>a.currentSectionId?Object.assign({},a,{sectionStates:Object.assign({},a.sectionStates,{[a.currentSectionId]:Object.assign({},a.sectionStates[a.currentSectionId],{bulkActionRows:b})})}):a);this.updater((a,b)=>a.currentSectionId?Object.assign({},a,{sectionStates:Object.assign({},a.sectionStates,{[a.currentSectionId]:Object.assign({},a.sectionStates[a.currentSectionId],{sortKeys:b})})}):a);this.setSelectedTabIndex=
this.updater((a,b)=>a.sectionStates[a.currentSectionId]?Object.assign({},a,{sectionStates:Object.assign({},a.sectionStates,{[a.currentSectionId]:Object.assign({},a.sectionStates[a.currentSectionId],{selectedTabIndex:b})})}):a);this.resetOnRunQuery=this.updater(a=>Object.assign({},a,{sectionStates:Object.assign({},a.sectionStates,{[a.currentSectionId]:Object.assign({},a.sectionStates[a.currentSectionId],{rowsPerPage:a.defaultRowsPerPage,currPageIndex:0,sortKeys:a.defaultSortKeys,staleResults:!1})})}));
this.openResultsPanelIfClosed=this.updater(a=>Object.assign({},a,{bottomPanelSize:a.bottomPanelSize==="collapsed"?"expanded":a.bottomPanelSize}));this.toggleBottomPanelFullscreenState=this.updater(a=>Object.assign({},a,{bottomPanelSize:a.bottomPanelSize==="fullscreen"?"expanded":"fullscreen"}));this.toggleBottomPanelExpandedState=this.updater(a=>Object.assign({},a,{bottomPanelSize:a.bottomPanelSize==="collapsed"?"expanded":"collapsed"}));this.updater(a=>Object.assign({},a,{sectionStates:Object.entries(a.sectionStates).reduce((b,
c)=>{var d;[c,d]=c;b[c]=Object.assign({},d,{staleResults:!0});return b},{})}))}};a$.\u0275fac=function(a){return new (a||a$)};a$.\u0275prov=_.wd({token:a$,factory:a$.\u0275fac});var igr=new _.Iq("45714157");var jgr=["*"],kgr=class{constructor(){this.tabTitle=_.uh.required();this.show=!1}};kgr.\u0275fac=function(a){return new (a||kgr)};kgr.\u0275cmp=_.z({type:kgr,selectors:[["fr-studio-result-tab"]],inputs:{tabTitle:[1,"tabTitle"]},ngContentSelectors:jgr,decls:1,vars:1,template:function(a,b){a&1&&(_.Kg(),_.D(0,$9q,1,0));a&2&&_.E(b.show?0:-1)},dependencies:[_.ho],encapsulation:2});
var lgr=class{constructor(){this.selectedResultTabChanged=_.th();this.isAlloydbQueryTimeEnabled=_.ki(igr);this.resultStore=_.k(a$);this.ve={FrDatexResultsExpandButton:192451,FrDatexResultsFullscreenButton:192450,FrDatexResultsSelectTabButton:191664};this.MSG_FR_EXECUTION_TIME="Execution time: ";this.currentSectionId=_.uh.required();this.downloadData=_.sh();this.customDownloadMenu=_.sh();this.formattedExecutionTime=_.sh("");this.showDownloadButton=_.Fh(()=>{const a=this.downloadData();let b;return(a==
null?void 0:a.runningState)==="SUCCESS"&&(a==null?void 0:(b=a.rows)==null?void 0:b.length)>0});this.selectedTabIndex$=this.resultStore.currentSelectedTabIndex$;this.fullscreenButtonConfig$=this.resultStore.bottomPanelSize$.pipe(_.w(a=>a==="fullscreen"?{icon:"fullscreen-exit",ariaLabel:"Exit fullscreen mode",tooltip:"Exit fullscreen mode"}:{icon:"full-screen",ariaLabel:"Expand the bottom panel to fullscreen",tooltip:"Expand the bottom panel to fullscreen"}));this.expandButtonConfig$=this.resultStore.bottomPanelSize$.pipe(_.w(a=>
a==="collapsed"?{icon:"up",ariaLabel:"Expand the bottom panel",tooltip:"Expand the bottom panel"}:{icon:"down",ariaLabel:"Minimize the bottom panel",tooltip:"Minimize the bottom panel"}))}set dataExplorationTabsInternal(a){this.dataExplorationTabs=a.toArray()}ngOnChanges(a){a.currentSectionId&&this.resultStore.setCurrentSection(this.currentSectionId())}ngAfterContentInit(){this.resultStore.currentSelectedTabIndex$.subscribe(a=>{if(this.dataExplorationTabs)for(let c=0;c<this.dataExplorationTabs.length;c+=
1)if(c===a){var b=void 0;(b=this.dataExplorationTabs[c])!=null&&(b.show=!0)}else(b=this.dataExplorationTabs[c])!=null&&(b.show=!1)})}toggleBottomPanelFullscreenState(){this.resultStore.toggleBottomPanelFullscreenState()}toggleBottomPanelExpandedState(){this.resultStore.toggleBottomPanelExpandedState()}};lgr.\u0275fac=function(a){return new (a||lgr)};
lgr.\u0275cmp=_.z({type:lgr,selectors:[["fr-studio-result-section"]],contentQueries:function(a,b,c){a&1&&_.Qg(c,kgr,4);if(a&2){let d;_.Sg(d=_.Tg())&&(b.dataExplorationTabsInternal=d)}},inputs:{currentSectionId:[1,"currentSectionId"],downloadData:[1,"downloadData"],customDownloadMenu:[1,"customDownloadMenu"],formattedExecutionTime:[1,"formattedExecutionTime"]},outputs:{selectedResultTabChanged:"selectedResultTabChanged"},features:[_.Ln],ngContentSelectors:jgr,decls:14,vars:10,consts:[["tabPanel",""],
["cfcTitle","",1,"sp-tab-action-bar","fr-results-section-action-bar"],[1,"cfc-action-bar-content-main"],[4,"ngIf"],[1,"cfc-action-bar-content-right"],[1,"fr-results-section-action-bar-execution-time"],[3,"customDownloadMenu","downloadData"],["mat-icon-button","","class","fr-fullscreen-button",3,"ve","veClick","cfcTooltip","click",4,"ngIf"],["mat-icon-button","","class","cfc-button-toggle-bottom-panel-minimized fr-toggle-bottom-panel-button",3,"ve","veClick","cfcTooltip","click",4,"ngIf"],["mat-tab-nav-bar",
"",1,"cfc-space-last","cfc-border-none","fr-tab-group",3,"tabPanel"],["matTabLink","",3,"ve","veClick","active","click",4,"ngFor","ngForOf"],["matTabLink","",3,"click","ve","veClick","active"],["mat-icon-button","",1,"fr-fullscreen-button",3,"click","ve","veClick","cfcTooltip"],["iconset","common","size","medium",1,"fr-fullscreen-icon",3,"icon"],["mat-icon-button","",1,"cfc-button-toggle-bottom-panel-minimized","fr-toggle-bottom-panel-button",3,"click","ve","veClick","cfcTooltip"],["iconset","common",
"size","medium",1,"fr-toggle-bottom-panel-button-icon",3,"icon"]],template:function(a,b){a&1&&(_.Kg(),_.I(0,"cfc-action-bar",1)(1,"div",2),_.C(2,b$q,3,2,"ng-container",3),_.J(),_.I(3,"div",4),_.D(4,c$q,2,2,"span",5),_.Hg(5),_.D(6,d$q,1,2,"fr-database-studio-download-menu",6),_.C(7,e$q,2,5,"button",7),_.U(8,"async"),_.C(9,f$q,2,5,"button",8),_.U(10,"async"),_.J()(),_.I(11,"mat-tab-nav-panel",null,0),_.Lg(13),_.J());a&2&&(_.y(2),_.H("ngIf",b.dataExplorationTabs),_.y(2),_.E(b.isAlloydbQueryTimeEnabled&&
b.formattedExecutionTime()?4:-1),_.y(),a=_.Ig(b.downloadData()),_.y(),_.E(b.showDownloadButton()&&a?6:-1),_.y(),_.H("ngIf",_.W(8,6,b.fullscreenButtonConfig$)),_.y(2),_.H("ngIf",_.W(10,8,b.expandButtonConfig$)))},dependencies:[_.ho,_.Yn,_.Zn,_.sB,_.qB,_.Pt,_.Ot,_.Qu,_.as,_.ls,_.Jt,_.xt,_.vt,_.Ht,_.Lx,_.eDg,_.dW,_.cDg,_.eW,_.dDg,_.fW,_.Kq,_.Hq,Ger,_.fo],styles:['.fr-tab-group[_ngcontent-%COMP%]{min-height:50px}.fr-results-section-action-bar[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;background-color:var(--cm-sys-color-surface,#fff);z-index:1}.fr-results-section-action-bar-execution-time[_ngcontent-%COMP%]{font:var(--cm-sys-type-label-medium,500 13px/20px "Roboto",sans-serif);color:var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66))}']});var mgr=function(a){let b,c;a.resultIdControl.setValue((c=(b=a.options()[0])==null?void 0:b.id)!=null?c:-1)},ngr=class{constructor(){this.fb=_.k(_.kt);this.options=_.uh.required();this.selectedResultChanged=new _.Ji;this.resultIdControl=this.fb.nonNullable.control(-1);this.destroyRef=_.k(_.$e)}ngOnInit(){this.resultIdControl.valueChanges.pipe(_.Ij(this.destroyRef)).subscribe(a=>{this.selectedResultChanged.emit(a)});mgr(this)}ngOnChanges(){mgr(this)}};ngr.\u0275fac=function(a){return new (a||ngr)};
ngr.\u0275cmp=_.z({type:ngr,selectors:[["fr-result-selector"]],inputs:{options:[1,"options"]},outputs:{selectedResultChanged:"selectedResultChanged"},features:[_.Ln],decls:5,vars:1,consts:()=>[[1,"cfc-flex-container","cfc-flex-center-aligned"],[1,"cfc-inline-form-control","cfc-flex-grow-content","cfc-max-width-full","cfc-gutter-minus-4","cfc-space-last"],["aria-label","Select a query or statement",3,"formControl"],[3,"value"],[1,"cfc-nowrap","cfc-no-scroll-horizontal","qrs-truncated-option",3,"primary"]],
template:function(a,b){a&1&&(_.I(0,"div",0)(1,"mat-form-field",1)(2,"cfc-select",2),_.rg(3,g$q,2,2,"mat-option",3,_.pg),_.J()()());a&2&&(_.y(2),_.H("formControl",b.resultIdControl),_.y(),_.tg(b.options()))},dependencies:[_.Qu,_.as,_.lx,_.ix,_.jx,_.Cu,_.Rx,_.nt,_.Rs,_.bt,_.Yx,_.Px,_.aq,_.Tx,_.Vx],styles:[".qrs-truncated-option[_ngcontent-%COMP%]{display:block;max-width:80vw}"],changeDetection:0});var ogr=new _.Qd("tabernaGeminiSettingsKey"),pgr={isCodeGenerationEnabled:!1,isCodeCompletionEnabled:!1,isFixQueryEnabled:!1},qgr=new _.Qd("tabernaDuetInitialStateKey",{factory:()=>pgr}),sgr=function(a){const b=rgr(a,"IS_CODE_GENERATION_ENABLED",a.tabernaInitialState.isCodeGenerationEnabled),c=rgr(a,"IS_FIX_QUERY_ENABLED",a.tabernaInitialState.isFixQueryEnabled);_.Ge({isCodeGenerationEnabled:b,isFixQueryEnabled:c}).subscribe(({isCodeGenerationEnabled:d,isFixQueryEnabled:e})=>{a.internalTabernaGeminiSettings.set({isCodeGenerationEnabled:d,
isCodeCompletionEnabled:!1,isFixQueryEnabled:e})})},tgr=function(a,{subkey:b,boolVal:c}){return a.basicTypesService.update({key:{setting:a.tabernaSettingsKey,subkey:b,projectId:a.projectId},value:{boolVal:c}})},ugr=function(a,b){a.internalTabernaGeminiSettings.update(c=>Object.assign({},c,b))},vgr=function(a,b){tgr(a,{subkey:"IS_CODE_GENERATION_ENABLED",boolVal:b}).subscribe(()=>{ugr(a,{isCodeGenerationEnabled:b})})},wgr=function(a,b){tgr(a,{subkey:"IS_FIX_QUERY_ENABLED",boolVal:b}).subscribe(()=>
{ugr(a,{isFixQueryEnabled:b})})},rgr=function(a,b,c){return a.basicTypesService.get({setting:a.tabernaSettingsKey,subkey:b,projectId:a.projectId}).pipe(_.w(d=>{let e,f;return(f=d==null?void 0:(e=d.value)==null?void 0:e.boolVal)!=null?f:c}),_.wf(()=>_.t(c)))},xgr=class{constructor(){this.basicTypesService=_.k(_.Hv);this.serviceUsageService=_.k(_.yD);this.projectParamService=_.k(_.gr);this.tabernaSettingsKey=_.k(ogr);this.tabernaInitialState=_.k(qgr,{optional:!0});this.projectId=_.fr(this.projectParamService);
this.internalTabernaGeminiSettings=_.Ug(this.tabernaInitialState);this.geminiSettings=this.internalTabernaGeminiSettings.asReadonly();sgr(this)}};xgr.\u0275fac=function(a){return new (a||xgr)};xgr.\u0275prov=_.wd({token:xgr,factory:xgr.\u0275fac,providedIn:"root"});var ygr=function(a){const {pathname:b,searchParams:c}=new URL(a.router.url,window.location.origin);var d=`${c.get("project")}:${b}`;var e=a.cache.get(d);if(e)return a.analyticsService.sendEvent({type:"databaseStudio",name:"navCache",metadataArray:[{key:785,value:a.classType.name},{key:786,value:1}]}),{value:e,wasCached:!0};e=new a.classType;a.cache.set(d,e);a.analyticsService.sendEvent({type:"databaseStudio",name:"navCache",metadataArray:[{key:785,value:a.classType.name},{key:786,value:0}]});return{value:e,
wasCached:!1}},zgr=class{constructor(a){this.classType=a;this.maxEntries=2;this.cache=new _.kHi(this.maxEntries);this.router=_.k(_.to);this.analyticsService=_.k(_.jp)}};var Agr=class{constructor(){this.controlContainer=_.k(_.Qs);this.users=_.sh();this.isOptional=_.sh(!1);this.isRequired=_.Fh(()=>{if(this.isOptional())return!1;const a=this.getFormGroup();return a?_.Ik(a.controls.user._rawValidators,_.Os):!0});this.userSelectionChanged=new _.Ji;this.orderedUsers=null;this.isLoading=!0;this.hasFilter=!1;this.controlNames={user:"user"};_.vf(()=>{let a;const b=(a=this.getFormGroup())==null?void 0:a.controls.user;b&&(this.initialIsRequired===void 0&&(this.initialIsRequired=
_.Ik(b._rawValidators,_.Os)),this.isOptional()?_.mx(b,_.Os):this.initialIsRequired?b.addValidators(_.Os):_.mx(b,_.Os),b.updateValueAndValidity())})}ngOnChanges(a){a.users&&(a=a.users.currentValue,this.isLoading=!a,this.hasFilter=!!(a&&a.length>9),a=a?[...a]:null,a==null||a.sort(o$q),this.orderedUsers=a)}getFormGroup(){if(this.controlContainer.control)return this.controlContainer.control}};Agr.\u0275fac=function(a){return new (a||Agr)};
Agr.\u0275cmp=_.z({type:Agr,selectors:[["fr-user-selector"]],inputs:{users:[1,"users"],isOptional:[1,"isOptional"]},outputs:{userSelectionChanged:"userSelectionChanged"},features:[_.jh([_.Zx],[_.Zx]),_.Ln],decls:10,vars:8,consts:()=>[" User (optional) "," User "," None specified "," You can specify a database user account to perform this import, if needed. ","Required",[3,"valueChange","formControlName","isLoading","hasFilter","isRequired"],["value",""],[3,"value","disabled"],["matError","","aria-label",
"User selection is required",4,"cfcDebounceErrorFor"],["icon","person",3,"primary","secondary"],["matError","","aria-label","User selection is required"]],template:function(a,b){a&1&&(_.I(0,"mat-form-field")(1,"mat-label"),_.D(2,h$q,2,0,"ng-container")(3,i$q,2,0,"ng-container"),_.J(),_.I(4,"cfc-select",5),_.P("valueChange",function(){return b.userSelectionChanged.emit()}),_.D(5,j$q,2,0,"mat-option",6),_.rg(6,k$q,2,4,"mat-option",7,_.qg),_.J(),_.D(8,l$q,2,0,"mat-hint"),_.C(9,m$q,2,0,"cm-error",8),
_.J());a&2&&(_.y(2),_.E(b.isOptional()?2:3),_.y(2),_.H("formControlName",b.controlNames.user)("isLoading",b.isLoading)("hasFilter",b.hasFilter)("isRequired",b.isRequired()),_.y(),_.E(b.isOptional()?5:-1),_.y(),_.tg(b.orderedUsers),_.y(2),_.E(b.isOptional()?8:-1),_.y(),_.H("cfcDebounceErrorFor","required"))},dependencies:[_.Qu,_.as,_.lx,_.ix,_.gx,_.jx,_.Cu,_.Au,_.zu,_.ox,_.Rx,_.qx,_.px,_.ky,_.hy,_.nt,_.Rs,_.et,_.Yx,_.Px,_.aq,_.Tx,_.Vx],encapsulation:2});var Bgr={header:"Leave without saving changes?",body:"You have unsaved changes. Would you like to leave and abandon these changes?",confirmButtonText:"Leave Without Saving",disableClose:!0},Cgr=_.cb({hasUnsavedChanges:_.zUa,discardChanges$:_.Iba(_.Kf)}),Dgr=function(a,b){return b.hasUnsavedChanges()?a.confirmDialog$.pipe(_.w(c=>c.confirmed),_.cg(c=>{c&&b.discardChanges$.next()})):!0},Egr=class{constructor(){this.confirmDialogService=_.k(_.Ez);this.confirmDialog$=(()=>{let a;return new _.te(b=>{if(a)return a.subscribe(b);
const c=this.confirmDialogService.confirmation(Bgr).pipe(_.Xf({refCount:!0,bufferSize:1}));a=c;c.subscribe({error:()=>{a=void 0},complete:()=>{a=void 0}});return c.subscribe(b)})})()}canDeactivate(a){return Cgr(a)?Dgr(this,a):!0}};Egr.\u0275fac=function(a){return new (a||Egr)};Egr.\u0275prov=_.wd({token:Egr,factory:Egr.\u0275fac,providedIn:"root"});
var Fgr=new _.Qd("UnsavedChangesGuardHost"),Ggr=class{constructor(){this.unsavedChangesHost=_.k(Fgr)}onBeforeUnload(a){if(this.unsavedChangesHost.hasUnsavedChanges())return a.preventDefault(),a.returnValue="You have unsaved changes. Would you like to leave and abandon these changes?"}};Ggr.\u0275fac=function(a){return new (a||Ggr)};Ggr.\u0275dir=_.tf({type:Ggr,hostBindings:function(a,b){a&1&&_.P("beforeunload",function(c){return b.onBeforeUnload(c)},_.ke)}});var Hgr=function(a,b,c){const d=a.match(c)||[];let e=0;a=a.replaceAll(c,()=>`'@@[${b}!#_${e++}]@@'`);return{matchedTokens:d,statementWithoutTokens:a}},Igr=function(a,b,c){let d=0;return a.replaceAll(new RegExp(`'@@\\[${c}!#_\\d+\\]@@'`,"gmi"),()=>b[d++])},Jgr=class{constructor(){this.formatter=new _.bYi;this.config={omittedTokens:{jsonb:/'[^']*(?:''[^']*)*'/gm,returning:/\n(?:RETURNING|THEN\sRETURN)\s+/gm,graph:/((GRAPH(?:_TABLE\()?[^;]*MATCH[^;]*)|((CREATE|DROP)[^;]*PROPERTY[^;]*GRAPH[^;]*))(?:;|$)/gim}}}formatQuery(a){const {strippedQuery:b,
replacements:c}=Object.keys(this.config.omittedTokens).reduce((d,e)=>{const {matchedTokens:f,statementWithoutTokens:g}=Hgr(d.strippedQuery,e,this.config.omittedTokens[e]);return Object.assign({},d,{strippedQuery:g,replacements:[...d.replacements,[e,f]]})},{strippedQuery:a,replacements:[]});a=this.formatter.formatQuery(b);return c.reverse().reduce((d,[e,f])=>Igr(d,f,e),a)}};var p$q=['Code="28000" Code.Name()="invalid_authorization_specification"','Code="3D000" Code.Name()="invalid_catalog_name"',"Error 1044 (42000): Access denied for user","Error 1049: Unknown database","mssql: error code: 4063"],q$q=[/database "\w+" does not exist/];var Kgr=new _.Qd("ExploreApi");var v$q=new Set(Object.values({ROOT:"ROOT",DATABASE:"DATABASE",DATABASES_COLLECTION:"DATABASES_COLLECTION",EVENT:"EVENT",EVENTS_COLLECTION:"EVENTS_COLLECTION",SCHEMAS_COLLECTION:"SCHEMAS_COLLECTION",SCHEMA:"SCHEMA",TABLES_COLLECTION:"TABLES_COLLECTION",VIEWS_COLLECTION:"VIEWS_COLLECTION",VIEW:"VIEW",FUNCTIONS_COLLECTION:"FUNCTIONS_COLLECTION",FUNCTION:"FUNCTION",SEQUENCES_COLLECTION:"SEQUENCES_COLLECTION",SEQUENCE:"SEQUENCE",TABLE:"TABLE",PROCEDURES_COLLECTION:"PROCEDURES_COLLECTION",PROCEDURE:"PROCEDURE",
COLUMNS_COLLECTION:"COLUMNS_COLLECTION",COLUMN:"COLUMN",CONSTRAINT:"CONSTRAINT",CONSTRAINTS_COLLECTION:"CONSTRAINTS_COLLECTION",CONFIGURATION:"CONFIGURATION",CONFIGURATIONS_COLLECTION:"CONFIGURATIONS_COLLECTION",KEYS_COLLECTION:"KEYS_COLLECTION",KEY:"KEY",INDEXES_COLLECTION:"INDEXES_COLLECTION",INDEX:"INDEX",TYPES_COLLECTION:"TYPES_COLLECTION",TYPE:"TYPE",EXTENSIONS_COLLECTION:"EXTENSIONS_COLLECTION",EXTENSION:"EXTENSION",TRIGGERS_COLLECTION:"TRIGGERS_COLLECTION",TRIGGER:"TRIGGER",SYS_SCHEMA:"SYS_SCHEMA",
SYS_SCHEMA_TABLES_COLLECTION:"SYS_SCHEMA_TABLES_COLLECTION",SYS_SCHEMA_VIEWS_COLLECTION:"SYS_SCHEMA_VIEWS_COLLECTION",SYS_SCHEMA_TABLE:"SYS_SCHEMA_TABLE",SYS_SCHEMA_VIEW:"SYS_SCHEMA_VIEW",MYSQL_SYS_SCHEMA:"MYSQL_SYS_SCHEMA",MODELS_COLLECTION:"MODELS_COLLECTION",MODEL:"MODEL",SYS_SCHEMA_FUNCTIONS_COLLECTION:"SYS_SCHEMA_FUNCTIONS_COLLECTION",SYS_SCHEMA_PROCEDURES_COLLECTION:"SYS_SCHEMA_PROCEDURES_COLLECTION",SYS_SCHEMA_FUNCTION:"SYS_SCHEMA_FUNCTION",SYS_SCHEMA_PROCEDURE:"SYS_SCHEMA_PROCEDURE",COLUMN_COMMENTS_COLLECTION:"COLUMN_COMMENTS_COLLECTION",
COLUMN_COMMENT:"COLUMN_COMMENT"})),z$q=new Set(Object.values({SQL_METADATA_TYPE_UNSPECIFIED:"SQL_METADATA_TYPE_UNSPECIFIED",DATA_TYPE:"DATA_TYPE",IS_NULLABLE:"IS_NULLABLE",COLUMN_DEFAULT:"COLUMN_DEFAULT",CONSTRAINT_TYPE:"CONSTRAINT_TYPE",CONSTRAINT_DEF:"CONSTRAINT_DEF",SEQUENCE_DEF:"SEQUENCE_DEF",FULL_DATA_TYPE:"FULL_DATA_TYPE",IS_SELECTED:"IS_SELECTED",MODEL_TYPE:"MODEL_TYPE",DESCRIPTION:"DESCRIPTION"}));var Lgr=new _.Iq("45683738");var Mgr={maxRequestBatchSize:256,nodes:new Map([["ROOT",{children:[{name:"Databases",maxResultsToLoad:200}]}],["DATABASE",{children:[{name:"Tables",maxResultsToLoad:1E3},{name:"Views",maxResultsToLoad:1E3}]}],["TABLE",{children:[{name:"Columns",maxResultsToLoad:100},{name:"Indexes",maxResultsToLoad:100},{name:"Keys",maxResultsToLoad:100}]}]])},Ngr={maxRequestBatchSize:256,nodes:new Map([["ROOT",{children:[{name:"Schemas",maxResultsToLoad:200}]}],["SCHEMA",{children:[{name:"Tables",maxResultsToLoad:1E3},
{name:"Views",maxResultsToLoad:1E3}]}],["TABLE",{children:[{name:"Columns",maxResultsToLoad:100},{name:"Indexes",maxResultsToLoad:100},{name:"Keys",maxResultsToLoad:100}]}]])};var Ogr=function(a,b){a.currentStreamer&&a.currentStreamer.complete();a.currentStreamer=a.streamingStrategyFactory.create(b).stream();return a.currentStreamer},Qgr=class{constructor(a,b){this.streamingStrategyFactory=new Pgr(a,b)}},Pgr=class{constructor(a,b){this.api=a;this.analyticsService=b}create(a){return new Rgr(this.api,this.analyticsService,a)}},Tgr=function(a){_.hd(function*(){try{const b=a.fetchingConfig.nodes.get("ROOT").children.map(c=>({path:{segmentPath:[c.name],pageToken:"",pageSize:c.maxResultsToLoad},
sourceNode:void 0}));yield Sgr(a,b);a.objectStreamer.complete()}catch(b){a.objectStreamer.error(b)}})},Sgr=function(a,b){return _.hd(function*(){if(!a.objectStreamer.isStopped){var c=a.fetchingConfig.maxRequestBatchSize;for(let e=0;e<b.length;e+=c){var d=b.slice(e,e+c);d=yield Ugr(a,d);yield Sgr(a,d)}}})},Ugr=function(a,b){return _.hd(function*(){const c=yield _.ze(a.api.fetchNodes(a.queryContext,b.map(({path:e})=>e))),d=b.map(({path:e,sourceNode:f})=>{const g=u$q(c,e.segmentPath);let n,q,r;return{path:e,
sourceNode:f,resultsForPath:(q=g==null?void 0:g.children)!=null?q:[],isTruncated:!(g==null||!g.nextPageToken),parentNodeName:(r=g==null?void 0:(n=g.segmentPath)==null?void 0:n.at(-1))!=null?r:""}});Vgr(a,d);B$q(d,a.analyticsService,a.queryContext);return Wgr(a,d)})},Vgr=function(a,b){b.length&&(b=b.flatMap(({sourceNode:c,resultsForPath:d})=>y$q(d,c)),a.objectStreamer.next(b.map(A$q)))},Wgr=function(a,b){return b.flatMap(({sourceNode:c,resultsForPath:d})=>d.flatMap(e=>w$q(a.fetchingConfig,e).map(f=>
({path:{segmentPath:[...e.segmentPath,f.name],pageToken:"",pageSize:f.maxResultsToLoad},sourceNode:x$q(e,c)}))))},Rgr=class{constructor(a,b,c){this.api=a;this.analyticsService=b;this.queryContext=c;this.objectStreamer=new _.Rf;a:{a=c.dialect;switch(a){case "POSTGRESQL":a={maxRequestBatchSize:256,nodes:new Map([["ROOT",{children:[{name:"Schemas",maxResultsToLoad:200}]}],["SCHEMA",{children:[{name:"Tables",maxResultsToLoad:1E3},{name:"Views",maxResultsToLoad:1E3},{name:"Sequences",maxResultsToLoad:1E3},
{name:"Functions",maxResultsToLoad:100}]}],["TABLE",{children:[{name:"Columns",maxResultsToLoad:100},{name:"Indexes",maxResultsToLoad:100},{name:"Keys",maxResultsToLoad:100},...(_.ki(Lgr)?[{name:"Column Comments",maxResultsToLoad:100}]:[])]}]])};break a;case "MYSQL":a=Mgr;break a;case "SQL_SERVER":a=Ngr;break a;default:_.ob(a,void 0)}a=void 0}this.fetchingConfig=a}stream(){Tgr(this);return this.objectStreamer}};var Xgr=class{printStatements(a){var b=a.filter(({objectType:c})=>c==="DATABASE");({tables:a}=D$q(a));b=H$q(b);a=G$q(a);return[...b,...a]}convertToSchemaDetails(a){const {tables:b,views:c}=D$q(a);a=[];for(const [,{name:e,columns:f}]of b){var d={table:e,columns:f.map(F$q).filter(_.zl)};a.push(d)}d=[];for(const [,{name:e}]of c)d.push({view:e});return{tables:a,views:d}}};var N$q=new _.Iq("45684817");var Ygr=class{printStatements(a){var b=a.filter(({objectType:c})=>c==="SCHEMA");a=J$q(a);b=P$q(b);a=O$q(a);return[...b,...a]}convertToSchemaDetails(a){a=J$q(a);return{tables:M$q(a),views:[]}}};var Zgr=class{printStatements(a){var b=a.filter(({objectType:c})=>c==="SCHEMA");a=R$q(a);b=W$q(b);a=V$q(a);return[...b,...a]}convertToSchemaDetails(a){a=R$q(a);return{tables:U$q(a),views:[]}}};var b$=class extends _.zU{constructor(){super($gr);this.exploreApi=_.k(Kgr);this.errorHandler=_.k(_.CJ);this.analyticsService=_.k(_.jp);this.databaseObjectsService=new Qgr(this.exploreApi,this.analyticsService);this.exploreContext$=this.select(a=>a.exploreContext).pipe(_.Te(_.zl));this.connectionInfo$=this.select(a=>{let b;return(b=a.authenticationState)==null?void 0:b.connectionInfo});this.databaseObjects$=this.select(a=>a.databaseObjects);this.currentDatabase$=this.select(a=>{let b,c;return(b=a.authenticationState)==
null?void 0:(c=b.connectionInfo)==null?void 0:c.database});this.databases$=this.select(a=>a.databases);this.isDisclaimerDismissed$=this.select(a=>a.isDisclaimerDismissed);this.showObjectExplorerEmptyState$=this.select(a=>{let b;return!((b=a.authenticationState)==null?0:b.connectionInfo)});this.userAuthenticationStatus$=this.select(a=>{let b;return(b=a.authenticationState)==null?void 0:b.userAuthenticationStatus});this.authenticateInProgress$=this.select(a=>{let b;return(b=a.authenticationState)==
null?void 0:b.authenticateInProgress});this.switchUserOrDatabase=this.updater(a=>Object.assign({},$gr,{exploreContext:a.exploreContext}));this.dismissDisclaimer=this.updater(a=>Object.assign({},a,{isDisclaimerDismissed:!0}));this.connectionInfoChanged=this.updater((a,b)=>{b=Object.assign({},a.authenticationState,{connectionInfo:b});return Object.assign({},a,{authenticationState:b})});this.userAuthenticationComplete=this.updater((a,b)=>{b=Object.assign({},a.authenticationState,{userAuthenticationStatus:b,
authenticateInProgress:!1});return Object.assign({},a,{authenticationState:b})});this.startAuthenticating=this.updater(a=>{const b=Object.assign({},a.authenticationState,{authenticateInProgress:!0,userAuthenticationStatus:{authenticationDone:!1,status:"UNKNOWN",errorMessage:void 0,isIncorrectPassword:!1}});return Object.assign({},a,{authenticationState:b})});this.queryContext$=_.Ge({exploreContext:this.exploreContext$,connectionInfo:this.connectionInfo$.pipe(_.Te(_.zl))}).pipe(_.w(({exploreContext:a,
connectionInfo:b})=>t$q(a,b)));this.geminiContext$=_.Ge({exploreContext:this.exploreContext$,connectionInfo:this.connectionInfo$.pipe(_.Te(_.zl)),databaseObjects:this.databaseObjects$}).pipe(_.w(({exploreContext:a,connectionInfo:b,databaseObjects:c})=>{const d=a.versionName,e=a.dialect,f=a.resourceId,g=a.projectNumber;a=a.region;a:{switch(e){case "POSTGRESQL":var n=new Ygr;break a;case "MYSQL":n=new Xgr;break a;case "SQL_SERVER":n=new Zgr;break a;default:_.ob(e,void 0)}n=void 0}var q=n;n=q.convertToSchemaDetails(c);
var r=b.database;c=q.printStatements(c);let u,v,x,B;q={tables:(x=(u=n.tables)==null?void 0:u.map(Y$q))!=null?x:[],views:(B=(v=n.views)==null?void 0:v.map(Z$q))!=null?B:[]};return{resourceId:f,projectNumber:g,dialect:e,versionName:d,region:a,database:r,schemaStatements:c,schemaDetails:n,databaseDefinition:q,connectionInfo:b}}));this.geminiContext$.pipe(_.w($$q));this.isUserAuthenticated$=this.userAuthenticationStatus$.pipe(_.w(a=>(a==null?void 0:a.authenticationDone)&&(a==null?void 0:a.status)==="SUCCESS"));
this.isIncorrectPassword$=this.userAuthenticationStatus$.pipe(_.w(a=>!(a==null||!a.isIncorrectPassword)));this.incorrectDatabase$=this.userAuthenticationStatus$.pipe(_.Te(_.zl),_.w(a=>r$q(a.errorMessage)));this.isDatabasesLoading$=this.select(a=>a.databasesLoadingState).pipe(_.w(a=>a==="LOADING"));this.hasDatabasesLoadingError$=this.select(a=>a.databasesLoadingState).pipe(_.w(a=>a==="ERROR"));this.databaseSelectDisplayMode$=this.select(a=>a.databaseSelectDisplayMode);this.resetDatabaseSelectDisplayMode=
this.updater(a=>Object.assign({},a,{databaseSelectDisplayMode:$gr.databaseSelectDisplayMode}));this.updateDatabaseSelectDisplayMode=this.updater((a,b)=>Object.assign({},a,{databaseSelectDisplayMode:b}));this.resetDatabaseObjects=this.updater(a=>Object.assign({},a,{databaseObjects:[]}));this.appendDatabaseObjects=this.updater((a,b)=>b.length===0?a:Object.assign({},a,{databaseObjects:[...a.databaseObjects,...b]}));this.fetchDatabaseObjects=this.effect(a=>a.pipe(_.eg(this.queryContext$),_.A(([,b])=>
{this.resetDatabaseObjects();return Ogr(this.databaseObjectsService,b).pipe(_.wf(()=>{_.uH(`Failed to fetch database objects for ${b.dialect} `+b.versionName);return _.t([])}))}),_.cg(b=>{this.appendDatabaseObjects(b)})));this.verifyCredentials=this.effect(a=>a.pipe(_.eg(this.exploreContext$),_.A(([b,c])=>{this.startAuthenticating();return this.exploreApi.validateCredentials(t$q(c,b)).pipe(_.BU(()=>{this.connectionInfoChanged(b);this.userAuthenticationComplete({status:"SUCCESS",authenticationDone:!0,
isIncorrectPassword:!1});this.fetchDatabaseObjects()},d=>{var e=d instanceof _.MId?d.type:null;const f=e==="INCORRECT_BUILTIN_USER_PASSWORD",g=r$q(d.message);this.userAuthenticationComplete({status:"FAILURE",authenticationDone:!0,errorMessage:d.message,isIncorrectPassword:f});g||f||(e?(e=s$q({iamDbFlagName:c.iamDbFlagName}).get(e),this.errorHandler.handleError({error:Error(e)})):this.errorHandler.handleError({error:d}));return _.ye(()=>d)}))})));this.updateExploreContext=this.updater((a,b)=>Object.assign({},
a,{exploreContext:b}))}};b$.\u0275fac=function(a){return new (a||b$)};b$.\u0275prov=_.wd({token:b$,factory:b$.\u0275fac});var $gr={authenticationState:{connectionInfo:void 0,userAuthenticationStatus:{authenticationDone:!1,status:"UNKNOWN",errorMessage:void 0,isIncorrectPassword:!1},authenticateInProgress:!1},databasesLoadingState:"LOADING",databases:[],databaseSelectDisplayMode:"TEXT_INPUT_FOR_LARGE_NUMBER_OF_DATABASES",databaseObjects:[],isDisclaimerDismissed:!1,exploreContext:void 0,displayUser:void 0};var ahr=["SCHEMA","VIEW","TABLE","COLUMN","DATABASE"],bhr={markers:[],validationResult:{message:"",status:"NONE"}},qer=function(a,{queryText:b,selectionStartPosition:c}){return a.exploreComponentStore.connectionInfo$.pipe(_.Ef(1),_.A(d=>d?a.validateQuery(b,c):_.t(bhr)))},dhr=function(a,b,c,d,e,f){const g=b.filter(n=>{n=n.toUpperCase();var q=c.toUpperCase();return n.startsWith(q)&&n!==q}).map(n=>({label:n,text:n,kind:"KEYWORD"}));return chr(a,c,f).pipe(_.w(n=>car([...g,...n],d,e)))},chr=function(a,
b,c){return a.exploreComponentStore.databaseObjects$.pipe(_.Ef(1),_.w(d=>d.filter(e=>{var f;if(f=ahr.includes(e.objectType))e=e.name.toUpperCase(),f=b.toUpperCase(),f=e.startsWith(f)&&e!==f;return f}).map(e=>{const f=e.name;var g=f;switch(c){case "pgsql":g=f.match(/^[a-z_][a-z0-9_$]*$/)?f:`"${f}"`}e=(new Map([["SCHEMA","SCHEMA"],["VIEW","VIEW"],["TABLE","TABLE"],["COLUMN","COLUMN"],["DATABASE","DATABASE"]])).get(e.objectType);return{label:f,text:g,kind:e}})))},fhr=class{constructor(){this.exploreApi=
_.k(Kgr);this.exploreComponentStore=_.k(b$);this.latestValidationResult$=this.queryValidationSubject=new _.Rf(1)}validateQuery(a,b){return this.exploreComponentStore.queryContext$.pipe(_.Ef(1),_.A(c=>this.exploreApi.validateSql({statement:a,queryContext:c}).pipe(_.cg(d=>{this.queryValidationSubject.next({validityStatus:d.status==="VALID"?"VALID":"INVALID",queryText:a,databaseEngine:c.dialect,errorMessage:d.errorMessage,errorCode:d.errorCode})}),_.wf(d=>{this.queryValidationSubject.next({validityStatus:"API_ERROR",
queryText:a,databaseEngine:c.dialect,errorMessage:d.message});throw d;}),_.w(d=>{const e=b==null?void 0:b.lineNumber,f=b==null?void 0:b.column;return aar(d,c.isEngineBackedValidation,e?e-1:void 0,f?f-1:void 0)}),_.wf(()=>_.t(bhr)))))}autocompleteFn({text:a,position:b,language:c}){const d=a.split(/\n/g)[b.lineNumber];if(d===void 0)return _.t({suggestions:[]});const e=d.substring(0,b.column).split(" ").pop(),f=dar(a,b);return e?this.exploreComponentStore.exploreContext$.pipe(_.Ef(1),_.w(({dialect:g})=>
ehr[g]),_.A(g=>dhr(this,g,e,f,b,c))):_.t(car([],f,b))}};fhr.\u0275fac=function(a){return new (a||fhr)};fhr.\u0275prov=_.wd({token:fhr,factory:fhr.\u0275fac});
var ehr={MYSQL:"ACCESSIBLE ACCOUNT ACTION ACTIVE ADD ADMIN AFTER AGAINST AGGREGATE ALGORITHM ALL ALTER ALWAYS ANALYSE ANALYZE AND ANY ARRAY AS ASC ASCII ASENSITIVE AT ATTRIBUTE AUTHENTICATION AUTOEXTEND_SIZE AUTO_INCREMENT AVG AVG_ROW_LENGTH BACKUP BEFORE BEGIN BETWEEN BIGINT BINARY BINLOG BIT BLOB BLOCK BOOL BOOLEAN BOTH BTREE BUCKETS BULK BY BYTE CACHE CALL CASCADE CASCADED CASE CATALOG_NAME CHAIN CHALLENGE_RESPONSE CHANGE CHANGED CHANNEL CHARACTER CHAR CHARSET CHECK CHECKSUM CIPHER CLASS_ORIGIN CLIENT CLONE CLOSE COALESCE CODE COLLATE COLLATION COLUMN COLUMN_FORMAT COLUMN_NAME COLUMNS COMMENT COMMIT COMMITTED COMPACT COMPLETION COMPONENT COMPRESSED COMPRESSION CONCURRENT CONDITION CONNECTION CONSISTENT CONSTRAINT_CATALOG CONSTRAINT CONSTRAINT_NAME CONSTRAINT_SCHEMA CONTAINS CONTEXT CONTINUE CONVERT CPU CREATE CROSS CUBE CUME_DIST CURRENT CURRENT_DATE CURRENT_TIME CURRENT_TIMESTAMP CURRENT_USER CURSOR CURSOR_NAME DATA DATABASE DATABASES DATAFILE DATE DATETIME DAY DAY_HOUR DAY_MICROSECOND DAY_MINUTE DAY_SECOND DEALLOCATE DEC DECIMAL DECLARE DEFAULT_AUTH DEFAULT DEFINER DEFINITION DELAYED DELAY_KEY_WRITE DELETE DENSE_RANK DESC DESCRIBE DESCRIPTION DES_KEY_FILE DETERMINISTIC DIAGNOSTICS DIRECTORY DISABLE DISCARD DISK DISTINCT DISTINCTROW DIV DO DOUBLE DROP DUAL DUMPFILE DUPLICATE DYNAMIC EACH ELSE ELSEIF EMPTY ENABLE ENCLOSED ENCRYPTION END ENDS ENFORCED ENGINE ENGINE_ATTRIBUTE ENGINES ENUM ERROR ERRORS ESCAPE ESCAPED EVENT EVENTS EVERY EXCEPT EXCHANGE EXCLUDE EXECUTE EXISTS EXIT EXPANSION EXPIRE EXPLAIN EXPORT EXTENDED EXTENT_SIZE FACTOR FAILED_LOGIN_ATTEMPTS FALSE FAST FAULTS FETCH FIELDS FILE FILE_BLOCK_SIZE FILTER FINISH FIRST FIRST_VALUE FIXED FLOAT4 FLOAT8 FLOAT FLUSH FOLLOWING FOLLOWS FORCE FOREIGN FOR FORMAT FOUND FROM FULL FULLTEXT FUNCTION GENERAL GENERATED GENERATE GEOMCOLLECTION GEOMETRY GEOMETRYCOLLECTION GET_FORMAT GET GET_MASTER_PUBLIC_KEY GET_SOURCE_PUBLIC_KEY GLOBAL GRANT GRANTS GROUP GROUPING GROUP_REPLICATION GROUPS GTID_ONLY HANDLER HASH HAVING HELP HIGH_PRIORITY HISTOGRAM HISTORY HOST HOSTS HOUR HOUR_MICROSECOND HOUR_MINUTE HOUR_SECOND IDENTIFIED IF IGNORE IGNORE_SERVER_IDS IMPORT INACTIVE INDEXES INDEX INFILE IN INITIAL INITIAL_SIZE INITIATE INNER INOUT INSENSITIVE INSERT INSERT_METHOD INSTALL INSTANCE INT1 INT2 INT3 INT4 INT8 INTEGER INTERSECT INTERVAL INT INTO INVISIBLE INVOKER IO IO_AFTER_GTIDS IO_BEFORE_GTIDS IO_THREAD IPC IS ISOLATION ISSUER ITERATE JOIN JSON JSON_TABLE JSON_VALUE KEY_BLOCK_SIZE KEY KEYRING KEYS KILL LAG LANGUAGE LAST LAST_VALUE LATERAL LEADING LEAD LEAVE LEAVES LEFT LESS LEVEL LIKE LIMIT LINEAR LINES LINESTRING LIST LOAD LOCAL LOCALTIME LOCALTIMESTAMP LOCKED LOCK LOCKS LOGFILE LOGS LONGBLOB LONG LONGTEXT LOOP LOW_PRIORITY MASTER MASTER_AUTO_POSITION MASTER_BIND MASTER_COMPRESSION_ALGORITHMS MASTER_CONNECT_RETRY MASTER_DELAY MASTER_HEARTBEAT_PERIOD MASTER_HOST MASTER_LOG_FILE MASTER_LOG_POS MASTER_PASSWORD MASTER_PORT MASTER_PUBLIC_KEY_PATH MASTER_RETRY_COUNT MASTER_SERVER_ID MASTER_SSL MASTER_SSL_CA MASTER_SSL_CAPATH MASTER_SSL_CERT MASTER_SSL_CIPHER MASTER_SSL_CRL MASTER_SSL_CRLPATH MASTER_SSL_KEY MASTER_SSL_VERIFY_SERVER_CERT MASTER_TLS_CIPHERSUITES MASTER_TLS_VERSION MASTER_USER MASTER_ZSTD_COMPRESSION_LEVEL MATCH MAX_CONNECTIONS_PER_HOUR MAX_QUERIES_PER_HOUR MAX_ROWS MAX_SIZE MAX_UPDATES_PER_HOUR MAX_USER_CONNECTIONS MAXVALUE MEDIUM MEDIUMBLOB MEDIUMINT MEDIUMTEXT MEMBER MEMORY MERGE MESSAGE_TEXT MICROSECOND MIDDLEINT MIGRATE MIN_ROWS MINUTE MINUTE_MICROSECOND MINUTE_SECOND MODE MODIFIES MODIFY MOD MONTH MULTILINESTRING MULTIPOINT MULTIPOLYGON MUTEX MYSQL_ERRNO MySQL NAME NAMES NATIONAL NATURAL NCHAR NDB NDBCLUSTER NESTED NETWORK_NAMESPACE NEVER NEW NEXT NO NODEGROUP NONE NOT NO_WAIT NOWAIT NO_WRITE_TO_BINLOG NTH_VALUE NTILE NULL NULLS NUMBER NUMERIC NVARCHAR OFF OFFSET OF OJ OLD ONE ONLY ON OPEN OPTIMIZE OPTIMIZER_COSTS OPTIONALLY OPTIONAL OPTION OPTIONS ORDER ORDINALITY ORGANIZATION OR OTHERS OUTER OUTFILE OUT OVER OWNER PACK_KEYS PAGE PARSER PARTIAL PARTITIONING PARTITION PARTITIONS PASSWORD PASSWORD_LOCK_TIME PATH PERCENT_RANK PERSIST_ONLY PERSIST PHASE PLUGIN PLUGIN_DIR PLUGINS POINT POLYGON PORT PRECEDES PRECEDING PRECISION PREPARE PRESERVE PREV PRIMARY PRIVILEGE_CHECKS_USER PRIVILEGES PROCEDURE PROCESSLIST PROCESS PROFILE PROFILES PROXY PURGE QUARTER QUERY QUICK RANDOM RANGE RANK READ_ONLY READ READS READ_WRITE REAL REBUILD RECOVER RECURSIVE REDO_BUFFER_SIZE REDOFILE REDUNDANT REFERENCE REFERENCES REGEXP REGISTRATION RELAY RELAYLOG RELAY_LOG_FILE RELAY_LOG_POS RELAY_THREAD RELEASE RELOAD REMOTE REMOVE RENAME REORGANIZE REPAIR REPEATABLE REPEAT REPLACE REPLICA REPLICAS REPLICATE_DO_DB REPLICATE_DO_TABLE REPLICATE_IGNORE_DB REPLICATE_IGNORE_TABLE REPLICATE_REWRITE_DB REPLICATE_WILD_DO_TABLE REPLICATE_WILD_IGNORE_TABLE REPLICATION REQUIRE REQUIRE_ROW_FORMAT RESET RESIGNAL RESOURCE RESPECT RESTART RESTORE RESTRICT RESUME RETAIN RETURNED_SQLSTATE RETURNING RETURN RETURNS REUSE REVERSE REVOKE RIGHT RLIKE ROLE ROLLBACK ROLLUP ROTATE ROUTINE ROW_COUNT ROW_FORMAT ROW_NUMBER ROW ROWS RTREE SAVEPOINT SCHEDULE SCHEMA_NAME SCHEMA SCHEMAS SECOND SECONDARY_ENGINE_ATTRIBUTE SECONDARY_ENGINE SECONDARY_LOAD SECONDARY SECONDARY_UNLOAD SECOND_MICROSECOND SECURITY SELECT SENSITIVE SEPARATOR SERIAL SERIALIZABLE SERVER SESSION SET SHARE SHOW SHUTDOWN SIGNAL SIGNED SIMPLE SKIP SLAVE SLOW SMALLINT SNAPSHOT SOCKET SOME SONAME SOUNDS SOURCE SOURCE_AUTO_POSITION SOURCE_BIND SOURCE_COMPRESSION_ALGORITHMS SOURCE_CONNECT_RETRY SOURCE_DELAY SOURCE_HEARTBEAT_PERIOD SOURCE_HOST SOURCE_LOG_FILE SOURCE_LOG_POS SOURCE_PASSWORD SOURCE_PORT SOURCE_PUBLIC_KEY_PATH SOURCE_RETRY_COUNT SOURCE_SSL_CAPATH SOURCE_SSL_CA SOURCE_SSL_CERT SOURCE_SSL_CIPHER SOURCE_SSL_CRLPATH SOURCE_SSL_CRL SOURCE_SSL_KEY SOURCE_SSL SOURCE_SSL_VERIFY_SERVER_CERT SOURCE_TLS_CIPHERSUITES SOURCE_TLS_VERSION SOURCE_USER SOURCE_ZSTD_COMPRESSION_LEVEL SPATIAL SPECIFIC SQL_AFTER_GTIDS SQL_AFTER_MTS_GAPS SQL_BEFORE_GTIDS SQL_BIG_RESULT SQL_BUFFER_RESULT SQL_CACHE SQL_CALC_FOUND_ROWS SQLEXCEPTION SQL_NO_CACHE SQL_SMALL_RESULT SQL SQLSTATE SQL_THREAD SQL_TSI_DAY SQL_TSI_HOUR SQL_TSI_MINUTE SQL_TSI_MONTH SQL_TSI_QUARTER SQL_TSI_SECOND SQL_TSI_WEEK SQL_TSI_YEAR SQLWARNING SRID SSL STACKED START STARTING STARTS STATS_AUTO_RECALC STATS_PERSISTENT STATS_SAMPLE_PAGES STATUS STOP STORAGE STORED STRAIGHT_JOIN STREAM STRING SUBCLASS_ORIGIN SUBJECT SUBPARTITION SUBPARTITIONS SUPER SUSPEND SWAPS SWITCHES SYSTEM TABLE_CHECKSUM TABLE_NAME TABLES TABLESPACE TABLE TEMPORARY TEMPTABLE TERMINATED TEXT THAN THEN The THREAD_PRIORITY TIES TIME TIMESTAMP TIMESTAMPADD TIMESTAMPDIFF TINYBLOB TINYINT TINYTEXT TLS TO TRAILING TRANSACTION TRIGGERS TRIGGER TRUE TRUNCATE TYPE TYPES UNBOUNDED UNCOMMITTED UNDEFINED UNDO_BUFFER_SIZE UNDOFILE UNDO UNICODE UNINSTALL UNION UNIQUE UNKNOWN UNLOCK UNREGISTER UNSIGNED UNTIL UPDATE UPGRADE URL USAGE USE_FRM USER USER_RESOURCES USE USING UTC_DATE UTC_TIMESTAMP UTC_TIME VALIDATION VALUE VALUES VARBINARY VARCHARACTER VARCHAR VARIABLES VARYING VCPU VIEW VIRTUAL VISIBLE WAIT WARNINGS WEEK WEIGHT_STRING WHEN WHERE WHILE WINDOW WITHOUT WITH WORK WRAPPER WRITE X509 XA XID XML XOR YEAR YEAR_MONTH ZEROFILL ZONE".split(" "),POSTGRESQL:"A ABORT ABS ABSENT ABSOLUTE ACCESS ACCORDING ACOS ACTION ADA ADD ADMIN AFTER AGGREGATE ALL ALLOCATE ALSO ALTER ALWAYS ANALYSE ANALYZE AND ANY ARE ARRAY ARRAY_AGG ARRAY_\u200bMAX_\u200bCARDINALITY AS ASC ASENSITIVE ASIN ASSERTION ASSIGNMENT ASYMMETRIC AT ATAN ATOMIC ATTACH ATTRIBUTE ATTRIBUTES AUTHORIZATION AVG BACKWARD BASE64 BEFORE BEGIN BEGIN_FRAME BEGIN_PARTITION BERNOULLI BETWEEN BIGINT BINARY BIT BIT_LENGTH BLOB BLOCKED BOM BOOLEAN BOTH BREADTH BY C CACHE CALL CALLED CARDINALITY CASCADE CASCADED CASE CAST CATALOG CATALOG_NAME CEIL CEILING CHAIN CHAINING CHAR CHARACTER CHARACTERISTICS CHARACTERS CHARACTER_LENGTH CHARACTER_\u200bSET_\u200bCATALOG CHARACTER_SET_NAME CHARACTER_SET_SCHEMA CHAR_LENGTH CHECK CHECKPOINT CLASS CLASSIFIER CLASS_ORIGIN CLOB CLOSE CLUSTER COALESCE COBOL COLLATE COLLATION COLLATION_CATALOG COLLATION_NAME COLLATION_SCHEMA COLLECT COLUMN COLUMNS COLUMN_NAME COMMAND_FUNCTION COMMAND_\u200bFUNCTION_\u200bCODE COMMENT COMMENTS COMMIT COMMITTED COMPRESSION CONCURRENTLY CONDITION CONDITIONAL CONDITION_NUMBER CONFIGURATION CONFLICT CONNECT CONNECTION CONNECTION_NAME CONSTRAINT CONSTRAINTS CONSTRAINT_CATALOG CONSTRAINT_NAME CONSTRAINT_SCHEMA CONSTRUCTOR CONTAINS CONTENT CONTINUE CONTROL CONVERSION CONVERT COPY CORR CORRESPONDING COS COSH COST COUNT COVAR_POP COVAR_SAMP CREATE CROSS CSV CUBE CUME_DIST CURRENT CURRENT_CATALOG CURRENT_DATE CURRENT_\u200bDEFAULT_\u200bTRANSFORM_\u200bGROUP CURRENT_PATH CURRENT_ROLE CURRENT_ROW CURRENT_SCHEMA CURRENT_TIME CURRENT_TIMESTAMP CURRENT_\u200bTRANSFORM_\u200bGROUP_\u200bFOR_\u200bTYPE CURRENT_USER CURSOR CURSOR_NAME CYCLE DATA DATABASE DATALINK DATE DATETIME_\u200bINTERVAL_\u200bCODE DATETIME_\u200bINTERVAL_\u200bPRECISION DAY DB DEALLOCATE DEC DECFLOAT DECIMAL DECLARE DEFAULT DEFAULTS DEFERRABLE DEFERRED DEFINE DEFINED DEFINER DEGREE DELETE DELIMITER DELIMITERS DENSE_RANK DEPENDS DEPTH DEREF DERIVED DESC DESCRIBE DESCRIPTOR DETACH DETERMINISTIC DIAGNOSTICS DICTIONARY DISABLE DISCARD DISCONNECT DISPATCH DISTINCT DLNEWCOPY DLPREVIOUSCOPY DLURLCOMPLETE DLURLCOMPLETEONLY DLURLCOMPLETEWRITE DLURLPATH DLURLPATHONLY DLURLPATHWRITE DLURLSCHEME DLURLSERVER DLVALUE DO DOCUMENT DOMAIN DOUBLE DROP DYNAMIC DYNAMIC_FUNCTION DYNAMIC_\u200bFUNCTION_\u200bCODE EACH ELEMENT ELSE EMPTY ENABLE ENCODING ENCRYPTED END END-EXEC END_FRAME END_PARTITION ENFORCED ENUM EQUALS ERROR ESCAPE EVENT EVERY EXCEPT EXCEPTION EXCLUDE EXCLUDING EXCLUSIVE EXEC EXECUTE EXISTS EXP EXPLAIN EXPRESSION EXTENSION EXTERNAL EXTRACT FALSE FAMILY FETCH FILE FILTER FINAL FINALIZE FINISH FIRST FIRST_VALUE FLAG FLOAT FLOOR FOLLOWING FOR FORCE FOREIGN FORMAT FORTRAN FORWARD FOUND FRAME_ROW FREE FREEZE FROM FS FULFILL FULL FUNCTION FUNCTIONS FUSION G GENERAL GENERATED GET GLOBAL GO GOTO GRANT GRANTED GREATEST GROUP GROUPING GROUPS HANDLER HAVING HEADER HEX HIERARCHY HOLD HOUR ID IDENTITY IF IGNORE ILIKE IMMEDIATE IMMEDIATELY IMMUTABLE IMPLEMENTATION IMPLICIT IMPORT IN INCLUDE INCLUDING INCREMENT INDENT INDEX INDEXES INDICATOR INHERIT INHERITS INITIAL INITIALLY INLINE INNER INOUT INPUT INSENSITIVE INSERT INSTANCE INSTANTIABLE INSTEAD INT INTEGER INTEGRITY INTERSECT INTERSECTION INTERVAL INTO INVOKER IS ISNULL ISOLATION JOIN JSON_ARRAY JSON_ARRAYAGG JSON_EXISTS JSON_OBJECT JSON_OBJECTAGG JSON_QUERY JSON_TABLE JSON_TABLE_PRIMITIVE JSON_VALUE K KEEP KEY KEYS KEY_MEMBER KEY_TYPE LABEL LAG LANGUAGE LARGE LAST LAST_VALUE LATERAL LEAD LEADING LEAKPROOF LEAST LEFT LENGTH LEVEL LIBRARY LIKE LIKE_REGEX LIMIT LINK LISTAGG LISTEN LN LOAD LOCAL LOCALTIME LOCALTIMESTAMP LOCATION LOCATOR LOCK LOCKED LOG LOG10 LOGGED LOWER M MAP MAPPING MATCH MATCHED MATCHES MATCH_NUMBER MATCH_RECOGNIZE MATERIALIZED MAX MAXVALUE MEASURES MEMBER MERGE MESSAGE_LENGTH MESSAGE_OCTET_LENGTH MESSAGE_TEXT METHOD MIN MINUTE MINVALUE MOD MODE MODIFIES MODULE MONTH MORE MOVE MULTISET MUMPS NAME NAMES NAMESPACE NATIONAL NATURAL NCHAR NCLOB NESTED NESTING NEW NEXT NFC NFD NFKC NFKD NIL NO NONE NORMALIZE NORMALIZED NOT NOTHING NOTIFY NOTNULL NOWAIT NTH_VALUE NTILE NULL NULLABLE NULLIF NULLS NULL_ORDERING NUMBER NUMERIC OBJECT OCCURRENCE OCCURRENCES_REGEX OCTETS OCTET_LENGTH OF OFF OFFSET OIDS OLD OMIT ON ONE ONLY OPEN OPERATOR OPTION OPTIONS OR ORDER ORDERING ORDINALITY OTHERS OUT OUTER OUTPUT OVER OVERFLOW OVERLAPS OVERLAY OVERRIDING OWNED OWNER P PAD PARALLEL PARAMETER PARAMETER_MODE PARAMETER_NAME PARAMETER_\u200bORDINAL_\u200bPOSITION PARAMETER_\u200bSPECIFIC_\u200bCATALOG PARAMETER_\u200bSPECIFIC_\u200bNAME PARAMETER_\u200bSPECIFIC_\u200bSCHEMA PARSER PARTIAL PARTITION PASCAL PASS PASSING PASSTHROUGH PASSWORD PAST PATH PATTERN PER PERCENT PERCENTILE_CONT PERCENTILE_DISC PERCENT_RANK PERIOD PERMISSION PERMUTE PIPE PLACING PLAN PLANS PLI POLICY PORTION POSITION POSITION_REGEX POWER PRECEDES PRECEDING PRECISION PREPARE PREPARED PRESERVE PREV PRIMARY PRIOR PRIVATE PRIVILEGES PROCEDURAL PROCEDURE PROCEDURES PROGRAM PRUNE PTF PUBLIC PUBLICATION QUOTE QUOTES RANGE RANK READ READS REAL REASSIGN RECHECK RECOVERY RECURSIVE REF REFERENCES REFERENCING REFRESH REGR_AVGX REGR_AVGY REGR_COUNT REGR_INTERCEPT REGR_R2 REGR_SLOPE REGR_SXX REGR_SXY REGR_SYY REINDEX RELATIVE RELEASE RENAME REPEATABLE REPLACE REPLICA REQUIRING RESET RESPECT RESTART RESTORE RESTRICT RESULT RETURN RETURNED_CARDINALITY RETURNED_LENGTH RETURNED_\u200bOCTET_\u200bLENGTH RETURNED_SQLSTATE RETURNING RETURNS REVOKE RIGHT ROLE ROLLBACK ROLLUP ROUTINE ROUTINES ROUTINE_CATALOG ROUTINE_NAME ROUTINE_SCHEMA ROW ROWS ROW_COUNT ROW_NUMBER RULE RUNNING SAVEPOINT SCALAR SCALE SCHEMA SCHEMAS SCHEMA_NAME SCOPE SCOPE_CATALOG SCOPE_NAME SCOPE_SCHEMA SCROLL SEARCH SECOND SECTION SECURITY SEEK SELECT SELECTIVE SELF SEMANTICS SENSITIVE SEQUENCE SEQUENCES SERIALIZABLE SERVER SERVER_NAME SESSION SESSION_USER SET SETOF SETS SHARE SHOW SIMILAR SIMPLE SIN SINH SIZE SKIP SMALLINT SNAPSHOT SOME SORT_DIRECTION SOURCE SPACE SPECIFIC SPECIFICTYPE SPECIFIC_NAME SQL SQLCODE SQLERROR SQLEXCEPTION SQLSTATE SQLWARNING SQRT STABLE STANDALONE START STATE STATEMENT STATIC STATISTICS STDDEV_POP STDDEV_SAMP STDIN STDOUT STORAGE STORED STRICT STRING STRIP STRUCTURE STYLE SUBCLASS_ORIGIN SUBMULTISET SUBSCRIPTION SUBSET SUBSTRING SUBSTRING_REGEX SUCCEEDS SUM SUPPORT SYMMETRIC SYSID SYSTEM SYSTEM_TIME SYSTEM_USER T TABLE TABLES TABLESAMPLE TABLESPACE TABLE_NAME TAN TANH TEMP TEMPLATE TEMPORARY TEXT THEN THROUGH TIES TIME TIMESTAMP TIMEZONE_HOUR TIMEZONE_MINUTE TO TOKEN TOP_LEVEL_COUNT TRAILING TRANSACTION TRANSACTIONS_\u200bCOMMITTED TRANSACTIONS_\u200bROLLED_\u200bBACK TRANSACTION_ACTIVE TRANSFORM TRANSFORMS TRANSLATE TRANSLATE_REGEX TRANSLATION TREAT TRIGGER TRIGGER_CATALOG TRIGGER_NAME TRIGGER_SCHEMA TRIM TRIM_ARRAY TRUE TRUNCATE TRUSTED TYPE TYPES UESCAPE UNBOUNDED UNCOMMITTED UNCONDITIONAL UNDER UNENCRYPTED UNION UNIQUE UNKNOWN UNLINK UNLISTEN UNLOGGED UNMATCHED UNNAMED UNNEST UNTIL UNTYPED UPDATE UPPER URI USAGE USER USER_\u200bDEFINED_\u200bTYPE_\u200bCATALOG USER_\u200bDEFINED_\u200bTYPE_\u200bCODE USER_\u200bDEFINED_\u200bTYPE_\u200bNAME USER_\u200bDEFINED_\u200bTYPE_\u200bSCHEMA USING UTF16 UTF32 UTF8 VACUUM VALID VALIDATE VALIDATOR VALUE VALUES VALUE_OF VARBINARY VARCHAR VARIADIC VARYING VAR_POP VAR_SAMP VERBOSE VERSION VERSIONING VIEW VIEWS VOLATILE WHEN WHENEVER WHERE WHITESPACE WIDTH_BUCKET WINDOW WITH WITHIN WITHOUT WORK WRAPPER WRITE XML XMLAGG XMLATTRIBUTES XMLBINARY XMLCAST XMLCOMMENT XMLCONCAT XMLDECLARATION XMLDOCUMENT XMLELEMENT XMLEXISTS XMLFOREST XMLITERATE XMLNAMESPACES XMLPARSE XMLPI XMLQUERY XMLROOT XMLSCHEMA XMLSERIALIZE XMLTABLE XMLTEXT XMLVALIDATE YEAR YES ZONE".split(" "),
SQL_SERVER:"ADD;ALL;ALTER;AND;ANY;AS;ASC;AUTHORIZATION;BACKUP;BEGIN;BETWEEN;BREAK;BROWSE;BULK;BY;CASCADE;CASE;CHECK;CHECKPOINT;CLOSE;CLUSTERED;COALESCE;COLLATE;COLUMN;COMMIT;COMPUTE;CONSTRAINT;CONTAINS;CONTAINSTABLE;CONTINUE;CONVERT;CREATE;CROSS;CURRENT;CURRENT_DATE;CURRENT_TIME;CURRENT_TIMESTAMP;CURRENT_USER;CURSOR;DATABASE;DBCC;DEALLOCATE;DECLARE;DEFAULT;DELETE;DENY;DESC;DISK;DISTINCT;DISTRIBUTED;DOUBLE;DROP;DUMP;ELSE;END;ERRLVL;ESCAPE;EXCEPT;EXEC;EXECUTE;EXISTS;EXIT;EXTERNAL;FETCH;FILE;FILLFACTOR;FOR;FOREIGN;FREETEXT;FREETEXTTABLE;FROM;FULL;FUNCTION;GOTO;GRANT;GROUP;HAVING;HOLDLOCK;IDENTITY;IDENTITYCOL;IDENTITY_INSERT;IF;IN;INDEX;INNER;INSERT;INTERSECT;INTO;IS;JOIN;KEY;KILL;LEFT;LIKE;LINENO;LOAD;MERGE;NATIONAL;NOCHECK;NONCLUSTERED;NOT;NULL;NULLIF;OF;OFF;OFFSETS;ON;OPEN;OPENDATASOURCE;OPENQUERY;OPENROWSET;OPENXML;OPTION;OR;ORDER;OUTER;OVER;PERCENT;PIVOT;PLAN;PRECISION;PRIMARY;PRINT;PROC;PROCEDURE;PUBLIC;RAISERROR;READ;READTEXT;RECONFIGURE;REFERENCES;REPLICATION;RESTORE;RESTRICT;RETURN;REVERT;REVOKE;RIGHT;ROLLBACK;ROWCOUNT;ROWGUIDCOL;RULE;SAVE;SCHEMA;SECURITYAUDIT;SELECT;SEMANTICKEYPHRASETABLE;SEMANTICSIMILARITYDETAILSTABLE;SEMANTICSIMILARITYTABLE;SESSION_USER;SET;SETUSER;SHUTDOWN;SOME;STATISTICS;SYSTEM_USER;TABLE;TABLESAMPLE;TEXTSIZE;THEN;TO;TOP;TRAN;TRANSACTION;TRIGGER;TRUNCATE;TRY_CONVERT;TSEQUAL;UNION;UNIQUE;UNPIVOT;UPDATE;UPDATETEXT;USE;USER;VALUES;VARYING;VIEW;WAITFOR;WHEN;WHERE;WHILE;WITH;WITHIN GROUP;WRITETEXT".split(";")};var ghr=class{constructor(){this.msDurationPipe=new _.pto;this.localizeNumberPipe=new _.TB;this.errorText=_.sh();this.queryExplanation=_.sh();this.isQueryExplanationRunning=_.uh.required();this.queryExplanationStats=_.Fh(()=>{let a;return(a=this.queryExplanation())==null?void 0:a.queryStats});this.queryExplanationNodes=_.Fh(()=>{let a,b;return(b=(a=this.queryExplanation())==null?void 0:a.nodes)!=null?b:[]});this.exclusiveNodeMetrics=_.Fh(()=>{const a=this.queryExplanationNodes(),b=new Map;for(const e of a){if(e.index===
void 0)continue;let f;const g=(f=e.stats)==null?void 0:f.cost;let n;const q=(n=e.stats)==null?void 0:n.latencyMs;var c=[];let r;for(const u of(r=e.childLinks)!=null?r:[]){var d=u.childIndex;d!==void 0&&a[d]&&c.push(a[d])}d=c.reduce((u,v)=>{let x,B;return u+((B=(x=v.stats)==null?void 0:x.cost)!=null?B:0)},0);c=c.reduce((u,v)=>{let x,B;return u+((B=(x=v.stats)==null?void 0:x.latencyMs)!=null?B:0)},0);b.set(e.index,{exclusiveCost:g===void 0?void 0:Math.max(0,g-d),exclusiveLatency:q===void 0?void 0:Math.max(0,
q-c)})}return b});this.nodesWithExclusiveMetrics=_.Fh(()=>{const a=this.queryExplanationNodes(),b=this.exclusiveNodeMetrics();return a.map(c=>{const d=c.index===void 0?void 0:b.get(c.index);return Object.assign({},c,{stats:Object.assign({},c.stats,{cost:d==null?void 0:d.exclusiveCost,latencyMs:d==null?void 0:d.exclusiveLatency})})})});this.querySummaryNodesInternal=_.Fh(()=>_.$so(this.nodesWithExclusiveMetrics()));this.summaryCardsConfig=_.Fh(()=>[...this.nodesSummaryConfig(),this.querySummaryConfig()]);
this.querySummaryConfig=_.Fh(()=>({type:"query",isDismissible:!1,header:{title:"Query summary"},primaryBodyGroup:{executionStats:this.getQueryExecutionStatsConfig(this.queryExplanationStats())},additionalInfo:{title:"Prominent operators",groups:[{executionStats:[...this.getProminentOperatorsConfig(this.querySummaryNodesInternal())]}]}}));this.nodesSummaryConfig=_.Ug([]);this.extendedNodes=_.Fh(()=>_.ato(this.queryExplanationNodes(),this.querySummaryNodesInternal()))}getQueryExecutionStatsConfig(a){if(!a)return[];
const b=[];b.push({label:"Total elapsed time",value:this.msDurationPipe.transform(a.elapsedTimeMs)},{label:"Rows returned",value:String(this.localizeNumberPipe.transform(a.rowsReturned))});a.cost&&b.push({label:"Cost",value:String(this.localizeNumberPipe.transform(a.cost))});return b}getProminentOperatorsConfig(a){const b=[];a.longestByLatency&&b.push({label:_.M8.latency,value:this.msDurationPipe.transform(a.longestByLatency.value),prominentOperator:{type:"latency",ariaLabel:_.M8.latencyTooltip,tooltip:_.M8.latencyTooltip,
nodeIds:a.longestByLatency.nodeIds}});a.largestByRows&&b.push({label:_.M8.rowCount,value:String(a.largestByRows.value),prominentOperator:{type:"rows",ariaLabel:_.M8.rowCountTooltip,tooltip:_.M8.rowCountTooltip,nodeIds:a.largestByRows.nodeIds}});a.costliest&&b.push({label:_.M8.cost,value:String(a.costliest.value),prominentOperator:{type:"cost",ariaLabel:_.M8.costTooltip,tooltip:_.M8.costTooltip,nodeIds:a.costliest.nodeIds}});return b}onNodesSelected(a){a=a.map(c=>this.extendedNodes().find(d=>{let e;
return String((e=d.index)!=null?e:0)===c})).filter(c=>!!c);let b;this.nodesSummaryConfig.set((b=a.map(c=>{let d,e;return{type:"node",index:String((d=c.index)!=null?d:0),isDismissible:!0,header:this.getHeaderConfig(c),primaryBodyGroup:{executionStats:this.getNodeExecutionStatsConfig(c)},additionalInfo:{title:"Details",isCollapsed:!0,groups:[{executionStats:[...Object.keys((e=c.executionStats)!=null?e:{}).map(f=>{let g;return{label:f,value:(g=c.executionStats)==null?void 0:g[f]}})]}]}}}))!=null?b:[])}getNodeExecutionStatsConfig(a){const b=
[];let c;((c=a.stats)==null?0:c.latencyMs)&&b.push({label:"Latency",value:this.msDurationPipe.transform(a.stats.latencyMs)});let d;((d=a.stats)==null?0:d.rows)&&b.push({label:"Rows returned",value:String(this.localizeNumberPipe.transform(a.stats.rows))});let e;((e=a.stats)==null?0:e.cost)&&b.push({label:"Cost",value:String(this.localizeNumberPipe.transform(a.stats.cost))});return b}getHeaderConfig(a){const b=[];a.isLongestByLatency&&b.push(_.M8.latency);a.isLongestByCpuTime&&b.push(_.M8.cpuTime);
a.isLargest&&b.push(_.M8.rowCount);a.isCostliest&&b.push(_.M8.cost);let c;return{title:(c=a.displayName)!=null?c:"Unknown node",chips:b}}onClearSummaryCards(){this.nodesSummaryConfig.set([])}};ghr.\u0275fac=function(a){return new (a||ghr)};
ghr.\u0275cmp=_.z({type:ghr,selectors:[["sql-query-explanation"]],inputs:{errorText:[1,"errorText"],queryExplanation:[1,"queryExplanation"],isQueryExplanationRunning:[1,"isQueryExplanationRunning"]},decls:5,vars:1,consts:()=>[" Statement is running ",[1,"cfc-height-full"],[1,"sql-explanation-wrapper-container"],["type","error"],[3,"nodes","queryStats","showMinimapControls","summaryCardsConfig","showCollapseSummaryCardsButton"],["type","informational"],[3,"nodesSelected","clearSummaryCards","nodes",
"queryStats","showMinimapControls","summaryCardsConfig","showCollapseSummaryCardsButton"]],template:function(a,b){a&1&&(_.I(0,"div",1)(1,"div",2),_.D(2,ear,3,1,"cfc-message",3)(3,far,1,5,"fr-query-explanation",4)(4,gar,3,0,"cfc-message",5),_.J()());if(a&2){let c;_.y(2);_.E((c=b.errorText())?2:(c=b.queryExplanation())?3:b.isQueryExplanationRunning()?4:-1,c)}},dependencies:[_.Lq,_.Mq,_.Gto],styles:["[_nghost-%COMP%]{position:relative;height:100%;width:100%}.sql-explanation-wrapper-container[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto;position:absolute}"],
changeDetection:0});var rar=()=>[10,20,30,50,100],hhr=class{constructor(){this.RunningState=Gfr;this.icons={penSparkIcon:_.VD};this.ve={CloudSqlStudioResultsTableAutofixButton:273453};this.isExplainErrorEnabled=_.ki(_.jEd);this.queryTextForDuet=_.uh.required();this.allRows=_.uh.required();this.columns=_.uh.required();this.currentPageIndex=_.uh.required();this.rowsPerPage=_.uh.required();this.runningState=_.uh.required();this.errorText=_.uh.required();this.errorLearnMore=_.uh.required();this.warningText=_.sh();this.autofixOptions=
_.uh.required();this.onPaginationChange=_.th();this.autofixClicked=_.th();this.autofixRequiredApisEnabled=_.th();this.autofixButtonOptions=_.Fh(()=>{const a=this.autofixOptions();switch(a==null?void 0:a.state){case "LOADING_SUGGESTIONS":return{cfcIamCheck:[],cfcIamNoPermissionTooltip:"",apiEnabled:!0};case "SHOW_FIX_BUTTON":return a.fixButtonOptions}});this.autofixDisabled=_.Fh(()=>!!this.autofixDisabledTooltip());this.autofixDisabledTooltip=_.Fh(()=>{const a=this.autofixOptions();if((a==null?void 0:
a.state)==="LOADING_SUGGESTIONS")return a.message});this.showErrorMessage=_.Fh(()=>{let a;return((a=this.autofixOptions())==null?void 0:a.state)!=="WAITING_FOR_APPROVAL"})}};hhr.\u0275fac=function(a){return new (a||hhr)};
hhr.\u0275cmp=_.z({type:hhr,selectors:[["sql-query-results-table"]],inputs:{queryTextForDuet:[1,"queryTextForDuet"],allRows:[1,"allRows"],columns:[1,"columns"],currentPageIndex:[1,"currentPageIndex"],rowsPerPage:[1,"rowsPerPage"],runningState:[1,"runningState"],errorText:[1,"errorText"],errorLearnMore:[1,"errorLearnMore"],warningText:[1,"warningText"],autofixOptions:[1,"autofixOptions"]},outputs:{onPaginationChange:"onPaginationChange",autofixClicked:"autofixClicked",autofixRequiredApisEnabled:"autofixRequiredApisEnabled"},
decls:3,vars:1,consts:()=>[" Statement is running ","Learn more"," Statement executed successfully ",[1,"cfc-gutter-base","cfc-text-body"],[3,"type"],["cfcTrackedEvent","","track-type","learnMoreErrorMessage","track-name","click","aria-label","Learn more",3,"cfcDocLink"],[3,"errorText","queryText"],["calloutStepTarget","autofix-validation-error-button-target",3,"options","buttonVe","disabled","disabledTooltip"],["calloutStepTarget","autofix-validation-error-button-target",3,"autofixClicked","requiredApisEnabled",
"options","buttonVe","disabled","disabledTooltip"],[1,"cfc-space-last",3,"type"],[3,"isLoading","showEmptyState","columns","rows","showColumnsChooser","hideTitleContainer","currentPageIndex","pageSizeOptions","rowsPerPage","showJumpToFirstAndLastPageButtons","isfullBleed","fillContainerWidth"],[3,"onPaginationChange","isLoading","showEmptyState","columns","rows","showColumnsChooser","hideTitleContainer","currentPageIndex","pageSizeOptions","rowsPerPage","showJumpToFirstAndLastPageButtons","isfullBleed",
"fillContainerWidth"]],template:function(a,b){a&1&&_.D(0,har,2,0,"div",3)(1,nar,1,1)(2,tar,3,2);if(a&2){let c;_.E((c=b.runningState())===b.RunningState.RUNNING?0:c===b.RunningState.ERROR?1:2)}},dependencies:[_.ho,_.vq,_.HZi,_.Qu,Her,_.hs,_.yB,_.xB,_.Lq,_.Nq,_.Mq,Dfr,Cfr],encapsulation:2,changeDetection:0});var ihr=class{constructor(){this.database=_.uh.required();this.builtInUser=_.sh();this.usingIamAuthn=_.uh.required();this.icon=_.sh(_.NIg);this.tooltip=_.sh("Current user");this.label=_.sh("Switch user/database");this.switchUserOrDatabaseClicked=new _.Ji;this.ve={CloudSqlStudioDisconnectUserButton:200455};this.userDatabaseNote=_.Fh(()=>{const a=this.database();if(this.usingIamAuthn())return _.rk("{DATABASE} (IAM user)",{DATABASE:a});var b=this.builtInUser();return _.rk("{DATABASE} (User: {USER})",
{USER:b,DATABASE:a})})}switchUserOrDatabase(){this.switchUserOrDatabaseClicked.emit()}};ihr.\u0275fac=function(a){return new (a||ihr)};
ihr.\u0275cmp=_.z({type:ihr,selectors:[["sql-user-menu"]],inputs:{database:[1,"database"],builtInUser:[1,"builtInUser"],usingIamAuthn:[1,"usingIamAuthn"],icon:[1,"icon"],tooltip:[1,"tooltip"],label:[1,"label"]},outputs:{switchUserOrDatabaseClicked:"switchUserOrDatabaseClicked"},decls:6,vars:7,consts:()=>[["userMenu",""],["mat-icon-button","","cfcMenuButton","","id","user-menu-trigger","aria-label","Current user","type","button",3,"cfcTooltip","cfcMenuTriggerFor"],["matButtonIcon","",3,"icon"],["ariaLabelledBy",
"user-menu-trigger"],[3,"click","label","ve","veClick","note"]],template:function(a,b){a&1&&(_.I(0,"button",1),_.K(1,"cm-icon",2),_.J(),_.I(2,"cfc-menu",3,0)(4,"cfc-menu-section")(5,"cfc-menu-item",4),_.P("click",function(){return b.switchUserOrDatabase()}),_.J()()());a&2&&(a=_.Yg(3),_.H("cfcTooltip",b.tooltip())("cfcMenuTriggerFor",a),_.y(),_.H("icon",b.icon()),_.y(4),_.H("label",b.label())("ve",b.ve.CloudSqlStudioDisconnectUserButton)("veClick",!0)("note",b.userDatabaseNote()))},dependencies:[_.Qu,
_.as,_.ls,_.Jt,_.xt,_.vt,_.Ht,_.uq,_.fA,_.eA,_.sw,_.qw,_.ow,_.pw,_.rw,_.Ot],encapsulation:2,changeDetection:0});var Wdr=function(a,b){return _.hd(function*(){const {dialect:c}=yield _.ze(a.exploreComponentStore.geminiContext$);return b.startsWith("--")||c==="MYSQL"&&b.startsWith("#")})},Jbr=class extends Xdr{constructor(a,b,c,d,e,f){super();this.geminiEnablementService=a;this.exploreComponentStore=b;this.studioGeminiSettingsService=c;this.pageStore=d;this.generateSqlService=e;this.studioContextsService=f;this.generateCodeEnabled$=_.Ge([this.geminiEnablementService.userHasPermission(),this.geminiEnablementService.isDuetApiEnabled()]).pipe(_.w(g=>
g.every(Boolean)));this.studioGeminiSettings=c.geminiSettings}generateCode({position:a,experience:b,prefix:c,suffix:d}){return _.Ge({generateCodeEnabled:this.generateCodeEnabled$.pipe(_.Ef(1)),nlaContext:this.pageStore.currentTabStore$.pipe(_.w(e=>e==null?void 0:e.getTabState().nlaContext))}).pipe(_.Ef(1),_.A(({generateCodeEnabled:e,nlaContext:f})=>e?this.exploreComponentStore.geminiContext$.pipe(_.A(({schemaStatements:g,dialect:n,versionName:q,resourceId:r,region:u,database:v})=>{q={dbDialect:n,
dbVersion:q};g=war(c,d,g,f);const x=this.getCachedResponse(g,a,b,c,d,q);return x?_.t(x):f?this.studioContextsService.generateQuery({prompt:c,datasourceReference:uar({resourceId:r,region:u,dialect:n,database:v,contextStoreId:f.contextStoreId,contextSetId:f.contextSetId})}).pipe(_.w(B=>[{content:B.generatedQuery}]),Vdr(this,{cacheKey:g,position:a,experience:b,prefix:c,suffix:d,analyticsMetadata:q})):this.generateSqlService.generateSql({experience:b,prefix:c,suffix:d}).pipe(_.w(B=>B.suggestions),Vdr(this,
{cacheKey:g,position:a,experience:b,prefix:c,suffix:d,analyticsMetadata:q}))})):_.t(void 0)))}};var jhr=()=>!1;var khr=function(a,b,{prefix:c,nlaContextInfo:d}){return a.sqlApiService.generateQuery({projectId:b.resourceId.projectId,instanceId:b.resourceId.instanceId,database:b.database,engine:b.dialect,databaseVersion:b.versionName,query:c,schemaDetails:b.schemaDetails,connectionInfo:b.connectionInfo,nlaContextInfo:d}).pipe(_.w(e=>{let f,g,n;return{suggestions:(n=(f=e.sqlGenerateQuery)==null?void 0:(g=f.suggestions)==null?void 0:g.map(({content:q,traceId:r})=>({content:a.formatter.formatQuery(q.trim()),traceId:r})))!=
null?n:[]}}))},Bar=class{constructor(a,b){this.sqlApiService=a;this.exploreComponentStore=b;this.formatter=new Jgr}generateSql(a){return this.exploreComponentStore.geminiContext$.pipe(_.Ef(1),_.A(b=>khr(this,b,a)))}},lhr={provide:Bar,useFactory:Car,deps:[_.CH,b$]};var mhr=class{constructor(){this.databasesDuetEnablementService=_.k(_.q8);this.store=_.k(_.il);this.store.select(_.vEd)}isDuetApiEnabled(){return this.databasesDuetEnablementService.isDuetApiEnabled()}userHasPermission(){return this.databasesDuetEnablementService.userHasPermission()}shouldShowDuetChatDependentElements(){return this.databasesDuetEnablementService.shouldShowDuetChatDependentElements()}};mhr.\u0275fac=function(a){return new (a||mhr)};
mhr.\u0275prov=_.wd({token:mhr,factory:mhr.\u0275fac,providedIn:"root"});var Dar=new _.Iq("45686513");var nhr=function(a){return _.Ge({nlaContext:a.pageStore.currentTabStore$.pipe(_.w(b=>b==null?void 0:b.getTabState().nlaContext)),geminiContext:a.exploreComponentStore.geminiContext$}).pipe(_.Ef(1),_.w(({nlaContext:b,geminiContext:c})=>{if(b)return uar({resourceId:c.resourceId,region:c.region,dialect:c.dialect,database:c.database,contextStoreId:b.contextStoreId,contextSetId:b.contextSetId})}))},Lbr=class extends _.vtm{constructor(a,b,c,d){super();this.pageStore=a;this.exploreComponentStore=b;this.generateSqlService=
c;this.studioContextsService=d}fetchSuggestions(a){return nhr(this).pipe(_.A(b=>{if(b)return this.studioContextsService.generateQuery({prompt:a.prompt,datasourceReference:b}).pipe(_.w(f=>({prompt:a.prompt,originalPrompt:a.prompt,suggestions:[{content:f.generatedQuery}]})));let c,d,e;b=(e=(c=a.context)==null?void 0:(d=c.editorContext)==null?void 0:d.prefix)!=null?e:"";return this.generateSqlService.generateSql({experience:"GENERATE",prefix:Far({editorPrefix:b,prompt:a.prompt})}).pipe(_.w(f=>({prompt:a.prompt,
originalPrompt:a.prompt,suggestions:f.suggestions})))}))}};var ohr={kind:"EDITOR",tabName:"Untitled query",queryState:{tabContentKind:"EDITOR",text:""},icon:_.mCg},phr={kind:"ALLOYDB_GUIDED_SETUP",tabName:"Guided setup",queryState:{tabContentKind:"ALLOYDB_GUIDED_SETUP",guidedSetupId:"EMPTY",text:"",currentStep:0,queryRunStates:new Map},icon:_.yBg,unsavedIndicator:"NEVER_SHOW"},qhr={useInterstitialDialogWhenClosingTab:!1,hasHomeTab:!0,initialTabStates:[ohr],analytics:{successEventName:"executeSqlSuccess",errorEventName:"executeSqlError"},emptyStates:{perTabKind:{[ohr.kind]:ohr,
[phr.kind]:phr},forHomeTab:{tabContentKind:"EDITOR",text:""}}};var rhr=function(a,{step:b,queryText:c}){Gar(a.getTabState())&&a.partialQueryStateChanged({text:c,currentStep:b})},shr=function(a,{savedQueryState:b}){a.partialTabStateChanged({savedQueryState:b})},thr=class extends Pfr{constructor(){super(...arguments);this.resultSectionComponentStore=_.k(a$);this.guidedSetupDdlCompletedSubject=new _.Kf;this.effect(a=>a.pipe(_.cg(({step:b,queryText:c,hasDdlStatement:d=!1})=>{rhr(this,{step:b,queryText:c});this.updateStepRunState({step:b,runningState:"RUNNING"});
this.executeQuery({queryState:Object.assign({},this.assertGuidedSetupTab().queryState,{text:c,currentStep:b}),onSuccess:e=>{this.updateStepRunState({step:b,runningState:"SUCCESS",executionTime:e.formattedExecutionTime});d?this.guidedSetupDdlCompletedSubject.next():this.resultSectionComponentStore.openResultsPanelIfClosed();this.analyticsService.sendEvent({type:"alloydbRunGuidedSetupQuery",name:"success",metadata:{step:b,queryString:c}})},onError:()=>{this.updateStepRunState({step:b,runningState:"ERROR",
executionTime:""});this.resultSectionComponentStore.openResultsPanelIfClosed()}})})));this.updateStepRunState=this.updater((a,{step:b,runningState:c,executionTime:d})=>{if(!Gar(a))return a;const e=new Map(a.queryState.queryRunStates);e.set(b,{step:b,runningState:c,executionTime:d});return Object.assign({},a,{queryState:Object.assign({},a.queryState,{queryRunStates:e})})});this.formattedExecutionTime=this.selectSignal(a=>a.formattedExecutionTime);this.currentGuidedSetupTabState=this.selectSignal(a=>
Gar(a)?a:void 0);this.assertGuidedSetupTab=_.Fh(()=>this.currentGuidedSetupTabState());this.guidedSetupId=this.selectSignal(this.currentGuidedSetupTabState,a=>{if(Gar(a))return a.queryState.guidedSetupId});this.TEST_ONLY={partialTabStateChanged:this.partialTabStateChanged,partialQueryStateChanged:this.partialQueryStateChanged}}};var Vfr=function(a,b,c){const d=Object.assign({},c,{id:b,error:void 0,state:"EMPTY STATE",selectedResultIndex:-1,selectedRowIndex:-1,queryResults:[],queryExplanationState:{result:void 0,error:void 0,state:"EMPTY STATE"}});return _.Rd(a.injector,()=>new thr(d,Rfr(a,d.kind)))},uhr=function(a,b){b=Object.assign({},Rfr(a,"EDITOR"),{queryState:b});Zfr(a,b)},vhr=function(a,b){a.openTabFromQueryNode(b,c=>a.createTabConfigFromStudioQuery(c))},whr=function(a,b){a.openTabFromContextNode(b,c=>a.createTabConfigFromNlaContext(c))},
c$=class extends bgr{constructor(){super(...arguments);_.Fh(()=>{let a;return(a=this.currentTabStore())==null?void 0:a.guidedSetupId()});this.formattedExecutionTime=_.Fh(()=>{let a;return(a=this.currentTabStore())==null?void 0:a.formattedExecutionTime()});_.Jj(this.formattedExecutionTime);this.createTabConfigFromStudioQuery.bind(this);this.createTabConfigFromNlaContext.bind(this)}startQuickTour(a){a.tabContentKind==="EDITOR"&&(a=[Object.assign({},Rfr(this,"EDITOR"),{queryState:a})],Yfr(this,a))}createTabConfigFromStudioQuery(a){return Object.assign({},
Rfr(this,"EDITOR"),{icon:_.mCg,tabName:a.displayName,queryState:{tabContentKind:"EDITOR",text:a.queryString},savedQueryState:{savedQuery:a,initialTabContent:{tabContentKind:"EDITOR",text:a.queryString}}})}createTabConfigFromNlaContext({contextSetDisplayName:a,contextSetId:b,contextStoreId:c}){return Object.assign({},Rfr(this,"EDITOR"),{icon:_.mCg,tabName:a,nlaContext:{contextSetDisplayName:a,contextSetId:b,contextStoreId:c}})}};
c$.\u0275fac=(()=>{let a;return function(b){return(a||(a=_.ie(c$)))(b||c$)}})();c$.\u0275prov=_.wd({token:c$,factory:c$.\u0275fac});var Lar=()=>[],Har=function(a){a=[{key:187,value:`${a.iamAuthnEnabled()}`}];return _.Sj({metadataArray:a})},yhr=class{constructor(){this.fb=_.k(_.kt);this.injector=_.k(_.Ze);this.ve={SqlExploreAuthFormCancelButton:247051,SqlExploreAuthenticateButton:192449,StudioBuiltInAuthRadioToggle:241232,StudioIamAuthRadioToggle:241231,StudioManageUsersMessage:257806};this.messages={MSG_COMMON_CANCEL:"Cancel",MSG_SQL_STUDIO_TABS_RESET_WARNING:"All open Studio tabs and their contents will be lost.",MSG_SQL_STUDIO_CREATE_BUILT_IN_USER_MESSAGE:"Create a user to log in"};
this.iamResource=_.uh.required();this.users=_.sh();this.authDisabledTooltip=_.uh.required();this.databases=_.uh.required();this.iamAuthPermission=_.uh.required();this.authButtonPermission=_.uh.required();this.isDatabaseOptional=_.sh(!0);this.isDatabasesLoading=_.sh(!1);this.authenticateInProgress=_.sh(!1);this.isIncorrectPassword=_.sh(!1);this.isIncorrectDatabase=_.sh(!1);this.hasDatabasesLoadingError=_.sh(!1);this.selectedDatabase=_.sh();this.selectedBuiltInUser=_.sh();this.selectedBuiltInUserPassword=
_.sh();this.displayTabsResetWarning=_.sh(!1);this.resetWarningMessageInput=_.uh(void 0,Object.assign({},{},{alias:"resetWarningMessage"}));this.displayCancelButton=_.sh(!1);this.usersPageLink=_.uh.required();this.iamAuthDisabledTooltip=_.uh.required();this.builtInAuthDisabledTooltip=_.sh();this.showIamAuthRadio=_.uh.required();this.targetedNewBadgeIamFeatureId=_.uh.required();this.userAuthenticated=new _.Ji;this.cancel=new _.Ji;this.userPageLinkClicked=new _.Ji;this.controlNames={userGroup:"userGroup",
databaseGroup:"databaseGroup",passwordGroup:"passwordGroup",authnType:"authnType"};this.AuthnType=xhr;this.resetWarningMessage=_.Fh(()=>{let a;return(a=this.resetWarningMessageInput())!=null?a:"All open Studio tabs and their contents will be lost."});this.iamAuthnEnabled=_.Fh(()=>!_.zl(this.iamAuthDisabledTooltip()));this.builtInAuthDisabled=_.Fh(()=>!!this.builtInAuthDisabledTooltip());this.showBuiltInControls=_.Ug(!1);this.hasSelectableUsers=_.Fh(()=>{let a;return!((a=this.users())==null||!a.some(b=>
!b.disabled))});this.showCreateUserBanner=_.Fh(()=>this.users()!=null&&!this.hasSelectableUsers());this.isIamAuthDisabledAndSelected=_.Fh(()=>!this.iamAuthnEnabled()&&this.form.controls.authnType.value==="iam");this.initialPassword=_.Fh(()=>this.selectedBuiltInUser()?this.selectedBuiltInUserPassword():"");this.initialAuthnType=_.Fh(()=>{let a;return((a=this.form.value.userGroup)==null?0:a.user)?"built-in":this.showIamAuthRadio()&&this.iamAuthnEnabled()?"iam":"built-in"});this.resetPasswordOnUserChange=
!1}ngOnInit(){this.resetPasswordOnUserChange=!!this.initialPassword();this.createForm();this.form.controls.authnType.valueChanges.subscribe(a=>{this.showBuiltInControls.set(a==="built-in");this.showBuiltInControls()?(this.form.controls.userGroup.enable({emitEvent:!1}),this.form.controls.passwordGroup.enable({emitEvent:!1})):(this.form.controls.userGroup.disable(),this.form.controls.passwordGroup.disable())});_.vf(()=>{this.form.controls.passwordGroup.pristine&&this.form.controls.userGroup.pristine&&
this.form.controls.authnType.setValue(this.initialAuthnType())},{injector:this.injector});_.vf(()=>{this.isIamAuthDisabledAndSelected()&&this.form.controls.authnType.setValue("built-in")},{injector:this.injector})}ngOnChanges(a){a.isDatabaseOptional&&this.createForm();a.isIncorrectPassword&&this.isIncorrectPassword()&&this.form.controls.passwordGroup.controls.password.setErrors({incorrectPassword:!0});if(a.isIncorrectDatabase&&this.isIncorrectDatabase()){let b;(b=this.form.controls.databaseGroup.controls.database)==
null||b.setErrors({incorrectDatabase:!0})}}createForm(){var a=this.fb,b=this.isDatabaseOptional(),c=this.selectedDatabase(),d=this.selectedBuiltInUser(),e=this.initialPassword();this.form=a.nonNullable.group({databaseGroup:a.nonNullable.group(_.a4o(a,{multiple:!1,required:!b,initialDatabase:c})),userGroup:a.nonNullable.group(n$q(a,d)),passwordGroup:a.nonNullable.group(g7q(a,e)),authnType:a.nonNullable.control("unset")})}submit(){const a=this.form.value.databaseGroup,b=this.form.value.userGroup,c=
this.form.value.passwordGroup,d=this.form.value.authnType;this.form.controls.passwordGroup.controls.password.setErrors(null);this.form.controls.passwordGroup.controls.password.updateValueAndValidity();let e;(e=this.form.controls.databaseGroup.controls.database)==null||e.setErrors(null);let f;(f=this.form.controls.databaseGroup.controls.database)==null||f.updateValueAndValidity();if(this.form.valid){var g,n,q;this.userAuthenticated.emit({database:(g=a==null?void 0:a.database)!=null?g:"",user:(n=b==
null?void 0:b.user)!=null?n:"",password:(q=c==null?void 0:c.password)!=null?q:"",autoIamAuthn:this.showIamAuthRadio()&&d==="iam"})}}onCancelButtonClick(){this.cancel.emit()}};yhr.\u0275fac=function(a){return new (a||yhr)};
yhr.\u0275cmp=_.z({type:yhr,selectors:[["sql-auth-form"]],inputs:{iamResource:[1,"iamResource"],users:[1,"users"],authDisabledTooltip:[1,"authDisabledTooltip"],isInstanceRunning:"isInstanceRunning",databases:[1,"databases"],databaseSelectDisplayMode:"databaseSelectDisplayMode",iamAuthPermission:[1,"iamAuthPermission"],authButtonPermission:[1,"authButtonPermission"],isDatabaseOptional:[1,"isDatabaseOptional"],isDatabasesLoading:[1,"isDatabasesLoading"],authenticateInProgress:[1,"authenticateInProgress"],
isIncorrectPassword:[1,"isIncorrectPassword"],isIncorrectDatabase:[1,"isIncorrectDatabase"],hasDatabasesLoadingError:[1,"hasDatabasesLoadingError"],selectedDatabase:[1,"selectedDatabase"],selectedBuiltInUser:[1,"selectedBuiltInUser"],selectedBuiltInUserPassword:[1,"selectedBuiltInUserPassword"],displayTabsResetWarning:[1,"displayTabsResetWarning"],resetWarningMessageInput:[1,"resetWarningMessage","resetWarningMessageInput"],displayCancelButton:[1,"displayCancelButton"],usersPageLink:[1,"usersPageLink"],
iamAuthDisabledTooltip:[1,"iamAuthDisabledTooltip"],builtInAuthDisabledTooltip:[1,"builtInAuthDisabledTooltip"],showIamAuthRadio:[1,"showIamAuthRadio"],targetedNewBadgeIamFeatureId:[1,"targetedNewBadgeIamFeatureId"]},outputs:{userAuthenticated:"userAuthenticated",cancel:"cancel",userPageLinkClicked:"userPageLinkClicked"},features:[_.Ln],decls:11,vars:20,consts:()=>[" Authenticate "," Authentication method "," Manage users and passwords from the \ufffd#4\ufffd users page \ufffd/#4\ufffd"," IAM database authentication ",
" Built-in database authentication "," Manage users "," Manage users and their passwords from the \ufffd#2\ufffd users page \ufffd/#2\ufffd",[3,"submit","formGroup"],[1,"cfc-width-base"],[3,"formGroupName","databases","isOptional","isLoading","displayMode","databasesLoadingError"],["type","warning","data-test-id","sql-reset-warning-message"],["message","Authenticating\u2026",3,"inProgress"],["mat-raised-button","","type","submit","color","primary",1,"cfc-space-above-minus-4",3,"ve","veClick","disabled",
"disabledTooltip","cfcIamCheck","cfcIamResource","cfcIamDisableDuringPermissionFetch"],["mat-button","","type","button",1,"cfc-space-above-minus-4",3,"ve","veClick"],[1,"cfc-text-body-strong"],["cfcTrackedEvent","","track-type","StudioUsersPageLinkInManageUsersMessage","track-name","toUsersPageLinkClick",1,"cfc-nowrap",3,"click","cfcRouterLink"],["aria-label","Radio group for the authentication type",3,"formControlName"],[3,"value","cfcIamCheck","cfcIamResource","cfcIamDisableDuringPermissionFetch",
"disabled","disabledTooltip","disabledTooltipRich","ve","veClick","veImpression","veMetadata"],[3,"targetedNewBadgeFeatureId"],[3,"value","ve","veClick","disabled","disabledTooltip"],["type","informational",3,"class","ve","veImpression"],[3,"userSelectionChanged","formGroupName","users"],[3,"formGroupName"],["passwordHint",""],["type","informational",3,"ve","veImpression"],["mat-button","","cfcTrackedEvent","","track-type","StudioCreateBuiltInUserManageUsersButton","track-name","toUsersPageLinkClick",
1,"cfc-nowrap",3,"click","cfcRouterLink"],["cfcTrackedEvent","","track-type","SqlStudioAuthenticationRadioHint","track-name","toUsersPageLinkClick",1,"cfc-nowrap",3,"click","cfcRouterLink"],["mat-button","","type","button",1,"cfc-space-above-minus-4",3,"click","ve","veClick"]],template:function(a,b){a&1&&(_.I(0,"form",7),_.P("submit",function(){return b.submit()}),_.K(1,"cfc-form-submission-error"),_.I(2,"div",8),_.K(3,"sql-database-select",9),_.J(),_.D(4,Iar,12,19),_.D(5,Mar,5,8),_.D(6,Nar,3,1,"cfc-message",
10),_.I(7,"cfc-progress-button",11)(8,"button",12),_.N(9,0),_.J()(),_.D(10,Oar,2,3,"button",13),_.J());a&2&&(_.H("formGroup",b.form),_.y(3),_.H("formGroupName",b.controlNames.databaseGroup)("databases",b.isInstanceRunning?b.databases():_.kh(19,Lar))("isOptional",b.isDatabaseOptional())("isLoading",b.isDatabasesLoading()&&b.isInstanceRunning)("displayMode",b.databaseSelectDisplayMode)("databasesLoadingError",b.hasDatabasesLoadingError()),_.y(),_.E(b.showIamAuthRadio()?4:-1),_.y(),_.E(b.showBuiltInControls()?
5:-1),_.y(),_.E(b.displayTabsResetWarning()?6:-1),_.y(),_.H("inProgress",b.authenticateInProgress()),_.y(),_.H("ve",b.ve.SqlExploreAuthenticateButton)("veClick",!0)("disabled",!b.isInstanceRunning)("disabledTooltip",b.authDisabledTooltip())("cfcIamCheck",b.authButtonPermission())("cfcIamResource",b.iamResource())("cfcIamDisableDuringPermissionFetch",!0),_.y(2),_.E(b.displayCancelButton()?10:-1))},dependencies:[Rdr,_.Qu,_.as,_.ls,_.Jt,_.xt,_.ut,_.Ht,_.Oy,_.My,_.Ly,_.Ny,_.Jy,_.Ky,_.X8,_.yB,_.xB,_.FB,
_.EB,_.GA,_.FA,_.Lq,_.Nq,_.Mq,_.Lt,_.nt,_.Zs,_.Rs,_.Ss,_.ft,_.et,_.ct,_.gu,_.eu,_.Xv,Agr],encapsulation:2,changeDetection:0});var xhr={UNSET:"unset",BUILT_IN:"built-in",IAM:"iam"};var zhr=[[["","disclaimer",""]],[["","headerContent",""]],[["","logo",""]]],Bhr=class{constructor(){this.fb=_.k(_.kt);this.iamPermissionsService=_.k(_.sv);this.injector=_.k(_.Ze);this.ve={StudioAuthPermissionBanner:213124};this.users=_.sh();this.iamResource=_.uh.required();this.pageName=_.uh.required();this.authDisabledTooltip=_.uh.required();this.databases=_.uh.required();this.iamAuthPermission=_.sh("");this.authButtonPermission=_.sh("");this.pagePermissions=_.uh([]);this.isDatabaseOptional=_.sh(!0);
this.isDatabasesLoading=_.sh(!1);this.authenticateInProgress=_.sh(!1);this.isIncorrectPassword=_.sh(!1);this.isIncorrectDatabase=_.sh(!1);this.hasDatabasesLoadingError=_.sh(!1);this.selectedDatabase=_.sh();this.projectId=_.uh.required();this.usersPageLink=_.uh.required();this.iamAuthDisabledTooltip=_.uh.required();this.showIamAuthRadio=_.uh.required();this.targetedNewBadgeIamFeatureId=_.uh.required();this.userAuthenticated=new _.Ji;this.AuthnType=Ahr;this.iamAuthnEnabled=_.Fh(()=>!_.zl(this.iamAuthDisabledTooltip()));
this.showBuiltInControls=_.Ug(!1)}ngOnInit(){this.missingPermissionsMessage=_.rk("You are missing the following permission(s) to use {pageName}.",{pageName:this.pageName()})}};Bhr.\u0275fac=function(a){return new (a||Bhr)};
Bhr.\u0275cmp=_.z({type:Bhr,selectors:[["sql-query-auth"]],inputs:{users:[1,"users"],iamResource:[1,"iamResource"],pageName:[1,"pageName"],authDisabledTooltip:[1,"authDisabledTooltip"],isInstanceRunning:"isInstanceRunning",databases:[1,"databases"],databaseSelectDisplayMode:"databaseSelectDisplayMode",iamAuthPermission:[1,"iamAuthPermission"],authButtonPermission:[1,"authButtonPermission"],pagePermissions:[1,"pagePermissions"],isDatabaseOptional:[1,"isDatabaseOptional"],isDatabasesLoading:[1,"isDatabasesLoading"],
authenticateInProgress:[1,"authenticateInProgress"],isIncorrectPassword:[1,"isIncorrectPassword"],isIncorrectDatabase:[1,"isIncorrectDatabase"],hasDatabasesLoadingError:[1,"hasDatabasesLoadingError"],selectedDatabase:[1,"selectedDatabase"],projectId:[1,"projectId"],usersPageLink:[1,"usersPageLink"],iamAuthDisabledTooltip:[1,"iamAuthDisabledTooltip"],showIamAuthRadio:[1,"showIamAuthRadio"],targetedNewBadgeIamFeatureId:[1,"targetedNewBadgeIamFeatureId"]},outputs:{userAuthenticated:"userAuthenticated"},
features:[_.jh([_.Zx],[_.Zx])],ngContentSelectors:["[disclaimer]","[headerContent]","[logo]"],decls:8,vars:24,consts:[[3,"iamPermissions","ve","veImpression","permissionDeniedMessage","iamResource"],[1,"cfc-flex-container","cfc-flex-justify-start","cfc-flex-space-between-content"],[3,"userAuthenticated","iamResource","iamAuthPermission","authButtonPermission","authDisabledTooltip","authenticateInProgress","isInstanceRunning","databases","isDatabaseOptional","isDatabasesLoading","databaseSelectDisplayMode",
"selectedDatabase","users","usersPageLink","iamAuthDisabledTooltip","showIamAuthRadio","targetedNewBadgeIamFeatureId","isIncorrectPassword","isIncorrectDatabase","hasDatabasesLoadingError"]],template:function(a,b){a&1&&(_.Kg(zhr),_.K(0,"iam-permissions-banner",0),_.Lg(1),_.I(2,"div",1)(3,"div"),_.Lg(4,1),_.I(5,"sql-auth-form",2),_.P("userAuthenticated",function(c){return b.userAuthenticated.emit(c)}),_.J()(),_.I(6,"div"),_.Lg(7,2),_.J()());a&2&&(_.H("iamPermissions",b.pagePermissions())("ve",b.ve.StudioAuthPermissionBanner)("veImpression",
!0)("permissionDeniedMessage",b.missingPermissionsMessage)("iamResource",b.iamResource()),_.y(5),_.H("iamResource",b.iamResource())("iamAuthPermission",b.iamAuthPermission())("authButtonPermission",b.authButtonPermission())("authDisabledTooltip",b.authDisabledTooltip())("authenticateInProgress",b.authenticateInProgress())("isInstanceRunning",b.isInstanceRunning)("databases",b.databases())("isDatabaseOptional",b.isDatabaseOptional())("isDatabasesLoading",b.isDatabasesLoading())("databaseSelectDisplayMode",
b.databaseSelectDisplayMode)("selectedDatabase",b.selectedDatabase())("users",b.users())("usersPageLink",b.usersPageLink())("iamAuthDisabledTooltip",b.iamAuthDisabledTooltip())("showIamAuthRadio",b.showIamAuthRadio())("targetedNewBadgeIamFeatureId",b.targetedNewBadgeIamFeatureId())("isIncorrectPassword",b.isIncorrectPassword())("isIncorrectDatabase",b.isIncorrectDatabase())("hasDatabasesLoadingError",b.hasDatabasesLoadingError()))},dependencies:[yhr,_.Qu,_.ls,_.Jt,_.Mz,_.Kz,_.h6,Ndr],encapsulation:2});
var Ahr={UNSET:"unset",BUILT_IN:"built-in",IAM:"iam"};var Dhr=class extends _.zU{constructor(){super(Chr);this.exploreApi=_.k(Kgr);this.errorHandler=_.k(_.CJ);this.connectionInfo$=this.select(a=>a.connectionInfo);this.userAuthenticationStatus$=this.select(a=>a.userAuthenticationStatus);this.isIncorrectPassword$=this.select(a=>{let b,c;return(c=(b=a.userAuthenticationStatus)==null?void 0:b.isIncorrectPassword)!=null?c:!1});this.isIncorrectDatabase$=this.userAuthenticationStatus$.pipe(_.Te(_.zl),_.w(a=>r$q(a.errorMessage)));this.authenticateInProgress$=
this.select(a=>a.authenticateInProgress);this.startAuthenticating=this.updater(a=>Object.assign({},a,{authenticateInProgress:!0,userAuthenticationStatus:{authenticationDone:!1,status:"UNKNOWN",errorMessage:void 0,isIncorrectPassword:!1}}));this.userAuthenticationComplete=this.updater((a,b)=>Object.assign({},b,{authenticateInProgress:!1}));this.verifyCredentialsInSitu=this.effect(a=>a.pipe(_.A(b=>{const c=b.queryContext,d=b.iamDbFlagName,e=c.connectionInfo;this.startAuthenticating();return this.exploreApi.validateCredentials(c).pipe(_.BU(()=>
{this.userAuthenticationComplete({connectionInfo:e,userAuthenticationStatus:{status:"SUCCESS",authenticationDone:!0,isIncorrectPassword:!1}})},f=>{var g=f instanceof _.MId?f.type:null;const n=g==="INCORRECT_BUILTIN_USER_PASSWORD",q=r$q(f.message);this.userAuthenticationComplete({connectionInfo:void 0,userAuthenticationStatus:{status:"FAILURE",authenticationDone:!0,errorMessage:f.message,isIncorrectPassword:n}});q||n||(g?(g=s$q({iamDbFlagName:d}).get(g),this.errorHandler.handleError({error:Error(g)})):
this.errorHandler.handleError({error:f}));return _.ye(()=>f)}))})))}};Dhr.\u0275fac=function(a){return new (a||Dhr)};Dhr.\u0275prov=_.wd({token:Dhr,factory:Dhr.\u0275fac});var Chr={connectionInfo:void 0,userAuthenticationStatus:{authenticationDone:!1,status:"UNKNOWN",errorMessage:void 0,isIncorrectPassword:!1},authenticateInProgress:!1};var Ehr=()=>[],Fhr=class{constructor(){this.MSG_SQL_STUDIO_AUTH_DIALOG_TITLE="Log in to your database";this.data=_.k(_.eq);this.dialogRef=_.k(_.Vp);this.router=_.k(_.to);this.localStore=_.k(Dhr);this.isIncorrectPassword=_.Kj(this.localStore.isIncorrectPassword$,{initialValue:!1});this.isIncorrectDatabase=_.Kj(this.localStore.isIncorrectDatabase$,{initialValue:!1});this.authenticateInProgress=_.Kj(this.localStore.authenticateInProgress$,{initialValue:!1});this.displayTabsResetWarning=this.data.preexistingConnectionInfo?
!0:!1;this.selectedDatabase$=this.data.selectedDatabase$.pipe(_.w(e=>{let f,g;return e?e:(g=(f=this.data.preexistingConnectionInfo)==null?void 0:f.database)!=null?g:""}));this.missingPermissionsMessage=_.rk("You are missing the following permission(s) to use {pageName}.",{pageName:this.data.pageName});let a,b;this.preexsistingUserName=(b=(a=this.data.preexistingConnectionInfo)==null?void 0:a.user)!=null?b:"";let c,d;this.preexsistingUserPassword=(d=(c=this.data.preexistingConnectionInfo)==null?void 0:
c.password)!=null?d:"";this.destroyRef=_.k(_.$e);this.router.events.pipe(_.Ij(this.destroyRef)).subscribe(e=>{e instanceof _.Wh&&this.dialogRef.close({connectionInfo:void 0,closingContext:3})});this.localStore.userAuthenticationStatus$.subscribe(e=>{(e==null?0:e.authenticationDone)&&e.status==="SUCCESS"&&this.localStore.connectionInfo$.pipe(_.Ef(1)).subscribe(f=>{this.dialogRef.close({connectionInfo:f,closingContext:0})})})}onUserAuthenticated(a,b){this.localStore.verifyCredentialsInSitu({queryContext:t$q(a,
b),iamDbFlagName:a.iamDbFlagName})}};Fhr.\u0275fac=function(a){return new (a||Fhr)};
Fhr.\u0275cmp=_.z({type:Fhr,selectors:[["studio-auth-dialog"]],standalone:!1,features:[_.jh([Dhr])],decls:21,vars:56,consts:()=>[" Choose a database and user account to securely access your data. \ufffd#4\ufffdLearn more\ufffd/#4\ufffd",["matDialogTitle","",1,"cfc-space-first"],[1,"cfc-space-above-minus-4","cfc-space-last"],["cfcTrackedEvent","","track-type","SqlStudioAuthPageCaption","track-name","learnMoreLinkClick","aria-label","Learn more about database authentication, opens in new window","target",
"_blank",3,"cfcDocLink"],["matDialogContent","",1,"cfc-space-below-minus-6"],["ngProjectAs","[disclaimer]",5,["","disclaimer",""],1,"cfc-max-width-base",3,"type"],[3,"iamPermissions","permissionDeniedMessage","iamResource"],[3,"userAuthenticated","userPageLinkClicked","cancel","iamResource","iamAuthPermission","authButtonPermission","authDisabledTooltip","authenticateInProgress","isInstanceRunning","databases","isDatabaseOptional","isDatabasesLoading","databaseSelectDisplayMode","users","usersPageLink",
"iamAuthDisabledTooltip","builtInAuthDisabledTooltip","showIamAuthRadio","targetedNewBadgeIamFeatureId","isIncorrectPassword","isIncorrectDatabase","hasDatabasesLoadingError","selectedDatabase","selectedBuiltInUser","selectedBuiltInUserPassword","displayTabsResetWarning","resetWarningMessage","displayCancelButton"]],template:function(a,b){if(a&1){const c=_.l();_.I(0,"cfc-heading",1);_.R(1);_.I(2,"p",2);_.Bg(3,0);_.K(4,"a",3);_.Cg();_.J()();_.I(5,"div",4);_.D(6,Par,3,2,"cfc-message",5);_.U(7,"async");
_.K(8,"iam-permissions-banner",6);_.Hg(9);_.U(10,"async");_.I(11,"sql-auth-form",7);_.U(12,"async");_.U(13,"async");_.U(14,"async");_.U(15,"async");_.U(16,"async");_.U(17,"async");_.U(18,"async");_.U(19,"async");_.U(20,"async");_.P("userAuthenticated",function(d){_.m(c);const e=_.Jg(9);return _.p(b.onUserAuthenticated(e,d))})("userPageLinkClicked",function(){b.dialogRef.close({connectionInfo:void 0,closingContext:2})})("cancel",function(){b.dialogRef.close({connectionInfo:void 0,closingContext:1})});
_.J()()}if(a&2){let c;_.y();_.S(" ",b.MSG_SQL_STUDIO_AUTH_DIALOG_TITLE," ");_.y(3);_.H("cfcDocLink",b.data.authDocLink);_.y(2);_.E((c=_.W(7,31,b.data.disclaimer$))?6:-1,c);_.y(2);_.H("iamPermissions",b.data.pagePermissions)("permissionDeniedMessage",b.missingPermissionsMessage)("iamResource",b.data.iamResource);_.y();_.Ig(_.W(10,33,b.data.exploreContext$));_.y(2);let d,e,f,g,n,q;_.H("iamResource",b.data.iamResource)("iamAuthPermission",b.data.iamAuthPermission)("authButtonPermission",b.data.authButtonPermission)("authDisabledTooltip",
b.data.authDisabledTooltip)("authenticateInProgress",b.authenticateInProgress())("isInstanceRunning",_.W(12,36,b.data.isInstanceRunning$))("databases",(d=_.W(13,38,b.data.databases$))!=null?d:_.kh(54,Ehr))("isDatabaseOptional",b.data.isDatabaseOptional)("isDatabasesLoading",(e=_.W(14,40,b.data.isDatabasesLoading$))!=null?e:!0)("databaseSelectDisplayMode",(f=_.W(15,42,b.data.databaseSelectDisplayMode$))!=null?f:"SINGLE_DROPDOWN")("users",_.W(16,44,b.data.users$))("usersPageLink",(g=_.W(17,46,b.data.usersPageLink$))!=
null?g:_.kh(55,Ehr))("iamAuthDisabledTooltip",(n=_.W(18,48,b.data.iamAuthDisabledTooltip$))!=null?n:void 0)("builtInAuthDisabledTooltip",b.data.builtInAuthDisabledTooltip)("showIamAuthRadio",b.data.showIamAuthRadio)("targetedNewBadgeIamFeatureId",b.data.targetedNewBadgeIamFeatureId)("isIncorrectPassword",b.isIncorrectPassword())("isIncorrectDatabase",b.isIncorrectDatabase())("hasDatabasesLoadingError",_.W(19,50,b.data.hasDatabasesLoadingError$))("selectedDatabase",(q=_.W(20,52,b.selectedDatabase$))!=
null?q:"")("selectedBuiltInUser",b.preexsistingUserName)("selectedBuiltInUserPassword",b.preexsistingUserPassword)("displayTabsResetWarning",b.displayTabsResetWarning)("resetWarningMessage",b.data.resetWarningMessage)("displayCancelButton",!0)}},dependencies:()=>[yhr,_.hs,_.xB,_.Bv,_.Kz,_.kq,_.lq,_.Lq,_.Mq,_.fo],encapsulation:2,changeDetection:0});var Sar={key:"isTopLevelPgDatabase",value:"true"},Uar={key:"isSearchResult",value:"true"},Hhr=class{constructor(a,b,c){this.api=a;this.queryContext$=b;this.authErrorAction=c}fetchNodes(a){return this.queryContext$.pipe(_.Ef(1),_.A(b=>this.api.fetchNodes(b,a.map(c=>{let d;return Object.assign({},c,{segmentPath:[...((d=c.segmentPath)!=null?d:[])].slice(Qar(b.dialect)?1:0)})})).pipe(_.w(c=>({root:c,databaseName:b.connectionInfo.database,dialect:b.dialect})))),_.Mf(),_.w(({root:b,databaseName:c,dialect:d})=>
Tar(b,c,d)),_.wf(b=>{let c;return((c=b.message)==null?0:c.startsWith("Authentication error"))?_.ye(()=>Object.assign({},b,{customAction:this.authErrorAction})):_.ye(()=>b)}))}search(a){return this.queryContext$.pipe(_.Ef(1),_.A(b=>Ghr(this.api,b,a).pipe(_.w(c=>({searchResponse:c,databaseName:b.connectionInfo.database,dialect:b.dialect})))),_.w(({searchResponse:b,databaseName:c,dialect:d})=>{c=Tar(b.subtree,c,d);let e,f;return{searchResultCompleteness:(e=b.searchResultCompleteness)!=null?e:"COMPLETE",
appliedSearchText:(f=b.appliedSearchText)!=null?f:a,subtree:c}}),_.wf(b=>{let c;return((c=b.message)==null?0:c.startsWith("Authentication error"))?_.ye(()=>Object.assign({},b,{customAction:this.authErrorAction})):_.ye(()=>b)}))}};var Ihr={["alter-configuration"]:()=>{throw Error("ww");},["alter-procedure"]:()=>{throw Error("xw");},["alter-rebuild-table"]:()=>{throw Error("yw");},["alter-regorganize-index"]:()=>{throw Error("zw");},["alter-trigger"]:()=>{throw Error("Aw");},["create-constraint"]:()=>{throw Error("Bw");},["delete-constraint"]:()=>{throw Error("Cw");},["list-configuration"]:()=>{throw Error("Dw");},["alter-database"]:()=>{throw Error("Ew");},["alter-event"]:()=>{throw Error("Fw");},["create-database"]:()=>{throw Error("Gw");
},["create-event"]:()=>{throw Error("Hw");},["delete-database"]:()=>{throw Error("Iw");},["delete-event"]:()=>{throw Error("Jw");},unknown:()=>{throw Error("Kw");},["add-column"]:a=>"ALTER TABLE\n"+`  "${a.schemaName}"."${a.tableName}"\n`+"ADD COLUMN\n  <column_name> <col_type>;\n",["add-foreign-key"]:a=>"ALTER TABLE\n"+`  "${a.schemaName}"."${a.tableName}"\n`+"ADD FOREIGN KEY\n  <column_name>;\n",["add-primary-key"]:a=>"ALTER TABLE\n"+`  "${a.schemaName}"."${a.tableName}"\n`+"ADD PRIMARY KEY\n  <column_name>;\n",
["alter-column"]:a=>"ALTER TABLE\n"+`  "${a.schemaName}"."${a.tableName}"\n`+"ALTER COLUMN\n"+`  "${a.columnName}"\n`+"SET <options>;\n",["alter-function"]:a=>"ALTER FUNCTION\n"+`  "${a.schemaName}"."${a.functionName}";\n`,["alter-model"]:a=>"CALL\n  google_ml.alter_model(\n"+`    model_id => '${a.modelName}',\n`+"    model_request_url => 'REQUEST_URL',\n    model_provider => 'PROVIDER_ID',\n    model_type => 'MODEL_TYPE',\n    model_qualified_name => 'MODEL_QUALIFIED_NAME',\n    model_auth_type => 'AUTH_TYPE',\n    model_auth_id => 'AUTH_ID',\n    generate_headers_fn => 'GENERATE_HEADER_FUNCTION',\n    model_in_transform_fn => 'INPUT_TRANSFORM_FUNCTION',\n    model_out_transform_fn => 'OUTPUT_TRANSFORM_FUNCTION'\n  );\n",
["alter-schema"]:a=>`ALTER SCHEMA "${a.schemaName}" `,["alter-type"]:a=>"ALTER TYPE\n"+`  "${a.schemaName}"."${a.typeName}"\n`+"AS (<type_definition>);\n",["alter-view"]:a=>`CREATE OR REPLACE VIEW "${a.schemaName}"."${a.viewName}"\n`+"AS <SELECT_query>;\n",["call-model"]:a=>a.modelType==="text_embedding"?`SELECT google_ml.embedding('${a.modelName}', 'your_text_here');\n`:"SELECT "+`google_ml.predict_row('${a.modelName}', 'your_text_here');\n`,["create-extension"]:()=>'-- Use "vector" as the extension_name to support vector types (via pgvector)\nCREATE EXTENSION <extension_name>;',
["create-function"]:a=>`CREATE FUNCTION "${a.schemaName}".<function_name>\n`+"RETURNS <data_type>\n<function_body>;\n",["create-index"]:a=>"CREATE INDEX\n  <index_name>\nON\n"+`  "${a.schemaName}"."${a.tableName}"\n`+"  (<column_name>);\n",["create-model"]:()=>"------------ Optional ------------\nCREATE OR REPLACE FUNCTION generate_headers(\n  model_id VARCHAR(100), response_json JSON)\nRETURNS JSON\nLANGUAGE plpgsql\nAS $$\nDECLARE\n  transformed_output REAL[];\nBEGIN\n  -- code to add Auth token to API request\nRETURN json_build_object('Authorization', 'Bearer <your token>')::JSON;\nEND;\n$$;\n\nCALL\n  google_ml.create_model(\n    -- User selected locally unique identifier for the model\n    model_id => 'MODEL_ID',\n    -- The http endpoint you would like to reach\n    model_request_url => 'REQUEST_URL',\n    model_provider => 'custom',\n    -- Options: 'text_embedding', 'generic' (default)\n    model_type => 'generic',\n    -- Options:\n    -- Required if your model has a configuration through a custom HTTP header.\n    generate_headers_fn => 'generate_headers');\n",
["create-procedure"]:a=>"CREATE PROCEDURE\n"+`"${a.schemaName}".<procedure_name(parameter_list)>\n`+"LANGUAGE plpgsql\nAS $$\nDECLARE <variables>\nBEGIN <procedure_body>\nEND; $$\n",["create-schema"]:()=>"CREATE SCHEMA <schema_name>;",["create-sequence"]:a=>`CREATE SEQUENCE "${a.schemaName}".<sequence_name>\n`+"<sequence_definition>\n;",["create-table"]:a=>`CREATE TABLE "${a.schemaName}".<table_name> (\n`+" <col1> <datatype1>\n);",["create-trigger"]:a=>"CREATE TRIGGER <trigger_name> <trigger_time> <trigger_event>\n"+
`ON "${a.schemaName}"."${a.tableName}"\n`+"FOR EACH ROW <trigger_body>\n;",["create-type"]:a=>`CREATE TYPE "${a.schemaName}".<type_name>\n`+"AS (<type_definition>)\n;",["create-view"]:a=>`CREATE VIEW "${a.schemaName}".<view_name> AS <query>;`,["delete-column"]:a=>"ALTER TABLE\n"+`  "${a.schemaName}"."${a.tableName}"\n`+"DROP COLUMN\n"+`  "${a.columnName}";\n`,["delete-extension"]:a=>`DROP EXTENSION ${a.extensionName};`,["delete-function"]:a=>"DROP FUNCTION\n"+`  "${a.schemaName}"."${a.functionName}";\n`,
["delete-index"]:a=>"DROP INDEX\n"+`  "${a.schemaName}"."${a.indexName}";\n`,["delete-key"]:a=>"ALTER TABLE\n"+`  "${a.schemaName}"."${a.tableName}"\n`+"DROP CONSTRAINT\n"+`  "${a.keyName}";\n`,["delete-model"]:a=>`CALL google_ml.drop_model('${a.modelName}');\n`,["delete-procedure"]:a=>"DROP PROCEDURE\n"+`  "${a.schemaName}"."${a.procedureName}";\n`,["delete-schema"]:a=>`DROP SCHEMA "${a.schemaName}";`,["delete-sequence"]:a=>"DROP SEQUENCE\n"+`  "${a.schemaName}"."${a.sequenceName}";\n`,["delete-table"]:a=>
"DROP TABLE\n"+`  "${a.schemaName}"."${a.tableName}";\n`,["delete-trigger"]:a=>"DROP TRIGGER\n"+`  "${a.triggerName}"\n`+`ON "${a.schemaName}"."${a.tableName}";\n`,["delete-type"]:a=>"DROP TYPE\n"+`  "${a.schemaName}"."${a.typeName}";\n`,["delete-view"]:a=>`DROP VIEW "${a.schemaName}"."${a.viewName}";\n`,["query-table"]:a=>"SELECT * FROM\n"+`  "${a.schemaName}"."${a.tableName}" LIMIT 1000;\n`,["query-view"]:a=>"SELECT * FROM\n"+`  "${a.schemaName}"."${a.viewName}" LIMIT 1000;\n`},Jhr={["alter-configuration"]:()=>
{throw Error("ww");},["alter-procedure"]:()=>{throw Error("xw");},["alter-rebuild-table"]:()=>{throw Error("yw");},["alter-regorganize-index"]:()=>{throw Error("zw");},["alter-trigger"]:()=>{throw Error("Aw");},["create-constraint"]:()=>{throw Error("Bw");},["delete-constraint"]:()=>{throw Error("Cw");},["list-configuration"]:()=>{throw Error("Dw");},["alter-model"]:()=>{throw Error("Lw");},["alter-schema"]:()=>{throw Error("Mw");},["alter-type"]:()=>{throw Error("Nw");},["call-model"]:()=>{throw Error("Ow");
},["create-extension"]:()=>{throw Error("Pw");},["create-model"]:()=>{throw Error("Qw");},["create-schema"]:()=>{throw Error("Rw");},["create-sequence"]:()=>{throw Error("Sw");},["create-type"]:()=>{throw Error("Tw");},["delete-extension"]:()=>{throw Error("Uw");},["delete-model"]:()=>{throw Error("Vw");},["delete-schema"]:()=>{throw Error("Ww");},["delete-sequence"]:()=>{throw Error("Xw");},["delete-type"]:()=>{throw Error("Yw");},unknown:()=>{throw Error("Kw");},["add-column"]:a=>"ALTER TABLE\n"+
`  \`${a.databaseName}\`.\`${a.tableName}\`\n`+"ADD COLUMN\n  <column_name> <col_type>;\n",["add-foreign-key"]:a=>"ALTER TABLE\n"+`  \`${a.databaseName}\`.\`${a.tableName}\`\n`+"ADD FOREIGN KEY\n  (<column_name>)\nREFERENCES <table_name>(<column_name>);\n",["add-primary-key"]:a=>"ALTER TABLE\n"+`  \`${a.databaseName}\`.\`${a.tableName}\`\n`+"ADD PRIMARY KEY\n  (<column_name>);\n",["alter-column"]:a=>"ALTER TABLE\n"+`  \`${a.databaseName}\`.\`${a.tableName}\`\n`+"ALTER COLUMN\n"+`  ${a.columnName}\n`+
"SET <options>;\n",["alter-database"]:a=>`ALTER DATABASE \`${a.databaseName}\` `,["alter-event"]:a=>`ALTER EVENT \`${a.databaseName}\`.\`${a.eventName}\`;\n`,["alter-function"]:a=>"ALTER FUNCTION\n"+`  \`${a.databaseName}\`.\`${a.functionName}\`;\n`,["alter-view"]:a=>`CREATE OR REPLACE VIEW \`${a.databaseName}\`.\`${a.viewName}\`\n`+"AS <SELECT_query>;\n",["create-database"]:()=>"CREATE DATABASE <database_name>;\n",["create-event"]:a=>`CREATE EVENT \`${a.databaseName}\`.\`<event_name>\`\n`+"  ON SCHEDULE <schedule>\n  DO\n    <event_body>;\n",
["create-function"]:a=>`CREATE FUNCTION \`${a.databaseName}\`.<function_name>\n`+"RETURNS <data_type>\n<function_body>;\n",["create-index"]:a=>"CREATE INDEX\n  <index_name>\nON\n"+`  \`${a.databaseName}\`.\`${a.tableName}\`\n`+"  (<column_name>);\n",["create-procedure"]:a=>"CREATE PROCEDURE\n"+`\`${a.schemaName}\`.<procedure_name(parameter_list)>\n`+"<procedure_body>;\n",["create-table"]:a=>`CREATE TABLE \`${a.databaseName}\`.<table_name> (\n`+" <col1> <datatype1>\n);",["create-trigger"]:a=>"CREATE TRIGGER <trigger_name> <trigger_time> <trigger_event>\n"+
`ON \`${a.databaseName}\`.\`${a.tableName}\`\n`+"FOR EACH ROW <trigger_body>\n;",["create-view"]:a=>`CREATE VIEW \`${a.databaseName}\`.<view_name> AS <query>;`,["delete-column"]:a=>"ALTER TABLE\n"+`  \`${a.databaseName}\`.\`${a.tableName}\`\n`+"DROP COLUMN\n"+`  \`${a.columnName}\`;\n`,["delete-database"]:a=>`DROP DATABASE \`${a.databaseName}\`;`,["delete-event"]:a=>`DROP EVENT \`${a.databaseName}\`.\`${a.eventName}\`;\n`,["delete-function"]:a=>"DROP FUNCTION\n"+`  \`${a.databaseName}\`.\`${a.functionName}\`;\n`,
["delete-index"]:a=>`DROP INDEX \`${a.indexName}\` ON\n  \`${a.databaseName}\`.\`${a.tableName}\`;\n`,["delete-key"]:a=>a.keyName==="PRIMARY"?"ALTER TABLE\n"+`  \`${a.databaseName}\`.\`${a.tableName}\`\n`+"DROP\n  PRIMARY KEY;\n":"ALTER TABLE\n"+`  \`${a.databaseName}\`.\`${a.tableName}\`\n`+"DROP CONSTRAINT\n"+`  \`${a.keyName}\`;\n`,["delete-procedure"]:a=>"DROP PROCEDURE\n"+`  \`${a.databaseName}\`.\`${a.procedureName}\`;\n`,["delete-table"]:a=>"DROP TABLE\n"+`  \`${a.databaseName}\`.\`${a.tableName}\`;\n`,
["delete-trigger"]:a=>"DROP TRIGGER\n"+`  \`${a.databaseName}\`.\`${a.triggerName}\`;\n`,["delete-view"]:a=>`DROP VIEW \`${a.databaseName}\`.\`${a.viewName}\`;\n`,["query-table"]:a=>"SELECT * FROM\n"+`  \`${a.databaseName}\`.\`${a.tableName}\` LIMIT 1000;\n`,["query-view"]:a=>"SELECT * FROM\n"+`  \`${a.schemaName}\`.\`${a.viewName}\` LIMIT 1000;\n`},Khr={["alter-database"]:()=>{throw Error("Ew");},["alter-event"]:()=>{throw Error("Fw");},["alter-model"]:()=>{throw Error("Lw");},["call-model"]:()=>
{throw Error("Ow");},["create-database"]:()=>{throw Error("Gw");},["create-event"]:()=>{throw Error("Hw");},["create-model"]:()=>{throw Error("Qw");},["delete-database"]:()=>{throw Error("Iw");},["delete-event"]:()=>{throw Error("Jw");},["delete-model"]:()=>{throw Error("Vw");},unknown:()=>{throw Error("Kw");},["add-column"]:a=>"ALTER TABLE\n"+`  "${a.schemaName}"."${a.tableName}"\n`+"ADD\n  <column_name> <col_type>;\n",["add-foreign-key"]:a=>"ALTER TABLE\n"+`  "${a.schemaName}"."${a.tableName}"\n`+
"ADD CONSTRAINT <constraint_name>\n  FOREIGN KEY(<column_name>);\n",["add-primary-key"]:a=>"ALTER TABLE\n"+`  "${a.schemaName}"."${a.tableName}"\n`+"ADD CONSTRAINT <constraint_name>\n  PRIMARY KEY(<column_name>);\n",["alter-column"]:a=>"ALTER TABLE\n"+`  "${a.schemaName}"."${a.tableName}"\n`+"ALTER COLUMN\n"+`  "${a.columnName}" <col_type>;\n`,["alter-configuration"]:a=>"ALTER DATABASE SCOPED CONFIGURATION SET\n"+`  ${a.configurationName} = <value>;\n`,["alter-function"]:a=>`CREATE OR ALTER FUNCTION "${a.schemaName}"."${a.functionName}"(<function_parameters>)\n`+
"RETURNS <data_type>\n<function_body>;\n",["alter-procedure"]:a=>"CREATE OR ALTER PROCEDURE\n"+`"${a.schemaName}"."${a.procedureName}" <parameter_list>\n`+"AS\nBEGIN\n <procedure_body>\nEND;\n",["alter-rebuild-table"]:a=>"ALTER INDEX\n"+`  "${a.indexName}"\n`+"ON\n"+`  "${a.databaseName}"."${a.tableName}"\n`+"  REBUILD;\n",["alter-regorganize-index"]:a=>"ALTER INDEX\n"+`  "${a.indexName}"\n`+"ON\n"+`  "${a.databaseName}"."${a.tableName}"\n`+"  REORGANIZE;\n",["alter-schema"]:a=>`ALTER SCHEMA "${a.schemaName}"\n`,
["alter-trigger"]:a=>`ALTER TRIGGER "${a.triggerName}"\nON "${a.schemaName}"."${a.tableName}"\n`+"(FOR| AFTER| INSTEAD OF) <trigger_event> AS <trigger_body>\n;",["alter-type"]:a=>"ALTER TYPE\n"+`  "${a.schemaName}"."${a.typeName}"\n`+"AS (<type_definition>);\n",["alter-view"]:a=>`CREATE OR ALTER VIEW "${a.schemaName}"."${a.viewName}"\n`+"AS <select_query>;\n",["create-constraint"]:a=>"ALTER TABLE\n"+`  "${a.schemaName}"."${a.tableName}"\n`+"ADD CONSTRAINT <constraint_name>\n  <constraint_type>(<column_name>);\n",
["create-extension"]:()=>'-- Use "vector" as the extension_name to support vector types (via pgvector)\nCREATE EXTENSION <extension_name>;\n',["create-function"]:a=>`CREATE FUNCTION "${a.schemaName}".<function_name>(<function_parameters>)\n`+"RETURNS <data_type>\n<function_body>;\n",["create-index"]:a=>"CREATE INDEX\n  <index_name>\nON\n"+`  "${a.schemaName}"."${a.tableName}"\n`+"  (<column_name>);\n",["create-procedure"]:a=>"CREATE PROCEDURE\n"+`"${a.schemaName}".<procedure_name> <parameter_list>\n`+
"AS\nBEGIN\n <procedure_body>\nEND;\n",["create-schema"]:()=>"CREATE SCHEMA <schema_name>;\n",["create-sequence"]:a=>`CREATE SEQUENCE "${a.schemaName}".<sequence_name>\n`+"<sequence_definition>\n;",["create-table"]:a=>`CREATE TABLE "${a.schemaName}".<table_name> (\n`+" <col1> <datatype1>\n);\n",["create-trigger"]:a=>"CREATE TRIGGER <trigger_name>\n"+`ON "${a.schemaName}"."${a.tableName}"\n`+"(FOR| AFTER| INSTEAD OF) <trigger_event> AS <trigger_body>\n;",["create-type"]:a=>`CREATE TYPE "${a.schemaName}".<type_name>\n`+
"AS (<type_definition>)\n;",["create-view"]:a=>`CREATE VIEW "${a.schemaName}".<view_name> AS <select_query>;\n`,["delete-column"]:a=>"ALTER TABLE\n"+`  "${a.schemaName}"."${a.tableName}"\n`+"DROP COLUMN\n"+`  "${a.columnName}";\n`,["delete-constraint"]:a=>"ALTER TABLE\n"+`  "${a.schemaName}"."${a.tableName}"\n`+"DROP CONSTRAINT\n"+`  "${a.keyName}";\n`,["delete-extension"]:a=>`DROP EXTENSION ${a.extensionName};\n`,["delete-function"]:a=>"DROP FUNCTION\n"+`  "${a.schemaName}"."${a.functionName}";\n`,
["delete-index"]:a=>`DROP INDEX ${a.indexName}\nON "${a.schemaName}"."${a.tableName}";\n`,["delete-key"]:a=>"ALTER TABLE\n"+`  "${a.schemaName}"."${a.tableName}"\n`+"DROP CONSTRAINT\n"+`  "${a.keyName}";\n`,["delete-procedure"]:a=>"DROP PROCEDURE\n"+`  "${a.schemaName}"."${a.procedureName}";\n`,["delete-schema"]:a=>`DROP SCHEMA "${a.schemaName}";\n`,["delete-sequence"]:a=>"DROP SEQUENCE\n"+`  "${a.schemaName}"."${a.sequenceName}";\n`,["delete-table"]:a=>"DROP TABLE\n"+`  "${a.schemaName}"."${a.tableName}";\n`,
["delete-trigger"]:a=>"DROP TRIGGER\n"+`  "${a.triggerName}"\n`,["delete-type"]:a=>"DROP TYPE\n"+`  "${a.schemaName}"."${a.typeName}";\n`,["delete-view"]:a=>`DROP VIEW "${a.schemaName}"."${a.viewName}";\n`,["list-configuration"]:()=>"SELECT * FROM sys.database_scoped_configurations;\n",["query-table"]:a=>"SELECT TOP 1000 * FROM\n"+`  "${a.schemaName}"."${a.tableName}";\n`,["query-view"]:a=>"SELECT TOP 1000 * FROM\n"+`  "${a.schemaName}"."${a.viewName}";\n`};var Lhr=class{constructor(a){this.pageStore=a}getIcon(a){return Xar(a)}getDisplayText(a){if(!v$q.has(a.nodeType))return Z9(a);switch(a.nodeType){case "KEY":var b=Z9(a);a=Var(a,"constraintType");return a==="PRIMARY KEY"?_.rk("{keyName} (Primary)",{keyName:b}):a==="FOREIGN KEY"?_.rk("{keyName} (Foreign)",{keyName:b}):b;case "DATABASE":case "MYSQL_SYS_SCHEMA":case "MODEL":case "SYS_SCHEMA":case "SCHEMA":return b=Z9(a),Var(a,"IS_SELECTED")==="true"?_.rk("{databaseName} (Default)",{databaseName:b}):b;
case "SCHEMAS_COLLECTION":return"Schema";case "SYS_SCHEMA_TABLES_COLLECTION":case "TABLES_COLLECTION":return"Tables";case "VIEWS_COLLECTION":case "SYS_SCHEMA_VIEWS_COLLECTION":return"Views";case "FUNCTIONS_COLLECTION":return"Functions";case "PROCEDURES_COLLECTION":return"Procedures";case "SEQUENCES_COLLECTION":return"Sequences";case "EVENTS_COLLECTION":return"Events";case "EXTENSIONS_COLLECTION":return"Extensions";case "COLUMNS_COLLECTION":return"Columns";case "KEYS_COLLECTION":return"Keys";case "INDEXES_COLLECTION":return"Indexes";
case "TRIGGERS_COLLECTION":return"Triggers";case "TYPES_COLLECTION":return"Types";case "CONSTRAINTS_COLLECTION":return"Constraints";case "CONFIGURATIONS_COLLECTION":return"Configurations";case "MODELS_COLLECTION":return"Models";case "ROOT":case "TABLE":case "COLUMN":case "INDEX":case "VIEW":case "CONSTRAINT":case "CONFIGURATION":case "SYS_SCHEMA_TABLE":case "SYS_SCHEMA_VIEW":case "FUNCTION":case "TYPE":case "PROCEDURE":case "TRIGGER":case "SEQUENCE":case "EVENT":case "EXTENSION":case "DATABASES_COLLECTION":case "SYS_SCHEMA_FUNCTIONS_COLLECTION":case "SYS_SCHEMA_PROCEDURES_COLLECTION":case "SYS_SCHEMA_FUNCTION":case "SYS_SCHEMA_PROCEDURE":case "COLUMN_COMMENTS_COLLECTION":case "COLUMN_COMMENT":return Z9(a);
default:_.ob(a.nodeType,void 0)}}getTooltip(a){if(a=Yar(a))return{cfcTooltip:a,cfcTooltipRich:!0,cfcTooltipInteractive:!0}}getMenuModel(a){if(v$q.has(a.nodeType))return this.getMenu(this.getMenuConfig()[a.nodeType],a)}getMenuTemplate(){}getMenu(a,b){if(a!=null&&a.length)return new _.lw({sections:a.map(c=>new _.mw({hasSeparator:c.hasSeparator,items:this.getItems(c.items,b)}))})}getItems(a,b){return a.map(c=>new _.nw({label:c.label,action:()=>{if(c.action)c.action(b);else{var d=c.templateType,e=Zar(b),
f=Zar(b);a:{if(v$q.has(b.nodeType))switch(b.nodeType){case "TABLE":var g=Z9(b);break a;case "COLUMNS_COLLECTION":case "INDEXES_COLLECTION":case "KEYS_COLLECTION":case "CONSTRAINTS_COLLECTION":case "TRIGGERS_COLLECTION":g=b.segmentPath[b.segmentPath.length-2];break a;case "COLUMN":case "INDEX":case "TRIGGER":case "CONSTRAINT":case "KEY":g=b.segmentPath[b.segmentPath.length-3];break a;case "ROOT":case "DATABASE":case "SCHEMAS_COLLECTION":case "SCHEMA":case "TABLES_COLLECTION":case "VIEWS_COLLECTION":case "SYS_SCHEMA_TABLE":case "SYS_SCHEMA_VIEW":case "SYS_SCHEMA_TABLES_COLLECTION":case "SYS_SCHEMA_VIEWS_COLLECTION":case "FUNCTIONS_COLLECTION":case "PROCEDURES_COLLECTION":case "SEQUENCES_COLLECTION":case "CONFIGURATIONS_COLLECTION":case "TYPES_COLLECTION":case "EVENTS_COLLECTION":case "EXTENSIONS_COLLECTION":case "VIEW":case "FUNCTION":case "TYPE":case "CONFIGURATION":case "PROCEDURE":case "SEQUENCE":case "EVENT":case "EXTENSION":case "SYS_SCHEMA":case "DATABASES_COLLECTION":case "MYSQL_SYS_SCHEMA":case "MODELS_COLLECTION":case "MODEL":case "SYS_SCHEMA_FUNCTIONS_COLLECTION":case "SYS_SCHEMA_PROCEDURES_COLLECTION":case "SYS_SCHEMA_FUNCTION":case "SYS_SCHEMA_PROCEDURE":case "COLUMN_COMMENT":case "COLUMN_COMMENTS_COLLECTION":break;
default:_.ob(b.nodeType,void 0)}g=void 0}e={schemaName:e,databaseName:f,tableName:g,columnName:Z9(b),indexName:Z9(b),viewName:Z9(b),functionName:Z9(b),typeName:Z9(b),procedureName:Z9(b),triggerName:Z9(b),sequenceName:Z9(b),eventName:Z9(b),extensionName:Z9(b),keyName:Z9(b),configurationName:Z9(b),modelName:Z9(b),modelType:Var(b,"MODEL_TYPE")};d=(0,this.getDDLTemplate()[d])(e);uhr(this.pageStore,{text:d,tabContentKind:"EDITOR"})}},icon:c.icon,subMenu:this.getMenu(c.children,b)}))}},Mhr={DATABASES_COLLECTION:[],
EVENT:[],EVENTS_COLLECTION:[],MYSQL_SYS_SCHEMA:[],SYS_SCHEMA_FUNCTIONS_COLLECTION:[],SYS_SCHEMA_PROCEDURES_COLLECTION:[],SYS_SCHEMA_FUNCTION:[],SYS_SCHEMA_PROCEDURE:[],ROOT:[],DATABASE:[],CONSTRAINT:[],CONSTRAINTS_COLLECTION:[],COLUMN_COMMENTS_COLLECTION:[],COLUMN_COMMENT:[],CONFIGURATION:[],CONFIGURATIONS_COLLECTION:[],SCHEMAS_COLLECTION:[{items:[{label:"Create schema",templateType:"create-schema"}]}],SCHEMA:[{hasSeparator:!0,items:[{label:"Alter schema",templateType:"alter-schema"}]},{items:[{label:"Delete schema",
templateType:"delete-schema",icon:_.gA}]}],SYS_SCHEMA:[],TABLES_COLLECTION:[{items:[{label:"Create table",templateType:"create-table"}]}],COLUMNS_COLLECTION:[{items:[{label:"Add column",templateType:"add-column"}]}],COLUMN:[{hasSeparator:!0,items:[{label:"Alter column",templateType:"alter-column"}]},{items:[{label:"Delete column",templateType:"delete-column",icon:_.gA}]}],VIEWS_COLLECTION:[{items:[{label:"Create view",templateType:"create-view"}]}],SYS_SCHEMA_TABLES_COLLECTION:[],SYS_SCHEMA_VIEWS_COLLECTION:[],
FUNCTIONS_COLLECTION:[{items:[{label:"Create function",templateType:"create-function"}]}],PROCEDURES_COLLECTION:[{items:[{label:"Create procedure",templateType:"create-procedure"}]}],EXTENSIONS_COLLECTION:[{items:[{label:"Create extension",templateType:"create-extension"}]}],EXTENSION:[{items:[{label:"Delete extension",templateType:"delete-extension",icon:_.gA}]}],KEYS_COLLECTION:[{items:[{label:"Add primary key",templateType:"add-primary-key"},{label:"Add foreign key",templateType:"add-foreign-key"}]}],
KEY:[{items:[{label:"Delete key",templateType:"delete-key",icon:_.gA}]}],INDEXES_COLLECTION:[{items:[{label:"Create index",templateType:"create-index"}]}],SEQUENCES_COLLECTION:[{items:[{label:"Create sequence",templateType:"create-sequence"}]}],TYPES_COLLECTION:[{items:[{label:"Create type",templateType:"create-type"}]}],TRIGGERS_COLLECTION:[{items:[{label:"Create trigger",templateType:"create-trigger"}]}],TABLE:[{hasSeparator:!0,items:[{label:"Query",templateType:"query-table",icon:_.gCg}]},{items:[{label:"Delete table",
templateType:"delete-table",icon:_.gA}]}],INDEX:[{items:[{label:"Delete index",templateType:"delete-index",icon:_.gA}]}],VIEW:[{items:[{label:"Alter view",templateType:"alter-view"}]},{hasSeparator:!0,items:[{label:"Query",templateType:"query-view",icon:_.gCg}]},{items:[{label:"Delete view",templateType:"delete-view",icon:_.gA}]}],SYS_SCHEMA_TABLE:[{items:[{label:"Query",templateType:"query-table",icon:_.gCg}]}],SYS_SCHEMA_VIEW:[{items:[{label:"Query",templateType:"query-view",icon:_.gCg}]}],FUNCTION:[{hasSeparator:!0,
items:[{label:"Alter function",templateType:"alter-function"}]},{items:[{label:"Delete function",templateType:"delete-function",icon:_.gA}]}],TYPE:[{hasSeparator:!0,items:[{label:"Alter type",templateType:"alter-type"}]},{items:[{label:"Delete type",templateType:"delete-type",icon:_.gA}]}],PROCEDURE:[{items:[{label:"Delete procedure",templateType:"delete-procedure",icon:_.gA}]}],TRIGGER:[{items:[{label:"Delete trigger",templateType:"delete-trigger",icon:_.gA}]}],SEQUENCE:[{items:[{label:"Delete sequence",
templateType:"delete-sequence",icon:_.gA}]}],MODELS_COLLECTION:[{items:[{label:"Register model",templateType:"create-model"}]}],MODEL:[{items:[{label:"Call model",templateType:"call-model"}]},{hasSeparator:!0,items:[{label:"Alter model",templateType:"alter-model"}]},{items:[{label:"Delete model",templateType:"delete-model",icon:_.gA}]}]};var Obr=class extends Lhr{constructor(a,b){super(a);this.subtaskService=b}getDDLTemplate(){return Jhr}getMenuConfig(){return Object.assign({},Mhr,{DATABASE:[{hasSeparator:!0,items:[{label:"Alter database",templateType:"alter-database"}]},{items:[{label:"Delete database",templateType:"delete-database",icon:_.gA}]}],DATABASES_COLLECTION:[{items:[{label:"Create database",templateType:"create-database"},...(_.ki(_.Pud)?[{label:"Import data",action:()=>{this.subtaskService.openDynamic((0,_.wl)("QbcQMd").then(()=>
_.C0),{disableBackdropClick:!0,ve:266298,analyticsEventType:"sqlImportSubtask",analyticsEventMetadata:[{key:92,value:_.rH("MySQL")}]})}}]:[])]}],EVENT:[{hasSeparator:!0,items:[{label:"Alter event",templateType:"alter-event"},{label:"Delete event",templateType:"delete-event",icon:_.gA}]}],EVENTS_COLLECTION:[{items:[{label:"Create event",templateType:"create-event"}]}],SCHEMA:[],SCHEMAS_COLLECTION:[]})}};var Nbr=class extends Lhr{constructor(a,b){super(a);this.subtaskService=b}getDDLTemplate(){return Ihr}getMenuConfig(){return Object.assign({},Mhr,{DATABASE:_.ki(_.Pud)?[{items:[{label:"Import data",action:()=>{this.subtaskService.openDynamic((0,_.wl)("QbcQMd").then(()=>_.C0),{disableBackdropClick:!0,ve:266298,analyticsEventType:"sqlImportSubtask",analyticsEventMetadata:[{key:92,value:_.rH("PostgreSQL")}]})}}]}]:[]})}};var Pbr=class extends Lhr{constructor(a,b){super(a);this.subtaskService=b}getDDLTemplate(){return Khr}getMenuConfig(){return Object.assign({},Mhr,{DATABASE:_.ki(_.Pud)?[{items:[{label:"Import data",action:()=>{this.subtaskService.openDynamic((0,_.wl)("QbcQMd").then(()=>_.C0),{disableBackdropClick:!0,ve:266298,analyticsEventType:"sqlImportSubtask",analyticsEventMetadata:[{key:92,value:_.rH("SQL Server")}]})}}]}]:[],CONSTRAINT:[{items:[{label:"Delete constraint",templateType:"delete-constraint",icon:_.gA}]}],
CONSTRAINTS_COLLECTION:[{items:[{label:"Create constraint",templateType:"create-constraint"}]}],CONFIGURATION:[{items:[{label:"Alter configuration",templateType:"alter-configuration"}]}],CONFIGURATIONS_COLLECTION:[{items:[{label:"List configuration",templateType:"list-configuration"}]}],PROCEDURE:[{hasSeparator:!0,items:[{label:"Alter procedure",templateType:"alter-procedure"}]},{items:[{label:"Delete procedure",templateType:"delete-procedure",icon:_.gA}]}],TRIGGER:[{hasSeparator:!0,items:[{label:"Alter trigger",
templateType:"alter-trigger"}]},{items:[{label:"Delete trigger",templateType:"delete-trigger",icon:_.gA}]}],INDEX:[{items:[{label:"Alter and reorganize index",templateType:"alter-regorganize-index"}]},{hasSeparator:!0,items:[{label:"Alter and rebuild index",templateType:"alter-rebuild-table"}]},{items:[{label:"Delete index",templateType:"delete-index",icon:_.gA}]}]})}};var Nhr=[[["","header",""]],[["","homeTab",""]],[["","dynamicTabs",""]],[["","guidedSetupTab",""]],[["","editorTopPanel",""]]],obr=a=>({src:a,colorScheme:"light"}),pbr=a=>({src:a,colorScheme:"dark",filterPreset:"invert"}),nbr=(a,b)=>[a,b],Ohr={MYSQL:"mysql",POSTGRESQL:"pgsql",SQL_SERVER:"sql"},Phr={MYSQL:"MYSQL",POSTGRESQL:"POSTGRESQL",SQL_SERVER:"SQL_SERVER"},Qhr={EXPLAIN_ONLY:"EXPLAIN_ONLY",RESULTS_ONLY:"RESULTS_ONLY",ALL:"ALL"},$ar=function(a){const b={header:"Switch user/database?",body:"You have one or more queries still running. Switching database /user will terminate those queries. Do you want to continue?",
confirmButtonText:"Continue"};a.pageStore.isQueryRunning$.pipe(_.Ef(1)).subscribe(c=>{c?a.dialogService.confirm(b).pipe(_.A(d=>d.afterClosed()),_.w(d=>!(d==null||!d.confirmed))).subscribe(d=>{d&&a.switchUserOrDatabase()}):a.switchUserOrDatabase()})},ubr=function(a,b){a.selectedResultTabIndex.set(b);const c=a.currentTabId();b===1&&a.lastQueryModeByTabId.get(c)==="ALL"&&(a.pageStore.explainQuery({tabId:c,queryState:Rhr(a,a.currentTabStore().queryState()),onSuccess:()=>{},onError:a.openResults}),a.lastQueryModeByTabId.delete(c))},
Dbr=function(a,b){let c;a.analyticsService.sendEvent({type:"databaseStudio",name:"duetExplainClicked",metadata:{queryLength:b.length,dialect:(c=a.exploreContext())==null?void 0:c.dialect}});a.exploreComponentStore.exploreContext$.pipe(_.Ef(1)).subscribe(({dialect:d})=>{_.hE(a.duetService,{userMessage:`Explain the intent of the ${d} query for me.`,additionalDetails:b},{disableEntitlementCheck:!0})})},Ebr=function(a,{text:b}){let c,d;if(((c=a.currentTabStore())==null?void 0:(d=c.queryState())==null?
void 0:d.tabContentKind)==="EDITOR"){let e;(e=a.currentTabStore())==null||e.partialQueryStateChanged({text:b})}},Fbr=function(a,{savedQuery:b}){let c;(c=a.currentTabStore())==null||shr(c,{savedQueryState:{savedQuery:b,initialTabContent:{text:b.queryString,tabContentKind:"EDITOR"}}});Shr(a)},Shr=function(a){let b;(b=a.objectExplorer)==null||b.refresh()},Thr=function(a,b,c=!1){b=Object.assign({},b,{preexistingConnectionInfo:a.credentials(),exploreContext$:a.exploreComponentStore.exploreContext$});if(!a.dialog.getDialogById("EXPLORE_AUTH_DIALOG"))return a.dialog.open(Fhr,
{id:"EXPLORE_AUTH_DIALOG",injector:a.injector,data:b,disableClose:c})},Uhr=function(a){_.Ge([a.codeEditorManager.latestValidationResult$,a.pageStore.latestExecutionResult$,a.exploreComponentStore.exploreContext$]).pipe(_.Te(([b,c])=>!!b&&!!c&&c.queryState.tabContentKind==="EDITOR"&&b.queryText===c.queryState.text),_.w(([b,c,d])=>({type:"databaseStudio",name:"studioQueryValidationResult",metadata:Object.assign({},c.analyticsMetadata,{validationResult:b.validityStatus,validationErrorCode:b.errorCode,
isExecutionSuccess:c.isSuccessful,isEngineBackedValidation:d.isEngineBackedValidation})})),_.ag(a.destroy$)).subscribe(b=>{a.analyticsService.sendEvent(b)})},Rhr=function(a,b){return a.selectedQueryText().trim()===""||b.tabContentKind!=="EDITOR"?b:Object.assign({},b,{text:a.selectedQueryText()})},Vhr=function(a,b){a.exploreComponentStore.exploreContext$.pipe(_.Ef(1)).subscribe(({dialect:c})=>{c={dialect:c,tabsCount:a.pageStore.tabsCount()};a.analyticsService.sendEvent(b?_.iYd("sqlStudioAuthDialog",
c):_.qH("sqlStudioAuthDialog",c))})},Whr=class{constructor(){this.injector=_.k(_.Ze);this.pageStore=_.k(c$);this.analyticsService=_.k(_.jp);this.studioGeminiSettingsService=_.k(xgr);this.exploreComponentStore=_.k(b$);this.resultStore=_.k(a$);this.codeEditorManager=_.k(fhr);this.dialogService=_.k(_.Ez);this.dialog=_.k(_.fq);this.geminiEnablementService=_.k(mhr);this.sectionNavService=_.k(_.bB);this.duetService=_.k(_.iE);this.duetEnablementService=_.k(_.q8);this.genSqlCardDataFetcher=_.k(Lbr);this.subtaskService=
_.k(_.Hz);this.authDialogOptions=_.sh(null);this.useModalForInitialAuthentication=_.sh(!1);this.editorTabCalloutStepTargetId=_.uh.required();this.searchBarType=_.sh("DISABLED");this.newTabMenuItems=_.uh([]);this.isQueryExplanationSupported=_.sh(!1);this.fixMyQueryProduct=_.sh();this.hasDdlStatementFn=_.sh(jhr);this.disclaimerMessageContext=_.sh(null);this.enableSaveQuery=_.sh(!1);this.enableContexts=_.sh(!1);this.authenticationCancelled=new _.Ji;this.authenticationCompleted=new _.Ji;this.userOrDatabaseSwitched=
new _.Ji;this.selectedResultTabIndex=_.Ug(0);this.queryText=_.Fh(()=>{let b;const c=(b=this.currentTabStore())==null?void 0:b.queryState();if((c==null?void 0:c.tabContentKind)==="EDITOR"||(c==null?void 0:c.tabContentKind)==="ALLOYDB_GUIDED_SETUP")return c.text});this.isExplanationTabSelected=_.Fh(()=>this.selectedResultTabIndex()===1);this.destroy$=new _.Kf;this.lastQueryModeByTabId=new Map;this.studioCodeEditor=_.wh(rer);this.MSG_COMMON_LEARN_MORE="Learn more";this.monacoLanguage$=this.exploreComponentStore.exploreContext$.pipe(_.w(({dialect:b})=>
Ohr[b]));this.showQuickTour$=this.pageStore.quickTourStarted$;this.currentTabId=_.Kj(this.pageStore.currentTabId$);this.currentTabStore=this.pageStore.currentTabStore;this.currentTabStore$=this.pageStore.currentTabStore$;this.config$=_.Ge({tabsButtonsStates:this.pageStore.tabsButtonsStates$});this.currentTabIsUnsaved=_.Fh(()=>{let b,c;return(c=(b=this.currentTabStore())==null?void 0:b.isQueryUnsaved())!=null?c:!1});this.resultsConfig$=_.Ge({pageSize:this.resultStore.currentRowsPerPage$,pageIndex:this.resultStore.currentPageIndex$});
this.resultsConfig=_.Kj(this.resultsConfig$);this.downloadData=_.Fh(()=>{const b=this.currentTabStore();if(b){var c=b.selectedResultRows(),d=b.selectedResultColumns();return{runningState:b.runningState(),columns:d,rows:c}}});this.resultSectionDownloadData=_.Fh(()=>this.isExplanationTabSelected()?void 0:this.downloadData());this.resultSectionFormattedExecutionTime=_.Fh(()=>{let b,c;return this.isExplanationTabSelected()?"":(c=(b=this.currentTabStore())==null?void 0:b.formattedExecutionTime())!=null?
c:""});this.explanationResultConfig$=this.currentTabStore$.pipe(_.Te(_.zl),_.A(b=>_.Ge({queryExplanation:b.explainQueryResult$,error:b.explainQueryError$,isExplainQueryRunning:b.isExplainQueryRunning$,explainQueryState:b.explainQueryState$})));this.RunningState=Gfr;this.QueryMode=Qhr;this.isExplanationEmpty=_.Fh(()=>{let b;return((b=this.explanationResultConfig())==null?void 0:b.explainQueryState)==="EMPTY STATE"});this.explanationResultConfig=_.Kj(this.explanationResultConfig$);this.resultSelectorOptions=
_.Fh(()=>{let b,c;return((c=(b=this.currentTabStore())==null?void 0:b.queryResults())!=null?c:[]).map((d,e)=>({id:e,label:`Result ${e+1}`}))});this.showResultSelection=_.Fh(()=>{var b;const c=(b=this.currentTabStore())==null?void 0:b.isRunning();b=this.resultSelectorOptions();return!c&&b.length>1});this.bottomPanelSize$=this.resultStore.bottomPanelSize$;this.MSG_SQL_EXPLORE_RESULTS="Results";this.MSG_SQL_EXPLORE_EXPLANATION="Explanation";this.currentStudioQueryRef=_.Fh(()=>{let b;return(b=this.currentTabStore())==
null?void 0:b.studioQueryRef()});this.credentials=_.Kj(this.exploreComponentStore.connectionInfo$,{requireSync:!0});this.nlaContextSetsDisabledReason=_.Fh(()=>{let b;if((b=this.credentials())==null||!b.autoIamAuthn)return"To use this feature please log in using IAM authentication.";let c,d;if(((c=this.exploreContext())==null?0:c.requireDataApiAccessForContexts)&&((d=this.exploreContext())==null||!d.dataApiAccessEnabled))return"To use this feature, enable Data API access for this instance."});this.exploreContext=
_.Kj(this.exploreComponentStore.exploreContext$);this.geminiContext=_.Kj(this.exploreComponentStore.geminiContext$);this.autofixOptions=_.Ug();this.selectedQueryText=_.Ug("");this.analyticsMetadata=_.Fh(()=>{const b=this.exploreContext();if(b)return[{key:460,value:b.dialect},{key:461,value:b.versionName}]});this.objectExplorerConfig$=this.exploreComponentStore.exploreContext$.pipe(_.w(({dialect:b})=>({renderer:Qbr(b,this.pageStore,this.subtaskService),fetcher:new Hhr(this.exploreApi,this.exploreComponentStore.queryContext$,
{label:"Switch user/database",onClick:()=>{$ar(this)},ve:243211})})));this.duetSettings=this.studioGeminiSettingsService.geminiSettings;this.showFixMyQuerySettingMenuItem=_.Fh(()=>this.fixMyQueryProduct()!==void 0);this.currentDatabase=_.Kj(this.exploreComponentStore.currentDatabase$,{requireSync:!0});this.isDisclaimerDismissed=_.Kj(this.exploreComponentStore.isDisclaimerDismissed$,{requireSync:!0});this.showEmptyState=_.Kj(this.exploreComponentStore.showObjectExplorerEmptyState$,{requireSync:!0});
this.showDisclaimer=_.Fh(()=>!this.isDisclaimerDismissed()&&this.disclaimerMessageContext());this.userHasGeminiGenerateCodePermissions$=this.geminiEnablementService.userHasPermission();this.queryModeMenu=new _.lw({sections:[new _.mw({items:[new _.nw({label:"Explanation only",action:()=>{this.onRunQuery("EXPLAIN_ONLY")}}),new _.nw({label:"Results only",action:()=>{this.onRunQuery("RESULTS_ONLY")}})]})]});this.queryButtonMenuIfSupported=_.Fh(()=>this.isQueryExplanationSupported()?this.queryModeMenu:
void 0);this.shouldShowSqlGen$=_.Ge([this.geminiEnablementService.isDuetApiEnabled(),this.userHasGeminiGenerateCodePermissions$]).pipe(_.w(([b,c])=>b&&c));this.shouldShowExplainQuery$=this.geminiEnablementService.shouldShowDuetChatDependentElements();this.dataFetcher$=this.shouldShowSqlGen$.pipe(_.Te(b=>b),_.w(()=>this.genSqlCardDataFetcher));this.ve={CloudSqlStudioUserMenuButton:196948};this.exploreApi=_.k(Kgr);this.openResults=()=>{this.resultStore.openResultsPanelIfClosed()};this.openResultsAndRefreshObjectExplorer=
()=>{Shr(this);this.openResults()};this.fixMyQueryParams=_.Fh(()=>{const b=this.fixMyQueryProduct();if(b){var c=this.geminiContext();if(c){var d;if((d=this.duetSettings())!=null&&d.isFixQueryEnabled)return{projectId:c.resourceId.projectId,instanceName:c.resourceId.instanceId,productVersion:c.versionName,databaseDefinition:c.databaseDefinition,product:b,dialect:Phr[c.dialect],connectionInfo:c.connectionInfo}}}});this.currentTabNlaContext=_.Fh(()=>{let b,c;return(b=this.currentTabStore())==null?void 0:
(c=b.getTabState())==null?void 0:c.nlaContext});this.sqlGenChipText=_.Fh(()=>{var b=this.currentTabNlaContext();b=this.enableContexts()&&b?b.contextSetDisplayName:void 0;return i7q(b)});this.sqlGenCardTitleOverride=_.Fh(()=>{const b=this.currentTabNlaContext();return this.enableContexts()&&b?i7q(b.contextSetDisplayName):void 0});const a=_.vf(()=>{if(!this.credentials()&&this.useModalForInitialAuthentication()&&this.authDialogOptions()&&this.exploreContext()){var b;(b=Thr(this,this.authDialogOptions(),
!0))==null||b.afterClosed().subscribe(c=>{a.destroy();if(c){var d=c.connectionInfo;switch(c.closingContext){case 0:this.exploreComponentStore.connectionInfoChanged(d);this.authenticationCompleted.emit(d==null?void 0:d.database);this.fetchDatabaseObjects();break;case 1:this.authenticationCancelled.emit()}}})}});Uhr(this)}onNewTab(a){this.pageStore.newTab(a!=null?a:"EDITOR")}onRunQuery(a){const b={tabId:_.Qz(this.currentTabId(),"tabId should be defined when running a query"),queryState:Rhr(this,this.currentTabStore().queryState())};
this.lastQueryModeByTabId.set(b.tabId,a);a==="EXPLAIN_ONLY"?(this.resultStore.setSelectedTabIndex(1),this.selectedResultTabIndex.set(1),this.pageStore.explainQuery(Object.assign({},b,{onSuccess:()=>{this.pageStore.clearResultsState(b.tabId);(this.hasDdlStatementFn()(b)?this.openResultsAndRefreshObjectExplorer:this.openResults)()},onError:this.openResults}))):(this.resultStore.setSelectedTabIndex(0),this.selectedResultTabIndex.set(0),this.pageStore.executeQuery(Object.assign({},b,{onSuccess:()=>{this.pageStore.clearExplanationState(b.tabId);
(this.hasDdlStatementFn()(b)?this.openResultsAndRefreshObjectExplorer:this.openResults)()},onError:this.openResults})));this.resultStore.resetOnRunQuery()}updatePagination(a){this.resultStore.updatePagination(a)}fetchDatabaseObjects(){this.exploreComponentStore.fetchDatabaseObjects()}dismissDisclaimer(){this.exploreComponentStore.dismissDisclaimer()}switchUserOrDatabase(){this.userOrDatabaseSwitched.emit();let a;(a=Thr(this,this.authDialogOptions()))==null||a.afterClosed().subscribe(b=>{const c=(b==
null?void 0:b.closingContext)===0;if(c){this.exploreComponentStore.connectionInfoChanged(b.connectionInfo);$fr(this.pageStore);let d;this.authenticationCompleted.emit((d=b.connectionInfo)==null?void 0:d.database);_.af(()=>{Shr(this)},{injector:this.injector})}Vhr(this,c)})}onNodeSelected(a){(a==null?void 0:a.nodeType)==="STUDIO_QUERY_NODE_TYPE_QUERY"&&vhr(this.pageStore,a);(a==null?void 0:a.nodeType)==="STUDIO_CONTEXT_NODE_TYPE_CONTEXT"&&whr(this.pageStore,a)}ngAfterViewInit(){this.sectionNavService.setExpandedMode(!1)}ngOnDestroy(){this.destroy$.next();
this.destroy$.complete()}toggleCodeGeneration(a){vgr(this.studioGeminiSettingsService,a)}toggleFixQuery(a){wgr(this.studioGeminiSettingsService,a)}autofixClicked(a){this.studioCodeEditor().autofix(a)}};Whr.\u0275fac=function(a){return new (a||Whr)};
Whr.\u0275cmp=_.z({type:Whr,selectors:[["sql-explore"]],viewQuery:function(a,b){a&1&&(_.Wg(b.studioCodeEditor,rer,5),_.Rg(sfr,5));if(a&2){_.Xg();let c;_.Sg(c=_.Tg())&&(b.objectExplorer=c.first)}},hostAttrs:[1,"cfc-flex-layout-column"],inputs:{authDialogOptions:[1,"authDialogOptions"],useModalForInitialAuthentication:[1,"useModalForInitialAuthentication"],editorTabCalloutStepTargetId:[1,"editorTabCalloutStepTargetId"],searchBarType:[1,"searchBarType"],newTabMenuItems:[1,"newTabMenuItems"],isQueryExplanationSupported:[1,
"isQueryExplanationSupported"],fixMyQueryProduct:[1,"fixMyQueryProduct"],hasDdlStatementFn:[1,"hasDdlStatementFn"],disclaimerMessageContext:[1,"disclaimerMessageContext"],enableSaveQuery:[1,"enableSaveQuery"],enableContexts:[1,"enableContexts"]},outputs:{authenticationCancelled:"authenticationCancelled",authenticationCompleted:"authenticationCompleted",userOrDatabaseSwitched:"userOrDatabaseSwitched"},features:[_.jh([function(a,b=pgr){return[{provide:ogr,useValue:a},{provide:qgr,useValue:b},xgr]}("CLOUD_SQL_QUERY_SETTINGS",
{isCodeGenerationEnabled:!0,isCodeCompletionEnabled:!1,isFixQueryEnabled:!0}),{provide:Xdr,useFactory:Kbr,deps:[mhr,b$,xgr,c$,Bar,_.Y8]},{provide:Lbr,useFactory:Mbr,deps:[c$,b$,Bar,_.Y8]},lhr,fhr])],ngContentSelectors:["[header]","[homeTab]","[dynamicTabs]","[guidedSetupTab]","[editorTopPanel]"],decls:8,vars:6,consts:()=>[["maybeDisclaimerCfcMessage",""],["editorTopPanel",""],"All results"," Use the object tree to create, manage, and explore your tables, columns, indexes, views, and more. "," Run any SQL statement\u2014like CREATE, INSERT, SELECT, or UPDATE\u2014from the tabbed editor with support for mixed statement types. ",
" SQL generation suggests a query in response to a natural language question. Just press 'tab' to accept. "," Dismiss ",[4,"ngIf"],["analyticsTourName","SQL Data Explorer",3,"showSteps","hasTryItAsFinalStep",4,"ngIf"],["ngProjectAs","[headerOutlet]",5,["","headerOutlet",""]],["cfcCalloutStepTarget","objex",3,"showEmptyState","enableSavedQueries","enableContexts","contextsDisabledReason","fetcher","renderer","searchBarType","onRefreshTrigger","nodeSelected","nodeDeleted",4,"ngIf"],["ngProjectAs","[workAreaOutlet]",
5,["","workAreaOutlet",""]],["saveQueriesCalloutFeatureId","sql_studio_save_query_tab_callout",3,"selectedTabId","tabs","newTabMenuItems","calloutStepTargetId","bottomPanelSize","savedQueriesEnabled"],["cfcCalloutStepTarget","objex",3,"onRefreshTrigger","nodeSelected","nodeDeleted","showEmptyState","enableSavedQueries","enableContexts","contextsDisabledReason","fetcher","renderer","searchBarType"],["customAction",""],[3,"builtInUser","usingIamAuthn","database","ve","veClick"],[3,"switchUserOrDatabaseClicked",
"builtInUser","usingIamAuthn","database","ve","veClick"],["saveQueriesCalloutFeatureId","sql_studio_save_query_tab_callout",3,"selectTab","newTab","closeTab","selectedTabId","tabs","newTabMenuItems","calloutStepTargetId","bottomPanelSize","savedQueriesEnabled"],["ngProjectAs","[actionsOutlet]",5,["","actionsOutlet",""]],["cfcCalloutStepTarget","sql-duet-menu","feedbackBucketId","cloud-sql-duet",3,"onGenerationSettingUpdated","onFixQuerySettingUpdated","isCodeGenerationEnabled","isFixQueryEnabled",
"showFixQueryItem"],["ngProjectAs","[homeTabOutlet]",5,["","homeTabOutlet",""]],["ngProjectAs","[dynamicTabsOutlet]",5,["","dynamicTabsOutlet",""]],["ngProjectAs","[topPanelOutlet]",5,["","topPanelOutlet",""]],["ngProjectAs","[bottomPanelOutlet]",5,["","bottomPanelOutlet",""]],[4,"ngTemplateOutlet"],[1,"cfc-height-full",3,"selectedResultTabChanged","downloadData","currentSectionId","formattedExecutionTime"],[3,"tabTitle"],[1,"cfc-flex-space-between-content","cfc-flex-container","cfc-flex-center-aligned",
"cfc-indent"],[1,"cfc-text-caption","cfc-space-last","cfc-prefix"],["icon","next","size","small",1,"fr-next-icon"],[1,"cfc-flex-grow-content",3,"selectedResultChanged","options"],[3,"columns","allRows","currentPageIndex","rowsPerPage","runningState","errorText","errorLearnMore","warningText","queryTextForDuet","autofixOptions"],[3,"autofixClicked","autofixRequiredApisEnabled","onPaginationChange","columns","allRows","currentPageIndex","rowsPerPage","runningState","errorText","errorLearnMore","warningText",
"queryTextForDuet","autofixOptions"],["cfcTitle","Run a query to visualize its explanation.",3,"minimizeImage","imageSource","showBackgroundCircle"],[3,"errorText","queryExplanation","isQueryExplanationRunning"],["analyticsTourName","SQL Data Explorer",3,"showSteps","hasTryItAsFinalStep"],"calloutHeader;Database objects;calloutPosition;right;targetId;objex".split(";"),["calloutHeader","Tabbed SQL editor",3,"targetId"],"calloutHeader;Gemini in Studio;calloutPosition;left;pointerPosition;center;calloutEdgePosition;start;targetId;sql-duet-menu".split(";"),
["data-test-id","disclaimer-message",1,"cfc-space-last",3,"type"],[1,"cfc-break-word-wrap"],["aria-label","learn more",3,"cfcDocLink"],["mat-button","","color","primary",3,"click"],["cfcCalloutStepTarget","bq-query-guide-query-editor","fixMyQueryCalloutTourFeatureId","sql_fix_my_query_callout_tour",3,"queryText","showDuetUiElements","userHasIamForDuet","manager","editorId","language","isRunning","enableQueryFormatting","enableRunSelectedQuery","enableSaveQuery","analyticsMetadata","dataFetcher","enableDuetExplain",
"studioQueryRef","isQueryUnsaved","queryButtonMenu","fixMyQueryParams","sqlGenChipText","sqlGenCardTitle"],["cfcCalloutStepTarget","bq-query-guide-query-editor","fixMyQueryCalloutTourFeatureId","sql_fix_my_query_callout_tour",3,"queryText","showDuetUiElements","userHasIamForDuet","manager","editorId","language","isRunning","enableQueryFormatting","enableRunSelectedQuery","enableSaveQuery","analyticsMetadata","dataFetcher","enableDuetExplain","studioQueryRef","isQueryUnsaved","queryButtonMenu","fixMyQueryParams",
"sqlGenChipText","sqlGenCardTitle","duetExplain","queryTextChange","runQuery","savedQuery","queryTextSelectionChange","autofixOptionsChange",4,"ngIf"],["cfcCalloutStepTarget","bq-query-guide-query-editor","fixMyQueryCalloutTourFeatureId","sql_fix_my_query_callout_tour",3,"duetExplain","queryTextChange","runQuery","savedQuery","queryTextSelectionChange","autofixOptionsChange","queryText","showDuetUiElements","userHasIamForDuet","manager","editorId","language","isRunning","enableQueryFormatting","enableRunSelectedQuery",
"enableSaveQuery","analyticsMetadata","dataFetcher","enableDuetExplain","studioQueryRef","isQueryUnsaved","queryButtonMenu","fixMyQueryParams","sqlGenChipText","sqlGenCardTitle"]],template:function(a,b){a&1&&(_.Kg(Nhr),_.C(0,xbr,7,4,"fr-studio-layout",7),_.U(1,"async"),_.C(2,ybr,7,3,"cfc-callout-tour",8),_.U(3,"async"),_.C(4,Cbr,1,1,"ng-template",null,0,_.rh)(6,Ibr,1,1,"ng-template",null,1,_.rh));a&2&&(_.H("ngIf",_.W(1,2,b.config$)),_.y(2),_.H("ngIf",_.W(3,4,b.showQuickTour$)))},dependencies:[_.Qu,
_.as,_.ls,_.Nv,_.XA,_.Lv,_.YA,_.Jt,_.xt,_.ut,_.Ht,rer,lgr,kgr,ggr,Jer,_.hs,ber,_.BV,_.Kq,_.Hq,_.J0,_.Lq,_.Nq,_.Mq,_.Zn,_.eo,sfr,hhr,ngr,ihr,ghr,_.fo,_.FF],encapsulation:2});var Xhr={MYSQL:"MYSQL",POSTGRESQL:"POSTGRES",SQL_SERVER:"SQL_SERVER"},Ghr=function(a,{resourceId:b,connectionInfo:c,dialect:d},e){return Qcr(a.api,{projectId:b.projectId,instanceId:b.instanceId,connectionInfo:c,searchQuery:e,engine:d}).pipe(_.w(f=>{f=f.getSqlObjectExplorerNodes.base;return{subtree:f.subtree,searchResultCompleteness:f.searchResultCompleteness,appliedSearchText:f.appliedSearchText}}))},Yhr={provide:Kgr,useClass:class{constructor(){this.api=_.k(_.CH)}fetchNodes({resourceId:a,connectionInfo:b,
dialect:c},d){return this.api.getObjectExplorerNodes({projectId:a.projectId,instanceId:a.instanceId,connectionInfo:b,paths:d,engine:c}).pipe(_.w(e=>e.getSqlObjectExplorerNodes.base.subtree))}validateCredentials({resourceId:a,connectionInfo:b,dialect:c}){return this.api.validateCredentials(a,b,c)}validateSql({statement:a,queryContext:b}){return this.api.validateSql({statement:a,resourceId:b.resourceId,databaseEngine:Xhr[b.dialect],connectionInfo:b.connectionInfo})}}};var Zhr=class extends _.Z8{constructor(){super(...arguments);this.store=_.k(_.il);this.instance$=this.store.select(_.BG).pipe(_.Te(_.zl))}getQueryScopes(){return this.instance$.pipe(_.w(a=>{const {projectId:b,instanceId:c}=a.id;let d,e;a=(e=(d=a.createTime)==null?void 0:d.getTime())!=null?e:"no-create-time";return[{resourceDisplayName:`projects/${b}/instances/${c}`,resourceType:"sqladmin.googleapis.com/Instance",resourceId:`${"sql"}/${c}/${a}`}]}))}getDefaultLocation(){return this.instance$.pipe(_.A(a=>
(a=a.region)?_.t(a):super.getDefaultLocation()))}};Zhr.\u0275fac=(()=>{let a;return function(b){return(a||(a=_.ie(Zhr)))(b||Zhr)}})();Zhr.\u0275prov=_.wd({token:Zhr,factory:Zhr.\u0275fac,providedIn:"root"});var $hr=[{provide:_.Z8,useClass:Zhr},hfr,lfr];var Xbr=a=>({src:a,colorScheme:"light"}),Ybr=a=>({src:a,colorScheme:"dark",filterPreset:"invert"}),Tbr=(a,b)=>[a,b],Ubr=()=>({src:"https://www.gstatic.com/pantheon/images/cloudsql/sql_data_explorer/lego_ai.svg",colorScheme:"light"}),Vbr=()=>({src:"https://www.gstatic.com/pantheon/images/cloudsql/sql_data_explorer/lego_ai.svg",colorScheme:"dark",filterPreset:"invert"}),air=class{constructor(){this.subtaskService=_.k(_.Hz);this.ve={SqlExploreNewEditorTabButton:191663,SqlExploreQuickTourButton:191656};
this.messages={MSG_SQL_SKIP_HOME_TAB_PREFERENCE:"Skip home tab on startup"};this.pgVectorLearnMoreLink=this.iterateQuicklyLearnMoreLink=this.sqlCompletionLearnMoreLink=void 0;this.geminiProductName="Gemini Code Assist";this.engine=_.uh.required();this.showQuickTour=_.sh(!0);this.isSkipHomeTabPreferenceChecked=_.sh(!1);this.newEditorTab=new _.Ji;this.startQuickTour=new _.Ji;this.skipHomeTabPreferenceChanged=new _.Ji;this.icons={createIcon:_.ICg,signpostIcon:_.VBg}}ngOnInit(){a:{switch(this.engine()){case "PostgreSQL":var a=
udr;break a;case "MySQL":a=odr;break a;case "SQL Server":a=xdr;break a}a=void 0}this.sqlCompletionLearnMoreLink=a;a:{switch(this.engine()){case "PostgreSQL":a=tdr;break a;case "MySQL":a=ndr;break a;case "SQL Server":a=wdr;break a}a=void 0}this.iterateQuicklyLearnMoreLink=a;this.pgVectorLearnMoreLink=void 0}};air.\u0275fac=function(a){return new (a||air)};
air.\u0275cmp=_.z({type:air,selectors:[["sql-studio-home-tab"]],inputs:{engine:[1,"engine"],showQuickTour:[1,"showQuickTour"],isSkipHomeTabPreferenceChecked:[1,"isSkipHomeTabPreferenceChecked"]},outputs:{newEditorTab:"newEditorTab",startQuickTour:"startQuickTour",skipHomeTabPreferenceChanged:"skipHomeTabPreferenceChanged"},decls:36,vars:35,consts:()=>[" Welcome to Cloud SQL Studio "," You can run queries, create views, modify schemas, and more, all from one surface. Read the quickstart guide for the basics of how to compose a new query, or check out the documentation for more detail on getting the most out of your Cloud SQL databases. ",
"\ufffd#10\ufffd\ufffd/#10\ufffd New SQL Editor tab ","Iterate quickly","With an interactive view of the database and a code editor optimized for \ufffd0\ufffd, Cloud SQL Studio allows users to quickly experiment with new queries. \ufffd*25:1\ufffd\ufffd#1:1\ufffdLearn more\ufffd/#1:1\ufffd\ufffd/*25:1\ufffd","Quick Tour"," \ufffd0\ufffd: Natural language queries and query prediction ","SQL generation suggests a query in response to a natural language question. Just press 'tab' to accept. \ufffd*8:1\ufffd\ufffd#1:1\ufffdLearn more\ufffd/#1:1\ufffd\ufffd/*8:1\ufffd",
"Connect to your Cloud SQL instance within the console","Use Cloud SQL Studio to provide developers and other users in your organization with easy, secure access to your database."," Drive generative AI experiences with pgvector","Use the PostgreSQL extension pgvector to store and index vector embeddings generated by LLMs. Use the embeddings to find similar items using exact and approximate nearest neighbor search. \ufffd*9:1\ufffd\ufffd#1:1\ufffdLearn more\ufffd/#1:1\ufffd\ufffd/*9:1\ufffd",[1,"cfc-flex-container",
"cfc-flex-justify-start"],[1,"cfc-indent"],["mat-raised-button","","color","primary",3,"ve","veClick","click",4,"ngIf"],["mat-raised-button","",3,"click","ve","veClick"],["matButtonIcon","",1,"cm-icon--vertical-align-cap-middle",3,"icon"],[1,"cfc-flex-container","cfc-flex-justify-start","cfc-flex-center-aligned"],["alt","Image of Iterate quickly","width","120","height","120",1,"cfc-space-above-minus-1",3,"cmImgSrc"],[1,"cfc-vertical-align-middle","cfc-indent"],[1,"cfc-text-title-2"],["aria-label",
"Learn more about Iterate quickly feature",3,"cfcDocLink",4,"ngIf"],[3,"change","checked"],["height","248px","width","248px","alt","Cloud SQL logo",3,"cmImgSrc"],["mat-raised-button","","color","primary",3,"click","ve","veClick"],["alt","Image of SQL completion","width","120","height","120",1,"cfc-space-above-minus-1",3,"cmImgSrc"],[1,"sql-generation-copy"],["aria-label","Learn more about SQL generation feature",3,"cfcDocLink",4,"ngIf"],["aria-label","Learn more about SQL generation feature",3,"cfcDocLink"],
["width","120","height","120","alt","Image of Ease of connection",1,"cfc-space-above-minus-1",3,"cmImgSrc"],["aria-label","Learn more about Iterate quickly feature",3,"cfcDocLink"],["alt","Image of pgvector","width","120","height","120",1,"cfc-space-above-minus-1",3,"cmImgSrc"],["aria-label","Learn more about pgvector feature",3,"cfcDocLink",4,"ngIf"],["aria-label","Learn more about pgvector feature",3,"cfcDocLink"]],template:function(a,b){a&1&&(_.I(0,"div",12)(1,"div",13)(2,"h2"),_.N(3,0),_.J(),
_.I(4,"p"),_.N(5,1),_.J(),_.I(6,"div",12),_.C(7,Rbr,4,3,"button",14),_.I(8,"button",15),_.P("click",function(){b.newEditorTab.emit()}),_.Bg(9,2),_.K(10,"cm-icon",16),_.Cg(),_.J()(),_.K(11,"br")(12,"br")(13,"hr"),_.D(14,Wbr,9,8,"div",17),_.D(15,Zbr,9,12,"div",17),_.I(16,"div",17),_.K(17,"img",18),_.U(18,"staticContentUrl"),_.U(19,"staticContentUrl"),_.I(20,"div",19)(21,"div",20),_.N(22,3),_.J(),_.I(23,"p"),_.Bg(24,4),_.C(25,$br,2,1,"a",21),_.Cg(),_.J()()(),_.D(26,bcr,10,13,"div",17),_.K(27,"br")(28,
"br")(29,"hr"),_.I(30,"mat-checkbox",22),_.P("change",function(c){b.skipHomeTabPreferenceChanged.emit(c.checked)}),_.R(31),_.J()(),_.I(32,"div"),_.K(33,"img",23),_.U(34,"staticContentUrl"),_.U(35,"staticContentUrl"),_.J()());a&2&&(_.y(7),_.H("ngIf",b.showQuickTour()),_.y(),_.H("ve",b.ve.SqlExploreNewEditorTabButton)("veClick",!0),_.y(2),_.H("icon",b.icons.createIcon),_.y(4),_.E(_.Si()?-1:14),_.y(),_.E(b.engine()!=="PostgreSQL"?15:-1),_.y(2),_.H("cmImgSrc",_.mh(25,Tbr,_.lh(21,Xbr,_.W(18,13,"pantheon/images/cloudsql/sql_data_explorer/lego_iterate_v2.svg")),
_.lh(23,Ybr,_.W(19,15,"pantheon/images/cloudsql/sql_data_explorer/lego_iterate_v2.svg")))),_.y(8),_.H("ngIf",b.iterateQuicklyLearnMoreLink),_.Eg(b.engine()),_.Fg(24),_.y(),_.E(b.engine()==="PostgreSQL"?26:-1),_.y(4),_.H("checked",b.isSkipHomeTabPreferenceChecked()),_.y(),_.S(" ",b.messages.MSG_SQL_SKIP_HOME_TAB_PREFERENCE," "),_.y(2),_.H("cmImgSrc",_.mh(32,Tbr,_.lh(28,Xbr,_.W(34,17,"pantheon/images/empty_states/cloud_sql_1.svg")),_.lh(30,Ybr,_.W(35,19,"pantheon/images/empty_states/cloud_sql_1.svg")))))},
dependencies:[_.ho,_.Zn,_.Qu,_.as,_.ls,_.Jt,_.xt,_.ut,_.Ht,_.wx,_.ux,_.vx,_.sx,_.EF,_.js,_.hs,_.uq,_.vq,_.FF],encapsulation:2,changeDetection:0});var bir=function(a){if(a&&_.ki(igr)){var b=_.Ppb(_.ok(new _.yq(1),1),1),c=(0,_.G1b)(a);if(!isNaN(c))return c>1?_.rk("{TIME} {UNIT}",{TIME:b.format(c),UNIT:"s"}):_.rk("{TIME} {UNIT}",{TIME:b.format((0,_.F1b)(a)),UNIT:"ms"})}},Ncr=class{constructor(a,b,c){this.sqlApi=a;this.queryContext$=b;this.errorHandler=c}execute({query:a}){return this.queryContext$.pipe(_.Ef(1),_.A(({resourceId:{projectId:b,instanceId:c},versionName:d,dialect:e,connectionInfo:f})=>{const g={engine:e,databaseVersion:d,queryLength:a.text.length,
isIamAuth:f==null?void 0:f.autoIamAuthn};return this.sqlApi.executeSql({projectId:b,instanceId:c,engine:e,connectionInfo:f,sqlStatement:a.text}).pipe(_.w(n=>{var q=jcr(n.executeSql.jsonQueryResults);const r=hcr(n,e);let u;var v=Object,x=v.assign;q=q.map(({rows:F,columns:G})=>{let O,T;return{rows:(O=F==null?void 0:F.map(({id:V,data:X})=>{var ha={};if(X!==void 0)for(const {columnId:ma,commonValue:Qa}of X){let za,Ra,ca;X={value:(ca=(za=Qa)==null?void 0:(Ra=za.stringValue)==null?void 0:Ra.value)!=null?
ca:"",isCustom:!1,type:"string"};ha[ma]=X}return{id:V,data:ha}}))!=null?O:[],columns:(T=G==null?void 0:G.map(({id:V,header:X})=>({header:X!=null?X:"",id:V,sticky:"none"})))!=null?T:[]}});var B=n.executeSql.partialResult?"The response exceeds the size limit. Results will be truncated.":void 0;return x.call(v,{},{queryResults:q,warningText:B,analyticsMetadata:Object.assign({},g,{executionValidityStatus:r?"INVALID":"VALID"}),formattedExecutionTime:bir((u=n.executeSql.metadata)==null?void 0:u.sqlStatementExecutionTime)},
r&&{error:r})}),_.wf(n=>{this.errorHandler.handleError({error:n});return _.ye(()=>Object.assign({},n,{analyticsMetadata:Object.assign({},g,{executionValidityStatus:"API_ERROR"})}))}))}))}},dcr=/^This query has timed out due to a \d+ minute limitation in Studio[.]$/,ccr=/^Some of your SQL statements failed to execute.*$/;var cir=class extends _.yZ{constructor(){super(_.k(_.So));this.store=_.k(_.il);this.apiService=_.k(_.CH)}resolveWithPromise(){return _.ze(this.store.select(_.wG).pipe(_.Te(_.zl),_.Ef(1),_.A(a=>_.aJd(this.apiService,a).pipe(_.cg(b=>{this.store.dispatch((0,_.Uwd)({instanceId:a,databases:b}))}),_.wf(b=>{this.store.dispatch((0,_.Vwd)({instanceId:a,error:b,showSnackbarIfActionFails:!0}));return _.t(b)})))))}};cir.\u0275fac=function(a){return new (a||cir)};
cir.\u0275prov=_.wd({token:cir,factory:cir.\u0275fac,providedIn:"root"});var dir=class{constructor(){this.router=_.k(_.to);this.store=_.k(_.il);this.jurisdictionService=_.k(_.dr)}resolve(){return this.store.select(_.BG).pipe(_.Te(_.zl),_.Ef(1),_.eg(this.store.select(_.nEd)),_.w(([a,b])=>{const c=this.jurisdictionService.isJurisdictionalized();_.hDd({instance:a,isSqlDataExplorationPostgresTTEnabled:b,isJurisdictionalized:c})||this.router.navigate(_.MG.urlGetters.instance.overview(a.id).build());return{}}))}};dir.\u0275fac=function(a){return new (a||dir)};
dir.\u0275prov=_.wd({token:dir,factory:dir.\u0275fac,providedIn:"root"});var eir=class extends _.yZ{constructor(){super(_.k(_.So));this.store=_.k(_.il);this.apiService=_.k(_.CH)}resolveWithPromise(){return _.ze(this.store.select(_.wG).pipe(_.Te(_.zl),_.Ef(1),_.A(a=>_.$Id(this.apiService,a).pipe(_.cg(b=>{this.store.dispatch((0,_.gyd)({instanceId:a,users:b}))})))))}};eir.\u0275fac=function(a){return new (a||eir)};eir.\u0275prov=_.wd({token:eir,factory:eir.\u0275fac,providedIn:"root"});var fir=class extends _.V5o{constructor(){super();this.store=_.k(_.il);this.exploreComponentStore=_.k(b$);this.projectService=_.k(_.Sr);this.projectParamService=_.k(_.gr);this.destroyRef=_.k(_.$e);this.projectNumber$=new _.Rf(1);this.projectId=_.fr(this.projectParamService);this.projectService.getProject(this.projectId).pipe(_.w(a=>BigInt(a.projectNumber)),_.Ef(1)).subscribe(a=>{this.projectNumber$.next(a)})}ngOnDestroy(){this.projectNumber$.complete()}getContextScope(){return _.Ge({projectNumber:this.projectNumber$,
instance:this.store.select(_.BG).pipe(_.Te(_.zl)),connectionInfo:this.exploreComponentStore.connectionInfo$.pipe(_.Te(_.zl))}).pipe(_.Ef(1),_.Ij(this.destroyRef),_.w(({projectNumber:a,instance:b,connectionInfo:c})=>{const {instanceId:d}=b.id;let e,f;b=(f=(e=b.createTime)==null?void 0:e.getTime())!=null?f:"no-create-time";return{projectId:this.projectId,projectNumber:a,databaseId:`${"sqladmin.googleapis.com"}/projects/${this.projectId}/instances/${d}/databases/${c.database}_${b}`}}))}};
fir.\u0275fac=function(a){return new (a||fir)};fir.\u0275prov=_.wd({token:fir,factory:fir.\u0275fac});var gir=[_.Y8,{provide:_.V5o,useClass:fir},Yer,cfr];var lcr=function(g,q){let l={};var m=Object.prototype.hasOwnProperty;q=q(function(B,k,t){m.call(B,t)?++B[t]:g(B,t,1)});l.__tsickle_local_0=q;return l}.call(void 0,_.uCc,_.dud).__tsickle_local_0;var qcr=["model"],rcr="##MS_SQLResourceSigningCertificate## ##MS_SQLReplicationSigningCertificate## ##MS_SQLAuthenticatorCertificate## ##MS_AgentSigningCertificate## ##MS_PolicyEventProcessingLogin## ##MS_PolicySigningCertificate## ##MS_PolicyTsqlExecutionLogin##".split(" ");var hir=new _.Iq("45720341");var iir=new _.Iq("45712737",!0);var jir=new _.Iq("45720326");var kir=new _.Iq("45737819");var lir=new _.Iq("45711110");var mir=new _.Iq("45711124");var nir=new _.Iq("45711127");var oir=new _.Iq("45679468");var pir=new _.Iq("45701842");var qir=["iamDbFlagMissingTooltip"],rir=["iamUserMissingTooltip"],Bcr=()=>[],Ecr=a=>({src:a,colorScheme:"light"}),Fcr=a=>({src:a,colorScheme:"dark",filterPreset:"invert"}),Dcr=(a,b)=>[a,b],sir=[_.yv.users.list,_.yv.databases.list,_.yv.instances.executeSql],tir={message:"Cloud SQL Studio is optimized for quick queries. MySQL 5.6 and 5.7 do not safely rollback long-running DDL statements in the case of query timeout. For these DDL statements, such as CREATE INDEX for large tables, use Cloud Shell.",
messageType:"informational",isDismissible:!0,learnMoreLink:fcr},uir=class{constructor(){this.exploreCache=new zgr(b$);this.tabsCache=new zgr(c$);this.resultsCache=new zgr(a$)}};uir.\u0275fac=function(a){return new (a||uir)};uir.\u0275prov=_.wd({token:uir,factory:uir.\u0275fac,providedIn:"root"});
var vcr=function(a){a.instance$.pipe(_.Ef(1),_.w(b=>b.id)).subscribe(b=>{a.store.dispatch((0,_.Twd)({instanceId:b,showSnackbarIfActionFails:!0}));a.triggerDatabaseSelectDisplayModeUpdate$.next()})},Ccr=function(a){a=a.databaseEngineName();return _.kH(a,{mySql:mdr,postgres:sdr,sqlServer:vdr})},vir=function(a){a.triggerDatabaseSelectDisplayModeUpdate$.pipe(_.Ij(a.destroy$),_.A(()=>{a.hasDatabasesLoadingTimedOut$.next(!1);return _.Pe(5E3).pipe(_.eg(a.databases$),_.Te(([,b])=>b===void 0))})).subscribe(()=>
{a.hasDatabasesLoadingTimedOut$.next(!0)});a.hasDatabasesLoadingTimedOut$.pipe(_.Ij(a.destroy$)).subscribe(b=>{b?a.exploreComponentStore.updateDatabaseSelectDisplayMode("TEXT_INPUT"):a.exploreComponentStore.resetDatabaseSelectDisplayMode()})},xir=class{constructor(){this.store=_.k(_.il);this.router=_.k(_.to);this.pageStore=_.k(c$);this.exploreComponentStore=_.k(b$);this.route=_.k(_.Qh);this.destroy$=_.k(_.$e);this.sqlIamResourceTypeService=_.k(_.AJ);this.iamDbFlagMissingTooltipRef=_.wh("iamDbFlagMissingTooltip");
this.iamUserMissingTooltipRef=_.wh("iamUserMissingTooltip");this.pageName="Cloud SQL Studio";this.skipHomeTab$=this.pageStore.skipHomeTab$;this.studioModalInitialAuthEnabled=_.ki(oir);this.isStudioSavedQueriesEnabled=_.ki(pir);this.isTpc=_.Si();this.sqlStudioIamUsersEnabled=!this.isTpc;this.triggerDatabaseSelectDisplayModeUpdate$=new _.Kf;this.dl={CONSOLE__SQL_DOCS_POSTGRES_MANAGE_DATA_USING_STUDIO:rdr};this.ve={StudioIamAuthTooltipManageUsersButton:241134};this.iamAuthPermission=_.yv.instances.login;
this.authButtonPermission=_.yv.instances.executeSql;this.pagePermissions=sir;this.instance$=this.store.select(_.BG).pipe(_.Te(_.zl));this.users=_.Kj(this.store.select(_.cBd),{initialValue:null});this.userOptions=_.Fh(()=>{const b=this.instance(),c=this.users();if(b&&c)return ncr(b,c)});this.databases$=_.Ge([this.store.select(_.aBd),this.instance$]).pipe(_.w(([b,c])=>{if(b)return pcr(c,b)}));this.breadcrumbModel$=_.xZ(this.route,"sqlBreadcrumbModel");this.databasesLoadingError$=this.store.select(_.bBd);
this.hasDatabasesLoadingTimedOut$=new _.Rh(!1);this.isDatabasesLoading$=_.Ge([this.databases$,this.hasDatabasesLoadingTimedOut$]).pipe(_.w(([b,c])=>c?!1:b===void 0));this.isInstanceRunning$=this.instance$.pipe(_.w(_.nG));this.engine$=this.instance$.pipe(_.w(({databaseEngineName:b})=>b));this.isUserAuthenticated$=this.exploreComponentStore.isUserAuthenticated$;this.authenticateInProgress$=this.exploreComponentStore.authenticateInProgress$;this.isIncorrectPassword$=this.exploreComponentStore.isIncorrectPassword$;
this.incorrectDatabase$=this.exploreComponentStore.incorrectDatabase$;this.currentDatabase=_.Kj(this.exploreComponentStore.currentDatabase$);this.deepLinkTargetDatabase=_.Ug();this.showQuickTour=!0;this.editorTabCalloutStepTargetId="sql-datex-tabs";this.hasDdlStatementFn$=this.engine$.pipe(_.w(b=>{b=Pcr(b);switch(b){case "MYSQL":return yar;case "POSTGRESQL":return zar;case "SQL_SERVER":return Aar;default:return _.uH(`No implementation of DDL parser found for dialect - ${b}`),jhr}}));this.MSG_SQL_STUDIO_AUTH_FAILED_INSTANCE_NOT_RUNNING=
"You can't access Cloud SQL Studio right now because this instance is not running.";this.projectId$=this.instance$.pipe(_.w(({id:b})=>b.projectId));this.usersPageLink$=this.instance$.pipe(_.w(({id:b})=>_.RBd({projectId:b.projectId,instanceId:b.instanceId}).build()));this.databaseSelectDisplayMode$=this.exploreComponentStore.databaseSelectDisplayMode$;this.instance=_.Kj(this.instance$);this.databaseEngineName=_.Fh(()=>{const b=this.instance();if(b)return b.databaseEngineName});this.databaseVersion=
_.Fh(()=>{const b=this.instance();if(b)return b.databaseVersion});this.disclaimerMessageContext=_.Fh(()=>{var b=this.instance();const c=!(b==null||!b.isMySql);b=_.UF(b==null?void 0:b.databaseVersion);return c&&["5.6","5.7"].includes(b)?tir:null});this.iamUserMissingLearnMoreDocHref=_.Fh(()=>{var b=this.databaseEngineName();if(b){a:{switch(b){case "PostgreSQL":b=pdr;break a;case "MySQL":b=kdr;break a;default:_.ob(b)}b=void 0}return b}});this.iamDbFlagMissingLearnMoreDocHref=_.Fh(()=>{var b=this.databaseEngineName();
if(b){a:{switch(b){case "PostgreSQL":b=qdr;break a;case "MySQL":b=ldr;break a;default:_.ob(b)}b=void 0}return b}});this.isIamAuthSupported=_.Fh(()=>{const b=this.databaseEngineName(),c=this.databaseVersion();return _.zl(b)&&_.zl(c)?this.sqlStudioIamUsersEnabled&&_.WXd({dbEngineName:b,databaseVersion:c}):!1});this.currentUserEmail=_.Jr(_.k(_.Kr));this.iamDbFlagName=_.Fh(()=>{const b=this.databaseEngineName();if(_.zl(b))return wir.get(b)});this.isIamDbFlagEnabled=_.Fh(()=>{const b=this.databaseEngineName();
if(b!=="PostgreSQL"&&b!=="MySQL")return!1;const c=this.iamDbFlagName();let d;return((d=_.eG(this.instance()).find(e=>e.name===c))==null?void 0:d.value)==="on"});this.iamUserDefinitelyMissing=_.Fh(()=>{const b=this.users(),c=this.databaseEngineName(),d=this.currentUserEmail;return _.zl(b)&&_.zl(d)&&_.zl(c)&&(c==="PostgreSQL"||c==="MySQL")?!b.some(e=>{var f;if(!(f=e.type==="CLOUD_IAM_GROUP")&&(f=e.type==="CLOUD_IAM_USER"))a:{switch(c){case "MySQL":let g;f=((g=e.mysql)==null?void 0:g.iamEmail)===d;break a;
case "PostgreSQL":f=e.name===d;break a;default:_.ob(c,void 0)}f=void 0}return f}):!1});this.iamAuthDisabledTooltip=_.Fh(()=>{if(this.iamUserDefinitelyMissing())return this.iamUserMissingTooltipRef();if(!this.isIamDbFlagEnabled())return this.iamDbFlagMissingTooltipRef()});this.userOptions$=_.Jj(this.userOptions).pipe(_.Te(_.zl));this.authDialogOptions={iamResource:_.zJ(this.sqlIamResourceTypeService),users$:this.userOptions$,databases$:this.databases$.pipe(_.Te(_.zl)),databaseSelectDisplayMode$:this.databaseSelectDisplayMode$,
isDatabasesLoading$:this.isDatabasesLoading$.pipe(_.$f(!0)),hasDatabasesLoadingError$:this.databasesLoadingError$.pipe(_.$f(!1)),selectedDatabase$:_.Jj(this.deepLinkTargetDatabase).pipe(_.Te(_.zl)),isInstanceRunning$:this.isInstanceRunning$.pipe(_.$f(!1)),disclaimer$:this.isInstanceRunning$.pipe(_.w(b=>b?null:"You can't access Cloud SQL Studio right now because this instance is not running.")),usersPageLink$:this.usersPageLink$,isDatabaseOptional:!1,iamAuthPermission:this.iamAuthPermission,authButtonPermission:this.authButtonPermission,
authDisabledTooltip:"You can't access Cloud SQL Studio right now because this instance is not running.",pagePermissions:sir,iamAuthDisabledTooltip$:_.Jj(this.iamAuthDisabledTooltip),showIamAuthRadio:this.isIamAuthSupported(),targetedNewBadgeIamFeatureId:"sql_studio_iam_auth_new_badge",authDocLink:Ccr(this),pageName:this.pageName};this.projectNumber=this.store.selectSignal(_.LDd);this.searchBarType=_.Fh(()=>{switch(this.databaseEngineName()){case "SQL Server":return _.ki(nir)?"TEXT":"DISABLED";case "PostgreSQL":return _.ki(mir)?
"TEXT":"DISABLED";case "MySQL":return _.ki(lir)?"TEXT":"DISABLED";default:return"DISABLED"}});this.isTrustedTester=_.Kj(_.$Yb(_.k(_.Wv),710).pipe(_.wf(()=>_.t(!1))),{initialValue:!1});this.isNlaContextsEnabled=_.Fh(()=>{switch(this.databaseEngineName()){case "MySQL":case "PostgreSQL":return _.ki(kir)||this.isTrustedTester();default:return!1}});this.fixMyQueryProduct=_.Fh(()=>{switch(this.databaseEngineName()){case "PostgreSQL":return _.ki(iir)?"CLOUD_SQL":void 0;case "MySQL":return _.ki(hir)?"CLOUD_SQL":
void 0;case "SQL Server":return _.ki(jir)?"CLOUD_SQL":void 0}});const a=_.k(_.xco);vir(this);this.triggerDatabaseSelectDisplayModeUpdate$.next();_.vf(()=>{_.Qn.schedule(()=>{var b=this.instance();const c=this.projectNumber();if(b){var d=this.exploreComponentStore,e=d.updateExploreContext,f=b.id,g=b.databaseEngineName;const r=_.UF(b.databaseVersion),u=Pcr(g);let v;var n=b.region,q=wir.get(g);a:{switch(g){case "MySQL":g=_.ki(_.WId);break a;case "PostgreSQL":g=_.ki(_.XId);break a;case "SQL Server":g=
_.ki(_.YId);break a;default:_.ob(g,void 0)}g=void 0}b={resourceId:f,dialect:u,region:n,versionName:r,iamDbFlagName:q,isEngineBackedValidation:g,dataApiAccessEnabled:((v=b.settings)==null?void 0:v.dataApiAccess)==="ALLOW_DATA_API",requireDataApiAccessForContexts:!0,projectNumber:c};e.call(d,b)}})});Scr(a.cacheService).pipe(_.Ij(this.destroy$),_.Ef(1),_.cg(b=>{if(b){var c=b.database;b=b.queryContent;this.currentDatabase()!==c&&this.exploreComponentStore.switchUserOrDatabase();this.deepLinkTargetDatabase.set(c);
b&&uhr(this.pageStore,{tabContentKind:"EDITOR",text:b})}else this.deepLinkTargetDatabase.set("")})).subscribe()}hasUnsavedChanges(){return this.pageStore.hasUnsavedChanges()}get discardChanges$(){return this.pageStore.discardChanges$}onNewTab(){this.pageStore.newTab("EDITOR")}onUserAuthenticated(a){this.exploreComponentStore.verifyCredentials(a)}};xir.\u0275fac=function(a){return new (a||xir)};
xir.\u0275cmp=_.z({type:xir,selectors:[["ng-component"]],viewQuery:function(a,b){a&1&&_.Wg(b.iamDbFlagMissingTooltipRef,qir,5)(b.iamUserMissingTooltipRef,rir,5);a&2&&_.Xg(2)},standalone:!1,features:[_.jh([{provide:b$,useFactory:a=>ygr(a.exploreCache).value,deps:[uir]},{provide:c$,useFactory:a=>ygr(a.tabsCache).value,deps:[uir]},{provide:a$,useFactory:a=>ygr(a.resultsCache).value,deps:[uir]},{provide:Efr,useFactory:Ocr,deps:[_.CH,b$,_.CJ]},{provide:Fgr,useFactory:a=>a,deps:[c$]},{provide:Ffr,useValue:function(a,
b,c,d=[]){const e=Object.fromEntries(Object.entries(a.emptyStates.perTabKind).map(([f,g])=>[f,Object.assign({},g)]));for(const f of d)e[f.kind]=Object.assign({},f);return Object.assign({},a,{savedQueryFlagDefinition:c,skipHomeTabTabernaKey:b,initialTabStates:a.initialTabStates.map(f=>Object.assign({},f)),emptyStates:Object.assign({},a.emptyStates,{perTabKind:e}),dynamicTabKinds:d.map(f=>f.kind)})}(qhr,"SqlStudioSkipHomeTabState",pir)},Yhr,$hr,gir]),_.hg([Ggr])],decls:10,vars:3,consts:()=>[["header",
""],["authTemplate",""],["iamUserMissingTooltip",""],["iamDbFlagMissingTooltip",""],"Sign in to Cloud SQL Studio"," Choose a database and user account to securely access your data. \ufffd#16\ufffdLearn more\ufffd/#16\ufffd"," To use IAM authentication in Cloud SQL Studio, your user, or a group containing it, needs to be added as an \ufffd#2\ufffdIAM principal\ufffd/#2\ufffd for this instance. \ufffd*3:1\ufffd\ufffd#1:1\ufffdLearn more\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd"," Manage users "," Please enable the database flag '\ufffd0\ufffd' to use IAM authentication. \ufffd*1:1\ufffd\ufffd#1:1\ufffdLearn more\ufffd/#1:1\ufffd\ufffd/*1:1\ufffd",
[4,"ngVar"],[3,"useModalForInitialAuthentication","editorTabCalloutStepTargetId","hasDdlStatementFn","disclaimerMessageContext","authDialogOptions","enableSaveQuery","enableContexts","searchBarType","fixMyQueryProduct"],[4,"ngTemplateOutlet"],[3,"authenticationCancelled","userOrDatabaseSwitched","useModalForInitialAuthentication","editorTabCalloutStepTargetId","hasDdlStatementFn","disclaimerMessageContext","authDialogOptions","enableSaveQuery","enableContexts","searchBarType","fixMyQueryProduct"],
["ngProjectAs","[header]",5,["","header",""],4,"ngTemplateOutlet"],["ngProjectAs","[homeTab]",5,["","homeTab",""],1,"cfc-scroll-vertical",3,"newEditorTab","startQuickTour","skipHomeTabPreferenceChanged","engine","showQuickTour","isSkipHomeTabPreferenceChecked"],["ngProjectAs","[header]",5,["","header",""]],["cfcTitle","Studio",3,"disableTitleRegion"],[1,"cfc-action-bar-content-title"],["targetedNewBadgeIamFeatureId","sql_studio_iam_auth_new_badge",3,"pageName","iamResource","iamAuthPermission","authButtonPermission",
"pagePermissions","users","projectId","usersPageLink","isInstanceRunning","databases","isDatabasesLoading","databaseSelectDisplayMode","isDatabaseOptional","selectedDatabase","authenticateInProgress","isIncorrectPassword","isIncorrectDatabase","hasDatabasesLoadingError","showIamAuthRadio","iamAuthDisabledTooltip","authDisabledTooltip","userAuthenticated",4,"ngIf"],["targetedNewBadgeIamFeatureId","sql_studio_iam_auth_new_badge",3,"userAuthenticated","pageName","iamResource","iamAuthPermission","authButtonPermission",
"pagePermissions","users","projectId","usersPageLink","isInstanceRunning","databases","isDatabasesLoading","databaseSelectDisplayMode","isDatabaseOptional","selectedDatabase","authenticateInProgress","isIncorrectPassword","isIncorrectDatabase","hasDatabasesLoadingError","showIamAuthRadio","iamAuthDisabledTooltip","authDisabledTooltip"],["ngProjectAs","[disclaimer]",5,["","disclaimer",""],3,"type"],["ngProjectAs","[headerContent]",5,["","headerContent",""]],["cfcTrackedEvent","","track-type","SqlStudioAuthPageCaption",
"track-name","learnMoreLinkClick","aria-label","Learn more about database authentication, opens in new window","target","_blank",3,"cfcDocLink"],["ngProjectAs","[logo]","height","auto","width","248px","alt","Cloud SQL logo",5,["","logo",""],3,"cmImgSrc"],["aria-label","Learn more about IAM authentication","cfcTrackedEvent","","track-type","IamUserMissingTooltip","track-name","learnMoreLinkClick",3,"cfcDocLink"],[1,"cfc-button-align-left"],["mat-button","","color","primary",3,"cfcRouterLink","ve",
"veClick","veImpression"],["aria-label","Learn more about IAM authentication","cfcTrackedEvent","","track-type","IamDbFlagMissingTooltip","track-name","learnMoreLinkClick",3,"cfcDocLink"]],template:function(a,b){a&1&&(_.C(0,xcr,5,3,"ng-container",9),_.U(1,"async"),_.C(2,ycr,3,1,"ng-template",null,0,_.rh)(4,Icr,4,4,"ng-template",null,1,_.rh)(6,Kcr,8,8,"ng-template",null,2,_.rh)(8,Mcr,2,2,"ng-template",null,3,_.rh));a&2&&_.H("ngVar",_.W(1,1,b.hasDdlStatementFn$))},dependencies:()=>[_.Pq,_.qB,_.as,_.ls,
_.xt,_.ut,_.Ht,_.EF,_.hs,_.xB,_.Bio,_.Lq,_.Mq,_.Zn,_.eo,_.Wz,Bhr,_.fu,_.Tt,Whr,air,_.fo,_.FF],encapsulation:2});
var yir=["contextstoreadmin.googleapis.com/stores.list","contextstoreadmin.googleapis.com/stores.create","contextstoreadmin.googleapis.com/stores.writeContext","contextstoreadmin.googleapis.com/stores.readContext",..._.cdo,...aer,"databasesconsole.studioQueries.list","databasesconsole.studioQueries.search","databasesconsole.studioQueries.create","databasesconsole.studioQueries.update","databasesconsole.studioQueries.delete"],zir={guardPermissionsMap:new Map([[0,[_.yv.instances.get]]]),permissionsMap:new Map([[0,
[_.yv.instances.get,...sir,...yir]]])},Air={guardPermissionsMap:new Map([[191,[_.yv.instances.get]]]),permissionsMap:new Map([[191,[_.yv.instances.get,_.yv.instances.executeSql]],[0,[_.yv.users.list,_.yv.databases.list,...yir]]])};_.ISa=class{};_.ISa.\u0275fac=function(a){return new (a||_.ISa)};_.ISa.\u0275mod=_.sf({type:_.ISa});
_.ISa.\u0275inj=_.yd({imports:[_.iu([{path:"",component:xir,canActivate:[..._.f9,_.j9()],canDeactivate:[..._.g9,...function(a){return a.map(b=>(...c)=>_.k(b).canDeactivate(...c))}([Egr])],runGuardsAndResolvers:"paramsOrQueryParamsChange",data:{iam:zir,iamWithConditionsEnabled:Air,title(a){return a.titleSegments}},resolve:{[_.odp]:_.ki(_.zv)?_.ZB(_.i9):_.ZB(_.h9),instance:_.ZB(_.k9),databases:_.ZB(cir),users:_.ZB(eir),titleSegments:_.ZB(_.l9),_1:_.ZB(dir),_2:_.ZB(_.pfq),sqlBreadcrumbModel:()=>_.e9({currentPageLabel:"Cloud SQL Studio"})}}]),
_.sD,_.qB,_.Qu,_.Jt,_.gs,_.hs,_.yB,_.C8,_.Lq,_.Mq,_.Xz,_.Pq,Bhr,_.gu,_.Tt,_.d9,Whr,air]});var wir=new Map([["MySQL","cloudsql_iam_authentication"],["PostgreSQL","cloudsql.iam_authentication"]]);
_.ci();
}catch(e){_._DumpException(e)}
}).call(this,this.default_r_nplltnkrh);
// Google Inc.
